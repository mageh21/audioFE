"use strict";var cc=Object.create;var Si=Object.defineProperty;var lc=Object.getOwnPropertyDescriptor;var fc=Object.getOwnPropertyNames;var hc=Object.getPrototypeOf,mc=Object.prototype.hasOwnProperty;var pc=(dt,J)=>()=>(J||dt((J={exports:{}}).exports,J),J.exports),dc=(dt,J)=>{for(var lt in J)Si(dt,lt,{get:J[lt],enumerable:!0})},Xa=(dt,J,lt,ot)=>{if(J&&typeof J=="object"||typeof J=="function")for(let ct of fc(J))!mc.call(dt,ct)&&ct!==lt&&Si(dt,ct,{get:()=>J[ct],enumerable:!(ot=lc(J,ct))||ot.enumerable});return dt};var Sn=(dt,J,lt)=>(lt=dt!=null?cc(hc(dt)):{},Xa(J||!dt||!dt.__esModule?Si(lt,"default",{value:dt,enumerable:!0}):lt,dt)),gc=dt=>Xa(Si({},"__esModule",{value:!0}),dt);var fr=pc((Ua,La)=>{"use strict";(function(){var dt;window.Resources={regexCategories:{IsBasicLatin:[["0000","007F"]],"IsLatin-1Supplement":[["0080","00FF"]],"IsLatinExtended-A":[["0100","017F"]],"IsLatinExtended-B":[["0180","024F"]],IsIPAExtensions:[["0250","02AF"]],IsSpacingModifierLetters:[["02B0","02FF"]],IsCombiningDiacriticalMarks:[["0300","036F"]],IsGreek:[["0370","03FF"]],IsGreekandCoptic:[["0370","03FF"]],IsCyrillic:[["0400","04FF"]],IsCyrillicSupplementary:[["0500","052F"]],IsCyrillicSupplement:[["0500","052F"]],IsArmenian:[["0530","058F"]],IsHebrew:[["0590","05FF"]],IsArabic:[["0600","06FF"]],IsSyriac:[["0700","074F"]],IsArabicSupplement:[["0750","077F"]],IsThaana:[["0780","07BF"]],IsNKo:[["07C0","07FF"]],IsSamaritan:[["0800","083F"]],IsMandaic:[["0840","085F"]],IsDevanagari:[["0900","097F"]],IsBengali:[["0980","09FF"]],IsGurmukhi:[["0A00","0A7F"]],IsGujarati:[["0A80","0AFF"]],IsOriya:[["0B00","0B7F"]],IsTamil:[["0B80","0BFF"]],IsTelugu:[["0C00","0C7F"]],IsKannada:[["0C80","0CFF"]],IsMalayalam:[["0D00","0D7F"]],IsSinhala:[["0D80","0DFF"]],IsThai:[["0E00","0E7F"]],IsLao:[["0E80","0EFF"]],IsTibetan:[["0F00","0FFF"]],IsMyanmar:[["1000","109F"]],IsGeorgian:[["10A0","10FF"]],IsHangulJamo:[["1100","11FF"]],IsEthiopic:[["1200","137F"]],IsEthiopicSupplement:[["1380","139F"]],IsCherokee:[["13A0","13FF"]],IsUnifiedCanadianAboriginalSyllabics:[["1400","167F"]],IsOgham:[["1680","169F"]],IsRunic:[["16A0","16FF"]],IsTagalog:[["1700","171F"]],IsHanunoo:[["1720","173F"]],IsBuhid:[["1740","175F"]],IsTagbanwa:[["1760","177F"]],IsKhmer:[["1780","17FF"]],IsMongolian:[["1800","18AF"]],IsUnifiedCanadianAboriginalSyllabicsExtended:[["18B0","18FF"]],IsLimbu:[["1900","194F"]],IsTaiLe:[["1950","197F"]],IsNewTaiLue:[["1980","19DF"]],IsKhmerSymbols:[["19E0","19FF"]],IsBuginese:[["1A00","1A1F"]],IsTaiTham:[["1A20","1AAF"]],IsBalinese:[["1B00","1B7F"]],IsSundanese:[["1B80","1BBF"]],IsBatak:[["1BC0","1BFF"]],IsLepcha:[["1C00","1C4F"]],IsOlChiki:[["1C50","1C7F"]],IsVedicExtensions:[["1CD0","1CFF"]],IsPhoneticExtensions:[["1D00","1D7F"]],IsPhoneticExtensionsSupplement:[["1D80","1DBF"]],IsCombiningDiacriticalMarksSupplement:[["1DC0","1DFF"]],IsLatinExtendedAdditional:[["1E00","1EFF"]],IsGreekExtended:[["1F00","1FFF"]],IsGeneralPunctuation:[["2000","206F"]],IsSuperscriptsandSubscripts:[["2070","209F"]],IsCurrencySymbols:[["20A0","20CF"]],IsCombiningMarksforSymbols:[["20D0","20FF"]],IsCombiningDiacriticalMarksforSymbols:[["20D0","20FF"]],IsLetterlikeSymbols:[["2100","214F"]],IsNumberForms:[["2150","218F"]],IsArrows:[["2190","21FF"]],IsMathematicalOperators:[["2200","22FF"]],IsMiscellaneousTechnical:[["2300","23FF"]],IsControlPictures:[["2400","243F"]],IsOpticalCharacterRecognition:[["2440","245F"]],IsEnclosedAlphanumerics:[["2460","24FF"]],IsBoxDrawing:[["2500","257F"]],IsBlockElements:[["2580","259F"]],IsGeometricShapes:[["25A0","25FF"]],IsMiscellaneousSymbols:[["2600","26FF"]],IsDingbats:[["2700","27BF"]],"IsMiscellaneousMathematicalSymbols-A":[["27C0","27EF"]],"IsSupplementalArrows-A":[["27F0","27FF"]],IsBraillePatterns:[["2800","28FF"]],"IsSupplementalArrows-B":[["2900","297F"]],"IsMiscellaneousMathematicalSymbols-B":[["2980","29FF"]],IsSupplementalMathematicalOperators:[["2A00","2AFF"]],IsMiscellaneousSymbolsandArrows:[["2B00","2BFF"]],IsGlagolitic:[["2C00","2C5F"]],"IsLatinExtended-C":[["2C60","2C7F"]],IsCoptic:[["2C80","2CFF"]],IsGeorgianSupplement:[["2D00","2D2F"]],IsTifinagh:[["2D30","2D7F"]],IsEthiopicExtended:[["2D80","2DDF"]],"IsCyrillicExtended-A":[["2DE0","2DFF"]],IsSupplementalPunctuation:[["2E00","2E7F"]],IsCJKRadicalsSupplement:[["2E80","2EFF"]],IsKangxiRadicals:[["2F00","2FDF"]],IsIdeographicDescriptionCharacters:[["2FF0","2FFF"]],IsCJKSymbolsandPunctuation:[["3000","303F"]],IsHiragana:[["3040","309F"]],IsKatakana:[["30A0","30FF"]],IsBopomofo:[["3100","312F"]],IsHangulCompatibilityJamo:[["3130","318F"]],IsKanbun:[["3190","319F"]],IsBopomofoExtended:[["31A0","31BF"]],IsCJKStrokes:[["31C0","31EF"]],IsKatakanaPhoneticExtensions:[["31F0","31FF"]],IsEnclosedCJKLettersandMonths:[["3200","32FF"]],IsCJKCompatibility:[["3300","33FF"]],IsCJKUnifiedIdeographsExtensionA:[["3400","4DBF"]],IsYijingHexagramSymbols:[["4DC0","4DFF"]],IsCJKUnifiedIdeographs:[["4E00","9FFF"]],IsYiSyllables:[["A000","A48F"]],IsYiRadicals:[["A490","A4CF"]],IsLisu:[["A4D0","A4FF"]],IsVai:[["A500","A63F"]],"IsCyrillicExtended-B":[["A640","A69F"]],IsBamum:[["A6A0","A6FF"]],IsModifierToneLetters:[["A700","A71F"]],"IsLatinExtended-D":[["A720","A7FF"]],IsSylotiNagri:[["A800","A82F"]],IsCommonIndicNumberForms:[["A830","A83F"]],"IsPhags-pa":[["A840","A87F"]],IsSaurashtra:[["A880","A8DF"]],IsDevanagariExtended:[["A8E0","A8FF"]],IsKayahLi:[["A900","A92F"]],IsRejang:[["A930","A95F"]],"IsHangulJamoExtended-A":[["A960","A97F"]],IsJavanese:[["A980","A9DF"]],IsCham:[["AA00","AA5F"]],"IsMyanmarExtended-A":[["AA60","AA7F"]],IsTaiViet:[["AA80","AADF"]],"IsEthiopicExtended-A":[["AB00","AB2F"]],IsMeeteiMayek:[["ABC0","ABFF"]],IsHangulSyllables:[["AC00","D7AF"]],"IsHangulJamoExtended-B":[["D7B0","D7FF"]],IsHighSurrogates:[["D800","DB7F"]],IsHighPrivateUseSurrogates:[["DB80","DBFF"]],IsLowSurrogates:[["DC00","DFFF"]],IsPrivateUse:[["E000","F8FF"],["F0000","FFFFD"],["100000","10FFFD"]],IsPrivateUseArea:[["E000","F8FF"]],IsCJKCompatibilityIdeographs:[["F900","FAFF"]],IsAlphabeticPresentationForms:[["FB00","FB4F"]],"IsArabicPresentationForms-A":[["FB50","FDFF"]],IsVariationSelectors:[["FE00","FE0F"]],IsVerticalForms:[["FE10","FE1F"]],IsCombiningHalfMarks:[["FE20","FE2F"]],IsCJKCompatibilityForms:[["FE30","FE4F"]],IsSmallFormVariants:[["FE50","FE6F"]],"IsArabicPresentationForms-B":[["FE70","FEFF"]],IsHalfwidthandFullwidthForms:[["FF00","FFEF"]],IsSpecials:[["FEFF","FEFF"],["FFF0","FFFF"]],IsLinearBSyllabary:[["10000","1007F"]],IsLinearBIdeograms:[["10080","100FF"]],IsAegeanNumbers:[["10100","1013F"]],IsAncientGreekNumbers:[["10140","1018F"]],IsAncientSymbols:[["10190","101CF"]],IsPhaistosDisc:[["101D0","101FF"]],IsLycian:[["10280","1029F"]],IsCarian:[["102A0","102DF"]],IsOldItalic:[["10300","1032F"]],IsGothic:[["10330","1034F"]],IsUgaritic:[["10380","1039F"]],IsOldPersian:[["103A0","103DF"]],IsDeseret:[["10400","1044F"]],IsShavian:[["10450","1047F"]],IsOsmanya:[["10480","104AF"]],IsCypriotSyllabary:[["10800","1083F"]],IsImperialAramaic:[["10840","1085F"]],IsPhoenician:[["10900","1091F"]],IsLydian:[["10920","1093F"]],IsKharoshthi:[["10A00","10A5F"]],IsOldSouthArabian:[["10A60","10A7F"]],IsAvestan:[["10B00","10B3F"]],IsInscriptionalParthian:[["10B40","10B5F"]],IsInscriptionalPahlavi:[["10B60","10B7F"]],IsOldTurkic:[["10C00","10C4F"]],IsRumiNumeralSymbols:[["10E60","10E7F"]],IsBrahmi:[["11000","1107F"]],IsKaithi:[["11080","110CF"]],IsCuneiform:[["12000","123FF"]],IsCuneiformNumbersandPunctuation:[["12400","1247F"]],IsEgyptianHieroglyphs:[["13000","1342F"]],IsBamumSupplement:[["16800","16A3F"]],IsKanaSupplement:[["1B000","1B0FF"]],IsByzantineMusicalSymbols:[["1D000","1D0FF"]],IsMusicalSymbols:[["1D100","1D1FF"]],IsAncientGreekMusicalNotation:[["1D200","1D24F"]],IsTaiXuanJingSymbols:[["1D300","1D35F"]],IsCountingRodNumerals:[["1D360","1D37F"]],IsMathematicalAlphanumericSymbols:[["1D400","1D7FF"]],IsMahjongTiles:[["1F000","1F02F"]],IsDominoTiles:[["1F030","1F09F"]],IsPlayingCards:[["1F0A0","1F0FF"]],IsEnclosedAlphanumericSupplement:[["1F100","1F1FF"]],IsEnclosedIdeographicSupplement:[["1F200","1F2FF"]],IsMiscellaneousSymbolsAndPictographs:[["1F300","1F5FF"]],IsEmoticons:[["1F600","1F64F"]],IsTransportAndMapSymbols:[["1F680","1F6FF"]],IsAlchemicalSymbols:[["1F700","1F77F"]],IsCJKUnifiedIdeographsExtensionB:[["20000","2A6DF"]],IsCJKUnifiedIdeographsExtensionC:[["2A700","2B73F"]],IsCJKUnifiedIdeographsExtensionD:[["2B740","2B81F"]],IsCJKCompatibilityIdeographsSupplement:[["2F800","2FA1F"]],IsTags:[["E0000","E007F"]],IsVariationSelectorsSupplement:[["E0100","E01EF"]],"IsSupplementaryPrivateUseArea-A":[["F0000","FFFFF"]],"IsSupplementaryPrivateUseArea-B":[["100000","10FFFF"]],C:"Cc|Cf|Cn|Co",Cc:[["0","1F"],["7F","9F"]],Cf:[["AD","AD"],["600","604"],["6DD","6DD"],["70F","70F"],["200B","200F"],["202A","202E"],["2060","2064"],["206A","206F"],["FEFF","FEFF"],["FFF9","FFFB"],["110BD","110BD"],["1D173","1D17A"],["E0001","E0001"],["E0020","E007F"]],Cn:[["378","379"],["37F","383"],["38B","38B"],["38D","38D"],["3A2","3A2"],["528","52F"],["530","530"],["557","558"],["560","560"],["588","588"],["58B","58E"],["590","590"],["5C8","5CF"],["5EB","5EF"],["5F5","5FF"],["605","605"],["61C","61D"],["70E","70E"],["74B","74C"],["7B2","7BF"],["7FB","7FF"],["82E","82F"],["83F","83F"],["85C","85D"],["85F","85F"],["860","89F"],["8A1","8A1"],["8AD","8E3"],["8FF","8FF"],["978","978"],["980","980"],["984","984"],["98D","98E"],["991","992"],["9A9","9A9"],["9B1","9B1"],["9B3","9B5"],["9BA","9BB"],["9C5","9C6"],["9C9","9CA"],["9CF","9D6"],["9D8","9DB"],["9DE","9DE"],["9E4","9E5"],["9FC","9FF"],["A00","A00"],["A04","A04"],["A0B","A0E"],["A11","A12"],["A29","A29"],["A31","A31"],["A34","A34"],["A37","A37"],["A3A","A3B"],["A3D","A3D"],["A43","A46"],["A49","A4A"],["A4E","A50"],["A52","A58"],["A5D","A5D"],["A5F","A65"],["A76","A7F"],["A80","A80"],["A84","A84"],["A8E","A8E"],["A92","A92"],["AA9","AA9"],["AB1","AB1"],["AB4","AB4"],["ABA","ABB"],["AC6","AC6"],["ACA","ACA"],["ACE","ACF"],["AD1","ADF"],["AE4","AE5"],["AF2","AFF"],["B00","B00"],["B04","B04"],["B0D","B0E"],["B11","B12"],["B29","B29"],["B31","B31"],["B34","B34"],["B3A","B3B"],["B45","B46"],["B49","B4A"],["B4E","B55"],["B58","B5B"],["B5E","B5E"],["B64","B65"],["B78","B7F"],["B80","B81"],["B84","B84"],["B8B","B8D"],["B91","B91"],["B96","B98"],["B9B","B9B"],["B9D","B9D"],["BA0","BA2"],["BA5","BA7"],["BAB","BAD"],["BBA","BBD"],["BC3","BC5"],["BC9","BC9"],["BCE","BCF"],["BD1","BD6"],["BD8","BE5"],["BFB","BFF"],["C00","C00"],["C04","C04"],["C0D","C0D"],["C11","C11"],["C29","C29"],["C34","C34"],["C3A","C3C"],["C45","C45"],["C49","C49"],["C4E","C54"],["C57","C57"],["C5A","C5F"],["C64","C65"],["C70","C77"],["C80","C81"],["C84","C84"],["C8D","C8D"],["C91","C91"],["CA9","CA9"],["CB4","CB4"],["CBA","CBB"],["CC5","CC5"],["CC9","CC9"],["CCE","CD4"],["CD7","CDD"],["CDF","CDF"],["CE4","CE5"],["CF0","CF0"],["CF3","CFF"],["D00","D01"],["D04","D04"],["D0D","D0D"],["D11","D11"],["D3B","D3C"],["D45","D45"],["D49","D49"],["D4F","D56"],["D58","D5F"],["D64","D65"],["D76","D78"],["D80","D81"],["D84","D84"],["D97","D99"],["DB2","DB2"],["DBC","DBC"],["DBE","DBF"],["DC7","DC9"],["DCB","DCE"],["DD5","DD5"],["DD7","DD7"],["DE0","DF1"],["DF5","DFF"],["E00","E00"],["E3B","E3E"],["E5C","E7F"],["E80","E80"],["E83","E83"],["E85","E86"],["E89","E89"],["E8B","E8C"],["E8E","E93"],["E98","E98"],["EA0","EA0"],["EA4","EA4"],["EA6","EA6"],["EA8","EA9"],["EAC","EAC"],["EBA","EBA"],["EBE","EBF"],["EC5","EC5"],["EC7","EC7"],["ECE","ECF"],["EDA","EDB"],["EE0","EFF"],["F48","F48"],["F6D","F70"],["F98","F98"],["FBD","FBD"],["FCD","FCD"],["FDB","FFF"],["10C6","10C6"],["10C8","10CC"],["10CE","10CF"],["1249","1249"],["124E","124F"],["1257","1257"],["1259","1259"],["125E","125F"],["1289","1289"],["128E","128F"],["12B1","12B1"],["12B6","12B7"],["12BF","12BF"],["12C1","12C1"],["12C6","12C7"],["12D7","12D7"],["1311","1311"],["1316","1317"],["135B","135C"],["137D","137F"],["139A","139F"],["13F5","13FF"],["169D","169F"],["16F1","16FF"],["170D","170D"],["1715","171F"],["1737","173F"],["1754","175F"],["176D","176D"],["1771","1771"],["1774","177F"],["17DE","17DF"],["17EA","17EF"],["17FA","17FF"],["180F","180F"],["181A","181F"],["1878","187F"],["18AB","18AF"],["18F6","18FF"],["191D","191F"],["192C","192F"],["193C","193F"],["1941","1943"],["196E","196F"],["1975","197F"],["19AC","19AF"],["19CA","19CF"],["19DB","19DD"],["1A1C","1A1D"],["1A5F","1A5F"],["1A7D","1A7E"],["1A8A","1A8F"],["1A9A","1A9F"],["1AAE","1AAF"],["1AB0","1AFF"],["1B4C","1B4F"],["1B7D","1B7F"],["1BF4","1BFB"],["1C38","1C3A"],["1C4A","1C4C"],["1C80","1CBF"],["1CC8","1CCF"],["1CF7","1CFF"],["1DE7","1DFB"],["1F16","1F17"],["1F1E","1F1F"],["1F46","1F47"],["1F4E","1F4F"],["1F58","1F58"],["1F5A","1F5A"],["1F5C","1F5C"],["1F5E","1F5E"],["1F7E","1F7F"],["1FB5","1FB5"],["1FC5","1FC5"],["1FD4","1FD5"],["1FDC","1FDC"],["1FF0","1FF1"],["1FF5","1FF5"],["1FFF","1FFF"],["2065","2069"],["2072","2073"],["208F","208F"],["209D","209F"],["20BB","20CF"],["20F1","20FF"],["218A","218F"],["23F4","23FF"],["2427","243F"],["244B","245F"],["2700","2700"],["2B4D","2B4F"],["2B5A","2BFF"],["2C2F","2C2F"],["2C5F","2C5F"],["2CF4","2CF8"],["2D26","2D26"],["2D28","2D2C"],["2D2E","2D2F"],["2D68","2D6E"],["2D71","2D7E"],["2D97","2D9F"],["2DA7","2DA7"],["2DAF","2DAF"],["2DB7","2DB7"],["2DBF","2DBF"],["2DC7","2DC7"],["2DCF","2DCF"],["2DD7","2DD7"],["2DDF","2DDF"],["2E3C","2E7F"],["2E9A","2E9A"],["2EF4","2EFF"],["2FD6","2FDF"],["2FE0","2FEF"],["2FFC","2FFF"],["3040","3040"],["3097","3098"],["3100","3104"],["312E","312F"],["3130","3130"],["318F","318F"],["31BB","31BF"],["31E4","31EF"],["321F","321F"],["32FF","32FF"],["4DB6","4DBF"],["9FCD","9FFF"],["A48D","A48F"],["A4C7","A4CF"],["A62C","A63F"],["A698","A69E"],["A6F8","A6FF"],["A78F","A78F"],["A794","A79F"],["A7AB","A7F7"],["A82C","A82F"],["A83A","A83F"],["A878","A87F"],["A8C5","A8CD"],["A8DA","A8DF"],["A8FC","A8FF"],["A954","A95E"],["A97D","A97F"],["A9CE","A9CE"],["A9DA","A9DD"],["A9E0","A9FF"],["AA37","AA3F"],["AA4E","AA4F"],["AA5A","AA5B"],["AA7C","AA7F"],["AAC3","AADA"],["AAF7","AAFF"],["AB00","AB00"],["AB07","AB08"],["AB0F","AB10"],["AB17","AB1F"],["AB27","AB27"],["AB2F","AB2F"],["AB30","ABBF"],["ABEE","ABEF"],["ABFA","ABFF"],["D7A4","D7AF"],["D7C7","D7CA"],["D7FC","D7FF"],["FA6E","FA6F"],["FADA","FAFF"],["FB07","FB12"],["FB18","FB1C"],["FB37","FB37"],["FB3D","FB3D"],["FB3F","FB3F"],["FB42","FB42"],["FB45","FB45"],["FBC2","FBD2"],["FD40","FD4F"],["FD90","FD91"],["FDC8","FDCF"],["FDD0","FDEF"],["FDFE","FDFF"],["FE1A","FE1F"],["FE27","FE2F"],["FE53","FE53"],["FE67","FE67"],["FE6C","FE6F"],["FE75","FE75"],["FEFD","FEFE"],["FF00","FF00"],["FFBF","FFC1"],["FFC8","FFC9"],["FFD0","FFD1"],["FFD8","FFD9"],["FFDD","FFDF"],["FFE7","FFE7"],["FFEF","FFEF"],["FFF0","FFF8"],["FFFE","FFFF"],["1000C","1000C"],["10027","10027"],["1003B","1003B"],["1003E","1003E"],["1004E","1004F"],["1005E","1007F"],["100FB","100FF"],["10103","10106"],["10134","10136"],["1018B","1018F"],["1019C","101CF"],["101FE","101FF"],["10200","1027F"],["1029D","1029F"],["102D1","102DF"],["102E0","102FF"],["1031F","1031F"],["10324","1032F"],["1034B","1034F"],["10350","1037F"],["1039E","1039E"],["103C4","103C7"],["103D6","103DF"],["103E0","103FF"],["1049E","1049F"],["104AA","104AF"],["104B0","107FF"],["10806","10807"],["10809","10809"],["10836","10836"],["10839","1083B"],["1083D","1083E"],["10856","10856"],["10860","108FF"],["1091C","1091E"],["1093A","1093E"],["10940","1097F"],["109B8","109BD"],["109C0","109FF"],["10A04","10A04"],["10A07","10A0B"],["10A14","10A14"],["10A18","10A18"],["10A34","10A37"],["10A3B","10A3E"],["10A48","10A4F"],["10A59","10A5F"],["10A80","10AFF"],["10B36","10B38"],["10B56","10B57"],["10B73","10B77"],["10B80","10BFF"],["10C49","10C4F"],["10C50","10E5F"],["10E7F","10E7F"],["10E80","10FFF"],["1104E","11051"],["11070","1107F"],["110C2","110CF"],["110E9","110EF"],["110FA","110FF"],["11135","11135"],["11144","1114F"],["11150","1117F"],["111C9","111CF"],["111DA","111DF"],["111E0","1167F"],["116B8","116BF"],["116CA","116CF"],["116D0","11FFF"],["1236F","123FF"],["12463","1246F"],["12474","1247F"],["12480","12FFF"],["1342F","1342F"],["13430","167FF"],["16A39","16A3F"],["16A40","16EFF"],["16F45","16F4F"],["16F7F","16F8E"],["16FA0","1AFFF"],["1B002","1B0FF"],["1B100","1CFFF"],["1D0F6","1D0FF"],["1D127","1D128"],["1D1DE","1D1FF"],["1D246","1D24F"],["1D250","1D2FF"],["1D357","1D35F"],["1D372","1D37F"],["1D380","1D3FF"],["1D455","1D455"],["1D49D","1D49D"],["1D4A0","1D4A1"],["1D4A3","1D4A4"],["1D4A7","1D4A8"],["1D4AD","1D4AD"],["1D4BA","1D4BA"],["1D4BC","1D4BC"],["1D4C4","1D4C4"],["1D506","1D506"],["1D50B","1D50C"],["1D515","1D515"],["1D51D","1D51D"],["1D53A","1D53A"],["1D53F","1D53F"],["1D545","1D545"],["1D547","1D549"],["1D551","1D551"],["1D6A6","1D6A7"],["1D7CC","1D7CD"],["1D800","1E7FF"],["1E800","1EDFF"],["1EE04","1EE04"],["1EE20","1EE20"],["1EE23","1EE23"],["1EE25","1EE26"],["1EE28","1EE28"],["1EE33","1EE33"],["1EE38","1EE38"],["1EE3A","1EE3A"],["1EE3C","1EE41"],["1EE43","1EE46"],["1EE48","1EE48"],["1EE4A","1EE4A"],["1EE4C","1EE4C"],["1EE50","1EE50"],["1EE53","1EE53"],["1EE55","1EE56"],["1EE58","1EE58"],["1EE5A","1EE5A"],["1EE5C","1EE5C"],["1EE5E","1EE5E"],["1EE60","1EE60"],["1EE63","1EE63"],["1EE65","1EE66"],["1EE6B","1EE6B"],["1EE73","1EE73"],["1EE78","1EE78"],["1EE7D","1EE7D"],["1EE7F","1EE7F"],["1EE8A","1EE8A"],["1EE9C","1EEA0"],["1EEA4","1EEA4"],["1EEAA","1EEAA"],["1EEBC","1EEEF"],["1EEF2","1EEFF"],["1EF00","1EFFF"],["1F02C","1F02F"],["1F094","1F09F"],["1F0AF","1F0B0"],["1F0BF","1F0C0"],["1F0D0","1F0D0"],["1F0E0","1F0FF"],["1F10B","1F10F"],["1F12F","1F12F"],["1F16C","1F16F"],["1F19B","1F1E5"],["1F203","1F20F"],["1F23B","1F23F"],["1F249","1F24F"],["1F252","1F2FF"],["1F321","1F32F"],["1F336","1F336"],["1F37D","1F37F"],["1F394","1F39F"],["1F3C5","1F3C5"],["1F3CB","1F3DF"],["1F3F1","1F3FF"],["1F43F","1F43F"],["1F441","1F441"],["1F4F8","1F4F8"],["1F4FD","1F4FF"],["1F53E","1F53F"],["1F544","1F54F"],["1F568","1F5FA"],["1F641","1F644"],["1F650","1F67F"],["1F6C6","1F6FF"],["1F774","1F77F"],["1F780","1FFFD"],["1FFFE","1FFFF"],["2A6D7","2A6DF"],["2A6E0","2A6FF"],["2B735","2B73F"],["2B81E","2B81F"],["2B820","2F7FF"],["2FA1E","2FA1F"],["2FA20","2FFFD"],["2FFFE","2FFFF"],["30000","3FFFD"],["3FFFE","3FFFF"],["40000","4FFFD"],["4FFFE","4FFFF"],["50000","5FFFD"],["5FFFE","5FFFF"],["60000","6FFFD"],["6FFFE","6FFFF"],["70000","7FFFD"],["7FFFE","7FFFF"],["80000","8FFFD"],["8FFFE","8FFFF"],["90000","9FFFD"],["9FFFE","9FFFF"],["A0000","AFFFD"],["AFFFE","AFFFF"],["B0000","BFFFD"],["BFFFE","BFFFF"],["C0000","CFFFD"],["CFFFE","CFFFF"],["D0000","DFFFD"],["DFFFE","DFFFF"],["E0000","E0000"],["E0002","E001F"],["E0080","E00FF"],["E01F0","E0FFF"],["E1000","EFFFD"],["EFFFE","EFFFF"],["FFFFE","FFFFF"],["10FFFE","10FFFF"]],Co:[["E000","F8FF"],["F0000","FFFFD"],["100000","10FFFD"]],L:"Ll|Lm|Lo|Lt|Lu",Ll:[["61","7A"],["B5","B5"],["DF","F6"],["F8","FF"],["101","101"],["103","103"],["105","105"],["107","107"],["109","109"],["10B","10B"],["10D","10D"],["10F","10F"],["111","111"],["113","113"],["115","115"],["117","117"],["119","119"],["11B","11B"],["11D","11D"],["11F","11F"],["121","121"],["123","123"],["125","125"],["127","127"],["129","129"],["12B","12B"],["12D","12D"],["12F","12F"],["131","131"],["133","133"],["135","135"],["137","138"],["13A","13A"],["13C","13C"],["13E","13E"],["140","140"],["142","142"],["144","144"],["146","146"],["148","149"],["14B","14B"],["14D","14D"],["14F","14F"],["151","151"],["153","153"],["155","155"],["157","157"],["159","159"],["15B","15B"],["15D","15D"],["15F","15F"],["161","161"],["163","163"],["165","165"],["167","167"],["169","169"],["16B","16B"],["16D","16D"],["16F","16F"],["171","171"],["173","173"],["175","175"],["177","177"],["17A","17A"],["17C","17C"],["17E","180"],["183","183"],["185","185"],["188","188"],["18C","18D"],["192","192"],["195","195"],["199","19B"],["19E","19E"],["1A1","1A1"],["1A3","1A3"],["1A5","1A5"],["1A8","1A8"],["1AA","1AB"],["1AD","1AD"],["1B0","1B0"],["1B4","1B4"],["1B6","1B6"],["1B9","1BA"],["1BD","1BF"],["1C6","1C6"],["1C9","1C9"],["1CC","1CC"],["1CE","1CE"],["1D0","1D0"],["1D2","1D2"],["1D4","1D4"],["1D6","1D6"],["1D8","1D8"],["1DA","1DA"],["1DC","1DD"],["1DF","1DF"],["1E1","1E1"],["1E3","1E3"],["1E5","1E5"],["1E7","1E7"],["1E9","1E9"],["1EB","1EB"],["1ED","1ED"],["1EF","1F0"],["1F3","1F3"],["1F5","1F5"],["1F9","1F9"],["1FB","1FB"],["1FD","1FD"],["1FF","1FF"],["201","201"],["203","203"],["205","205"],["207","207"],["209","209"],["20B","20B"],["20D","20D"],["20F","20F"],["211","211"],["213","213"],["215","215"],["217","217"],["219","219"],["21B","21B"],["21D","21D"],["21F","21F"],["221","221"],["223","223"],["225","225"],["227","227"],["229","229"],["22B","22B"],["22D","22D"],["22F","22F"],["231","231"],["233","239"],["23C","23C"],["23F","240"],["242","242"],["247","247"],["249","249"],["24B","24B"],["24D","24D"],["24F","293"],["295","2AF"],["371","371"],["373","373"],["377","377"],["37B","37D"],["390","390"],["3AC","3CE"],["3D0","3D1"],["3D5","3D7"],["3D9","3D9"],["3DB","3DB"],["3DD","3DD"],["3DF","3DF"],["3E1","3E1"],["3E3","3E3"],["3E5","3E5"],["3E7","3E7"],["3E9","3E9"],["3EB","3EB"],["3ED","3ED"],["3EF","3F3"],["3F5","3F5"],["3F8","3F8"],["3FB","3FC"],["430","45F"],["461","461"],["463","463"],["465","465"],["467","467"],["469","469"],["46B","46B"],["46D","46D"],["46F","46F"],["471","471"],["473","473"],["475","475"],["477","477"],["479","479"],["47B","47B"],["47D","47D"],["47F","47F"],["481","481"],["48B","48B"],["48D","48D"],["48F","48F"],["491","491"],["493","493"],["495","495"],["497","497"],["499","499"],["49B","49B"],["49D","49D"],["49F","49F"],["4A1","4A1"],["4A3","4A3"],["4A5","4A5"],["4A7","4A7"],["4A9","4A9"],["4AB","4AB"],["4AD","4AD"],["4AF","4AF"],["4B1","4B1"],["4B3","4B3"],["4B5","4B5"],["4B7","4B7"],["4B9","4B9"],["4BB","4BB"],["4BD","4BD"],["4BF","4BF"],["4C2","4C2"],["4C4","4C4"],["4C6","4C6"],["4C8","4C8"],["4CA","4CA"],["4CC","4CC"],["4CE","4CF"],["4D1","4D1"],["4D3","4D3"],["4D5","4D5"],["4D7","4D7"],["4D9","4D9"],["4DB","4DB"],["4DD","4DD"],["4DF","4DF"],["4E1","4E1"],["4E3","4E3"],["4E5","4E5"],["4E7","4E7"],["4E9","4E9"],["4EB","4EB"],["4ED","4ED"],["4EF","4EF"],["4F1","4F1"],["4F3","4F3"],["4F5","4F5"],["4F7","4F7"],["4F9","4F9"],["4FB","4FB"],["4FD","4FD"],["4FF","4FF"],["501","501"],["503","503"],["505","505"],["507","507"],["509","509"],["50B","50B"],["50D","50D"],["50F","50F"],["511","511"],["513","513"],["515","515"],["517","517"],["519","519"],["51B","51B"],["51D","51D"],["51F","51F"],["521","521"],["523","523"],["525","525"],["527","527"],["561","587"],["1D00","1D2B"],["1D6B","1D77"],["1D79","1D9A"],["1E01","1E01"],["1E03","1E03"],["1E05","1E05"],["1E07","1E07"],["1E09","1E09"],["1E0B","1E0B"],["1E0D","1E0D"],["1E0F","1E0F"],["1E11","1E11"],["1E13","1E13"],["1E15","1E15"],["1E17","1E17"],["1E19","1E19"],["1E1B","1E1B"],["1E1D","1E1D"],["1E1F","1E1F"],["1E21","1E21"],["1E23","1E23"],["1E25","1E25"],["1E27","1E27"],["1E29","1E29"],["1E2B","1E2B"],["1E2D","1E2D"],["1E2F","1E2F"],["1E31","1E31"],["1E33","1E33"],["1E35","1E35"],["1E37","1E37"],["1E39","1E39"],["1E3B","1E3B"],["1E3D","1E3D"],["1E3F","1E3F"],["1E41","1E41"],["1E43","1E43"],["1E45","1E45"],["1E47","1E47"],["1E49","1E49"],["1E4B","1E4B"],["1E4D","1E4D"],["1E4F","1E4F"],["1E51","1E51"],["1E53","1E53"],["1E55","1E55"],["1E57","1E57"],["1E59","1E59"],["1E5B","1E5B"],["1E5D","1E5D"],["1E5F","1E5F"],["1E61","1E61"],["1E63","1E63"],["1E65","1E65"],["1E67","1E67"],["1E69","1E69"],["1E6B","1E6B"],["1E6D","1E6D"],["1E6F","1E6F"],["1E71","1E71"],["1E73","1E73"],["1E75","1E75"],["1E77","1E77"],["1E79","1E79"],["1E7B","1E7B"],["1E7D","1E7D"],["1E7F","1E7F"],["1E81","1E81"],["1E83","1E83"],["1E85","1E85"],["1E87","1E87"],["1E89","1E89"],["1E8B","1E8B"],["1E8D","1E8D"],["1E8F","1E8F"],["1E91","1E91"],["1E93","1E93"],["1E95","1E9D"],["1E9F","1E9F"],["1EA1","1EA1"],["1EA3","1EA3"],["1EA5","1EA5"],["1EA7","1EA7"],["1EA9","1EA9"],["1EAB","1EAB"],["1EAD","1EAD"],["1EAF","1EAF"],["1EB1","1EB1"],["1EB3","1EB3"],["1EB5","1EB5"],["1EB7","1EB7"],["1EB9","1EB9"],["1EBB","1EBB"],["1EBD","1EBD"],["1EBF","1EBF"],["1EC1","1EC1"],["1EC3","1EC3"],["1EC5","1EC5"],["1EC7","1EC7"],["1EC9","1EC9"],["1ECB","1ECB"],["1ECD","1ECD"],["1ECF","1ECF"],["1ED1","1ED1"],["1ED3","1ED3"],["1ED5","1ED5"],["1ED7","1ED7"],["1ED9","1ED9"],["1EDB","1EDB"],["1EDD","1EDD"],["1EDF","1EDF"],["1EE1","1EE1"],["1EE3","1EE3"],["1EE5","1EE5"],["1EE7","1EE7"],["1EE9","1EE9"],["1EEB","1EEB"],["1EED","1EED"],["1EEF","1EEF"],["1EF1","1EF1"],["1EF3","1EF3"],["1EF5","1EF5"],["1EF7","1EF7"],["1EF9","1EF9"],["1EFB","1EFB"],["1EFD","1EFD"],["1EFF","1F07"],["1F10","1F15"],["1F20","1F27"],["1F30","1F37"],["1F40","1F45"],["1F50","1F57"],["1F60","1F67"],["1F70","1F7D"],["1F80","1F87"],["1F90","1F97"],["1FA0","1FA7"],["1FB0","1FB4"],["1FB6","1FB7"],["1FBE","1FBE"],["1FC2","1FC4"],["1FC6","1FC7"],["1FD0","1FD3"],["1FD6","1FD7"],["1FE0","1FE7"],["1FF2","1FF4"],["1FF6","1FF7"],["210A","210A"],["210E","210F"],["2113","2113"],["212F","212F"],["2134","2134"],["2139","2139"],["213C","213D"],["2146","2149"],["214E","214E"],["2184","2184"],["2C30","2C5E"],["2C61","2C61"],["2C65","2C66"],["2C68","2C68"],["2C6A","2C6A"],["2C6C","2C6C"],["2C71","2C71"],["2C73","2C74"],["2C76","2C7B"],["2C81","2C81"],["2C83","2C83"],["2C85","2C85"],["2C87","2C87"],["2C89","2C89"],["2C8B","2C8B"],["2C8D","2C8D"],["2C8F","2C8F"],["2C91","2C91"],["2C93","2C93"],["2C95","2C95"],["2C97","2C97"],["2C99","2C99"],["2C9B","2C9B"],["2C9D","2C9D"],["2C9F","2C9F"],["2CA1","2CA1"],["2CA3","2CA3"],["2CA5","2CA5"],["2CA7","2CA7"],["2CA9","2CA9"],["2CAB","2CAB"],["2CAD","2CAD"],["2CAF","2CAF"],["2CB1","2CB1"],["2CB3","2CB3"],["2CB5","2CB5"],["2CB7","2CB7"],["2CB9","2CB9"],["2CBB","2CBB"],["2CBD","2CBD"],["2CBF","2CBF"],["2CC1","2CC1"],["2CC3","2CC3"],["2CC5","2CC5"],["2CC7","2CC7"],["2CC9","2CC9"],["2CCB","2CCB"],["2CCD","2CCD"],["2CCF","2CCF"],["2CD1","2CD1"],["2CD3","2CD3"],["2CD5","2CD5"],["2CD7","2CD7"],["2CD9","2CD9"],["2CDB","2CDB"],["2CDD","2CDD"],["2CDF","2CDF"],["2CE1","2CE1"],["2CE3","2CE4"],["2CEC","2CEC"],["2CEE","2CEE"],["2CF3","2CF3"],["2D00","2D25"],["2D27","2D27"],["2D2D","2D2D"],["A641","A641"],["A643","A643"],["A645","A645"],["A647","A647"],["A649","A649"],["A64B","A64B"],["A64D","A64D"],["A64F","A64F"],["A651","A651"],["A653","A653"],["A655","A655"],["A657","A657"],["A659","A659"],["A65B","A65B"],["A65D","A65D"],["A65F","A65F"],["A661","A661"],["A663","A663"],["A665","A665"],["A667","A667"],["A669","A669"],["A66B","A66B"],["A66D","A66D"],["A681","A681"],["A683","A683"],["A685","A685"],["A687","A687"],["A689","A689"],["A68B","A68B"],["A68D","A68D"],["A68F","A68F"],["A691","A691"],["A693","A693"],["A695","A695"],["A697","A697"],["A723","A723"],["A725","A725"],["A727","A727"],["A729","A729"],["A72B","A72B"],["A72D","A72D"],["A72F","A731"],["A733","A733"],["A735","A735"],["A737","A737"],["A739","A739"],["A73B","A73B"],["A73D","A73D"],["A73F","A73F"],["A741","A741"],["A743","A743"],["A745","A745"],["A747","A747"],["A749","A749"],["A74B","A74B"],["A74D","A74D"],["A74F","A74F"],["A751","A751"],["A753","A753"],["A755","A755"],["A757","A757"],["A759","A759"],["A75B","A75B"],["A75D","A75D"],["A75F","A75F"],["A761","A761"],["A763","A763"],["A765","A765"],["A767","A767"],["A769","A769"],["A76B","A76B"],["A76D","A76D"],["A76F","A76F"],["A771","A778"],["A77A","A77A"],["A77C","A77C"],["A77F","A77F"],["A781","A781"],["A783","A783"],["A785","A785"],["A787","A787"],["A78C","A78C"],["A78E","A78E"],["A791","A791"],["A793","A793"],["A7A1","A7A1"],["A7A3","A7A3"],["A7A5","A7A5"],["A7A7","A7A7"],["A7A9","A7A9"],["A7FA","A7FA"],["FB00","FB06"],["FB13","FB17"],["FF41","FF5A"],["10428","1044F"],["1D41A","1D433"],["1D44E","1D454"],["1D456","1D467"],["1D482","1D49B"],["1D4B6","1D4B9"],["1D4BB","1D4BB"],["1D4BD","1D4C3"],["1D4C5","1D4CF"],["1D4EA","1D503"],["1D51E","1D537"],["1D552","1D56B"],["1D586","1D59F"],["1D5BA","1D5D3"],["1D5EE","1D607"],["1D622","1D63B"],["1D656","1D66F"],["1D68A","1D6A5"],["1D6C2","1D6DA"],["1D6DC","1D6E1"],["1D6FC","1D714"],["1D716","1D71B"],["1D736","1D74E"],["1D750","1D755"],["1D770","1D788"],["1D78A","1D78F"],["1D7AA","1D7C2"],["1D7C4","1D7C9"],["1D7CB","1D7CB"]],Lm:[["2B0","2C1"],["2C6","2D1"],["2E0","2E4"],["2EC","2EC"],["2EE","2EE"],["374","374"],["37A","37A"],["559","559"],["640","640"],["6E5","6E6"],["7F4","7F5"],["7FA","7FA"],["81A","81A"],["824","824"],["828","828"],["971","971"],["E46","E46"],["EC6","EC6"],["10FC","10FC"],["17D7","17D7"],["1843","1843"],["1AA7","1AA7"],["1C78","1C7D"],["1D2C","1D6A"],["1D78","1D78"],["1D9B","1DBF"],["2071","2071"],["207F","207F"],["2090","209C"],["2C7C","2C7D"],["2D6F","2D6F"],["2E2F","2E2F"],["3005","3005"],["3031","3035"],["303B","303B"],["309D","309E"],["30FC","30FE"],["A015","A015"],["A4F8","A4FD"],["A60C","A60C"],["A67F","A67F"],["A717","A71F"],["A770","A770"],["A788","A788"],["A7F8","A7F9"],["A9CF","A9CF"],["AA70","AA70"],["AADD","AADD"],["AAF3","AAF4"],["FF70","FF70"],["FF9E","FF9F"],["16F93","16F9F"]],Lo:[["AA","AA"],["BA","BA"],["1BB","1BB"],["1C0","1C3"],["294","294"],["5D0","5EA"],["5F0","5F2"],["620","63F"],["641","64A"],["66E","66F"],["671","6D3"],["6D5","6D5"],["6EE","6EF"],["6FA","6FC"],["6FF","6FF"],["710","710"],["712","72F"],["74D","7A5"],["7B1","7B1"],["7CA","7EA"],["800","815"],["840","858"],["8A0","8A0"],["8A2","8AC"],["904","939"],["93D","93D"],["950","950"],["958","961"],["972","977"],["979","97F"],["985","98C"],["98F","990"],["993","9A8"],["9AA","9B0"],["9B2","9B2"],["9B6","9B9"],["9BD","9BD"],["9CE","9CE"],["9DC","9DD"],["9DF","9E1"],["9F0","9F1"],["A05","A0A"],["A0F","A10"],["A13","A28"],["A2A","A30"],["A32","A33"],["A35","A36"],["A38","A39"],["A59","A5C"],["A5E","A5E"],["A72","A74"],["A85","A8D"],["A8F","A91"],["A93","AA8"],["AAA","AB0"],["AB2","AB3"],["AB5","AB9"],["ABD","ABD"],["AD0","AD0"],["AE0","AE1"],["B05","B0C"],["B0F","B10"],["B13","B28"],["B2A","B30"],["B32","B33"],["B35","B39"],["B3D","B3D"],["B5C","B5D"],["B5F","B61"],["B71","B71"],["B83","B83"],["B85","B8A"],["B8E","B90"],["B92","B95"],["B99","B9A"],["B9C","B9C"],["B9E","B9F"],["BA3","BA4"],["BA8","BAA"],["BAE","BB9"],["BD0","BD0"],["C05","C0C"],["C0E","C10"],["C12","C28"],["C2A","C33"],["C35","C39"],["C3D","C3D"],["C58","C59"],["C60","C61"],["C85","C8C"],["C8E","C90"],["C92","CA8"],["CAA","CB3"],["CB5","CB9"],["CBD","CBD"],["CDE","CDE"],["CE0","CE1"],["CF1","CF2"],["D05","D0C"],["D0E","D10"],["D12","D3A"],["D3D","D3D"],["D4E","D4E"],["D60","D61"],["D7A","D7F"],["D85","D96"],["D9A","DB1"],["DB3","DBB"],["DBD","DBD"],["DC0","DC6"],["E01","E30"],["E32","E33"],["E40","E45"],["E81","E82"],["E84","E84"],["E87","E88"],["E8A","E8A"],["E8D","E8D"],["E94","E97"],["E99","E9F"],["EA1","EA3"],["EA5","EA5"],["EA7","EA7"],["EAA","EAB"],["EAD","EB0"],["EB2","EB3"],["EBD","EBD"],["EC0","EC4"],["EDC","EDF"],["F00","F00"],["F40","F47"],["F49","F6C"],["F88","F8C"],["1000","102A"],["103F","103F"],["1050","1055"],["105A","105D"],["1061","1061"],["1065","1066"],["106E","1070"],["1075","1081"],["108E","108E"],["10D0","10FA"],["10FD","1248"],["124A","124D"],["1250","1256"],["1258","1258"],["125A","125D"],["1260","1288"],["128A","128D"],["1290","12B0"],["12B2","12B5"],["12B8","12BE"],["12C0","12C0"],["12C2","12C5"],["12C8","12D6"],["12D8","1310"],["1312","1315"],["1318","135A"],["1380","138F"],["13A0","13F4"],["1401","166C"],["166F","167F"],["1681","169A"],["16A0","16EA"],["1700","170C"],["170E","1711"],["1720","1731"],["1740","1751"],["1760","176C"],["176E","1770"],["1780","17B3"],["17DC","17DC"],["1820","1842"],["1844","1877"],["1880","18A8"],["18AA","18AA"],["18B0","18F5"],["1900","191C"],["1950","196D"],["1970","1974"],["1980","19AB"],["19C1","19C7"],["1A00","1A16"],["1A20","1A54"],["1B05","1B33"],["1B45","1B4B"],["1B83","1BA0"],["1BAE","1BAF"],["1BBA","1BE5"],["1C00","1C23"],["1C4D","1C4F"],["1C5A","1C77"],["1CE9","1CEC"],["1CEE","1CF1"],["1CF5","1CF6"],["2135","2138"],["2D30","2D67"],["2D80","2D96"],["2DA0","2DA6"],["2DA8","2DAE"],["2DB0","2DB6"],["2DB8","2DBE"],["2DC0","2DC6"],["2DC8","2DCE"],["2DD0","2DD6"],["2DD8","2DDE"],["3006","3006"],["303C","303C"],["3041","3096"],["309F","309F"],["30A1","30FA"],["30FF","30FF"],["3105","312D"],["3131","318E"],["31A0","31BA"],["31F0","31FF"],["3400","4DB5"],["4E00","9FCC"],["A000","A014"],["A016","A48C"],["A4D0","A4F7"],["A500","A60B"],["A610","A61F"],["A62A","A62B"],["A66E","A66E"],["A6A0","A6E5"],["A7FB","A801"],["A803","A805"],["A807","A80A"],["A80C","A822"],["A840","A873"],["A882","A8B3"],["A8F2","A8F7"],["A8FB","A8FB"],["A90A","A925"],["A930","A946"],["A960","A97C"],["A984","A9B2"],["AA00","AA28"],["AA40","AA42"],["AA44","AA4B"],["AA60","AA6F"],["AA71","AA76"],["AA7A","AA7A"],["AA80","AAAF"],["AAB1","AAB1"],["AAB5","AAB6"],["AAB9","AABD"],["AAC0","AAC0"],["AAC2","AAC2"],["AADB","AADC"],["AAE0","AAEA"],["AAF2","AAF2"],["AB01","AB06"],["AB09","AB0E"],["AB11","AB16"],["AB20","AB26"],["AB28","AB2E"],["ABC0","ABE2"],["AC00","D7A3"],["D7B0","D7C6"],["D7CB","D7FB"],["F900","FA6D"],["FA70","FAD9"],["FB1D","FB1D"],["FB1F","FB28"],["FB2A","FB36"],["FB38","FB3C"],["FB3E","FB3E"],["FB40","FB41"],["FB43","FB44"],["FB46","FBB1"],["FBD3","FD3D"],["FD50","FD8F"],["FD92","FDC7"],["FDF0","FDFB"],["FE70","FE74"],["FE76","FEFC"],["FF66","FF6F"],["FF71","FF9D"],["FFA0","FFBE"],["FFC2","FFC7"],["FFCA","FFCF"],["FFD2","FFD7"],["FFDA","FFDC"],["10000","1000B"],["1000D","10026"],["10028","1003A"],["1003C","1003D"],["1003F","1004D"],["10050","1005D"],["10080","100FA"],["10280","1029C"],["102A0","102D0"],["10300","1031E"],["10330","10340"],["10342","10349"],["10380","1039D"],["103A0","103C3"],["103C8","103CF"],["10450","1049D"],["10800","10805"],["10808","10808"],["1080A","10835"],["10837","10838"],["1083C","1083C"],["1083F","10855"],["10900","10915"],["10920","10939"],["10980","109B7"],["109BE","109BF"],["10A00","10A00"],["10A10","10A13"],["10A15","10A17"],["10A19","10A33"],["10A60","10A7C"],["10B00","10B35"],["10B40","10B55"],["10B60","10B72"],["10C00","10C48"],["11003","11037"],["11083","110AF"],["110D0","110E8"],["11103","11126"],["11183","111B2"],["111C1","111C4"],["11680","116AA"],["12000","1236E"],["13000","1342E"],["16800","16A38"],["16F00","16F44"],["16F50","16F50"],["1B000","1B001"],["1EE00","1EE03"],["1EE05","1EE1F"],["1EE21","1EE22"],["1EE24","1EE24"],["1EE27","1EE27"],["1EE29","1EE32"],["1EE34","1EE37"],["1EE39","1EE39"],["1EE3B","1EE3B"],["1EE42","1EE42"],["1EE47","1EE47"],["1EE49","1EE49"],["1EE4B","1EE4B"],["1EE4D","1EE4F"],["1EE51","1EE52"],["1EE54","1EE54"],["1EE57","1EE57"],["1EE59","1EE59"],["1EE5B","1EE5B"],["1EE5D","1EE5D"],["1EE5F","1EE5F"],["1EE61","1EE62"],["1EE64","1EE64"],["1EE67","1EE6A"],["1EE6C","1EE72"],["1EE74","1EE77"],["1EE79","1EE7C"],["1EE7E","1EE7E"],["1EE80","1EE89"],["1EE8B","1EE9B"],["1EEA1","1EEA3"],["1EEA5","1EEA9"],["1EEAB","1EEBB"],["20000","2A6D6"],["2A700","2B734"],["2B740","2B81D"],["2F800","2FA1D"]],Lt:[["1C5","1C5"],["1C8","1C8"],["1CB","1CB"],["1F2","1F2"],["1F88","1F8F"],["1F98","1F9F"],["1FA8","1FAF"],["1FBC","1FBC"],["1FCC","1FCC"],["1FFC","1FFC"]],Lu:[["41","5A"],["C0","D6"],["D8","DE"],["100","100"],["102","102"],["104","104"],["106","106"],["108","108"],["10A","10A"],["10C","10C"],["10E","10E"],["110","110"],["112","112"],["114","114"],["116","116"],["118","118"],["11A","11A"],["11C","11C"],["11E","11E"],["120","120"],["122","122"],["124","124"],["126","126"],["128","128"],["12A","12A"],["12C","12C"],["12E","12E"],["130","130"],["132","132"],["134","134"],["136","136"],["139","139"],["13B","13B"],["13D","13D"],["13F","13F"],["141","141"],["143","143"],["145","145"],["147","147"],["14A","14A"],["14C","14C"],["14E","14E"],["150","150"],["152","152"],["154","154"],["156","156"],["158","158"],["15A","15A"],["15C","15C"],["15E","15E"],["160","160"],["162","162"],["164","164"],["166","166"],["168","168"],["16A","16A"],["16C","16C"],["16E","16E"],["170","170"],["172","172"],["174","174"],["176","176"],["178","179"],["17B","17B"],["17D","17D"],["181","182"],["184","184"],["186","187"],["189","18B"],["18E","191"],["193","194"],["196","198"],["19C","19D"],["19F","1A0"],["1A2","1A2"],["1A4","1A4"],["1A6","1A7"],["1A9","1A9"],["1AC","1AC"],["1AE","1AF"],["1B1","1B3"],["1B5","1B5"],["1B7","1B8"],["1BC","1BC"],["1C4","1C4"],["1C7","1C7"],["1CA","1CA"],["1CD","1CD"],["1CF","1CF"],["1D1","1D1"],["1D3","1D3"],["1D5","1D5"],["1D7","1D7"],["1D9","1D9"],["1DB","1DB"],["1DE","1DE"],["1E0","1E0"],["1E2","1E2"],["1E4","1E4"],["1E6","1E6"],["1E8","1E8"],["1EA","1EA"],["1EC","1EC"],["1EE","1EE"],["1F1","1F1"],["1F4","1F4"],["1F6","1F8"],["1FA","1FA"],["1FC","1FC"],["1FE","1FE"],["200","200"],["202","202"],["204","204"],["206","206"],["208","208"],["20A","20A"],["20C","20C"],["20E","20E"],["210","210"],["212","212"],["214","214"],["216","216"],["218","218"],["21A","21A"],["21C","21C"],["21E","21E"],["220","220"],["222","222"],["224","224"],["226","226"],["228","228"],["22A","22A"],["22C","22C"],["22E","22E"],["230","230"],["232","232"],["23A","23B"],["23D","23E"],["241","241"],["243","246"],["248","248"],["24A","24A"],["24C","24C"],["24E","24E"],["370","370"],["372","372"],["376","376"],["386","386"],["388","38A"],["38C","38C"],["38E","38F"],["391","3A1"],["3A3","3AB"],["3CF","3CF"],["3D2","3D4"],["3D8","3D8"],["3DA","3DA"],["3DC","3DC"],["3DE","3DE"],["3E0","3E0"],["3E2","3E2"],["3E4","3E4"],["3E6","3E6"],["3E8","3E8"],["3EA","3EA"],["3EC","3EC"],["3EE","3EE"],["3F4","3F4"],["3F7","3F7"],["3F9","3FA"],["3FD","42F"],["460","460"],["462","462"],["464","464"],["466","466"],["468","468"],["46A","46A"],["46C","46C"],["46E","46E"],["470","470"],["472","472"],["474","474"],["476","476"],["478","478"],["47A","47A"],["47C","47C"],["47E","47E"],["480","480"],["48A","48A"],["48C","48C"],["48E","48E"],["490","490"],["492","492"],["494","494"],["496","496"],["498","498"],["49A","49A"],["49C","49C"],["49E","49E"],["4A0","4A0"],["4A2","4A2"],["4A4","4A4"],["4A6","4A6"],["4A8","4A8"],["4AA","4AA"],["4AC","4AC"],["4AE","4AE"],["4B0","4B0"],["4B2","4B2"],["4B4","4B4"],["4B6","4B6"],["4B8","4B8"],["4BA","4BA"],["4BC","4BC"],["4BE","4BE"],["4C0","4C1"],["4C3","4C3"],["4C5","4C5"],["4C7","4C7"],["4C9","4C9"],["4CB","4CB"],["4CD","4CD"],["4D0","4D0"],["4D2","4D2"],["4D4","4D4"],["4D6","4D6"],["4D8","4D8"],["4DA","4DA"],["4DC","4DC"],["4DE","4DE"],["4E0","4E0"],["4E2","4E2"],["4E4","4E4"],["4E6","4E6"],["4E8","4E8"],["4EA","4EA"],["4EC","4EC"],["4EE","4EE"],["4F0","4F0"],["4F2","4F2"],["4F4","4F4"],["4F6","4F6"],["4F8","4F8"],["4FA","4FA"],["4FC","4FC"],["4FE","4FE"],["500","500"],["502","502"],["504","504"],["506","506"],["508","508"],["50A","50A"],["50C","50C"],["50E","50E"],["510","510"],["512","512"],["514","514"],["516","516"],["518","518"],["51A","51A"],["51C","51C"],["51E","51E"],["520","520"],["522","522"],["524","524"],["526","526"],["531","556"],["10A0","10C5"],["10C7","10C7"],["10CD","10CD"],["1E00","1E00"],["1E02","1E02"],["1E04","1E04"],["1E06","1E06"],["1E08","1E08"],["1E0A","1E0A"],["1E0C","1E0C"],["1E0E","1E0E"],["1E10","1E10"],["1E12","1E12"],["1E14","1E14"],["1E16","1E16"],["1E18","1E18"],["1E1A","1E1A"],["1E1C","1E1C"],["1E1E","1E1E"],["1E20","1E20"],["1E22","1E22"],["1E24","1E24"],["1E26","1E26"],["1E28","1E28"],["1E2A","1E2A"],["1E2C","1E2C"],["1E2E","1E2E"],["1E30","1E30"],["1E32","1E32"],["1E34","1E34"],["1E36","1E36"],["1E38","1E38"],["1E3A","1E3A"],["1E3C","1E3C"],["1E3E","1E3E"],["1E40","1E40"],["1E42","1E42"],["1E44","1E44"],["1E46","1E46"],["1E48","1E48"],["1E4A","1E4A"],["1E4C","1E4C"],["1E4E","1E4E"],["1E50","1E50"],["1E52","1E52"],["1E54","1E54"],["1E56","1E56"],["1E58","1E58"],["1E5A","1E5A"],["1E5C","1E5C"],["1E5E","1E5E"],["1E60","1E60"],["1E62","1E62"],["1E64","1E64"],["1E66","1E66"],["1E68","1E68"],["1E6A","1E6A"],["1E6C","1E6C"],["1E6E","1E6E"],["1E70","1E70"],["1E72","1E72"],["1E74","1E74"],["1E76","1E76"],["1E78","1E78"],["1E7A","1E7A"],["1E7C","1E7C"],["1E7E","1E7E"],["1E80","1E80"],["1E82","1E82"],["1E84","1E84"],["1E86","1E86"],["1E88","1E88"],["1E8A","1E8A"],["1E8C","1E8C"],["1E8E","1E8E"],["1E90","1E90"],["1E92","1E92"],["1E94","1E94"],["1E9E","1E9E"],["1EA0","1EA0"],["1EA2","1EA2"],["1EA4","1EA4"],["1EA6","1EA6"],["1EA8","1EA8"],["1EAA","1EAA"],["1EAC","1EAC"],["1EAE","1EAE"],["1EB0","1EB0"],["1EB2","1EB2"],["1EB4","1EB4"],["1EB6","1EB6"],["1EB8","1EB8"],["1EBA","1EBA"],["1EBC","1EBC"],["1EBE","1EBE"],["1EC0","1EC0"],["1EC2","1EC2"],["1EC4","1EC4"],["1EC6","1EC6"],["1EC8","1EC8"],["1ECA","1ECA"],["1ECC","1ECC"],["1ECE","1ECE"],["1ED0","1ED0"],["1ED2","1ED2"],["1ED4","1ED4"],["1ED6","1ED6"],["1ED8","1ED8"],["1EDA","1EDA"],["1EDC","1EDC"],["1EDE","1EDE"],["1EE0","1EE0"],["1EE2","1EE2"],["1EE4","1EE4"],["1EE6","1EE6"],["1EE8","1EE8"],["1EEA","1EEA"],["1EEC","1EEC"],["1EEE","1EEE"],["1EF0","1EF0"],["1EF2","1EF2"],["1EF4","1EF4"],["1EF6","1EF6"],["1EF8","1EF8"],["1EFA","1EFA"],["1EFC","1EFC"],["1EFE","1EFE"],["1F08","1F0F"],["1F18","1F1D"],["1F28","1F2F"],["1F38","1F3F"],["1F48","1F4D"],["1F59","1F59"],["1F5B","1F5B"],["1F5D","1F5D"],["1F5F","1F5F"],["1F68","1F6F"],["1FB8","1FBB"],["1FC8","1FCB"],["1FD8","1FDB"],["1FE8","1FEC"],["1FF8","1FFB"],["2102","2102"],["2107","2107"],["210B","210D"],["2110","2112"],["2115","2115"],["2119","211D"],["2124","2124"],["2126","2126"],["2128","2128"],["212A","212D"],["2130","2133"],["213E","213F"],["2145","2145"],["2183","2183"],["2C00","2C2E"],["2C60","2C60"],["2C62","2C64"],["2C67","2C67"],["2C69","2C69"],["2C6B","2C6B"],["2C6D","2C70"],["2C72","2C72"],["2C75","2C75"],["2C7E","2C80"],["2C82","2C82"],["2C84","2C84"],["2C86","2C86"],["2C88","2C88"],["2C8A","2C8A"],["2C8C","2C8C"],["2C8E","2C8E"],["2C90","2C90"],["2C92","2C92"],["2C94","2C94"],["2C96","2C96"],["2C98","2C98"],["2C9A","2C9A"],["2C9C","2C9C"],["2C9E","2C9E"],["2CA0","2CA0"],["2CA2","2CA2"],["2CA4","2CA4"],["2CA6","2CA6"],["2CA8","2CA8"],["2CAA","2CAA"],["2CAC","2CAC"],["2CAE","2CAE"],["2CB0","2CB0"],["2CB2","2CB2"],["2CB4","2CB4"],["2CB6","2CB6"],["2CB8","2CB8"],["2CBA","2CBA"],["2CBC","2CBC"],["2CBE","2CBE"],["2CC0","2CC0"],["2CC2","2CC2"],["2CC4","2CC4"],["2CC6","2CC6"],["2CC8","2CC8"],["2CCA","2CCA"],["2CCC","2CCC"],["2CCE","2CCE"],["2CD0","2CD0"],["2CD2","2CD2"],["2CD4","2CD4"],["2CD6","2CD6"],["2CD8","2CD8"],["2CDA","2CDA"],["2CDC","2CDC"],["2CDE","2CDE"],["2CE0","2CE0"],["2CE2","2CE2"],["2CEB","2CEB"],["2CED","2CED"],["2CF2","2CF2"],["A640","A640"],["A642","A642"],["A644","A644"],["A646","A646"],["A648","A648"],["A64A","A64A"],["A64C","A64C"],["A64E","A64E"],["A650","A650"],["A652","A652"],["A654","A654"],["A656","A656"],["A658","A658"],["A65A","A65A"],["A65C","A65C"],["A65E","A65E"],["A660","A660"],["A662","A662"],["A664","A664"],["A666","A666"],["A668","A668"],["A66A","A66A"],["A66C","A66C"],["A680","A680"],["A682","A682"],["A684","A684"],["A686","A686"],["A688","A688"],["A68A","A68A"],["A68C","A68C"],["A68E","A68E"],["A690","A690"],["A692","A692"],["A694","A694"],["A696","A696"],["A722","A722"],["A724","A724"],["A726","A726"],["A728","A728"],["A72A","A72A"],["A72C","A72C"],["A72E","A72E"],["A732","A732"],["A734","A734"],["A736","A736"],["A738","A738"],["A73A","A73A"],["A73C","A73C"],["A73E","A73E"],["A740","A740"],["A742","A742"],["A744","A744"],["A746","A746"],["A748","A748"],["A74A","A74A"],["A74C","A74C"],["A74E","A74E"],["A750","A750"],["A752","A752"],["A754","A754"],["A756","A756"],["A758","A758"],["A75A","A75A"],["A75C","A75C"],["A75E","A75E"],["A760","A760"],["A762","A762"],["A764","A764"],["A766","A766"],["A768","A768"],["A76A","A76A"],["A76C","A76C"],["A76E","A76E"],["A779","A779"],["A77B","A77B"],["A77D","A77E"],["A780","A780"],["A782","A782"],["A784","A784"],["A786","A786"],["A78B","A78B"],["A78D","A78D"],["A790","A790"],["A792","A792"],["A7A0","A7A0"],["A7A2","A7A2"],["A7A4","A7A4"],["A7A6","A7A6"],["A7A8","A7A8"],["A7AA","A7AA"],["FF21","FF3A"],["10400","10427"],["1D400","1D419"],["1D434","1D44D"],["1D468","1D481"],["1D49C","1D49C"],["1D49E","1D49F"],["1D4A2","1D4A2"],["1D4A5","1D4A6"],["1D4A9","1D4AC"],["1D4AE","1D4B5"],["1D4D0","1D4E9"],["1D504","1D505"],["1D507","1D50A"],["1D50D","1D514"],["1D516","1D51C"],["1D538","1D539"],["1D53B","1D53E"],["1D540","1D544"],["1D546","1D546"],["1D54A","1D550"],["1D56C","1D585"],["1D5A0","1D5B9"],["1D5D4","1D5ED"],["1D608","1D621"],["1D63C","1D655"],["1D670","1D689"],["1D6A8","1D6C0"],["1D6E2","1D6FA"],["1D71C","1D734"],["1D756","1D76E"],["1D790","1D7A8"],["1D7CA","1D7CA"]],M:"Mc|Me|Mn",Mc:[["903","903"],["93B","93B"],["93E","940"],["949","94C"],["94E","94F"],["982","983"],["9BE","9C0"],["9C7","9C8"],["9CB","9CC"],["9D7","9D7"],["A03","A03"],["A3E","A40"],["A83","A83"],["ABE","AC0"],["AC9","AC9"],["ACB","ACC"],["B02","B03"],["B3E","B3E"],["B40","B40"],["B47","B48"],["B4B","B4C"],["B57","B57"],["BBE","BBF"],["BC1","BC2"],["BC6","BC8"],["BCA","BCC"],["BD7","BD7"],["C01","C03"],["C41","C44"],["C82","C83"],["CBE","CBE"],["CC0","CC4"],["CC7","CC8"],["CCA","CCB"],["CD5","CD6"],["D02","D03"],["D3E","D40"],["D46","D48"],["D4A","D4C"],["D57","D57"],["D82","D83"],["DCF","DD1"],["DD8","DDF"],["DF2","DF3"],["F3E","F3F"],["F7F","F7F"],["102B","102C"],["1031","1031"],["1038","1038"],["103B","103C"],["1056","1057"],["1062","1064"],["1067","106D"],["1083","1084"],["1087","108C"],["108F","108F"],["109A","109C"],["17B6","17B6"],["17BE","17C5"],["17C7","17C8"],["1923","1926"],["1929","192B"],["1930","1931"],["1933","1938"],["19B0","19C0"],["19C8","19C9"],["1A19","1A1B"],["1A55","1A55"],["1A57","1A57"],["1A61","1A61"],["1A63","1A64"],["1A6D","1A72"],["1B04","1B04"],["1B35","1B35"],["1B3B","1B3B"],["1B3D","1B41"],["1B43","1B44"],["1B82","1B82"],["1BA1","1BA1"],["1BA6","1BA7"],["1BAA","1BAA"],["1BAC","1BAD"],["1BE7","1BE7"],["1BEA","1BEC"],["1BEE","1BEE"],["1BF2","1BF3"],["1C24","1C2B"],["1C34","1C35"],["1CE1","1CE1"],["1CF2","1CF3"],["302E","302F"],["A823","A824"],["A827","A827"],["A880","A881"],["A8B4","A8C3"],["A952","A953"],["A983","A983"],["A9B4","A9B5"],["A9BA","A9BB"],["A9BD","A9C0"],["AA2F","AA30"],["AA33","AA34"],["AA4D","AA4D"],["AA7B","AA7B"],["AAEB","AAEB"],["AAEE","AAEF"],["AAF5","AAF5"],["ABE3","ABE4"],["ABE6","ABE7"],["ABE9","ABEA"],["ABEC","ABEC"],["11000","11000"],["11002","11002"],["11082","11082"],["110B0","110B2"],["110B7","110B8"],["1112C","1112C"],["11182","11182"],["111B3","111B5"],["111BF","111C0"],["116AC","116AC"],["116AE","116AF"],["116B6","116B6"],["16F51","16F7E"],["1D165","1D166"],["1D16D","1D172"]],Me:[["488","489"],["20DD","20E0"],["20E2","20E4"],["A670","A672"]],Mn:[["300","36F"],["483","487"],["591","5BD"],["5BF","5BF"],["5C1","5C2"],["5C4","5C5"],["5C7","5C7"],["610","61A"],["64B","65F"],["670","670"],["6D6","6DC"],["6DF","6E4"],["6E7","6E8"],["6EA","6ED"],["711","711"],["730","74A"],["7A6","7B0"],["7EB","7F3"],["816","819"],["81B","823"],["825","827"],["829","82D"],["859","85B"],["8E4","8FE"],["900","902"],["93A","93A"],["93C","93C"],["941","948"],["94D","94D"],["951","957"],["962","963"],["981","981"],["9BC","9BC"],["9C1","9C4"],["9CD","9CD"],["9E2","9E3"],["A01","A02"],["A3C","A3C"],["A41","A42"],["A47","A48"],["A4B","A4D"],["A51","A51"],["A70","A71"],["A75","A75"],["A81","A82"],["ABC","ABC"],["AC1","AC5"],["AC7","AC8"],["ACD","ACD"],["AE2","AE3"],["B01","B01"],["B3C","B3C"],["B3F","B3F"],["B41","B44"],["B4D","B4D"],["B56","B56"],["B62","B63"],["B82","B82"],["BC0","BC0"],["BCD","BCD"],["C3E","C40"],["C46","C48"],["C4A","C4D"],["C55","C56"],["C62","C63"],["CBC","CBC"],["CBF","CBF"],["CC6","CC6"],["CCC","CCD"],["CE2","CE3"],["D41","D44"],["D4D","D4D"],["D62","D63"],["DCA","DCA"],["DD2","DD4"],["DD6","DD6"],["E31","E31"],["E34","E3A"],["E47","E4E"],["EB1","EB1"],["EB4","EB9"],["EBB","EBC"],["EC8","ECD"],["F18","F19"],["F35","F35"],["F37","F37"],["F39","F39"],["F71","F7E"],["F80","F84"],["F86","F87"],["F8D","F97"],["F99","FBC"],["FC6","FC6"],["102D","1030"],["1032","1037"],["1039","103A"],["103D","103E"],["1058","1059"],["105E","1060"],["1071","1074"],["1082","1082"],["1085","1086"],["108D","108D"],["109D","109D"],["135D","135F"],["1712","1714"],["1732","1734"],["1752","1753"],["1772","1773"],["17B4","17B5"],["17B7","17BD"],["17C6","17C6"],["17C9","17D3"],["17DD","17DD"],["180B","180D"],["18A9","18A9"],["1920","1922"],["1927","1928"],["1932","1932"],["1939","193B"],["1A17","1A18"],["1A56","1A56"],["1A58","1A5E"],["1A60","1A60"],["1A62","1A62"],["1A65","1A6C"],["1A73","1A7C"],["1A7F","1A7F"],["1B00","1B03"],["1B34","1B34"],["1B36","1B3A"],["1B3C","1B3C"],["1B42","1B42"],["1B6B","1B73"],["1B80","1B81"],["1BA2","1BA5"],["1BA8","1BA9"],["1BAB","1BAB"],["1BE6","1BE6"],["1BE8","1BE9"],["1BED","1BED"],["1BEF","1BF1"],["1C2C","1C33"],["1C36","1C37"],["1CD0","1CD2"],["1CD4","1CE0"],["1CE2","1CE8"],["1CED","1CED"],["1CF4","1CF4"],["1DC0","1DE6"],["1DFC","1DFF"],["20D0","20DC"],["20E1","20E1"],["20E5","20F0"],["2CEF","2CF1"],["2D7F","2D7F"],["2DE0","2DFF"],["302A","302D"],["3099","309A"],["A66F","A66F"],["A674","A67D"],["A69F","A69F"],["A6F0","A6F1"],["A802","A802"],["A806","A806"],["A80B","A80B"],["A825","A826"],["A8C4","A8C4"],["A8E0","A8F1"],["A926","A92D"],["A947","A951"],["A980","A982"],["A9B3","A9B3"],["A9B6","A9B9"],["A9BC","A9BC"],["AA29","AA2E"],["AA31","AA32"],["AA35","AA36"],["AA43","AA43"],["AA4C","AA4C"],["AAB0","AAB0"],["AAB2","AAB4"],["AAB7","AAB8"],["AABE","AABF"],["AAC1","AAC1"],["AAEC","AAED"],["AAF6","AAF6"],["ABE5","ABE5"],["ABE8","ABE8"],["ABED","ABED"],["FB1E","FB1E"],["FE00","FE0F"],["FE20","FE26"],["101FD","101FD"],["10A01","10A03"],["10A05","10A06"],["10A0C","10A0F"],["10A38","10A3A"],["10A3F","10A3F"],["11001","11001"],["11038","11046"],["11080","11081"],["110B3","110B6"],["110B9","110BA"],["11100","11102"],["11127","1112B"],["1112D","11134"],["11180","11181"],["111B6","111BE"],["116AB","116AB"],["116AD","116AD"],["116B0","116B5"],["116B7","116B7"],["16F8F","16F92"],["1D167","1D169"],["1D17B","1D182"],["1D185","1D18B"],["1D1AA","1D1AD"],["1D242","1D244"],["E0100","E01EF"]],N:"Nd|Nl|No",Nd:[["30","39"],["660","669"],["6F0","6F9"],["7C0","7C9"],["966","96F"],["9E6","9EF"],["A66","A6F"],["AE6","AEF"],["B66","B6F"],["BE6","BEF"],["C66","C6F"],["CE6","CEF"],["D66","D6F"],["E50","E59"],["ED0","ED9"],["F20","F29"],["1040","1049"],["1090","1099"],["17E0","17E9"],["1810","1819"],["1946","194F"],["19D0","19D9"],["1A80","1A89"],["1A90","1A99"],["1B50","1B59"],["1BB0","1BB9"],["1C40","1C49"],["1C50","1C59"],["A620","A629"],["A8D0","A8D9"],["A900","A909"],["A9D0","A9D9"],["AA50","AA59"],["ABF0","ABF9"],["FF10","FF19"],["104A0","104A9"],["11066","1106F"],["110F0","110F9"],["11136","1113F"],["111D0","111D9"],["116C0","116C9"],["1D7CE","1D7FF"]],Nl:[["16EE","16F0"],["2160","2182"],["2185","2188"],["3007","3007"],["3021","3029"],["3038","303A"],["A6E6","A6EF"],["10140","10174"],["10341","10341"],["1034A","1034A"],["103D1","103D5"],["12400","12462"]],No:[["B2","B3"],["B9","B9"],["BC","BE"],["9F4","9F9"],["B72","B77"],["BF0","BF2"],["C78","C7E"],["D70","D75"],["F2A","F33"],["1369","137C"],["17F0","17F9"],["19DA","19DA"],["2070","2070"],["2074","2079"],["2080","2089"],["2150","215F"],["2189","2189"],["2460","249B"],["24EA","24FF"],["2776","2793"],["2CFD","2CFD"],["3192","3195"],["3220","3229"],["3248","324F"],["3251","325F"],["3280","3289"],["32B1","32BF"],["A830","A835"],["10107","10133"],["10175","10178"],["1018A","1018A"],["10320","10323"],["10858","1085F"],["10916","1091B"],["10A40","10A47"],["10A7D","10A7E"],["10B58","10B5F"],["10B78","10B7F"],["10E60","10E7E"],["11052","11065"],["1D360","1D371"],["1F100","1F10A"]],P:"Pc|Pd|Pe|Pf|Pi|Po|Ps",Pc:[["5F","5F"],["203F","2040"],["2054","2054"],["FE33","FE34"],["FE4D","FE4F"],["FF3F","FF3F"]],Pd:[["2D","2D"],["58A","58A"],["5BE","5BE"],["1400","1400"],["1806","1806"],["2010","2015"],["2E17","2E17"],["2E1A","2E1A"],["2E3A","2E3B"],["301C","301C"],["3030","3030"],["30A0","30A0"],["FE31","FE32"],["FE58","FE58"],["FE63","FE63"],["FF0D","FF0D"]],Pe:[["29","29"],["5D","5D"],["7D","7D"],["F3B","F3B"],["F3D","F3D"],["169C","169C"],["2046","2046"],["207E","207E"],["208E","208E"],["232A","232A"],["2769","2769"],["276B","276B"],["276D","276D"],["276F","276F"],["2771","2771"],["2773","2773"],["2775","2775"],["27C6","27C6"],["27E7","27E7"],["27E9","27E9"],["27EB","27EB"],["27ED","27ED"],["27EF","27EF"],["2984","2984"],["2986","2986"],["2988","2988"],["298A","298A"],["298C","298C"],["298E","298E"],["2990","2990"],["2992","2992"],["2994","2994"],["2996","2996"],["2998","2998"],["29D9","29D9"],["29DB","29DB"],["29FD","29FD"],["2E23","2E23"],["2E25","2E25"],["2E27","2E27"],["2E29","2E29"],["3009","3009"],["300B","300B"],["300D","300D"],["300F","300F"],["3011","3011"],["3015","3015"],["3017","3017"],["3019","3019"],["301B","301B"],["301E","301F"],["FD3F","FD3F"],["FE18","FE18"],["FE36","FE36"],["FE38","FE38"],["FE3A","FE3A"],["FE3C","FE3C"],["FE3E","FE3E"],["FE40","FE40"],["FE42","FE42"],["FE44","FE44"],["FE48","FE48"],["FE5A","FE5A"],["FE5C","FE5C"],["FE5E","FE5E"],["FF09","FF09"],["FF3D","FF3D"],["FF5D","FF5D"],["FF60","FF60"],["FF63","FF63"]],Pf:[["BB","BB"],["2019","2019"],["201D","201D"],["203A","203A"],["2E03","2E03"],["2E05","2E05"],["2E0A","2E0A"],["2E0D","2E0D"],["2E1D","2E1D"],["2E21","2E21"]],Pi:[["AB","AB"],["2018","2018"],["201B","201C"],["201F","201F"],["2039","2039"],["2E02","2E02"],["2E04","2E04"],["2E09","2E09"],["2E0C","2E0C"],["2E1C","2E1C"],["2E20","2E20"]],Po:[["21","23"],["25","27"],["2A","2A"],["2C","2C"],["2E","2F"],["3A","3B"],["3F","40"],["5C","5C"],["A1","A1"],["A7","A7"],["B6","B7"],["BF","BF"],["37E","37E"],["387","387"],["55A","55F"],["589","589"],["5C0","5C0"],["5C3","5C3"],["5C6","5C6"],["5F3","5F4"],["609","60A"],["60C","60D"],["61B","61B"],["61E","61F"],["66A","66D"],["6D4","6D4"],["700","70D"],["7F7","7F9"],["830","83E"],["85E","85E"],["964","965"],["970","970"],["AF0","AF0"],["DF4","DF4"],["E4F","E4F"],["E5A","E5B"],["F04","F12"],["F14","F14"],["F85","F85"],["FD0","FD4"],["FD9","FDA"],["104A","104F"],["10FB","10FB"],["1360","1368"],["166D","166E"],["16EB","16ED"],["1735","1736"],["17D4","17D6"],["17D8","17DA"],["1800","1805"],["1807","180A"],["1944","1945"],["1A1E","1A1F"],["1AA0","1AA6"],["1AA8","1AAD"],["1B5A","1B60"],["1BFC","1BFF"],["1C3B","1C3F"],["1C7E","1C7F"],["1CC0","1CC7"],["1CD3","1CD3"],["2016","2017"],["2020","2027"],["2030","2038"],["203B","203E"],["2041","2043"],["2047","2051"],["2053","2053"],["2055","205E"],["2CF9","2CFC"],["2CFE","2CFF"],["2D70","2D70"],["2E00","2E01"],["2E06","2E08"],["2E0B","2E0B"],["2E0E","2E16"],["2E18","2E19"],["2E1B","2E1B"],["2E1E","2E1F"],["2E2A","2E2E"],["2E30","2E39"],["3001","3003"],["303D","303D"],["30FB","30FB"],["A4FE","A4FF"],["A60D","A60F"],["A673","A673"],["A67E","A67E"],["A6F2","A6F7"],["A874","A877"],["A8CE","A8CF"],["A8F8","A8FA"],["A92E","A92F"],["A95F","A95F"],["A9C1","A9CD"],["A9DE","A9DF"],["AA5C","AA5F"],["AADE","AADF"],["AAF0","AAF1"],["ABEB","ABEB"],["FE10","FE16"],["FE19","FE19"],["FE30","FE30"],["FE45","FE46"],["FE49","FE4C"],["FE50","FE52"],["FE54","FE57"],["FE5F","FE61"],["FE68","FE68"],["FE6A","FE6B"],["FF01","FF03"],["FF05","FF07"],["FF0A","FF0A"],["FF0C","FF0C"],["FF0E","FF0F"],["FF1A","FF1B"],["FF1F","FF20"],["FF3C","FF3C"],["FF61","FF61"],["FF64","FF65"],["10100","10102"],["1039F","1039F"],["103D0","103D0"],["10857","10857"],["1091F","1091F"],["1093F","1093F"],["10A50","10A58"],["10A7F","10A7F"],["10B39","10B3F"],["11047","1104D"],["110BB","110BC"],["110BE","110C1"],["11140","11143"],["111C5","111C8"],["12470","12473"]],Ps:[["28","28"],["5B","5B"],["7B","7B"],["F3A","F3A"],["F3C","F3C"],["169B","169B"],["201A","201A"],["201E","201E"],["2045","2045"],["207D","207D"],["208D","208D"],["2329","2329"],["2768","2768"],["276A","276A"],["276C","276C"],["276E","276E"],["2770","2770"],["2772","2772"],["2774","2774"],["27C5","27C5"],["27E6","27E6"],["27E8","27E8"],["27EA","27EA"],["27EC","27EC"],["27EE","27EE"],["2983","2983"],["2985","2985"],["2987","2987"],["2989","2989"],["298B","298B"],["298D","298D"],["298F","298F"],["2991","2991"],["2993","2993"],["2995","2995"],["2997","2997"],["29D8","29D8"],["29DA","29DA"],["29FC","29FC"],["2E22","2E22"],["2E24","2E24"],["2E26","2E26"],["2E28","2E28"],["3008","3008"],["300A","300A"],["300C","300C"],["300E","300E"],["3010","3010"],["3014","3014"],["3016","3016"],["3018","3018"],["301A","301A"],["301D","301D"],["FD3E","FD3E"],["FE17","FE17"],["FE35","FE35"],["FE37","FE37"],["FE39","FE39"],["FE3B","FE3B"],["FE3D","FE3D"],["FE3F","FE3F"],["FE41","FE41"],["FE43","FE43"],["FE47","FE47"],["FE59","FE59"],["FE5B","FE5B"],["FE5D","FE5D"],["FF08","FF08"],["FF3B","FF3B"],["FF5B","FF5B"],["FF5F","FF5F"],["FF62","FF62"]],S:"Sc|Sk|Sm|So",Sc:[["24","24"],["A2","A5"],["58F","58F"],["60B","60B"],["9F2","9F3"],["9FB","9FB"],["AF1","AF1"],["BF9","BF9"],["E3F","E3F"],["17DB","17DB"],["20A0","20BA"],["A838","A838"],["FDFC","FDFC"],["FE69","FE69"],["FF04","FF04"],["FFE0","FFE1"],["FFE5","FFE6"]],Sk:[["5E","5E"],["60","60"],["A8","A8"],["AF","AF"],["B4","B4"],["B8","B8"],["2C2","2C5"],["2D2","2DF"],["2E5","2EB"],["2ED","2ED"],["2EF","2FF"],["375","375"],["384","385"],["1FBD","1FBD"],["1FBF","1FC1"],["1FCD","1FCF"],["1FDD","1FDF"],["1FED","1FEF"],["1FFD","1FFE"],["309B","309C"],["A700","A716"],["A720","A721"],["A789","A78A"],["FBB2","FBC1"],["FF3E","FF3E"],["FF40","FF40"],["FFE3","FFE3"]],Sm:[["2B","2B"],["3C","3E"],["7C","7C"],["7E","7E"],["AC","AC"],["B1","B1"],["D7","D7"],["F7","F7"],["3F6","3F6"],["606","608"],["2044","2044"],["2052","2052"],["207A","207C"],["208A","208C"],["2118","2118"],["2140","2144"],["214B","214B"],["2190","2194"],["219A","219B"],["21A0","21A0"],["21A3","21A3"],["21A6","21A6"],["21AE","21AE"],["21CE","21CF"],["21D2","21D2"],["21D4","21D4"],["21F4","22FF"],["2308","230B"],["2320","2321"],["237C","237C"],["239B","23B3"],["23DC","23E1"],["25B7","25B7"],["25C1","25C1"],["25F8","25FF"],["266F","266F"],["27C0","27C4"],["27C7","27E5"],["27F0","27FF"],["2900","2982"],["2999","29D7"],["29DC","29FB"],["29FE","2AFF"],["2B30","2B44"],["2B47","2B4C"],["FB29","FB29"],["FE62","FE62"],["FE64","FE66"],["FF0B","FF0B"],["FF1C","FF1E"],["FF5C","FF5C"],["FF5E","FF5E"],["FFE2","FFE2"],["FFE9","FFEC"],["1D6C1","1D6C1"],["1D6DB","1D6DB"],["1D6FB","1D6FB"],["1D715","1D715"],["1D735","1D735"],["1D74F","1D74F"],["1D76F","1D76F"],["1D789","1D789"],["1D7A9","1D7A9"],["1D7C3","1D7C3"],["1EEF0","1EEF1"]],So:[["A6","A6"],["A9","A9"],["AE","AE"],["B0","B0"],["482","482"],["60E","60F"],["6DE","6DE"],["6E9","6E9"],["6FD","6FE"],["7F6","7F6"],["9FA","9FA"],["B70","B70"],["BF3","BF8"],["BFA","BFA"],["C7F","C7F"],["D79","D79"],["F01","F03"],["F13","F13"],["F15","F17"],["F1A","F1F"],["F34","F34"],["F36","F36"],["F38","F38"],["FBE","FC5"],["FC7","FCC"],["FCE","FCF"],["FD5","FD8"],["109E","109F"],["1390","1399"],["1940","1940"],["19DE","19FF"],["1B61","1B6A"],["1B74","1B7C"],["2100","2101"],["2103","2106"],["2108","2109"],["2114","2114"],["2116","2117"],["211E","2123"],["2125","2125"],["2127","2127"],["2129","2129"],["212E","212E"],["213A","213B"],["214A","214A"],["214C","214D"],["214F","214F"],["2195","2199"],["219C","219F"],["21A1","21A2"],["21A4","21A5"],["21A7","21AD"],["21AF","21CD"],["21D0","21D1"],["21D3","21D3"],["21D5","21F3"],["2300","2307"],["230C","231F"],["2322","2328"],["232B","237B"],["237D","239A"],["23B4","23DB"],["23E2","23F3"],["2400","2426"],["2440","244A"],["249C","24E9"],["2500","25B6"],["25B8","25C0"],["25C2","25F7"],["2600","266E"],["2670","26FF"],["2701","2767"],["2794","27BF"],["2800","28FF"],["2B00","2B2F"],["2B45","2B46"],["2B50","2B59"],["2CE5","2CEA"],["2E80","2E99"],["2E9B","2EF3"],["2F00","2FD5"],["2FF0","2FFB"],["3004","3004"],["3012","3013"],["3020","3020"],["3036","3037"],["303E","303F"],["3190","3191"],["3196","319F"],["31C0","31E3"],["3200","321E"],["322A","3247"],["3250","3250"],["3260","327F"],["328A","32B0"],["32C0","32FE"],["3300","33FF"],["4DC0","4DFF"],["A490","A4C6"],["A828","A82B"],["A836","A837"],["A839","A839"],["AA77","AA79"],["FDFD","FDFD"],["FFE4","FFE4"],["FFE8","FFE8"],["FFED","FFEE"],["FFFC","FFFD"],["10137","1013F"],["10179","10189"],["10190","1019B"],["101D0","101FC"],["1D000","1D0F5"],["1D100","1D126"],["1D129","1D164"],["1D16A","1D16C"],["1D183","1D184"],["1D18C","1D1A9"],["1D1AE","1D1DD"],["1D200","1D241"],["1D245","1D245"],["1D300","1D356"],["1F000","1F02B"],["1F030","1F093"],["1F0A0","1F0AE"],["1F0B1","1F0BE"],["1F0C1","1F0CF"],["1F0D1","1F0DF"],["1F110","1F12E"],["1F130","1F16B"],["1F170","1F19A"],["1F1E6","1F202"],["1F210","1F23A"],["1F240","1F248"],["1F250","1F251"],["1F300","1F320"],["1F330","1F335"],["1F337","1F37C"],["1F380","1F393"],["1F3A0","1F3C4"],["1F3C6","1F3CA"],["1F3E0","1F3F0"],["1F400","1F43E"],["1F440","1F440"],["1F442","1F4F7"],["1F4F9","1F4FC"],["1F500","1F53D"],["1F540","1F543"],["1F550","1F567"],["1F5FB","1F640"],["1F645","1F64F"],["1F680","1F6C5"],["1F700","1F773"]],Z:"Zl|Zp|Zs",Zl:[["2028","2028"]],Zp:[["2029","2029"]],Zs:[["20","20"],["A0","A0"],["1680","1680"],["180E","180E"],["2000","200A"],["202F","202F"],["205F","205F"],["3000","3000"]],"~i":[["3A","3A"],["41","5A"],["5F","5F"],["61","7A"],["C0","D6"],["D8","F6"],["F8","2FF"],["370","37D"],["37F","1FFF"],["200C","200D"],["2070","218F"],["2C00","2FEF"],["3001","D7FF"],["F900","FDCF"],["FDF0","FFFD"],["10000","EFFFF"]],"~c":[["2D","2E"],["30","3A"],["41","5A"],["5F","5F"],["61","7A"],["B7","B7"],["C0","D6"],["D8","F6"],["F8","37D"],["37F","1FFF"],["200C","200D"],["203F","2040"],["2070","218F"],["2C00","2FEF"],["3001","D7FF"],["F900","FDCF"],["FDF0","FFFD"],["10000","EFFFF"]],w:"Ll|Lm|Lo|Lt|Lu|Mc|Me|Mn|Nd|Nl|No|Sc|Sk|Sm|So"},functions:{"http://www.w3.org/2005/xpath-functions":{QName:[2],abs:[1],"accumulator-after":[1],"accumulator-before":[1],"adjust-date-to-timezone":[1,2],"adjust-dateTime-to-timezone":[1,2],"adjust-time-to-timezone":[1,2],"analyze-string":[2,3],apply:[2],"available-environment-variables":[0],"available-system-properties":[0],avg:[1],"base-uri":[0,1],boolean:[1],ceiling:[1],"codepoint-equal":[2],"codepoints-to-string":[1],"collation-key":[1,2],collection:[0,1],compare:[2,3],concat:[3],contains:[2,3],"contains-token":[2,3],"copy-of":[0,1],count:[1],current:[0],"current-date":[0],"current-dateTime":[0],"current-group":[0],"current-grouping-key":[0],"current-merge-group":[0,1],"current-merge-key":[0],"current-output-uri":[0],"current-time":[0],data:[0,1],dateTime:[2],"day-from-date":[1],"day-from-dateTime":[1],"days-from-duration":[1],"deep-equal":[2,3],"default-collation":[0],"default-language":[0],"distinct-values":[1,2],doc:[1],"doc-available":[1],document:[1,2],"document-uri":[0,1],"element-available":[1],"element-with-id":[1,2],empty:[1],"encode-for-uri":[1],"ends-with":[2,3],"environment-variable":[1],error:[0,1,2,3],"escape-html-uri":[1],"exactly-one":[1],exists:[1],false:[0],filter:[2],floor:[1],"fold-left":[3],"fold-right":[3],"for-each":[2],"for-each-pair":[3],"format-date":[2,5],"format-dateTime":[2,5],"format-integer":[2,3],"format-number":[2,3],"format-time":[2,5],"function-arity":[1],"function-available":[1,2],"function-lookup":[2],"function-name":[1],"generate-id":[0,1],"has-children":[0,1],head:[1],"hours-from-dateTime":[1],"hours-from-duration":[1],"hours-from-time":[1],id:[1,2],idref:[1,2],"implicit-timezone":[0],"in-scope-prefixes":[1],"index-of":[2,3],innermost:[1],"insert-before":[3],"iri-to-uri":[1],"json-doc":[1,2],"json-to-xml":[1,2],key:[2,3],lang:[1,2],last:[0],"load-xquery-module":[1,2],"local-name":[0,1],"local-name-from-QName":[1],"lower-case":[1],matches:[2,3],max:[1,2],min:[1,2],"minutes-from-dateTime":[1],"minutes-from-duration":[1],"minutes-from-time":[1],"month-from-date":[1],"month-from-dateTime":[1],"months-from-duration":[1],name:[0,1],"namespace-uri":[0,1],"namespace-uri-for-prefix":[2],"namespace-uri-from-QName":[1],nilled:[0,1],"node-name":[0,1],"normalize-space":[0,1],"normalize-unicode":[1,2],not:[1],number:[0,1],"one-or-more":[1],outermost:[1],"parse-ietf-date":[1],"parse-json":[1,2],"parse-xml":[1],"parse-xml-fragment":[1],path:[0,1],position:[0],"prefix-from-QName":[1],put:[2],"random-number-generator":[0,1],"regex-group":[1],remove:[2],replace:[3,4],"resolve-QName":[2],"resolve-uri":[1,2],reverse:[1],root:[0,1],round:[1,2],"round-half-to-even":[1,2],"seconds-from-dateTime":[1],"seconds-from-duration":[1],"seconds-from-time":[1],serialize:[1,2],"serialize-json":[1,2],snapshot:[0,1],sort:[1,3],"starts-with":[2,3],"static-base-uri":[0],"stream-available":[1],string:[0,1],"string-join":[1,2],"string-length":[0,1],"string-to-codepoints":[1],subsequence:[2,3],substring:[2,3],"substring-after":[2,3],"substring-before":[2,3],sum:[1,2],"system-property":[1],tail:[1],"timezone-from-date":[1],"timezone-from-dateTime":[1],"timezone-from-time":[1],tokenize:[1,2,3],trace:[1,2],transform:[1],translate:[3],true:[0],"type-available":[1],unordered:[1],"unparsed-entity-public-id":[1,2],"unparsed-entity-uri":[1,2],"unparsed-text":[1,2],"unparsed-text-available":[1,2],"unparsed-text-lines":[1,2],"upper-case":[1],"uri-collection":[0,1],"xml-to-json":[1,2],"year-from-date":[1],"year-from-dateTime":[1],"years-from-duration":[1],"zero-or-one":[1]},"http://www.w3.org/2005/xpath-functions/array":{append:[2],filter:[2],flatten:[1],"fold-left":[3],"fold-right":[3],"for-each":[2],"for-each-pair":[3],get:[2],head:[1],"insert-before":[3],join:[1],remove:[2],reverse:[1],size:[1],sort:[1,2],subarray:[2,3],tail:[1]},"http://www.w3.org/2005/xpath-functions/map":{contains:[2],entry:[2],"for-each":[2],get:[2],keys:[1],merge:[1],put:[3],remove:[2],size:[1]},"http://www.w3.org/2005/xpath-functions/math":{acos:[1],asin:[1],atan:[1],atan2:[2],cos:[1],exp:[1],exp10:[1],log:[1],log10:[1],pi:[0],pow:[2],sin:[1],sqrt:[1],tan:[1]},"http://www.w3.org/2001/XMLSchema":{numeric:[1],string:[1],boolean:[1],duration:[1],dateTime:[1],date:[1],time:[1],gYearMonth:[1],gMonth:[1],gMonthDay:[1],gYear:[1],gDay:[1],hexBinary:[1],base64Binary:[1],anyURI:[1],QName:[1],untypedAtomic:[1],decimal:[1],float:[1],double:[1],integer:[1],nonPositiveInteger:[1],negativeInteger:[1],long:[1],int:[1],short:[1],byte:[1],nonNegativeInteger:[1],positiveInteger:[1],unsignedLong:[1],unsignedInt:[1],unsignedShort:[1],unsignedByte:[1],yearMonthDuration:[1],dayTimeDuration:[1],dateTimeStamp:[1],normalizedString:[1],token:[1],language:[1],Name:[1],NMTOKEN:[1],NCName:[1],ID:[1],IDREF:[1],ENTITY:[1],NMTOKENS:[1],ENTITIES:[1],IDREFS:[1],error:[1]},"http://saxonica.com/ns/interactiveXSLT":{apply:[2],call:[3],contains:[2],eval:[1],event:[0],get:[2],location:[0],page:[0],"query-params":[0],source:[0],style:[1],window:[0]}},elements:{accept:{},accumulator:{},"accumulator-rule":{},"analyze-string":{},"apply-imports":{},"apply-templates":{},assert:{},attribute:{},"attribute-set":{},break:{},"call-template":{},catch:{},"character-map":{},choose:{},comment:{},"context-item":{},copy:{},"copy-of":{},"decimal-format":{},document:{},element:{},evaluate:{},expose:{},fallback:{},"for-each":{},"for-each-group":{},fork:{},function:{},"global-context-item":{},if:{},import:{},include:{},iterate:{},key:{},map:{},"map-entry":{},"matching-substring":{},merge:{},"merge-action":{},"merge-key":{},"merge-source":{},message:{},mode:{},namespace:{},"namespace-alias":{},"next-iteration":{},"next-match":{},"non-matching-substring":{},number:{},"on-completion":{},"on-empty":{},"on-non-empty":{},otherwise:{},output:{},"output-character":{},override:{},package:{},param:{},"perform-sort":{},"preserve-space":{},"processing-instruction":{},"result-document":{},sequence:{},sort:{},"source-document":{},"strip-space":{},stylesheet:{},template:{},text:{},transform:{},try:{},"use-package":{},"value-of":{},variable:{},when:{},"where-populated":{},"with-param":{}},compiler:{}};let J=function(){let e;return{getPlatform:function(){return e},zj:function(t){e=t},$g:function(){return e.name},ah:function(){return e.edition},createDocument:function(){return e.createDocument()},Ig:function(t,i,f,v){return e.decodeBuffer(t,i,f,v)},ki:function(t){return e.encodeToBase64(t)},Yg:function(){return e.getDefaultDeliverMessage()},ra:function(){return e.inBrowser()},Qb:function(t){return e.isHTMLElement(t)},aj:function(t,i){return e.makeBuffer(t,i)},Sb:function(t,i=!0,f=null){return e.parseXmlFromString(t,i,f)},ve:function(t){return e.readFile(t)},fg:function(t,i){return e.readFileSync(t,i)},sj:function(t,i){return e.readFilePromise(t,i)},xe:function(t){return e.resource(t)},ec:function(t){return e.resourcePromise(t)},pb:function(t,i){return e.resolveUri(t,i)},xa:function(t){return e.saxonPrint(t)},newURL:function(t,i){return e.newURL(t,i)},Mf:function(t){return e.fileURL(t)},Df:function(){return e.baseURL()},Jh:function(t,i,f){return e.writeFileSync(t,i,f)},Ih:function(t,i,f){return e.writeFileAsync(t,i,f)},Gi:function(){return e.getStdOut()},crypto:function(t){return e.crypto(t)},Ij:function(){return e.xdmDTlocale()},Hi:function(){return e.globalObject},addEventListener:function(t,i,f,v){return e.addEventListener(t,i,f,v)}}}(),lt=0;function ot(){return lt}function ct(){lt=0}class A extends Error{constructor(t="SaxonJS run-time error",i="FORG0001",f=null){super(),this.name="XError",this.message=t,this.code=i,f?this.setExpr(f):this.xsltModule=this.xsltLineNr=null,this.errorObject=null,this.g=!1,lt++}toString(){return this.name+":"+this.message+"; code:"+this.code}setExpr(t){function i(f,v){for(;f;){if(f[v])return f[v];f=f.parentNode}return null}this.xsltLineNr=i(t,"line"),this.xsltModule=i(t,"module")}getStackTrace(){return null.getStackTrace()}getMessage(){let t="Error "+this.code;return this.xsltLineNr!=null&&(t+=" at "+this.xsltModule+"#"+this.xsltLineNr),t+=`
  `+this.message}getRawMessage(){return this.message}getErrorCode(){return this.code}getOriginatingModule(){return this.xsltModule}getOriginatingLineNr(){return this.xsltLineNr}}let Z=function(){function e(l){throw v("Internal error: "+l+`
`+Error().stack),new A("Internal error: "+l,"SXJS0004")}function t(l){if(l===null)return"#null";if(typeof l>"u")return"#undefined";let F;if(l.showValue)return l.showValue();if(l.N)return"expression "+l.N;if(a&&a.U(l)){if(a.me(l))return"attribute @"+l.name+"='"+l.value+"'";if(a.Ed(l))return"ns:"+l.prefix+"="+l.uri;if(F={1:"element <"+l.tagName+">",2:"attribute @"+l.name,3:"text:"+(l.nodeValue?l.nodeValue.substring(0,8):"''"),7:"pi: "+l.target+"("+l.tagName+")",8:"comment ("+l.nodeValue+")",9:"document "+(l._saxonDocumentNumber?"#"+l._saxonDocumentNumber:"(No nr / #0)"),11:"docFrag"}[l.nodeType],l.nodeType==="9"||l.nodeType==="11"){var S;for(S=0;S<l.childNodes.length;S++)F+="~>"+t(l.childNodes[S])}return F}if(l.code)return"atomic:"+l.code+"('"+l.toString()+"')";if(typeof l=="object"&&"length"in l){if(l.length===1)return t(l[0]);for(F="(",S=0;S<l.length&&3>S;S++)S!==0&&(F+=","),F+=t(l[S]);return 4<=l.length&&(F+=",...("+l.length+")"),F+")"}return typeof l=="function"?l.toString():"("+typeof l+") "+l}function i(l){return"{'N':'"+l.N+"','C':["+(l.C||[]).map(F=>i(F)).join(",")+"]}"}function f(l,F){for(;l;){if(l[F])return l[F];l=l.parentNode}return null}function v(l,F=1,S){let O=u;S&&(O=S),F<=O&&J.xa(l)}let a,u=1;return Error.stackTraceLimit=100,{assert:function(l,F="assertion failed"){l||e(F)},ka:e,location:function(l){return f(l,"module")+"#"+f(l,"line")},tj:function(l){a=l},xa:v,showValue:t,yh:function(l){return l.showValue?l.showValue():a&&a.U(l)?t(l):l.code?"atomic:"+l.code+"('"+l.toString()+"')":l.Bi?l.toString():"("+typeof l+") "+l},Bj:function(l){if(!l)return"null expr";let F=l.N||"?";for(let S in l)l.hasOwnProperty(S)&&!["C","N","parentNode","ELAB","PUSH"].includes(S)&&(F+=" "+S+"="+l[S]);return l.C&&(F+=" ("+l.C.map(S=>S.N).join(",")+")"),F+=" at "+this.location(l)},jl:i,getLogLevel:function(){return u},setLogLevel:function(l){typeof l=="number"&&(u=l)}}}(),gt=function(){function e(){function a(u){if(!(this instanceof a))return u===void 0?e():new a(u);if(u instanceof a)this.ia=u.ia,this.e=u.e,this.c=u.c.slice();else{if(typeof u!="string"){if(a.ig===!0)throw TypeError("[big.js] Invalid number");u=u===0&&0>1/u?"-0":String(u)}var l,F;if(!v.test(u))throw Error("[big.js] Invalid number");this.ia=u.charAt(0)=="-"?(u=u.slice(1),-1):1,-1<(l=u.indexOf("."))&&(u=u.replace(".","")),0<(F=u.search(/e/i))?(0>l&&(l=F),l+=+u.slice(F+1),u=u.substring(0,F)):0>l&&(l=u.length);var S=u.length;for(F=0;F<S&&u.charAt(F)=="0";)++F;if(F==S)this.c=[this.e=0];else{for(;0<S&&u.charAt(--S)=="0";);for(this.e=l-F-1,this.c=[],l=0;F<=S;)this.c[l++]=+u.charAt(F++)}}this.constructor=a}return a.prototype=f,a.sc=20,a.xd=1,a.qf=-7,a.vf=21,a.ig=!1,a}function t(a,u,l,F){var S=a.c;if(l===void 0&&(l=a.constructor.xd),l!==0&&l!==1&&l!==2&&l!==3)throw Error("[big.js] Invalid rounding mode");if(1>u)F=l===3&&(F||!!S[0])||u===0&&(l===1&&5<=S[0]||l===2&&(5<S[0]||S[0]===5&&(F||S[1]!==void 0))),S.length=1,F?(a.e=a.e-u+1,S[0]=1):S[0]=a.e=0;else if(u<S.length){if(F=l===1&&5<=S[u]||l===2&&(5<S[u]||S[u]===5&&(F||S[u+1]!==void 0||S[u-1]&1))||l===3&&(F||!!S[0]),S.length=u--,F)for(;9<++S[u];)S[u]=0,u--||(++a.e,S.unshift(1));for(u=S.length;!S[--u];)S.pop()}return a}function i(a,u,l){var F=a.e,S=a.c.join(""),O=S.length;if(u)S=S.charAt(0)+(1<O?"."+S.slice(1):"")+(0>F?"e":"e+")+F;else if(0>F){for(;++F;)S="0"+S;S="0."+S}else if(0<F)if(++F>O)for(F-=O;F--;)S+="0";else F<O&&(S=S.slice(0,F)+"."+S.slice(F));else 1<O&&(S=S.charAt(0)+"."+S.slice(1));return 0>a.ia&&l?"-"+S:S}let f={},v=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;return f.abs=function(){var a=new this.constructor(this);return a.ia=1,a},f.cmp=function(a){var u=this.c,l=(a=new this.constructor(a)).c,F=this.ia,S=a.ia,O=this.e,k=a.e;if(!u[0]||!l[0])return u[0]?F:l[0]?-S:0;if(F!=S)return F;if(a=0>F,O!=k)return O>k^a?1:-1;for(S=(O=u.length)<(k=l.length)?O:k,F=-1;++F<S;)if(u[F]!=l[F])return u[F]>l[F]^a?1:-1;return O==k?0:O>k^a?1:-1},f.Nb=function(a){var u=this.constructor,l=this.c,F=(a=new u(a)).c,S=this.ia==a.ia?1:-1,O=u.sc;if(O!==~~O||0>O||1e6<O)throw Error("[big.js] Invalid decimal places");if(!F[0])throw Error("[big.js] Division by zero");if(!l[0])return a.ia=S,a.c=[a.e=0],a;var k,d=F.slice(),o=k=F.length,E=l.length,T=l.slice(0,k),C=T.length,n=a,r=n.c=[],h=0,m=O+(n.e=this.e-a.e)+1;for(n.ia=S,S=0>m?0:m,d.unshift(0);C++<k;)T.push(0);do{for(O=0;10>O;O++){if(k!=(C=T.length))var c=k>C?1:-1;else{var _=-1;for(c=0;++_<k;)if(F[_]!=T[_]){c=F[_]>T[_]?1:-1;break}}if(0>c){for(a=C==k?F:d;C;){if(T[--C]<a[C]){for(_=C;_&&!T[--_];)T[_]=9;--T[_],T[C]+=10}T[C]-=a[C]}for(;!T[0];)T.shift()}else break}r[h++]=c?O:++O,T[0]&&c?T[C]=l[o]||0:T=[l[o]]}while((o++<E||T[0]!==void 0)&&S--);return r[0]||h==1||(r.shift(),n.e--,m--),h>m&&t(n,m,u.xd,T[0]!==void 0),n},f.Sg=function(a){return this.cmp(a)===0},f.Mk=function(a){return 0<this.cmp(a)},f.Nk=function(a){return-1<this.cmp(a)},f.$i=function(){var a=gt(2).pow(52);return 0>this.cmp(a)},f.Xk=function(a){return 1>this.cmp(a)},f.Hd=f.sub=function(a){var u=this.constructor,l=this.ia,F=(a=new u(a)).ia;if(l!=F)return a.ia=-F,this.qd(a);var S=this.c.slice(),O=this.e,k=a.c,d=a.e;if(!S[0]||!k[0])return k[0]?a.ia=-F:S[0]?a=new u(this):a.ia=1,a;if(l=O-d){for((u=0>l)?(l=-l,O=S):(d=O,O=k),O.reverse(),F=l;F--;)O.push(0);O.reverse()}else for(O=((u=S.length<k.length)?S:k).length,l=F=0;F<O;F++)if(S[F]!=k[F]){u=S[F]<k[F];break}if(u&&(O=S,S=k,k=O,a.ia=-a.ia),0<(F=(O=k.length)-(u=S.length)))for(;F--;)S[u++]=0;for(F=u;O>l;){if(S[--O]<k[O]){for(u=O;u&&!S[--u];)S[u]=9;--S[u],S[O]+=10}S[O]-=k[O]}for(;S[--F]===0;)S.pop();for(;S[0]===0;)S.shift(),--d;return S[0]||(a.ia=1,S=[d=0]),a.c=S,a.e=d,a},f.$e=function(a){var u=this,l=u.constructor,F=u.ia,S=(a=new l(a)).ia;if(!a.c[0])throw Error("[big.js] Division by zero");u.ia=a.ia=1;var O=a.cmp(u)==1;return u.ia=F,a.ia=S,O?new l(u):(F=l.sc,S=l.xd,l.sc=l.xd=0,u=u.Nb(a),l.sc=F,l.xd=S,this.Hd(u.Vb(a)))},f.qd=f.add=function(a){var u=this.constructor;if(a=new u(a),this.ia!=a.ia)return a.ia=-a.ia,this.Hd(a);var l=this.e,F=this.c,S=a.e,O=a.c;if(!F[0]||!O[0])return O[0]||(F[0]?a=new u(this):a.ia=this.ia),a;if(F=F.slice(),u=l-S){for(0<u?(S=l,l=O):(u=-u,l=F),l.reverse();u--;)l.push(0);l.reverse()}for(0>F.length-O.length&&(l=O,O=F,F=l),u=O.length,l=0;u;F[u]%=10)l=(F[--u]=F[u]+O[u]+l)/10|0;for(l&&(F.unshift(l),++S),u=F.length;F[--u]===0;)F.pop();return a.c=F,a.e=S,a},f.pow=function(a){var u=this,l=new u.constructor("1"),F=l,S=0>a;if(a!==~~a||-1e6>a||1e6<a)throw Error("[big.js] Invalid exponent");for(S&&(a=-a);a&1&&(F=F.Vb(u)),a>>=1,!!a;)u=u.Vb(u);return S?l.Nb(F):F},f.ob=function(a,u){if(a!==~~a||1>a||1e6<a)throw Error("[big.js] Invalid precision");return t(new this.constructor(this),a,u)},f.round=function(a,u){if(a===void 0)a=0;else if(a!==~~a||-1e6>a||1e6<a)throw Error("[big.js] Invalid decimal places");return t(new this.constructor(this),a+this.e+1,u)},f.sqrt=function(){var a=this.constructor,u=this.ia,l=this.e,F=new a("0.5");if(!this.c[0])return new a(this);if(0>u)throw Error("[big.js] No square root");if(u=Math.sqrt(this+""),u===0||u===1/0){var S=this.c.join("");S.length+l&1||(S+="0"),u=Math.sqrt(S),l=((l+1)/2|0)-(0>l||l&1),S=new a((u==1/0?"5e":(u=u.toExponential()).slice(0,u.indexOf("e")+1))+l)}else S=new a(u+"");l=S.e+(a.sc+=4);do u=S,S=F.Vb(u.qd(this.Nb(u)));while(u.c.slice(0,l).join("")!==S.c.slice(0,l).join(""));return t(S,(a.sc-=4)+S.e+1,a.xd)},f.Vb=f.bl=function(a){var u=this.c,l=(a=new this.constructor(a)).c,F=u.length,S=l.length,O=this.e,k=a.e;if(a.ia=this.ia==a.ia?1:-1,!u[0]||!l[0])return a.c=[a.e=0],a;if(a.e=O+k,F<S){var d=u;u=l,l=d,k=F,F=S,S=k}for(d=Array(k=F+S);k--;)d[k]=0;for(O=S;O--;){for(S=0,k=F+O;k>O;)S=d[k]+l[O]*u[k-O-1]+S,d[k--]=S%10,S=S/10|0;d[k]=S}for(S?++a.e:d.shift(),O=d.length;!d[--O];)d.pop();return a.c=d,a},f.toExponential=function(a,u){var l=this,F=l.c[0];if(a!==void 0){if(a!==~~a||0>a||1e6<a)throw Error("[big.js] Invalid decimal places");for(l=t(new l.constructor(l),++a,u);l.c.length<a;)l.c.push(0)}return i(l,!0,!!F)},f.toFixed=function(a,u){var l=this,F=l.c[0];if(a!==void 0){if(a!==~~a||0>a||1e6<a)throw Error("[big.js] Invalid decimal places");for(l=t(new l.constructor(l),a+l.e+1,u),a=a+l.e+1;l.c.length<a;)l.c.push(0)}return i(l,!1,!!F)},f.toJSON=f.toString=function(){var a=this.constructor;return i(this,this.e<=a.qf||this.e>=a.vf,!!this.c[0])},f.toNumber=function(){var a=Number(i(this,!0,!0));if(this.constructor.ig===!0&&!this.Sg(a.toString()))throw Error("[big.js] Imprecise conversion");return a},f.toPrecision=function(a,u){var l=this,F=l.constructor,S=l.c[0];if(a!==void 0){if(a!==~~a||1>a||1e6<a)throw Error("[big.js] Invalid precision");for(l=t(new F(l),a,u);l.c.length<a;)l.c.push(0)}return i(l,a<=l.e||l.e<=F.qf||l.e>=F.vf,!!S)},f.valueOf=function(){var a=this.constructor;if(a.ig===!0)throw Error("[big.js] valueOf disallowed");return i(this,this.e<=a.qf||this.e>=a.vf,!0)},e()}(),Ct={ai:function(e){if(32>e&&![9,10,13].includes(e)||55295<e&&57344>e||65533<e&&65536>e||1114111<e)throw new A("Invalid XML character 0x"+e.toString(16),"FOCH0001");return e},ce:function(e,t){return Ct.Zf(e)||Ct.Zf(t)?(e=Ct.ci(e,t),0>e?-1:e===0?0:1):e<t?-1:e===t?0:1},ci:function(e,t){e=Ct.La(e.toString()),t=Ct.La(t.toString());let i=0;for(;;){if(i===e.length)return i===t.length?0:-1;if(i===t.length)return 1;if(e[i]!==t[i])return e[i]-t[i];i++}},ac:function(e){return String.fromCodePoint(...e.map(Ct.ai))},Zf:function(e){return Array.from(e).some(t=>65535<t.codePointAt(0))},La:function(e){return Array.from(e).map(t=>t.codePointAt(0))},Ib:function(e){return e.replace(/[ \n\r\t]+/g," ").replace(/^[ ]|[ ]$/g,"")}},Ft={Qc:"http://www.w3.org/1999/XSL/Transform",Ma:"http://www.w3.org/2005/xpath-functions",jh:"http://www.w3.org/2005/xpath-functions/math",map:"http://www.w3.org/2005/xpath-functions/map",He:"http://www.w3.org/2005/xpath-functions/array",xml:"http://www.w3.org/XML/1998/namespace",ic:"http://www.w3.org/2001/XMLSchema",nl:"http://www.w3.org/2001/XMLSchema-instance",mi:"http://www.w3.org/2005/xqt-errors",jd:"http://saxonica.com/ns/interactiveXSLT",ih:"http://saxonica.com/ns/globalJS",qb:"http://saxon.sf.net/",ri:"http://ns.saxonica.com/xslt/export",withPrefix:{xsl:"http://www.w3.org/1999/XSL/Transform",fn:"http://www.w3.org/2005/xpath-functions",math:"http://www.w3.org/2005/xpath-functions/math",map:"http://www.w3.org/2005/xpath-functions/map",array:"http://www.w3.org/2005/xpath-functions/array",xml:"http://www.w3.org/XML/1998/namespace",xs:"http://www.w3.org/2001/XMLSchema",xsi:"http://www.w3.org/2001/XMLSchema-instance",err:"http://www.w3.org/2005/xqt-errors",ixsl:"http://saxonica.com/ns/interactiveXSLT",js:"http://saxonica.com/ns/globalJS",saxon:"http://saxon.sf.net/",ex:"http://ns.saxonica.com/xslt/export"},og:"http://ns.saxonica.com/anonymous-type"},jt=function(){function e(){return i===null&&(i=J.xe("regexCategories")),i}function t(u,l,F=null,S=null){function O(w,g){function x($){for($=$.toString(16);4>$.length;)$="0"+$;return"\\u"+(f&&4<$.length?"{"+$+"}":$)}function I($,rt,st){if(st){st=$,$=[],st[0][0]!==0&&$.push([0,st[0][0]-1]);for(var pt=1;pt<st.length;pt++){let tt=st[pt-1][1]+1,Y=st[pt][0]-1;Y>=tt&&$.push([tt,Y])}st=st[st.length-1][1],(f||65535>st)&&$.push([st+1,f?1114111:65535])}for(st="",pt=0;pt<$.length;pt++)(f||65536>$[pt][1])&&(st+=x($[pt][0]),$[pt][1]>$[pt][0]&&(st+="-"+x($[pt][1])));return $=st,rt||($="["+$+"]"),$}function L($){return $.sort(function(rt,st){return rt[0]-st[0]})}function R($,rt,st,pt){let tt=[];return Array.isArray($)||d("Ranges must be array"),$.forEach(function(Y){tt.push([parseInt(Y[0],16),parseInt(Y[1],16)])}),st&&pt&&L(tt),I(tt,rt,st)}let q=w.charAt(g+1);switch(0>"nrt\\|.-^?*+{}()[]pPsSiIcCdDwW$".indexOf(q)&&(m!==0||!/[0-9]/.test(q))&&d("\\"+q+" is not allowed in XPath regular expressions"),q){case"p":case"P":let $=w.indexOf("}",g);w=w.substring(g+3,$),k("x")&&(w=w.replace(/[ \n\r\t]+/g,""));let rt=e();(g=rt[w])||d("Unknown category "+w);let st;w.length===1?(st=[],g.split("|").forEach(function(Y){st=st.concat(rt[Y])})):st=g,E+=R(st,0<m,q==="P",w.length===1),g=$;break;case"d":E+=R(e().Nd,0<m,!1,!1),g++;break;case"i":E+=I(T,0<m,!1),g++;break;case"c":E+=I(C,0<m,!1),g++;break;case"I":E+=I(T,0<m,!0),g++;break;case"C":E+=I(C,0<m,!0),g++;break;case"w":case"W":let pt=e(),tt=[];pt.w.split("|").forEach(function(Y){tt=tt.concat(pt[Y])}),E+=R(tt,0<m,q==="W",!0),g++;break;case"-":0<m&&(E+="\\"),E+=q,g++;break;default:/[0-9]/.test(q)?0<m?d("Numeric escape within charclass"):(r[parseInt(q,10)]||d("No capturing expression #"+q),E+="\\"+q,9>=h&&/[0-9]/.test(w.charAt(g+2))&&(E+="(?:)"),g++):(E+="\\"+q,g++)}return{output:E,i:g}}function k(w){return 0<=l.indexOf(w)}function d(w){throw new A("Invalid XPath regular expression: "+w,"FORX0002")}let o=0;if(l=l?l.toString():"",!f&&F&&Ct.Zf(F))throw new A("Cannot handle non-BMP characters with regular expressions in this browser","SXJS0002");if(F=(k("i")?"i":"")+(k("m")?"m":"")+(k("g")?"g":"")+(f?"u":""),k("j"))return new RegExp(u,l.replace("j",""));if(k("q"))return new RegExp(u.replace(/[\[\]\/\{\}\(\)\*\+\?\.\\^$|]/g,"\\$&"),F);let E="",T=[[58,58],[65,90],[95,95],[97,122],[192,214],[216,246],[248,767],[880,893],[895,8191],[8204,8205],[8304,8591],[11264,12271],[12289,55295],[63744,64975],[65008,65533],[65536,983039]],C=[[45,46],[48,58],[65,90],[95,95],[97,122],[183,183],[192,214],[216,246],[248,893],[895,8191],[8204,8205],[8255,8256],[8304,8591],[11264,12271],[12289,55295],[63744,64975],[65008,65533],[65536,983039]],n=[],r=[],h=1,m=0,c=!1;for(var _=!1,Q=0;Q<u.length;Q++){let w=u.charAt(Q);switch(w){case"[":0<m&&d("Nested square brackets");for(var H=!1,B=!1,b=Q+2;b<u.length-3;b++){if(!H&&u.substring(b,b+2)==="-["){H=u.substring(Q+1,b);let g;for(B=b+2;B<u.length;B++)if(u.charAt(B)==="]"&&u.charAt(B-1)!=="\\"){g=u.substring(b+2,B+1);break}H==="^"&&d("Invalid subtraction"),u=u.substring(0,Q)+"(?!["+g+")["+H+"]"+u.substring(B+2),Q--,B=!0;break}else if(!H&&u.charAt(b)==="]")break;H=u.charAt(b)==="\\"&&!H}if(B){c=!0;break}u.charAt(Q+1)==="]"?d("Character group is empty"):u.substring(Q,Q+3)==="[^]"&&d("Invalid character group [^]"),m++,E+=w;break;case"]":m===0&&d("Unmatched ']'"),m--,E+=w,_=!0;break;case"(":m===0&&(b=!0,Q+2<u.length&&u.charAt(Q+1)==="?"&&(u.charAt(Q+2)===":"||c&&u.charAt(Q+2)==="!"?b=!1:d("'(?' must be followed by ':'")),n.push(b?h++:-1),_=!1,b&&o++),E+=w;break;case")":m===0&&(n.length===0&&d("Unmatched ')'"),_=n.pop(),0<_&&(r[_]=!0)),E+=w,_=!0;break;case".":E=m===0&&k("s")?E+"[^]":E+w,_=!0;break;case"{":m===0&&(_||d("'{' not allowed here"),_=u.indexOf("}",Q+1),(0>_||!/^[0-9]+(,[0-9]*)?$/.test(u.substring(Q+1,_)))&&d("Invalid quantifier {"+u.substring(Q+1,_+1)),_=!1),E+=w;break;case" ":case`
`:case"\r":case"	":(!k("x")||0<m)&&(E+=w),_=!0;break;case"\\":if(k("q"))E+="\\\\";else if(Q+1<u.length)k("x")&&/\s/.test(u.charAt(Q+1))&&Q++,Q=O(u,Q),E=Q.output,Q=Q.i;else throw new A("No character for escape code in XPath regex","FORX0002");_=!0;break;default:_=!0,E+=w}}0<m&&d("Unmatched '['"),n.length!==0&&d("Unmatched '("),S&&S(o);try{return new RegExp(E,F)}catch(w){throw/^[imsxjqg]*$/.test(l)?new A("Invalid regular expression /"+u+"/: "+w.message.substring(/Invalid |Range out/.test(w.message)?w.message.lastIndexOf(":"):0),"FORX0002"):new A("Invalid regex flags: "+l,"FORX0001")}}let i=null,f=!1;try{f="\u{1F680}".match(new RegExp(/./,"gu")).length===1}catch{f=!1}let v=null,a=null;return{yf:function(){v=t("^\\i\\c*$",""),a=t("^\\c+$","")},lj:e,ue:t,fi:function(u,l,F){if(l=l.toString(),/j/.test(l))return u;if(/q/.test(l))return u.replace(/\$/g,"$$$$");if(/(^|[^\\])\$([^0-9]|$)/.test(u)||/(^|[^\\])\\([^\\$]|$)/.test(u))throw new A("Invalid replacement string: "+u,"FORX0004");let S=l=!1,O="";for(let k=0;k<u.length;k++){let d=u.charAt(k);switch(d){case"\\":l&&(O+=d),l=!l;break;case"$":l?(O+="$$",l=!l):S=!0;break;case"0":S?(O+="$&",S=!1):O+=d;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":S?parseInt(d,10)<=F&&(O+="$"+d,S=!1):O+=d;break;default:O+=d}}return O},Db:function(u){return v.test(u)&&!/:/.test(u)},Vi:function(u){return v.test(u)},Ui:function(u){return a.test(u)},Rk:function(u){return u.match(/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})?$/)!==null},fh:function(u){return v.test(u)&&/^[^:]+(:[^:]+)?$/.test(u)},trim:function(u){return u.replace(/^[ \t\r\n]+|[ \t\r\n]+$/g,"")},collapse:function(u){return this.trim(u).replace(/[ \t\r\n]+/g," ")},ng:function(u){var l=u.indexOf(";");if(0<=l){let F=u.substring(0,l);if(l=u.substring(l+1),!F.match(/^[smixq]*$/))throw new A("Illegal flags for regular expression: "+u,"FORX0001");if(!l.match(/^[j]*$/))throw new A("Illegal extension flags for regular expression: "+u,"FORX0001");return F+l}if(!u.match(/^[smijxq]*$/))throw new A("Illegal flags for regular expression: "+u,"FORX0001");return u}}}();class Te{constructor(t){Z.assert(this.g().test(t)),this.code=t}getCode(){return this.code}getType(){return"atomic"}g(){return/.*/}toString(){return""}compareTo(){return null}equals(){return!0}hashCode(){return""}matchKey(){return this.code+"_"+this.toString()}isNumeric(){return/^A[DFO]/.test(this.code)}isStringLike(){return/^A[SUZ]/.test(this.code)}showValue(){return at.ld(this.code)+"('"+this.toString()+"')"}}class Jn extends Te{isNumeric(){return!0}getType(){switch(this.code){case"AO":return"double";case"AF":return"float";case"AD":return"decimal";case"ADI":return"integer";case"ADIN":return"nonPositiveInteger";case"ADINN":return"negativeInteger";case"ADIL":return"long";case"ADILI":return"int";case"ADILIS":return"short";case"ADILISB":return"byte";case"ADIP":return"nonNegativeInteger";case"ADIPP":return"positiveInteger";case"ADIPL":return"unsignedLong";case"ADIPLI":return"unsignedInt";case"ADIPLIS":return"unsignedShort";case"ADIPLISB":return"unsignedByte";default:return Z.xa("Unexpected numeric code: "+this.code,1),"numeric"}}toDouble(){return new Ae(this.toNumber())}toNumber(){return NaN}toBig(){return new gt(this.toNumber())}}class ze extends Te{constructor(t,i="AS"){super(i),this.value=String(t||""),this.j=0}g(){return/^A(S|Z$|U$)/}getType(){switch(this.code){case"AS":return"string";case"ASN":return"normalizedString";case"ASNT":return"token";case"ASNTL":return"language";case"ASNTK":return"NMTOKEN";case"ASNTN":return"Name";case"ASNTNC":return"NCName";case"ASNTNCI":return"ID";case"ASNTNCR":return"IDREF";case"ASNTNCE":return"ENTITY";case"AU":return"anyURI";case"AZ":return"untypedAtomic";default:return Z.xa("Unexpected string code: "+this.code,1),"string"}}toString(){return this.value}compareTo(t){return t instanceof ze?Ct.ce(this.value,t.value):Ue(this.code,t.code)}equals(t){return this.compareTo(t)===0}hashCode(){if(6>=this.value.length)return this.value;let t=this.j,i=this.value.length;if(t===0&&0<i){for(let f=0;f<i;f++)t=31*t+this.value.charCodeAt(f++);this.j=t&=16777215}return Ur(t)}matchKey(){return"s"+this.toString()}}function Mr(e){return e.reduce((t,i)=>t+i.toString(16).padStart(2,"0"),"").toUpperCase()}class ye extends Te{constructor(t,i="AX"){if(super(i),!(t instanceof Uint8Array))throw new A("Supplied value is not a Uint8Array","FORG0001");this.value=t}getType(){return this.code==="AX"?"hexBinary":"base64Binary"}g(){return/^A[X2]$/}toUint8Array(){return this.value}toString(){if(this.code==="AX")var t=Mr(this.value);else{t=this.value;var i=0;let l=0,F=[];if(t.length===0)t="";else{do{var f=t[i++],v=t[i++],a=t[i++],u=f<<16|v<<8|a;f=u>>18&63,v=u>>12&63,a=u>>6&63,u&=63,F[l++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(v)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(u)}while(i<t.length);i=F.join(""),t=t.length%3,t=(t?i.slice(0,t-3):i)+"===".slice(t||3)}}return t}compareTo(t){return t instanceof ye&&this.code===t.code?Ct.ce(Mr(this.value),Mr(t.value)):Ue(this.code,t.code)}equals(t){if(t instanceof ye&&this.code===t.code){let i=t.value;return this.value.length===i.length&&this.value.every((f,v)=>f===i[v])}return Ue(this.code,t.code)}hashCode(){return new ze(Mr(this.value.slice(0,8))).hashCode()}matchKey(){return(this.code==="AX"?"h":"i")+this.toString()}}class Ae extends Jn{constructor(t,i="AO"){if(super(i),this.value=t,typeof t!="number")throw new A(`Supplied value is not a number: "${t}"`,"FORG0001")}g(){return/^A[OF]$/}toString(){if(this.value===0)return 0>1/this.value?"-0":"0";if(this.value===Number.POSITIVE_INFINITY)return"INF";if(this.value===Number.NEGATIVE_INFINITY)return"-INF";var t=this.value,i=Math.abs(t);if(1e6<=i||1e-6>i){i=t.toExponential();let f=i.indexOf("e");return t=i.substring(0,f),i=i.substring(f+1),this.code==="AF"&&(t=parseFloat(t),t=(0>t?t-5e-8:t+5e-8).toString(),t=t.substring(0,t.indexOf(".")+8),t=t.replace(/\.?0+$/,"")),t.includes(".")||(t+=".0"),t+"E"+i.replace("+","")}return this.code==="AF"&&t%1!==0?(i=(0>t?t-5e-8:t+5e-8).toString(),i=i.substring(0,i.indexOf(".")+6),i.replace(/0+$/,"")):t.toString()}equals(t){return this.compareTo(t)===0}compareTo(t){return t.isNumeric()?(t=t.toNumber(),this.code==="AF"&&Math.fround&&(t=Math.fround(t)),this.value<t?-1:this.value===t?0:1):Ue(this.code,t.code)}gg(t){return t instanceof Ae||t instanceof ke?this.value===t.value||isNaN(this.value)&&isNaN(t.value):t instanceof se?at.XS.decimal.cast(this).equals(t):!1}hashCode(){return isNaN(this.value)?"NaN":isFinite(this.value)?Ur(this.value):0>this.value?"-INF":"INF"}matchKey(){return"n"+this.hashCode()}toNumber(){return this.value}toDouble(){return this}abs(){return new Ae(Math.abs(this.value),this.code)}af(){return new Ae(-this.value,this.code)}Ef(){return new Ae(Math.ceil(this.value),this.code)}floor(){return new Ae(Math.floor(this.value),this.code)}round(t){return t===0?t=Math.round(this.value):(t=Math.pow(10,-t),t*=Math.round(this.value/t)),new Ae(t,this.code)}ef(t){return isFinite(this.value)?(t=new se(gt(this.value)).ef(t),t.toNumber()===0&&0>this.value&&(t=at.XS.double.fromString("-0")),at.codes[this.code].cast(t)):this}}class ke extends Jn{constructor(t){if(super("ADI"),typeof t!="number")throw new A(`Supplied value is not a number: "${t}"`,"FORG0001");this.value=Math.trunc(t)}g(){return/^ADI/}toString(){return this.value.toString()}equals(t){return this.compareTo(t)===0}compareTo(t){return t.isNumeric()?this.value-t.toNumber():Ue(this.code,t.code)}hashCode(){return Ur(this.value)}gg(t){return t instanceof Ae||t instanceof ke?this.value===t.value:t instanceof se?at.XS.decimal.cast(this).equals(t):!1}matchKey(){return"n"+this.hashCode()}toDouble(){return new Ae(this.value)}toNumber(){return this.value}toBig(){return new gt(this.value)}abs(){return new ke(Math.abs(this.value))}af(){return new ke(-this.value)}Ef(){return this}floor(){return this}round(t){return 0>t?(t=Math.pow(10,-t),new ke(Math.round(this.value/t)*t)):this}ef(t){return 0>t?(t=Math.pow(10,-t),new ke(parseInt(gt(this.value).Nb(t).round(0,2).Vb(t),10))):this}}class se extends Jn{constructor(t,i="AD"){super(i);try{this.value=new gt(t)}catch{throw new A(`Supplied value is not a valid decimal: "${t}"`,"FORG0001")}}g(){return/^AD/}toString(){return this.value.toFixed()}equals(t){return this.compareTo(t)===0}compareTo(t){return t instanceof se?this.value.cmp(t.value):/^AD/.test(t.code)?this.value.cmp(t.toBig()):t.isNumeric()?this.value.cmp(new gt(t.toDouble())):Ue(this.code,t.code)}hashCode(){let t=this.value;return t.$e(gt(1)).Sg(gt(0))&&t.abs().$i()?this.toNumber().toString(36):this.toString().substring(0,8)}gg(t){return t instanceof Ae||t instanceof ke?this.compareTo(at.XS.decimal.cast(t))===0:t instanceof se?this.compareTo(t)===0:!1}matchKey(){return"n"+this.hashCode()}toBig(){return this.value}toDouble(){return new Ae(parseFloat(this.value.toFixed()))}toNumber(){return parseFloat(this.value.toFixed())}abs(){return new se(this.value.abs(),this.code)}af(){let t=gt(this.value);return t.ia=-t.ia,new se(t,this.code==="AD"?"AD":"ADI")}Ef(){return new se(this.value.round(0,0>this.value.ia?0:3),this.code)}floor(){return new se(this.value.round(0,0>this.value.ia?3:0),this.code)}round(t){function i(u,l){return u=new gt(u),u.e+=l,u}let f=this.value,v=0;0>t&&(v=t,t=0,f=i(f,v));let a=0<f.ia?gt(0):this.floor().abs();return f=f.qd(a).round(t,1).Hd(a),v!==0&&(f=i(f,-v)),new se(f,this.code==="AD"?"AD":"ADI")}ef(t){return 0>t?(t=gt(10).pow(-t),t=this.value.Nb(t).round(0,2).Vb(t)):t=this.value.round(t,2),new se(t,this.code==="AD"?"AD":"ADI")}}class dr extends Te{constructor(t){if(super("AB"),typeof t!="boolean")throw new A(`Supplied value is not a boolean: "${t}"`,"FORG0001");this.value=t}getType(){return"boolean"}g(){return/^AB$/}toString(){return this.value.toString()}toBoolean(){return this.value}compareTo(t){return t instanceof dr?(this.value?1:0)-(t.value?1:0):Ue(this.code,t.code)}equals(t){return this.compareTo(t)===0}hashCode(){return this.value.toString()}matchKey(){return"b"+this.toString()}}class $n extends Te{constructor(t,i,f){if(super("AQ"),this.prefix=t=t||"",this.uri=i=i||"",this.local=f,t===""||jt.Db(t)){if(!jt.Db(f))throw new A("Invalid local name: '"+f+"' (prefix='"+t+"', uri='"+i+"')","FORG0001");if(t!==""&&i==="")throw new A("For no namespace URI, invalid prefix: '"+t+"'","FORG0001")}else throw new A("Invalid prefix: '"+t+"'","FORG0001")}getType(){return"QName"}getPrefix(){return this.prefix}getURI(){return this.uri}getLocal(){return this.local}g(){return/^AQ$/}toEQName(){return"Q{"+this.uri+"}"+this.local}toString(){return(0<this.prefix.length?this.prefix+":":"")+this.local}equals(t){return t instanceof $n?t instanceof $n&&this.local===t.local&&this.uri===t.uri:Ue(this.code,t.code)}compareTo(){throw new A("QNames are not ordered","FORG0006")}hashCode(){return this.uri.substring(this.uri.length-3)+":"+new ze(this.local).hashCode()}matchKey(){return"q"+this.toEQName()}dd(t){return this.uri===t}withPrefix(t){return new $n(t,this.uri,this.local)}}function cu(e,t){if(t=t.substring(0,t.length-1),e.UTCdate.getUTCMilliseconds()===0)t=t.replace(".000","");else for(;t.charAt(t.length-1)==="0";)t=t.substring(0,t.length-1);return t=t.replace(/^-0?0?/,"-"),t=t.replace(/^\+0?0?/,"")}function kr(e){if(e=e.timezoneOffset){let t=Math.abs(e);return(0>e?"-":"+")+(100+Math.floor(t/60)).toString().substring(1)+":"+(100+t%60).toString().substring(1)}return e===0?"Z":""}function Zs(e,t){return t instanceof Ge&&(t.code.startsWith(e.code)||e.code.startsWith(t.code))?+e.UTCdate.getTime()-t.UTCdate.getTime():Ue(e.code,t.code)}function Bi(e,t){return at.XS.dateTime.fromDate(new Date(e.UTCdate.getTime()+6e4*t),e.timezoneOffset)}function zs(e,t){let i=e.toString(),f=parseInt(i.substring(5,7),10),v=parseInt(i.substring(8,10),10),a=parseInt(i.substring(0,4),10)+Math.floor((f+t-1)/12),u=0>a;for(t=(f+t-1)%12+1,0>=t&&(t+=12);!at.Yi([a,t,v,0,0,0]);)--v;return at.codes[e.code].fromString((u?"-"+(1e4+-a).toString().substring(1):(1e4+a).toString().substring(1))+"-"+(100+t).toString().substring(1)+"-"+(100+v).toString().substring(1)+i.substring(10))}class Ge extends Te{constructor(t,i,f="AM"){if(super(f),this.UTCdate=t,this.timezoneOffset=i,!(t instanceof Date))throw new A(`Supplied value is not a Date: "${t}"`,"FORG0001");if(i&&typeof i!="number")throw new A(`Timezone offset is not a number: ${i}`,"FORG0001")}g(){return/^A([AGHIJKMT]|MP)$/}getType(){switch(this.code){case"AA":return"date";case"AM":return"dateTime";case"AT":return"time";case"AMP":return"dateTimeStamp";case"AG":return"gYear";case"AH":return"gYearMonth";case"AI":return"gMonth";case"AJ":return"gMonthDay";case"AK":return"gDay";default:return Z.xa("Unexpected date code: "+this.code,1),"dateTime"}}getUTCDate(){return this.UTCdate}getTimezoneOffset(){return this.timezoneOffset}proxy(){var t=new Date;return t=this.timezoneOffset||this.timezoneOffset===0?this.timezoneOffset:-t.getTimezoneOffset(),new Date(this.UTCdate.getTime()+6e4*t)}toString(){let t=cu(this,this.proxy().toISOString()),i=t.charAt(0)==="-"?1:0;return function(f){switch(f){case"AM":case"AMP":return t;case"AA":return t.substring(0,10+i);case"AT":return t.substring(11+i);case"AH":return t.substring(0,7+i);case"AG":return t.substring(0,4+i);case"AJ":return"-"+t.substring(4+i,10+i);case"AI":return"-"+t.substring(4+i,7+i);case"AK":return"--"+t.substring(7+i,10+i);default:throw"type not recognised "+f}}(this.code)+kr(this)}compareTo(t){return/^A[GHIJK]/.test(this.code)||/^A[GHIJK]/.test(t.code)?Ue(this.code,t.code):Zs(this,t)}equals(t){return Zs(this,t)===0}hashCode(){return Ur(this.UTCdate.getTime()-1454346732296)}matchKey(){return"t"+this.hashCode()}}function Ni(e){function t(f,v){v.forEach(function(a){a!==1e3?(i.push(Math.floor(f/a)),f%=a):i.push(f/a)})}let i=[];return t(Math.abs(e.months),[12,1]),t(Math.abs(e.milliseconds),[864e5,36e5,6e4,1e3]),i}function Ii(e){return e=e.months+e.milliseconds,0>e?-1:0<e?1:0}class mn extends Te{constructor(t,i,f="AR"){if(super(f),this.months=t,this.milliseconds=i,typeof t!="number")throw new A(`Supplied month is not a number: "${t}"`,"FORG0001");if(typeof i!="number")throw new A(`Supplied milliseconds is not a number: "${i}"`,"FORG0001");if(0<t&&0>i||0>t&&0<i)throw new A("Months/milliseconds must both be negative or both be positive","FORG0001")}g(){return/^AR[DY]?$/}getType(){switch(this.code){case"AR":return"duration";case"ARD":return"dayTimeDuration";case"ARY":return"yearMonthDuration";default:return Z.xa("Unexpected duration code: "+this.code,1),"duration"}}getMonthsPart(){return this.months}getMillisecondsPart(){return this.milliseconds}toString(){let t,i=Ii(this);return i===0?t=this.code==="ARY"?"P0M":"PT0S":(t=0>i?"-P":"P",Ni(this).forEach(function(f,v){v===3&&(t+="T"),f!==0&&(v===6?t+=f/1e3+"S":t+=f+"YMDHMS".split("")[v])}),t=t.replace(/T$/,"")),t}compareTo(t){if(t instanceof mn){if(at.XS.yearMonthDuration.matches(this)&&at.XS.yearMonthDuration.matches(t))return this.months-t.months;if(at.XS.dayTimeDuration.matches(this)&&at.XS.dayTimeDuration.matches(t))return this.milliseconds-t.milliseconds;throw new A("Cannot compare durations that mix months and seconds","XPTY0004")}return Ue(this.code,t.code)}equals(t){return t instanceof mn?t instanceof mn&&this.months===t.months&&this.milliseconds===t.milliseconds:Ue(this.code,t.code)}hashCode(){return this.months.toString()+":"+this.milliseconds.toString()}matchKey(){return"d"+this.hashCode()}}function Ur(e){return Number.isInteger(e)&&Math.abs(e)<Math.pow(2,52)?e.toString(36):at.XS.decimal.fromNumber(e).toString().substring(0,8)}function Ue(e,t){throw new A(`Cannot compare ${at.ld(e)} with ${at.ld(t)}`,"XPTY0004")}let at=function(){function e(){function y(X,V,ht,z){let xt=Y[ht],Dt=tt[X]=Y[V]={name:X,code:V,gb:xt,matches:Tt=>Tt instanceof Te&&Tt.code.startsWith(V),Yc:function(Tt){return z(Tt)?(Tt.code=V,Tt):u(Tt.toString(),V)},fromString:function(Tt){return Dt.Yc(xt.fromString(Tt))},cast:function(Tt){return Dt.Yc(xt.cast(Tt))}}}function s(X,V,ht){let z=V.replace(/.$/,"");y(X,V,z,ht);let xt=tt[X],Dt=Y[z];xt.fromString=function(Tt){return/INF|NaN/.test(Tt)?u(Tt,V,null,"FOCA0002"):xt.Yc(Dt.fromString(Tt))},xt.fromNumber=function(Tt){{Tt=Dt.fromNumber(Tt);let Nt=Tt.toNumber();isFinite(Nt)?ht(Tt)?Tt.code=V:Tt=u(Tt.toString(),V):Tt=u(Tt.toString(),V,null,"FOCA0002")}return Tt}}function p(X,V,ht,z){let xt=V.replace(/.$/,"");y(X,V,xt,ht);let Dt=Y[V],Tt=Y[xt];Dt.Yc=function(Nt){return Nt=z(Nt.toString()),ht(Nt)?new ze(Nt,V):u(Nt,V)},Dt.fromString=function(Nt){return Dt.Yc(Tt.fromString(z(Nt)))}}function N(X,V,ht){y(X,V,"AR",ht);let z=tt[X];z.fromString=function(xt){return n(xt,V)},z.fromMonthsMilliseconds=function(xt,Dt){if(xt=rt.fromMonthsMilliseconds(xt,Dt),!ht(xt))throw new A(`Values supplied to fromMonthsMilliseconds are not valid for ${r(V)}`,"FORG0001");return z.Yc(xt)},z.Xg=V==="ARY"?void 0:function(xt){return new mn(0,6e4*xt,"ARD")},z.cast=function(xt){return rt.matches(xt)?new mn(V==="ARY"?xt.months:0,V==="ARD"?xt.milliseconds:0,V):G.string.matches(xt)||G.untypedAtomic.matches(xt)?n(xt.toString(),V):z.Yc(rt.cast(xt))}}function D(X,V){return function(ht){return ht=ht.toNumber(),ht>=X&&ht<=V}}for(var M in tt){let X=tt[M];Y[X.code]=X}O("gYear","AG"),O("gYearMonth","AH"),O("gMonth","AI"),O("gMonthDay","AJ"),O("gDay","AK"),s("nonPositiveInteger","ADIN",X=>0>=X.toNumber()),s("negativeInteger","ADINN",X=>0>X.toNumber()),s("long","ADIL",function(X){return X=X.toBig(),0<=X.cmp(gt("-9223372036854775808"))&&0>=X.cmp(gt("9223372036854775807"))}),s("int","ADILI",D(-2147483648,2147483647)),s("short","ADILIS",D(-32768,32767)),s("byte","ADILISB",D(-128,127)),s("nonNegativeInteger","ADIP",X=>0<=X.toNumber()),s("positiveInteger","ADIPP",X=>0<X.toNumber()),s("unsignedLong","ADIPL",function(X){return 0<=X.toNumber()&&0>=X.toBig().cmp(gt("18446744073709551615"))}),s("unsignedInt","ADIPLI",function(X){return 0<=X.toNumber()&&0>=X.toBig().cmp(gt("4294967295"))}),s("unsignedShort","ADIPLIS",D(0,65535)),s("unsignedByte","ADIPLISB",D(0,255)),M=()=>!0,p("normalizedString","ASN",M,X=>X.replace(/[ \r\t\n]/g," ")),p("token","ASNT",M,Ct.Ib),p("language","ASNTL",X=>/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/.test(X),Ct.Ib),p("NMTOKEN","ASNTK",jt.Ui,Ct.Ib),p("Name","ASNTN",jt.Vi,Ct.Ib),p("NCName","ASNTNC",jt.Db,Ct.Ib),p("ID","ASNTNCI",jt.Db,Ct.Ib),p("IDREF","ASNTNCR",jt.Db,Ct.Ib),p("ENTITY","ASNTNCE",jt.Db,Ct.Ib),N("yearMonthDuration","ARY",X=>X.milliseconds===0),N("dayTimeDuration","ARD",X=>X.months===0),G.language=tt.language,G.NCName=tt.NCName,G.dayTimeDuration=tt.dayTimeDuration,G.yearMonthDuration=tt.yearMonthDuration,G.gYearMonth=tt.gYearMonth,G.gYear=tt.gYear,G.gMonthDay=tt.gMonthDay,G.gMonth=tt.gMonth,G.gDay=tt.gDay,G.ENTITY=tt.ENTITY,G.ID=tt.ID,G.IDREF=tt.IDREF,G.NMTOKEN=tt.NMTOKEN,G.Name=tt.Name,G.byte=tt.byte,G.int=tt.int,G.long=tt.long,G.negativeInteger=tt.negativeInteger,G.nonNegativeInteger=tt.nonNegativeInteger,G.nonPositiveInteger=tt.nonPositiveInteger,G.normalizedString=tt.normalizedString,G.positiveInteger=tt.positiveInteger,G.short=tt.short,G.token=tt.token,G.unsignedByte=tt.unsignedByte,G.unsignedInt=tt.unsignedInt,G.unsignedLong=tt.unsignedLong,G.unsignedShort=tt.unsignedShort,e=function(){}}function t(y,s){return s?-y:y}function i(y,s){return s*(y===void 0?0:Math.round(1e3*parseFloat(y)))}function f(y,s){return s*(y===void 0?0:parseInt(y,10))}function v(y){return y.gb&&!["ADI","ARY","ARD"].includes(y.code)?v(y.gb):y}function a(y,s){throw new A(`Casting from ${r(y.code)} to ${r(s)} is not allowed`,"XPTY0004")}function u(y,s,p=null,N="FORG0001"){throw new A(`Supplied value "${y}" is not a valid ${r(s)}${p?` (${p})`:""}`,N)}function l(y,s){return y=jt.trim(y),/.\.$/.test(y)&&(y+="0"),/^[-+]?([0-9]+(\.[0-9]*)?|\.[0-9]+)([Ee][-+]?[0-9]+)?$/.test(y)?parseFloat(y):/^NaN$/.test(y)?NaN:/^-INF$/.test(y)?-1/0:/^(\+)?INF$/.test(y)?1/0:(s&&u(y,"AO"),NaN)}function F(y){y=y.replace(/\s/g,""),/^(....)*$/.test(y)||u(y,"A2","length must be a multiple of 4"),/^[A-Za-z0-9+/]*=?=?$/.test(y)||u(y,"A2","only [A-Za-z0-9+/] allowed, or '=' at the end"),/^([^=]*|.*[AQgw]==|.*[AEIMQUYcgkosw048]=)$/.test(y)||u(y,"A2","invalid characters before '='");let s,p,N=0,D=[];if(y.length===0)return new Uint8Array(0);do{var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(y.charAt(N++)),X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(y.charAt(N++));s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(y.charAt(N++)),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(y.charAt(N++));var V=M<<18|X<<12|s<<6|p;M=V>>16&255,X=V>>8&255,V&=255,s===64?D.push(M):p===64?D.push(M,X):D.push(M,X,V)}while(N<y.length);return new Uint8Array(D)}function S(y){return y=jt.trim(y),/^([a-fA-F0-9][a-fA-F0-9])*$/.test(y)||u(y,"AX"),(y=y.match(/../g))?new Uint8Array(y.map(s=>parseInt(s,16))):new Uint8Array(0)}function O(y,s){tt[y]=Y[s]={name:y,code:s,matches:p=>p instanceof Ge&&p.code.startsWith(s),fromString:p=>E(p,s),fromDate:(p,N)=>new Ge(p,N,s),cast:p=>{if(p instanceof Ge&&p.code.startsWith(s))return p;if(G.dateTime.matches(p)||G.date.matches(p)){let N=Y[s];return N.fromString(N.fromDate(p.UTCdate,p.timezoneOffset).toString())}return/^A[SZ]/.test(p.code)?E(p.value,s):a(p,s)}}}function k(y){if(y.indexOf(".",y.length-4)!==-1){y=y.split(".");let s=y[1];for(;3>s.length;)s+="0";y=y[0]+"."+s}return y}function d(y){let s=y[0],p=y[1],N=y[2],D=y[3],M=y[4];return y=y[5],!(1>p||12<p||1>N||N>[31,s%4!==0||s%100===0&&s%400!==0?28:29,31,30,31,30,31,31,30,31,30,31][p-1]||24<=D||60<=M||60<=y)}function o(y,s){y=y.split(/[\-T:]/).map(function(N){return parseFloat(N)});let p=y[0];if(-9999>p||9999<p)throw new A("Year "+p+" is out of range","FODT0001");if(!d(y))return u(s,"AM")}function E(y,s){var p=y.match(P[s]);if(p===null)return u(y,s);let N=p[2]?p[2]:"";var D=U[s](p[1])+N;return/24:00:00(\.0+)?([Z+\-]|$)/.test(D)&&(D=s==="AT"?D.substring(0,10)+"T00:00:00":Bi(E(D.substring(0,10),"AA"),1440)+"T00:00:00"),p=D.charAt(0)==="-",o(p?D.substring(1,20):D.substring(0,19),y),y=(p?D.substring(1):D).split(/[\-T:]/).map(function(M){return parseFloat(M)}),D=y[5],p=p?-y[0]:y[0],D=new Date(Date.UTC(p,y[1]-1,y[2],y[3],y[4],D,Math.round(1e3*(D-Math.floor(D))))),100>y[0]&&D.setUTCFullYear(p),D=N===""?C(D):C(D,T(N)),new Ge(D,T(N),s)}function T(y){if(y==="")return null;if(y==="Z")return 0;var s=y.split(":");let p=/^-.*/.test(s[0]),N=Math.abs(parseInt(s[0],10));if(s=parseInt(s[1],10),14<N||59<s)throw new A("Invalid timezone "+y,"FORG0001");return(p?-1:1)*(60*N+s)}function C(y,s=null){let p=new Date;return new Date(y.getTime()-6e4*(s??-p.getTimezoneOffset()))}function n(y,s){let p=y.match(P[s]);if(p===null||!/\d/.test(y)||/T$/.test(y))return u(y,s);let N=nt[W[s][0]](p,y);return y=nt[W[s][1]](p,y),new mn(N,y,s)}function r(y){let s=Y[y];return s?"xs:"+s.name:y}let h={name:"anyAtomicType",code:"A",matches:function(y){return y instanceof Te}},m={name:"untypedAtomic",code:"AZ",fromString:function(y){return new ze(y,"AZ")},matches:function(y){return y.code==="AZ"},cast:function(y){return new ze(y.toString(),"AZ")}},c={name:"string",code:"AS",fromString:function(y){return new ze(y,"AS")},matches:function(y){return/^AS/.test(y.code)},cast:function(y){return new ze(y.toString(),"AS")}},_={name:"anyURI",code:"AU",fromString:function(y){return y=y.replace(/[ \r\t\n]+/g," ").replace(/^[ ]|[ ]$/g,""),new ze(y,"AU")},matches:function(y){return y.code==="AU"},cast:function(y){return y instanceof ze?G.anyURI.fromString(y.toString()):a(y,"AU")}},Q={name:"double",code:"AO",fromString:function(y){return new Ae(l(y,!0))},ie:function(y){return new Ae(l(y,!1))},fromNumber:function(y){return new Ae(y)},matches:function(y){return y.code==="AO"},cast:function(y){return y===null||typeof y>"u"?G.double.fromNumber(NaN):G.string.matches(y)||G.untypedAtomic.matches(y)?G.double.fromString(y.toString()):y.isNumeric()?G.double.fromNumber(y.toNumber()):G.boolean.matches(y)?G.double.fromNumber(y.toBoolean()?1:0):a(y,"AO")},NaN:null};Q.NaN=Q.fromNumber(NaN);let H={name:"decimal",code:"AD",fromString:function(y){return y=jt.trim(y).replace(/^\+/,""),/^[-+]?([0-9]+(\.[0-9]*)?|\.[0-9]+)$/.test(y)?new se(new gt(y)):u(y,"AD")},hb:function(y){return new se(y)},fromNumber:function(y){return isFinite(y)?new se(new gt(y)):u(y,"AD",null,"FOCA0002")},matches:function(y){return y instanceof se||y instanceof ke},cast:function(y){switch(y.code.substring(0,2)){case"AD":return new se(y.value,"AD");case"AS":case"AZ":return G.decimal.fromString(y.toString());case"AO":case"AF":return G.decimal.fromNumber(y.toNumber());case"AB":return G.decimal.fromString(y.toBoolean()?"1":"0");default:return a(y,"AD")}}},B={name:"float",code:"AF",fromString:function(y){return G.float.fromNumber(l(y,!0))},fromNumber:function(y){return Math.fround&&(y=Math.fround(y)),new Ae(y,"AF")},matches:function(y){return y.code==="AF"},cast:function(y){return G.float.fromNumber(G.double.cast(y).toNumber())}},b={name:"boolean",code:"AB",Rc:new dr(!0),Ud:new dr(!1),fromString:function(y){switch(jt.trim(y)){case"true":case"1":return this.Rc;case"false":case"0":return this.Ud;default:return u(y,"AB")}},fromBoolean:function(y){return y?this.Rc:this.Ud},matches:function(y){return y instanceof dr},cast:function(y){switch(y.code.substring(0,2)){case"AS":case"AZ":return G.boolean.fromString(y.toString());case"AD":case"AF":case"AO":return y=y.toNumber(),G.boolean.fromBoolean(y!==0&&!isNaN(y));case"AB":return y;default:return a(y,"AB")}}},w={name:"integer",code:"ADI",gb:"decimal",matches:function(y){return/^ADI/.test(y.code)},fromString:function(y){return/^\s*[-+]?[0-9]+\s*$/.test(y)?9<y.length?new se(y,"ADI"):new ke(parseInt(y,10)):u(y,"ADI")},fromNumber:function(y){return isFinite(y)?(y=Math.trunc(y),Math.abs(y)>Number.MAX_SAFE_INTEGER?new se(new gt(y),"ADI"):new ke(y)):u(y,"ADI",null,"FOCA0002")},hb:function(y){return new se(y,"ADI")},fromByteArray:function(y,s,p,N,D){function M(X,V,ht,z){let xt=new gt(0);if(z)for(V=V+ht-1;0<=V;V--)xt=xt.Vb(256).qd(X[V]);else for(z=V;z<V+ht;z++)xt=xt.Vb(256).qd(X[z]);return xt}return D&&128<=y[N?p-1:0]?(y=y.slice(s,s+p),N&&y.reverse(),y[0]&=127,p=M(y,0,p,!1).Hd(new gt(2).pow(8*p-1))):p=M(y,s,p,N),new se(p,"ADI")},valid:function(y){return y.value.$e(1)===0},cast:function(y){switch(y.code.substring(0,2)){case"AS":case"AZ":return G.integer.fromString(y.toString());case"AF":case"AO":return G.integer.fromNumber(y.toNumber());case"AD":return G.integer.hb(y.toBig().round(0,0));case"AB":return G.integer.fromNumber(y.toBoolean()?1:0);default:return a(y,"AB")}},Ek:function(y){return typeof y=="number"?G.integer.fromNumber(y):typeof y=="boolean"?G.integer.fromNumber(y?1:0):typeof y=="string"?G.integer.fromString(y):G.integer.fromString(y.toString())}},g={name:"numeric",code:"Anumeric",$k:["double","decimal","float"],matches:function(y){return y instanceof Ae||y instanceof ke||y instanceof se},cast:function(y){return G.string.matches(y)||G.untypedAtomic.matches(y)?G.double.fromString(y.toString()):G.numeric.matches(y)?y:G.boolean.matches(y)?G.double.fromNumber(y.toBoolean()?1:0):a(y,"Anumeric")},Id:function(y){let s=G.double;return y===null?s.fromNumber(Number.NaN):G.boolean.matches(y)?s.fromNumber(y.toBoolean()?1:0):G.numeric.matches(y)?s.cast(y):G.string.matches(y)||G.untypedAtomic.matches(y)?s.ie(y.toString()):s.fromNumber(Number.NaN)}},x={name:"QName",code:"AQ",matches:function(y){return y instanceof $n},fromParts:function(y,s,p){return new $n(y,s,p)},fromString:function(y,s){if(y=jt.trim(y),y.substring(0,2)==="Q{")return G.QName.fromEQName(y);if(!jt.fh(y))return u(y,"AQ");if(y=y.split(":"),y.length===1)return G.QName.fromParts("",s(""),y[0]);if(s=s(y[0]),s===null)throw new A("Undeclared prefix: "+y[0],"FONS0004");return G.QName.fromParts(y[0],s,y[1])},fromEQName:function(y){var s=y.indexOf("{");let p=y.indexOf("}");if(!(s===-1&&p===-1||-1<s&&-1<p))throw new A("Invalid EQName: "+y,"FORG0001");if(s=Ct.Ib(y.substring(s+1,p)),s==="http://www.w3.org/2000/xmlns/")throw new A("Use of reserved namespace: "+s,"XQST0070");let N=s===Ft.xml?"xml":"";if(/{/.test(s))throw new A("Invalid URI: "+s,"FORG0001");return G.QName.fromParts(N,s,y.substring(p+1))},cast:function(y,s){if(G.string.matches(y)||G.untypedAtomic.matches(y)){let p=jt.trim(y.toString());if(p.substring(0,2)==="Q{")return G.QName.fromEQName(p);if(s)return G.QName.fromString(y.toString(),s);throw new A("Casting to QName from lexical QName form requires a namespace resolver","XPTY0117")}return G.QName.matches(y)?y:a(y,"AQ")}},I={name:"notation",code:"AN",fromString:function(y){return this.cast(y)},matches:function(){return!1},cast:function(){throw new A("Casting to xs:NOTATION is not possible","XPST0080")}},L={name:"dateTime",code:"AM",matches:function(y){return/^AM/.test(y.code)},fromString:function(y){return E(y,"AM")},fromDate:function(y,s=null){return new Ge(y,s,"AM")},fromUTCDate:function(y,s=null){return s==null?G.dateTime.fromDate(C(y),null):G.dateTime.fromDate(y,s)},cast:function(y){switch(y.code.substring(0,2)){case"AM":return y;case"AA":return G.dateTime.fromDate(y.UTCdate,y.timezoneOffset);case"AS":case"AZ":return G.dateTime.fromString(y.toString());default:return a(y,"AM")}}},R={name:"date",code:"AA",matches:function(y){return y.code==="AA"},fromString:function(y){return E(y,"AA")},fromDate:function(y,s=null){y=new Ge(y,s,"AA").toString();let p=y.charAt(0)==="-"?11:10;return y=G.dateTime.fromString(y.substring(0,p)+"T00:00:00"+y.substring(p)),new Ge(y.UTCdate,s,"AA")},fromUTCDate:function(y,s=null){return s==null?G.date.fromDate(C(y),null):G.date.fromDate(y,s)},cast:function(y){switch(y.code.substring(0,2)){case"AM":return G.date.fromDate(y.UTCdate,y.timezoneOffset);case"AA":return y;case"AS":case"AZ":return G.date.fromString(y.toString());default:return a(y,"AA")}}},q={name:"time",code:"AT",matches:function(y){return y.code==="AT"},fromString:function(y){return E(y,"AT")},fromDate:function(y,s=null){return y=new Ge(y,s,"AT"),y=G.dateTime.fromString("1972-01-01T"+y.toString()),new Ge(y.UTCdate,s,"AT")},fromUTCDate:function(y,s=null){return s==null?G.time.fromDate(C(y),null):G.time.fromDate(y,s)},cast:function(y){switch(y.code.substring(0,2)){case"AM":return G.time.fromDate(y.UTCdate,y.timezoneOffset);case"AT":return y;case"AS":case"AZ":return G.time.fromString(y.toString());default:return a(y,"AT")}}},$={name:"dateTimeStamp",code:"AMP",matches:function(y){return y.code==="AMP"},fromString:function(y){return E(y,"AMP")},fromDate:function(y,s=null){if(s==null)throw new A("Timezone offset must not be null for dateTimeStamp.fromDate()","FORG0001");return new Ge(y,s,"AMP")},fromUTCDate:function(y,s=null){return s==null?G.dateTimeStamp.fromDate(y,0):G.dateTimeStamp.fromDate(y,s)},cast:function(y){switch(y.code.substring(0,2)){case"AM":return y.code==="AMP"?y:y.timezoneOffset==null?u(y.toString(),"AMP"):G.dateTimeStamp.fromDate(y.UTCdate,y.timezoneOffset);case"AA":return y.timezoneOffset==null?u(y.toString(),"AMP"):G.dateTimeStamp.fromDate(y.UTCdate,y.timezoneOffset);case"AS":case"AZ":return G.dateTimeStamp.fromString(y.toString());default:return a(y,"AMP")}}},rt={name:"duration",code:"AR",matches:function(y){return/^AR/.test(y.code)},fromString:function(y){return n(y,"AR")},fromMonthsMilliseconds:function(y,s){return new mn(y,s,"AR")},cast:function(y){return G.duration.matches(y)?y:G.string.matches(y)||G.untypedAtomic.matches(y)?G.duration.fromString(y.toString()):a(y,"AR")}},st={name:"hexBinary",code:"AX",matches:function(y){return y.code==="AX"},fromString:function(y){return new ye(S(y),"AX")},fromUint8Array:function(y){return new ye(y,"AX")},fromUtf8EncodedString:function(y){return new ye(new TextEncoder().encode(y),"AX")},cast:function(y){return y instanceof ye?new ye(y.value,"AX"):G.string.matches(y)||G.untypedAtomic.matches(y)?new ye(S(y.toString()),"AX"):a(y,"AX")}},pt={name:"base64Binary",code:"A2",matches:function(y){return y.code==="A2"},fromString:function(y){return new ye(F(y),"A2")},fromUint8Array:function(y){return new ye(y,"A2")},cast:function(y){return y instanceof ye?new ye(y.value,"A2"):G.string.matches(y)||G.untypedAtomic.matches(y)?new ye(F(y.toString()),"A2"):a(y,"A2")},fromUtf8EncodedString:function(y){return new ye(new TextEncoder().encode(y),"A2")}},tt={anyAtomicType:h,untypedAtomic:m,string:c,anyURI:_,double:Q,decimal:H,float:B,boolean:b,integer:w,NOTATION:I,numeric:g,QName:x,dateTime:L,date:R,time:q,dateTimeStamp:$,duration:rt,hexBinary:st,base64Binary:pt},Y={},P={AM:/^\s*(-?(?:[1-9][0-9]{4,}|[0-9]{4})-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(?:\.[0-9]+)?)(Z|([+\-])[0-9]{2}:[0-9]{2})?\s*$/,AA:/^\s*(-?(?:[1-9][0-9]{4,}|[0-9]{4})-[0-9]{2}-[0-9]{2})(Z|([+\-])[0-9]{2}:[0-9]{2})?\s*$/,AT:/^\s*([0-9]{2}:[0-9]{2}:[0-9]{2}(?:\.[0-9]+)?)(Z|([+\-])[0-9]{2}:[0-9]{2})?\s*$/,AMP:/^\s*(-?[0-9]+-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(?:\.[0-9]+)?)(Z|([+\-])[0-9]{2}:[0-9]{2})\s*$/,AH:/^\s*(-?(?:[1-9][0-9]{4,}|[0-9]{4})-[0-9]{2})(Z|([+\-])[0-9]{2}:[0-9]{2})?\s*$/,AG:/^\s*(-?[1-9][0-9]{4,}|-?[0-9]{4})(Z|([+\-])[0-9]{2}:[0-9]{2})?\s*$/,AJ:/^\s*--([0-9]{2}-[0-9]{2})(Z|([+\-])[0-9]{2}:[0-9]{2})?\s*$/,AI:/^\s*--([0-9]{2})(Z|([+\-])[0-9]{2}:[0-9]{2})?\s*$/,AK:/^\s*---([0-9]{2})(Z|([+\-])[0-9]{2}:[0-9]{2})?\s*$/,AR:/^\s*-?P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:([0-9]+(?:\.[0-9]+)?)S)?)?\s*$/,ARD:/^\s*-?P(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:([0-9]+(?:\.[0-9]+)?)S)?)?\s*$/,ARY:/^\s*-?P(?:([0-9]+)Y)?(?:([0-9]+)M)?\s*$/},U={AM:function(y){return k(y)},AA:function(y){return y+"T00:00:00"},AT:function(y){return"1972-01-01T"+k(y)},AMP:function(y){return k(y)},AH:function(y){return y+"-01T00:00:00"},AG:function(y){return y+"-01-01T00:00:00"},AJ:function(y){return"1972-"+y+"T00:00:00"},AI:function(y){return"1972-"+y+"-01T00:00:00"},AK:function(y){return"1972-01-"+y+"T00:00:00"}},nt=[function(y,s){return t(f(y[1],12)+f(y[2],1),s.match(/^\s*-.*/))},function(y,s){return t(f(y[3],864e5)+f(y[4],36e5)+f(y[5],6e4)+i(y[6],1),s.match(/^\s*-.*/))},function(y,s){return t(f(y[1],864e5)+f(y[2],36e5)+f(y[3],6e4)+i(y[4],1),s.match(/^\s*-.*/))},function(){return 0}],W={AR:[0,1],ARD:[3,2],ARY:[0,3]},G={anyAtomicType:h,anyURI:_,base64Binary:pt,boolean:b,date:R,dateTime:L,dateTimeStamp:$,dayTimeDuration:null,decimal:H,double:Q,duration:rt,float:B,gDay:null,gMonth:null,gMonthDay:null,gYear:null,gYearMonth:null,hexBinary:st,integer:w,language:null,NCName:null,NOTATION:I,numeric:g,QName:x,string:c,time:q,untypedAtomic:m,yearMonthDuration:null,ENTITY:null,ID:null,IDREF:null,NMTOKEN:null,Name:null,byte:null,int:null,long:null,negativeInteger:null,nonNegativeInteger:null,nonPositiveInteger:null,normalizedString:null,positiveInteger:null,short:null,token:null,unsignedByte:null,unsignedInt:null,unsignedLong:null,unsignedShort:null};return{yf:e,la:function(y){return h.matches(y)},Yi:d,qj:v,Yf:function(y,s,p,N){return y instanceof se||s instanceof se?w.hb(N(y.toBig(),s.toBig())):(p=p(y.toNumber(),s.toNumber()),Math.abs(p)<Math.pow(2,52)?w.fromNumber(p):w.hb(N(y.toBig(),s.toBig())))},ld:r,eg:function(y,s){let p=at.codes[s];if(p.matches(y))return y;if(G.decimal.matches(y)?/^A[OFD]$/.test(s):G.float.matches(y)&&/^A[OF]$/.test(s))return p.cast(y);throw new A(`Incompatible operands: ${r(y.code)} (${y.toString()}) and ${r(s)}`,"XPTY0004")},type:tt,codes:Y,XS:G}}(),sn=function(){function e(d){return Math.abs(d)<Math.pow(2,52)}function t(d,o){return S.matches(d)&&S.matches(o)?S:F}function i(d="FOAR0001"){throw new A("Division by zero",d)}function f(d="FOAR0002"){throw new A("Numeric overflow/underflow",d)}function v(d,o,E){throw new A(`Arithmetic operation ${E} not available for operands ${at.ld(d.code)} and ${at.ld(o.code)}`,"XPTY0004")}function a(d,o,E){function T(_){return/^A[AMT]/.test(_.code)}let C,n,r,h=u.untypedAtomic,m=u.dayTimeDuration,c=u.yearMonthDuration;return h.matches(d)?(d=u.double.fromString(d.value),a(d,o,E)):h.matches(o)?(o=u.double.fromString(o.value),a(d,o,E)):((m.matches(d)||c.matches(d))&&u.numeric.matches(o)?(r="u"+E+"n",C=d.code,n=o.code):(m.matches(o)||c.matches(o))&&u.numeric.matches(d)?(r="n"+E+"u",C=d.code,n=o.code):S.matches(d)&&S.matches(o)?(r="i"+E+"i",C=n="ADI"):l.matches(d)||l.matches(o)?(r="d"+E+"d",C=n="AO"):O.matches(d)||O.matches(o)?(r="f"+E+"f",C=n="AF"):F.matches(d)||F.matches(o)?(r="c"+E+"c",C=n="AD"):T(d)&&T(o)?(r="t"+E+"t",C=d.code,n=o.code):T(d)&&(m.matches(o)||c.matches(o))?(r="t"+E+"u",C=d.code,n=o.code):(m.matches(d)||c.matches(d))&&T(o)?(r="u"+E+"t",C=d.code,n=o.code):m.matches(d)&&m.matches(o)||c.matches(d)&&c.matches(o)?(r="u"+E+"u",C=n=d.code):v(E,d,o),k[r]||v(E,d,o),k[r](at.eg(d,C),at.eg(o,n)))}let u=at.XS,l=u.double,F=u.decimal,S=u.integer,O=u.float,k={"d+d":function(d,o){return d=d.toNumber(),o=o.toNumber(),l.fromNumber(d+o)},"d-d":function(d,o){return d=d.toNumber(),o=o.toNumber(),l.fromNumber(d-o)},"d*d":function(d,o){return d=d.toNumber(),o=o.toNumber(),l.fromNumber(d*o)},"d/d":function(d,o){return d=d.toNumber(),o=o.toNumber(),l.fromNumber(d/o)},"d%d":function(d,o){let E=d.toNumber();return o=o.toNumber(),!isFinite(E)||isNaN(o)||o===0?l.fromNumber(NaN):isFinite(o)&&E!==0?l.fromNumber(E%o):d},"d~d":function(d,o){return d=d.toNumber(),o=o.toNumber(),o===0&&i(),(!isFinite(d)&&isFinite(o)||isNaN(d)||isNaN(o))&&f(),o=Math.trunc(d/o),isFinite(o)||f(),e(o)?S.fromNumber(o):l.fromNumber(o)},"f+f":function(d,o){return d=d.toNumber(),o=o.toNumber(),O.fromNumber(d+o)},"f-f":function(d,o){return d=d.toNumber(),o=o.toNumber(),O.fromNumber(d-o)},"f*f":function(d,o){return d=d.toNumber(),o=o.toNumber(),O.fromNumber(d*o)},"f/f":function(d,o){return d=d.toNumber(),o=o.toNumber(),O.fromNumber(d/o)},"f%f":function(d,o){let E=d.toNumber();return o=o.toNumber(),!isFinite(E)||isNaN(o)||o===0?O.fromNumber(NaN):!isFinite(o)||E===0?d:(d=E%o,isFinite(d)||i(),O.fromNumber(d))},"f~f":function(d,o){return d=d.toNumber(),o=o.toNumber(),o===0&&i(),(!isFinite(d)&&isFinite(o)||isNaN(d)||isNaN(o))&&f(),o=Math.trunc(d/o),isFinite(o)||f(),e(o)?S.fromNumber(o):O.fromNumber(o)},"i+i":function(d,o){return at.Yf(d,o,(E,T)=>E+T,(E,T)=>E.qd(T))},"i-i":function(d,o){return at.Yf(d,o,(E,T)=>E-T,(E,T)=>E.Hd(T))},"i*i":function(d,o){return at.Yf(d,o,(E,T)=>E*T,(E,T)=>E.Vb(T))},"i/i":function(d,o){return o.equals(at.XS.integer.fromNumber(0))&&i(),d=d.toBig(),o=o.toBig(),F.hb(d.Nb(o))},"i%i":function(d,o){var E=d.toNumber();let T=o.toNumber();return!isFinite(E)||isNaN(T)||T===0?(T===0&&i(),S.fromNumber(NaN)):!isFinite(T)||E===0?d:(E=d.toNumber()%o.toNumber(),isFinite(E)||i(),e(E)?S.fromNumber(E):S.hb(gt(d.toBig().$e(o.toBig()))))},"i~i":function(d,o){let E=d.toNumber()/o.toNumber();return isFinite(E)||i(),e(E)?S.fromNumber(Math.trunc(E)):S.hb(gt(d.toBig().Nb(o.toBig())).round(0,0))},"c+c":function(d,o){let E=d.toBig(),T=o.toBig();return t(d,o).hb(E.qd(T))},"c-c":function(d,o){let E=d.toBig(),T=o.toBig();return t(d,o).hb(E.Hd(T))},"c*c":function(d,o){let E=d.toBig(),T=o.toBig();return t(d,o).hb(E.Vb(T))},"c/c":function(d,o){try{let E=d.toBig(),T=o.toBig();return F.hb(E.Nb(T))}catch{i()}},"c%c":function(d,o){try{let E=d.toBig(),T=o.toBig();return F.hb(E.$e(T))}catch{i()}},"c~c":function(d,o){try{let E=d.toBig(),T=o.toBig(),C=E.Nb(T).round(0,0);return S.hb(C)}catch{i()}},"a+a":function(d,o){return a(d,o,"+")},"a-a":function(d,o){return a(d,o,"-")},"a*a":function(d,o){return a(d,o,"*")},"a/a":function(d,o){return a(d,o,"/")},"a%a":function(d,o){return a(d,o,"%")},"a~a":function(d,o){return a(d,o,"~")},"u+u":function(d,o){let E=u.dayTimeDuration,T=u.yearMonthDuration;return E.matches(d)&&E.matches(o)||T.matches(d)&&T.matches(o)||v(d,o,"+"),T.matches(d)?T.fromMonthsMilliseconds(d.months+o.months,0):E.fromMonthsMilliseconds(0,d.milliseconds+o.milliseconds)},"u-u":function(d,o){let E=u.dayTimeDuration,T=u.yearMonthDuration;return E.matches(d)&&E.matches(o)||T.matches(d)&&T.matches(o)||v(d,o,"-"),T.matches(d)?T.fromMonthsMilliseconds(d.months-o.months,0):E.fromMonthsMilliseconds(0,d.milliseconds-o.milliseconds)},"u*n":function(d,o){let E=u.dayTimeDuration,T=u.yearMonthDuration;if(E.matches(d)||T.matches(d)||v(d,o,"*"),o=o.toNumber(),!isFinite(o))throw new A("Cannot multiply duration by "+isNaN(o)?"NaN":"+/-INF",isNaN(o)?"FOCA0005":"FODT0002");return T.matches(d)?T.fromMonthsMilliseconds(Math.round(d.months*o),0):E.fromMonthsMilliseconds(0,Math.round(d.milliseconds*o))},"n*u":function(d,o){return sn["u*n"](o,d)},"u/n":function(d,o){let E=u.dayTimeDuration,T=u.yearMonthDuration;if(E.matches(d)||T.matches(d)||v(d,o,"/"),o=o.toNumber(),o===0&&i("FODT0002"),isNaN(o))throw new A("Cannot divide duration by NaN","FOCA0005");return o=T.matches(d)?d.months/o:d.milliseconds/o,isFinite(o)||f("FODT0002"),T.matches(d)?T.fromMonthsMilliseconds(Math.round(o),0):E.fromMonthsMilliseconds(0,Math.round(o))},"u/u":function(d,o){var E=u.dayTimeDuration;let T=u.yearMonthDuration;E.matches(d)&&E.matches(o)||T.matches(d)&&T.matches(o)||v(d,o,"/"),E=new gt(0),d=new gt(T.matches(d)?d.months:d.milliseconds),o=new gt(T.matches(o)?o.months:o.milliseconds),o.cmp(E)===0&&i();try{return F.hb(d.Nb(o))}catch{f()}},"t+u":function(d,o){let E=u.dayTimeDuration,T=u.yearMonthDuration;return E.matches(o)||T.matches(o)||v(d,o,"+"),E.matches(o)?at.codes[d.code].fromDate(new Date(d.UTCdate.getTime()+o.milliseconds),d.timezoneOffset):zs(d,o.months)},"u+t":function(d,o){return sn["t+u"](o,d)},"t-u":function(d,o){let E=u.dayTimeDuration,T=u.yearMonthDuration;return E.matches(o)||T.matches(o)||v(d,o,"-"),E.matches(o)?at.codes[d.code].fromDate(new Date(d.UTCdate.getTime()-o.milliseconds),d.timezoneOffset):zs(d,-o.months)},"t-t":function(d,o){return u.dayTimeDuration.fromMonthsMilliseconds(0,d.UTCdate.getTime()-o.UTCdate.getTime())}};return k}();function lu(e){function t(){function a(k){throw new A("In alphaCode '"+e+"' @ "+f+": "+k)}function u(k){let d=f>=e.length?-1:e.charAt(f++);d!==k&&a("Expected '"+k+"', found '"+d+"'")}function l(){let k=0,d=f;for(;f<e.length;)switch(e.charAt(f++)){case"{":k++;break;case"}":k--;break;case"]":case",":if(k===0)return e.substring(d,--f);break;case" ":if(k===0)return e.substring(d,f-1)}return e.substring(d,f)}typeof e!="string"&&Z.ka("No input to alphaParser");let F={};v.push(f);var S=e.charAt(f);if(/[01+?*]/.test(S)?(f++,i.Od(F,"o",S)):i.Od(F,"o","1"),(S=l())&&!/^[ANFE]/.test(S))throw Z.ka("Invalid alphaCode '"+e+"'");for(i.Od(F,"p",S);f<e.length;)switch(S=e.charAt(f),S){case"]":case",":return S=e.substring(v.pop(),f),i.Od(F,"code",S),F;case" ":f++;break;case"n":case"c":f++;var O=l();/^~/.test(O)&&(O="Q{http://www.w3.org/2001/XMLSchema}"+O.substring(1)),i.Od(F,S,O);break;case"k":case"r":case"v":case"e":f++,u("["),O=t(),u("]"),i.Aj(F,S,O);break;case"a":case"m":case"u":case"i":case"d":if(f++,u("["),O=[],e.charAt(f)==="]")f++,i.xh(F,S,O);else for(;;){let k=t();if(O.push(k),e.charAt(f)===",")f++;else{u("]"),i.xh(F,S,O);break}}break;case"t":a("Tuple types not yet implemented");break;default:a("Expected one of n|c|t|k|r|v|a|u, found '"+S+"'")}return S=e.substring(v.pop(),f),i.Od(F,"code",S),v.pop(),F}var i=fu;let f=0,v=[];this.g=t}let fu={Yk:function(){return{}},Od:function(e,t,i){e[t]=i},Aj:function(e,t,i){e[t]=i},xh:function(e,t,i){e[t]=i}};function Le(e){return new lu(e).g()}function pn(e){let t=(e.o||"1")+e.p;if(e.n&&(t+=" n"+e.n),e.c&&(t+=" c"+e.c),e.k&&(t+=" k["+pn(e.k)+"]"),e.v&&(t+=" v["+pn(e.v)+"]"),e.r&&(t+=" r["+pn(e.r)+"]"),e.a){t+=" a";for(var i=0;i<e.a.length;i++)t+=(i===0?"[":",")+pn(e.a[i]);t+="]"}if(e.m){for(t+=" m",i=0;i<e.m.length;i++)t+=(i===0?"[":",")+pn(e.m[i]);t+="]"}return t}function Gs(e,t){if(e.startsWith(t))return t;if(t.startsWith(e))return e;let i=Math.min(e.length,t.length);for(;0<i;){if(e.substring(0,i)===t.substring(0,i))return e.substring(0,i);i--}return""}let It=function(){function e(F,S){if(S==="")return F.eb;let O=S.charAt(0);return F.za.hasOwnProperty(O)?e(F.za[O],S.substring(1)):[]}function t(F,S){let O=e(F,F.options.hash(S));for(let k=0;k<O.length;k++)if(F.options.Kc(O[k].k,S))return O[k];return null}function i(F,S,O,k){if(k===""){for(k=0;k<F.eb.length;k++)if(F.options.Kc(F.eb[k].k,S)){F.eb[k]={k:S,v:O};return}F.eb.push({k:S,v:O})}else{let d=k.charAt(0),o;F.za.hasOwnProperty(d)?o=F.za[d]:(o=new a(F.options),o.id=u++,F.za[d]=o),i(o,S,O,k.substring(1))}}function f(F,S,O,k){let d=new a(F.options),o=!1;if(k==="")d.eb=F.eb.map(function(T){return F.options.Kc(T.k,S)?(o=!0,{k:S,v:O}):T}),o||d.eb.push({k:S,v:O}),d.za=F.za;else{let T=k.charAt(0);for(var E in F.za)F.za.hasOwnProperty(E)&&(E===T?(d.za[E]=f(F.za[E],S,O,k.substring(1)),o=!0):d.za[E]=F.za[E]);o||(E=new a(F.options),E=f(E,S,O,k.substring(1)),d.za[T]=E),d.eb=F.eb}return d}function v(F,S,O){let k=new a(F.options);if(O==="")k.eb=F.eb.filter(function(d){return!F.options.Kc(d.k,S)}),k.za=F.za;else{let d=O.charAt(0);for(let o in F.za)F.za.hasOwnProperty(o)&&(k.za[o]=o===d?v(F.za[o],S,O.substring(1)):F.za[o]);k.eb=F.eb}return k}function a(F=null){this.eb=[],this.za={},this.options=F||{hash:l.hash,Kc:l.Kc}}let u=0,l={hash:function(F){return F.hashCode()},Kc:function(F,S){try{return F.isNumeric()?F.gg(S):F.equals(S)&&(F.timezoneOffset!==void 0&&F.timezoneOffset!==null)==(S.timezoneOffset!==void 0&&S.timezoneOffset!==null)}catch{return!1}}};return a.prototype={eb:[],za:{},options:l,containsKey:function(F){return t(this,F)!==null},get:function(F){return F=t(this,F),F===null?[]:F.v},evaluate:function(F){return F=t(this,F[0][0]),F===null?yt:wt(F.v)},inSituPut:function(F,S){i(this,F,S,this.options.hash(F))},put:function(F,S){return f(this,F,S,this.options.hash(F))},remove:function(F){return v(this,F,this.options.hash(F))},forAllPairs:function(F){this.eb.forEach(F);for(let S in this.za)this.za.hasOwnProperty(S)&&this.za[S].forAllPairs(F)},keys:function(){let F=[];return this.forAllPairs(function(S){F.push(S.k)}),F},conforms:function(F,S,O){let k=this;return wt(k.keys()).every(function(d){let o=k.get(d);return F(d)&&O(o.length)&&wt(o).every(S)})},showValue:function(){let F="HashTrie map{",S="";return this.forAllPairs(function(O){F+=S,S=", ",F+=Z.showValue(O.k),F+=": ",F+=Z.showValue(O.v)}),F+="}"}},a}();class qt{constructor(t){Array.isArray(t)||Z.ka("XdmArray value must be an array. Supplied:"+t),this.value=t}get(t){if(typeof t!="number")throw new A("Array subscript is not numeric","XPTY0004");if(1>t||t>this.value.length)throw new A("Array index ("+t+") out of bounds (1 to "+this.value.length+")","FOAY0001");return this.value[t-1]}evaluate(t){return wt(this.value[t[0][0]-1])}size(){return this.value.length}showValue(){let t="[";for(let i=0;i<this.value.length&&3>i;i++)i!==0&&(t+=","),t+=Z.showValue(this.value[i]);return 4<=this.value.length&&(t+=",...("+this.value.length+")"),t+"]"}flatten(t){for(let i=0;i<this.value.length;i++){let f=this.value[i];for(let v=0;v<f.length;v++)t(f[v])}}conforms(t,i,f){var v=at.XS.integer.fromNumber(this.value.length);if(!t(v))return!1;for(t=0;t<this.value.length;t++)if(v=this.value[t],!f(v.length)||!wt(v).every(i))return!1;return!0}}let Et={ya:null,jc:null,tf:null,De:null,Yb:null,wd:null,Zb:null,xg:null,uf:null,yg:null,sg:null,Ya:null,Oh:null,tc:null,ug:null,sf:null,Xd:null,rg:null,vg:null,qg:null,wg:null,Wd:null,Vd:null,Ce:null,Ee:null,wf:null,pf:null,Be:null};function on(e){if(/^[01?+*]/.test(e))var t=e.charAt(0),i=e.substring(1);else t="1",i=e;return i=Ie(i),t=new Vt(i,Vi(t)),t._alphaCode=e,t}function Be(e){let t=Pe(e);return new Vt(t,Vi(e.o))}function Je(e){return Z.assert(e instanceof ae),new Vt(e,2)}function hu(){function e(i,f){return new Vt(i,f)}function t(i,f){return e(new Ee(at.codes[i]),Vi(f))}Bn=new mo,Kn=new Kr,po=new xu,An=new Fo,Nn=new Hr,ti=new Eo,ei=new wo,Yn=new Wr,zr=new De(9),go=new De(1),Ri=new De(2),ki=new De(3),Mi=new De(8),Ui=new De(7),Li=new De(13),Fn=new Ee(at.XS.double),Ji=new Ee(at.XS.float),$i=new Ee(at.XS.string),br=new Ee(at.XS.decimal),Qi=new Ee(at.XS.integer),yo=new Ee(at.XS.dayTimeDuration),xr=new Ee(at.XS.anyAtomicType),wr.NMTOKENS=at.type.NMTOKEN,wr.IDREFS=at.type.IDREF,wr.ENTITIES=at.type.ENTITY,Object.assign(Et,{ya:e(ji,7),jc:e(ji,2),tf:e(ji,3),De:t("A","1"),Yb:t("A","?"),wd:t("A","*"),Zb:t("AS","1"),xg:t("AZ","1"),uf:t("AZ","?"),yg:t("AZ","*"),sg:t("AS","?"),Ya:t("AB","1"),Oh:t("AB","?"),tc:t("ADI","1"),ug:t("AD","1"),sf:t("ADI","?"),Xd:t("AO","1"),rg:t("AO","?"),vg:t("AF","1"),qg:t("AU","?"),wg:t("AQ","1"),Wd:e(Kn,3),Vd:e(Kn,7),Ce:t("ADI","*"),Ee:e(Nn,2),wf:e(ti,2),pf:e(Nn,7),Be:e(Yn,1)})}function te(e,t){return new Vt(e.itemType,t)}function Lr(e,t){var i=e.cardinality;return new Vt(e.itemType,i===1||t===1?1:t===2?i:i===2?t:Xe(i)||Xe(t)?7:i===6&&t===6?6:7)}class Vt{constructor(t,i){this.itemType=t,this.cardinality=i,this.g=this._alphaCode=null}V(){if(!this.g)if(this._alphaCode)this.g=Le(this._alphaCode);else{let t=Object.assign(this.itemType.V()||{});t.o=Zn(this.cardinality),this.g=t}return this.g}ga(){return this._alphaCode||(this._alphaCode=this.g?pn(this.g):(Zn(this.cardinality)||"1")+this.itemType.ga()),this._alphaCode}matches(t){let i;switch(t.length){case 0:i=Xe(this.cardinality);break;case 1:i=this.cardinality!==1;break;default:i=qe(this.cardinality)}if(!i)return!1;let f=this.itemType.ha();return t.every(v=>f(v))}toString(){return this.itemType instanceof Wr&&this.cardinality===1?"empty-sequence()":this.itemType.toString()+Zn(this.cardinality)}equals(t){return this.ga()===t.ga()}}let Ut=function(){class e{constructor(S,O){if(this.rb=S,this.J=S.alphaTree,this.arity=O,this.resultType=this.J.r?Be(this.J.r):on("*"),this.j=[],S.variadic){S=Be(this.J.a[0]);for(let k=0;k<O;k++)this.j.push(S)}else for(S=0;S<O;S++)this.j[S]=Be(this.J.a[S])}Bi(){return this.arity}cc(){return null}evaluate(){return Z.ka("Not implemented"),yt}oc(){return this.cc()?this.cc().toEQName()+"#"+this.arity:"anonymous function (arity "+this.arity+")"}showValue(){return this.oc()}g(S,O){if(O=O&&O.name==="apply",S.length!==this.arity)throw new A("Too "+(S.length<this.arity?"few":"many")+" arguments in call to "+this.oc()+": required "+this.arity+", supplied "+S.length,O?"FOAP0001":"XPTY0004");O=[];for(let k=0;k<S.length;k++)O[k]=ft.Gf(S[k],this.j[k],()=>"dynamic call of "+this.oc());return O}$(S){return wt(ft.Gf(S,this.resultType,()=>"result of dynamic call of "+this.oc()))}Ve(){return new Ve(this.j,this.resultType)}}class t extends e{constructor(S,O,k,d,o){super(S,k),this.name=O,this.fa=[Ft.jh,Ft.map,Ft.He,Ft.qb,Ft.jd].includes(O.uri)?ft.oi:ft.ni,this.K=d,(S.defaultToDot&&k===0||["accumulator-after","accumulator-before","lang"].includes(O.local))&&(this.B=ue(o))}cc(){return this.name}evaluate(S,O,k){var d=this.cc().local;if(d==="current")throw new A("current() function cannot be evaluated dynamically","XTDE1360");if(d==="current-output-uri")return yt;if(d==="regex-group")return Mt("");let o=O;this.B&&(o=O.X(),o.focus=me(this.B)),O=["string-length","normalize-space"].includes(d);let E=this.rb.defaultToDot;return d=d==="number",(O||E||d)&&S.length===0?(He(o,"XPDY0002",". (dot)"),k=ue(o),(O||d)&&(k=ft.Kb(k).next()),O&&(k=at.XS.string.cast(k)),S.push([k])):S=this.g(S,k),this.fa(this.cc(),S,o,this.K)}}let i={NMTOKENS:"NMTOKEN",IDREFS:"IDREF",ENTITIES:"ENTITY"};class f extends e{constructor(S,O,k){if(super(S,1),this.name=O,S=i[O.local]){let d=at.type[S].fromString;Z.assert(d),this.evaluate=o=>(o=this.g(o,k)[0][0].toString(),o=Ct.Ib(o).split(" "),wt(o.map(d)))}else if(O.local==="QName"){let d=ft.Sd(k,!0);this.evaluate=o=>(o=this.g(o,k)[0][0].toString(),At(at.XS.QName.fromString(o,d)))}else{let d=at.type[O.local].cast;Z.assert(d),this.evaluate=o=>At(d(this.g(o,k)[0][0]))}}cc(){return this.name}}class v extends e{constructor(S,O){super(S,S.alphaTree.a.length),this.R=S.componentBinding,this.B=O.fixed.Ja[this.R],this.body=ft.ba(this.B.actor,"body"),this.name=at.XS.QName.fromEQName(this.B.actor.name),this.K=ft.ib(this.B.actor,"u")}cc(){return this.name}evaluate(S,O,k){for(S=this.g(S,k),O=O.X(!0),zn(O),this.K||(O.pa="function"),O.ab={},O.Wa=null,O.focus=null,O.oa=this.B,k=0;k<S.length;k++)O.ma[k]=S[k];return ft.evaluate(this.body,O)}}class a extends e{constructor(S,O,k){super(S,S.alphaTree.a.length),this.body=ft.ba(O,"body"),this.K=O.C,this.B=k}evaluate(S,O,k){S=this.g(S,k),O=O.X(!0),zn(O),O.pa="function",O.ab={},O.Wa=null,O.focus=null,O.ma=this.B.ma.slice(),O.oa=this.B.oa,k=this.K;for(let d=0;d<S.length;d++)O.ma[parseInt(k[d].slot,10)]=S[d];return ft.evaluate(this.body,O)}}class u extends e{constructor(S,O,k){super(S,S.alphaTree.a.length),this.B=O,this.K=k}oc(){return"partially-applied "+this.B.oc()}evaluate(S,O,k){let d=[];for(let o=0;o<this.B.arity;o++)if(d[o]=this.K[o]||S.shift(),!d[o])throw new A("Too few arguments in call of "+this.oc(),"XPTY0004");return this.B.evaluate(d,O,k)}}class l extends e{constructor(S,O){super(S,S.alphaTree.p==="F"?S.alphaTree.a.length:1),this.B=O}oc(){return"coerced "+this.B.oc()}evaluate(S,O,k){return S=this.g(S,k),this.$(this.B.evaluate(S,O,k).expand())}}return{XdmFunction:e,Ae:t,nf:f,rf:v,Nh:a,Mh:u,pg:l}}();class Jr{constructor(t){this.value=t}showValue(){return"XDMValue "+Z.showValue(this.value)}}class ee{constructor(t){this.value=t}containsKey(t){return typeof this.value[t]<"u"}get(t){return Yt(this.value[t])}showValue(){return"JSValue "+Z.showValue(this.value)}}let oe=at.XS,mu=Object.getPrototypeOf(function*(){}).prototype,pu=Object.getPrototypeOf(mu);function Ws(e){switch(typeof e){case"undefined":return[];case"string":return oe.untypedAtomic.fromString(e);case"number":return oe.double.fromNumber(e);case"boolean":return oe.boolean.fromBoolean(e);case"function":return new ee(e);case"object":if(oe.anyAtomicType.matches(e)||ut.U(e)||e instanceof qt||e instanceof Ut.XdmFunction||e instanceof It||e instanceof ee)return e;if(e instanceof Date)return oe.dateTime.fromString(e.toISOString());if(e instanceof Uint8Array)return oe.hexBinary.fromUint8Array(e);if(Array.isArray(e)){let t=[];return e.forEach(function(i){t.push(Yt(i))}),new qt(t)}return e===null?[]:e instanceof Jr?e.value:new ee(e);default:return new ee(e)}}function du(e){let t=[];return e.forEach(function(i){i=Ws(i),Array.isArray(i)&&i.length===0||t.push(i)}),t}function gu(e){if(e instanceof qt){let t=[];return e.value.forEach(i=>t.push(Hs(i))),new qt(t)}if(e instanceof ee){let t=e.value;if(typeof t!="object"||t instanceof Uint8Array)return e;e=new It;for(let i in t)if(t.hasOwnProperty(i)){let f=Yt(i)[0],v=Yt(t[i]);e.inSituPut(f,Ne(v))}return e}return e}function Hs(e){let t=[];return e.forEach(function(i){i=gu(i),Array.isArray(i)&&i.length===0||t.push(i)}),t}function Oi(e,t){if(Array.isArray(e))throw new A("convertItemToJS() called for an array","SXJS0004");if(e===null)return null;if(oe.string.matches(e)||oe.anyURI.matches(e)||oe.duration.matches(e)||oe.hexBinary.matches(e)||oe.base64Binary.matches(e)||oe.untypedAtomic.matches(e))return e.toString();if(oe.numeric.matches(e))return e.toNumber();if(oe.boolean.matches(e))return e.toBoolean();if(oe.dateTime.matches(e)||oe.date.matches(e)||oe.dateTimeStamp.matches(e)||oe.time.matches(e)||oe.gYearMonth.matches(e)||oe.gYear.matches(e)||oe.gMonthDay.matches(e)||oe.gMonth.matches(e)||oe.gDay.matches(e))return e.toString();if(oe.QName.matches(e))return e.toEQName();if(ut.U(e))return e;if(e instanceof qt){let i=[];return e.value.length!==0&&e.value.forEach(function(f){i.push(re(f,t))}),i}if(e instanceof It){if(t){let i={};return e.forAllPairs(function(f){i[f.k.toString()]=re(f.v,t)}),i}return new Jr(e)}return e instanceof Jr?e:e instanceof ee?e.value:new Jr(e)}function Au(e,t){let i=[];return e.length===0?null:e.length===1?Oi(e[0],t):(e.forEach(function(f){i.push(Oi(f,t))}),i)}function $r(e,t){function i(a){return re(a,!0)}if(t==="iterator")return e.mapOneToOne(i);if(t==="xdm")return e.expand();let f=[],v;for(;(v=e.next())!=null;)f.push(i(v));switch(t){case"iterator":return wt(f);case"array":return f;default:return f.length===0?null:f.length===1?f[0]:f}}function Qn(e){if(pu.isPrototypeOf(e)){e=new _i(e);for(var t=[],i=e.next();i!=null;)t.push(Qn(i)),i=e.next();return Ne(Yt(t))}if(Array.isArray(e)){t=[];for(i of e)t.push(Qn(i));return Ne(Yt([t]))}if(e instanceof Map){t=new It;for(let[f,v]of e.entries())e=Qn(f),i=Qn(v),t.inSituPut(e[0],i);return Yt(t)}return Ne(Yt(e))}function Yt(e){return Array.isArray(e)?du(e):(e=Ws(e),Array.isArray(e)&&e.length===0?[]:[e])}function Ne(e){return Z.assert(Array.isArray(e)),Hs(e)}function re(e,t=!1){return Array.isArray(e)?Au(e,t):Oi(e,t)}let Vn=at.XS,Fu=Object.getPrototypeOf(function*(){}).prototype,Eu=Object.getPrototypeOf(Fu);class mt{*[Symbol.iterator](){let t=this.next();for(;t!=null;)yield re(t,!0),t=this.next()}filter(t){return new ro(this,t)}next(){return Z.ka("next()"),null}itemAt(t){let i=1,f;for(;(f=this.next())!==null;)if(i++===t)return f;return null}mapOneToOne(t){return new so(this,t)}mapOneToMany(t){return new io(this,t)}forEachItem(t){let i;for(;(i=this.next())!==null;)t(i)}some(t){let i;for(;(i=this.next())!==null;)if(t(i))return!0;return!1}every(t){let i;for(;(i=this.next())!==null;)if(!t(i))return!1;return!0}count(){let t=0;return this.forEachItem(function(){t++}),t}expand(){let t=[];return this.forEachItem(function(i){t.push(i)}),t}showValue(){return"Iterator"}}class dn extends mt{constructor(t){super(),this.g=t}next(){let t=this.g;return this.g=null,t}itemAt(t){return t===1?this.g:null}peek(){return this.g}expand(){return this.g===null?[]:[this.g]}showValue(){return"Singleton of "+Z.showValue(this.g)}}class to extends mt{next(){return null}peek(){return null}expand(){return[]}count(){return 0}filter(){return this}itemAt(){return null}mapOneToOne(){return this}mapOneToMany(){return this}forEachItem(){}some(){return!1}every(){return!0}showValue(){return"EmptyIter"}}class eo extends mt{constructor(t){super(),Array.isArray(t)||Z.ka("ForArrayIter expects array. Supplied value: "+Z.showValue(t)),this.g=t,this.j=0}next(){return this.j<this.g.length?this.g[this.j++]:null}peek(){return this.j<this.g.length?this.g[this.j]:null}expand(){return this.g}count(){return this.g.length}itemAt(t){return this.g[t-1]}showValue(){return"ForArray "+this.g}}class _i extends mt{constructor(t){super(),this.g=t}next(){let t=this.g.next();return t.done?null:t.value}}class Pi{constructor(t){this.g=t}saxonIterator(){return this.g}*[Symbol.iterator](){let t=this.g.next();for(;t!=null;)yield re(t,!0),t=this.g.next()}}class no extends mt{constructor(t){super(),this.g=t}next(){var t=this.g.next();return t===null?null:(t=Array.isArray(t)?Yt([t]):Yt(t),t=Ne(t),Eu.isPrototypeOf(t[0])?Qn(t[0]):t[0])}}class ro extends mt{constructor(t,i){super(),this.g=t,(this.j=i)||Z.ka("Filter iterator undefined predicate")}next(){for(;;){let t=this.g.next();if(!t)return null;let i=this.j(t);if(i==="done")return null;if(i)return t}}}class io extends mt{constructor(t,i){super(),this.B=t,this.j=i,this.g=null}next(){for(;;){if(this.g!==null){var t=this.g.next();if(t)return t}if(t=this.B.next(),t===null)return null;(this.g=this.j(t))&&!this.g.next&&Z.ka("Result of mapper is not an iterator, mapper = "+this.j)}}}class so extends mt{constructor(t,i){super(),this.g=t,this.B=0,typeof t=="object"&&"next"in t||Z.ka("Base not an iterator"),this.j=i}next(){for(;;){var t=this.g.next();if(t===null)return null;if(t=this.j(t,this.B++))return t}}}class vn extends mt{constructor(t,i){super(),this.g=t,this.j=i}next(){let t=this.g;return t?(this.g=this.j(t),t):null}peek(){return this.g}}class oo extends mt{constructor(t){super(),Array.isArray(t)||Z.ka("Join iterator expects array"),this.g=t}next(){for(;;){if(this.g.length===0)return null;let t=this.g[0].next();if(t===null)this.g.shift();else return t}}}class Qr extends mt{constructor(t,i,f){super(),this.g=We(t),this.j=We(i),this.B=f,this.current=null}next(){var t=this.g.peek();let i=this.j.peek();return t&&i?(t=this.B(t,i),0>t?this.current=this.g.next():0<t?this.current=this.j.next():(this.current=this.g.next(),this.j.next()),this.current):t?this.current=this.g.next():i?this.current=this.j.next():this.current=null}}class ao extends mt{constructor(t,i,f){super(),this.g=We(t),this.j=We(i),this.B=f,this.current=null}next(){let t=this.g.peek(),i=this.j.peek();for(;t&&i;){let f=this.B(t,i);if(0>f)this.g.next(),t=this.g.peek();else if(0<f)this.j.next(),i=this.j.peek();else return this.current=this.g.next(),this.j.next(),this.current}return this.current=null}}class uo extends mt{constructor(t,i,f){super(),this.g=We(t),this.j=We(i),this.B=f,this.current=null}next(){let t=this.g.peek();for(var i=this.j.peek();t&&i;){if(i=this.B(t,i),0>i)return this.current=this.g.next();0<i?this.j.next():(this.g.next(),this.j.next(),t=this.g.peek()),i=this.j.peek()}return t&&!i?this.current=this.g.next():this.current=null}}function We(e){return"peek"in e?e:new co(e)}class co extends mt{constructor(t){super(),this.j=t,this.g=t.next()}next(){let t=this.g;return t&&(this.g=this.j.next()),t}peek(){return this.g}showValue(){return"LookAhead of "+this.j.showValue()}}class lo extends mt{constructor(t){super(),this.g=t,this.j=-1,this.position=0,this.current=null}next(){return this.position++,this.current=this.g.next(),this.current===null&&(this.position=-1),this.current}last(){if(0>this.j)if(this.g instanceof wt)this.j=this.g.expand().length;else{let t=[],i;for(;(i=this.g.next())!==null;)t.push(i);this.j=this.position+t.length,this.g=wt(t)}return this.j}showValue(){return"Tracker of "+this.g.showValue()}}class fo extends mt{constructor(t){super(),this.current=t,this.position=1}next(){return null}last(){return 1}}class Vr extends mt{constructor(t){super(),this.g=t}next(){let t=this.g.next();return t.done?null:t.value}}class Xi extends mt{constructor(t,i,f){for(super(),this.g=t,this.j=f,this.B=1;!(this.B++>=i);)if(this.g.next()==null){this.j=Number.NEGATIVE_INFINITY;break}}next(){return this.B++<=this.j?this.g.next():null}}let yt=new to;function At(e){return new dn(e)}function $e(e){return new oo(e)}function me(e){return new fo(e)}function Lt(e){return new lo(e)}function wt(e){return new eo(e)}function Mt(e){return new dn(Vn.string.fromString(e))}function he(e){return new dn(Vn.integer.fromNumber(e))}function ho(e){return new dn(Vn.double.fromNumber(e))}function qr(e){return new dn(Vn.decimal.hb(e))}function _t(e){return new dn(Vn.boolean.fromBoolean(e))}var Kt={};Kt.Mj=mt,Kt.Sj=uo,Kt.Empty=yt,Kt.Tj=to,Kt.Vj=ro,Kt.ForArray=wt,Kt.Wj=eo,Kt.Xj=Vr,Kt.$j=ao,Kt.ak=_i,Kt.bk=Pi,Kt.ck=$e,Kt.dk=oo,Kt.ek=co,Kt.hk=io,Kt.ik=so,Kt.Singleton=At,Kt.lk=dn,Kt.mk=me,Kt.nk=fo,Kt.pk=vn,Kt.qk=Xi,Kt.Tracker=Lt,Kt.tk=lo,Kt.wk=Qr,Kt.yk=no,Kt.oneBoolean=_t,Kt.fl=qr,Kt.oneDouble=ho,Kt.oneFloat=function(e){return new dn(Vn.float.fromNumber(e))},Kt.oneInteger=he,Kt.oneString=Mt;class cn{constructor(t,i,f=null){this.prefix=t===null?"":t,this.uri=i===null?"":i,this.parentNode=f===null?null:f,this.nodeType=13}}class Tn{constructor(t,i,f){this.qname=t,this.value=i,this.parent=f,this.nodeType=2,this.name=t.toString(),this.namespaceURI=t.uri,this.localName=t.local,this.prefix=t.prefix}}let ut=function(){function e(a){return a?a.nodeType===9?a:e(a.ownerDocument):null}let t=at.XS,i=1,f={Uc:function(a){switch(a.nodeType){case 9:case 11:return yt;case 2:return a.parent?new vn(a.parent,u=>u.parentNode):yt;default:return(a=a.parentNode)?new vn(a,u=>u.parentNode):yt}},Sa:function(a){return $e([At(a),f.Uc(a)])},Ga:function(a){if(a.nodeType===1){let u=a.attributes,l=a.ownerDocument.documentElement&&J.Qb(a.ownerDocument.documentElement),F=[];for(let S=0;S<u.length;S++){let O=u[S].name;(O.substring(0,5)!=="xmlns"||O.length!==5&&O.charAt(5)!==":")&&(l&&u[S].localName.substring(0,4)==="xml:"?F.push(new Tn(t.QName.fromParts("xml",Ft.xml,u[S].localName.substring(4)),u[S].value,a)):F.push(new Tn(t.QName.fromParts(u[S].prefix,u[S].namespaceURI,u[S].localName),u[S].value,a)))}return wt(F)}return yt},Ia:function(a){function u(l){return new vn(l.firstChild,F=>F.nextSibling)}if(a===null)return yt;switch(a.nodeType){case 9:return u(a).filter(function(l){return!(l.nodeType===7&&l.target==="xml"||l.nodeType===3||l.nodeType===4)});case 11:case 1:return u(a);default:return yt}},Se:function(a){return f.Ia(a).mapOneToMany(function(u){return f.he(u)})},he:function(a){return $e([At(a),f.Se(a)])},Ug:function(a){switch(a.nodeType){case 9:case 11:return yt;case 2:case 13:return a=ut.Va(a),a===null?yt:$e([f.Se(a),f.Ug(a)]);default:return f.Sa(a).mapOneToMany(function(u){return f.Vg(u).mapOneToMany(f.he)})}},Vg:function(a){switch(a.nodeType){case 9:case 11:case 2:case 13:return yt;default:return new vn(a.nextSibling,u=>u.nextSibling)}},jb:function(a){return a.nodeType===1?wt(ut.Dc(a).map(function(u){return new cn(u.prefix,u.uri,a)})):yt},parent:function(a){return At(ut.Va(a))},dg:function(a){return f.Sa(a).mapOneToMany(function(u){return f.Ic(u).mapOneToMany(function(l){return wt(f.he(l).expand().reverse())})})},Ic:function(a){switch(a.nodeType){case 9:case 11:case 2:case 13:return yt;default:return new vn(a.previousSibling,u=>u.previousSibling)}},self:function(a){return At(a)}},v={Ha:f,Bg:{ancestor:f.Uc,"ancestor-or-self":f.Sa,attribute:f.Ga,child:f.Ia,descendant:f.Se,"descendant-or-self":f.he,following:f.Ug,"following-sibling":f.Vg,namespace:f.jb,parent:f.parent,preceding:f.dg,"preceding-sibling":f.Ic,self:f.self},Ac:e,nc:function(a){return f.Sa(a).expand().pop()},dc:function(a){return a._saxonDocumentNumber||(a._saxonDocumentNumber=i++),a},hi:function(a){return ut.dc(a)._saxonDocumentNumber},aa:function(a){if(!a||!a.nodeType)return null;switch(a.nodeType){case 1:return t.QName.fromParts(a.prefix,a.namespaceURI,a.localName);case 2:if(a.prefix==="xml")return t.QName.fromParts(a.prefix,Ft.xml,a.localName);if(!a.qname)throw new A("ATTRIBUTE_NODE not local","SXJS0004");return a.qname;case 7:return t.QName.fromParts("","",a.target);case 13:return a.prefix?t.QName.fromParts("","",a.prefix):null;default:return null}},Ok:function(a,u){if(!a||!a.nodeType)return!1;switch(a.nodeType){case 1:case 2:return a.localName===u;case 7:return a.target===u;case 13:return a.prefix===u;default:return!1}},dd:function(a,u){if(!a||!a.nodeType)return!1;switch(a.nodeType){case 1:return(a.namespaceURI||"")===u;case 2:return a.prefix==="xml"?Ft.xml===u:a.namespaceURI===u;default:return u===""}},ad:function(a,u=null){let l=[];for(a=a.firstChild;a!==null;)a.nodeType!==1||u&&u!==a.tagName||l.push(a),a=a.nextSibling;return l},firstElementChild:function(a,u){for(a=a.firstChild;a!==null;){if(a.nodeType===1&&(!u||u===a.tagName))return a;a=a.nextSibling}return null},ed:function(a){let u=a.expand();if(1<u.length){let l=!0,F=!0,S=!0;if(u.forEach(O=>{ut.U(O)?(S=!1,ut.Va(O)||O._saxonDocumentNumber?l=!1:ut.dc(O)):F=!1}),!F&&!S)throw new A("Cannot sort a sequence including both nodes and non-nodes","XPTY0018");return l||S||u.sort(ut.mb),wt(u).mapOneToOne(function(O,k){return 0<k&&ut.isSameNode(O,u[k-1])?null:O})}return wt(u)},mb:function(a,u){if(ut.isSameNode(a,u))return 0;var l=ut.Va(a),F=ut.Va(u);if(l===null)return F===null?(l=ut.dc,l(a)._saxonDocumentNumber-l(u)._saxonDocumentNumber):a===F?-1:ut.mb(a,F);if(F===null)return u===l?1:ut.mb(l,u);if(l===F){F=a.nodeType;var S=u.nodeType;if(F===2){if(S===2){for(l=l.attributes,F=0;F<l.length;F++){if(S=t.QName.fromParts(l[F].prefix,l[F].namespaceURI,l[F].localName),S.equals(ut.aa(a)))return-1;if(S.equals(ut.aa(u)))return 1}throw new A("Att not found in parent","SXJS0004")}return S===13?1:-1}if(F===13)return S===13?a.prefix<u.prefix?-1:1:-1;if(S===2||S===13)return 1;for(l=a,F=u;;){if(l=l.previousSibling,!l)return-1;if(l===u||(F=F.previousSibling,!F))return 1;if(F===a)return-1}}else{if(a===F)return-1;if(u===l)return 1;S=f.Uc(l).count();let O=f.Uc(F).count();return S===O?ut.mb(l,F):S>O?ut.mb(l,u):ut.mb(a,F)}},Va:function(a){return ut.me(a)?a.parent:a.parentNode},Re:function(a,u,l){a.setAttributeNS("http://www.w3.org/2000/xmlns/",u===""?"xmlns":"xmlns:"+u,l)},Dc:function(a,u=f.Sa){let l=[{prefix:"xml",uri:Ft.xml}],F={xml:!0};for(a=u(a);(u=a.next())!==null&&u.nodeType===1;){var S=ut.aa(u);for(S.prefix===""&&S.uri===""&&(F[""]=!0),u=u.attributes,S=0;S<u.length;S++){var O=u[S].name;O.substring(0,5)==="xmlns"&&(O.length!==5||F[""]?O.charAt(5)===":"&&(O=O.substring(6),F[O]||(F[O]=!0,l.push({prefix:O,uri:u[S].value}))):(F[""]=!0,u[S].value!==""&&l.push({prefix:"",uri:u[S].value})))}}return l},Ii:function(a){if(a.Qh){t:{a=a.Qh;for(u in a)if(a.hasOwnProperty(u)){var u=!1;break t}u=!0}return!u}for(u=a.attributes,a=0;a<u.length;a++){let l=u[a].name;if(l.substring(0,5)==="xmlns"&&(l.length===5||l.charAt(5)===":"))return!0}return!1},dh:function(a){for(a=a.firstChild;a!==null;){if(a.nodeType===1&&ut.Ii(a)||!ut.dh(a))return!1;a=a.nextSibling}return!0},Pk:function(a){return(a=a.attributes.getNamedItem("xmlns"))&&a.value===""},Ei:function(a,u){for(;a&&a.nodeType===1;){if(a.hasAttribute(u))return a.getAttribute(u);a=a.parentNode}return null},Fi:function(a,u,l){for(;a&&a.nodeType===1;){if(a.hasAttributeNS(u,l))return a.getAttributeNS(u,l);a=a.parentNode}return null},getAttribute:function(a,u,l){return a.hasAttribute(u)?a.getAttribute(u):2<arguments.length?l:null},Jk:function(a,u){return parseInt(a.getAttribute(u),10)},vj:function(a,u,l){let F=t.QName;return/:/.test(u)?F.fromString(u,function(S){return S==="xml"?Ft.xml:a.lookupNamespaceURI(S)}):(l=l&&a.lookupNamespaceURI(null)||"",F.fromParts("",l,u))},me:function(a){return a instanceof Tn},Ed:function(a){return a instanceof cn},Ye:function(a){return a instanceof abstractNode&&(a.nodeType===9||a.nodeType===11)},$f:function(a){return a instanceof abstractNode&&a.nodeType===1},U:function(a){return a instanceof abstractNode&&!(a.nodeType===7&&a.target==="xml")||ut.me(a)||ut.Ed(a)},Uk:function(a){return a instanceof abstractNode&&a.nodeType===7},isSameNode:function(a,u){return a===u||ut.Ed(a)&&ut.Ed(u)&&a.parentNode&&u.parentNode&&a.parentNode===u.parentNode&&a.prefix===u.prefix||ut.me(a)&&ut.me(u)&&a.parent&&u.parent&&a.parent===u.parent&&ut.aa(a).equals(ut.aa(u))},Wi:function(a,u){return a===u||a===9&&u===11||u===9&&a===11},Vk:function(a){return a instanceof abstractNode&&(a.nodeType===3||a.nodeType===4)},fd:function(a){return a.startsWith("blob:")||a.startsWith("data:")||/^(?:[A-Za-z][A-Za-z0-9+.-]+:)?\/\//i.test(a)},baseURI:function(a){function u(l){let F=ut.Va(l);return l=F?ut.baseURI(F):l._saxonBaseUri?l._saxonBaseUri:null,l!=null&&0<=l.indexOf("\\")&&(l=l.replaceAll("\\","/"),1<l.length&&l[1]===":"&&(l="file:///"+l)),l}if(a===null||ut.Ed(a))return null;if(a.nodeType===1&&a.hasAttribute("xml:base")){let l=a.getAttribute("xml:base");return ut.fd(l)?l:u(a)?J.pb(l.toString(),u(a)).toString():null}return u(a)}};return Z.tj(v),v}();function wu(e,t){e.g=t}function fe(e,t){e._alphaCode=t.replace(/^[01?*+]/,"")}function qn(e){return/^N/.test(e.V().p)}function gn(e){return e instanceof Fo}class ae{constructor(){this.g=this._alphaCode=null}ha(){return()=>!0}V(){if(!this.g)if(this._alphaCode)this.g=Le(this._alphaCode);else return null;return this.g}ga(){if(!this._alphaCode)if(this.g)fe(this,pn(this.g));else return null;return this._alphaCode}la(t="A"){return this.V().p.startsWith(t)}isNumeric(){return gn(this)||/^A[ODF]/.test(this.V().p.substring(0))}gd(){return/^F/.test(this.V().p)}Si(){return!0}J(){return null}B(){return null}K(){return null}toString(){return this.ga()}equals(t){return this.ga()===t.ga()}}class mo extends ae{constructor(){super(),fe(this,""),this.g={p:""}}ha(){return()=>!0}toString(){return"item()"}}var Bn;let ji=new mo;class Kr extends ae{constructor(){super(),fe(this,"N"),this.g={p:"N"}}ha(){return t=>ut.U(t)}toString(){return"node()"}}var Kn;class xu extends ae{constructor(){super(),fe(this,"N u[NT,NP,NC,NE]"),this.g={p:"N",u:[{p:"NT"},{p:"NP"},{p:"NC"},{p:"NE"}]}}ha(){return t=>ut.U(t)&&[1,3,4,8,7].includes(t.nodeType)}toString(){return"node()"}}var po;function Yr(e){switch(e){case 9:return zr;case 1:return go;case 2:return Ri;case 8:return Mi;case 3:case 4:return ki;case 7:return Ui;case 13:return Li;default:throw new A("Unknown node kind "+e)}}function Zr(e){switch(e){case 1:return"NE";case 3:return"NT";case 2:return"NA";case 9:return"ND";case 8:return"NC";case 4:return"NT";case 7:return"NP";case 13:return"NN";case 0:return"N";default:throw new A("Unknown node kind "+e+" in NodeKindTest")}}class De extends ae{constructor(t){super(),this.kind=t,t=Zr(t),fe(this,t),this.g={p:t}}ha(){switch(this.kind){case 9:return t=>ut.U(t)&&(t.nodeType===9||t.nodeType===11);case 3:case 4:return t=>ut.U(t)&&(t.nodeType===3||t.nodeType===4);default:return t=>ut.U(t)&&t.nodeType===this.kind}}toString(){switch(this.kind){case 9:return"document-node()";case 1:return"element(*)";case 2:return"attribute(*)";case 8:return"comment()";case 3:case 4:return"text()";case 7:return"processing-instruction()";case 13:return"namespace-node()";case 0:return"node()";default:throw new A("Unknown node kind "+this.kind+" in NodeKindTest")}}}var zr,go,Ri,Mi,ki,Ui,Li;class an extends De{constructor(t,i){super(t),this.name=i,t=Zr(t),fe(this,t+" n"+i.toEQName()),this.g={p:t,n:i.toEQName()}}ha(){let t=this.name;return i=>{var f;return(f=ut.U(i)&&i.nodeType===this.kind)&&(f=(i=ut.aa(i))&&t.equals(i)),f}}toString(){return super.toString().replace(/\(\*?\)/,"("+this.V().n+")")}}class gr extends De{constructor(t,i){super(t),this.localName=i,t=Zr(t),fe(this,t+" n*:"+i),this.g={p:t,n:"*:"+i}}ha(){return t=>ut.U(t)&&t.nodeType===this.kind&&ut.aa(t).local===this.localName}toString(){return super.toString().replace(/\(\*?\)/,"(*:"+this.localName+")")}}class Gr extends De{constructor(t,i){super(t),this.uri=i,t=Zr(t),fe(this,t+" nQ{"+i+"}*"),this.g={p:t,n:"Q{"+i+"}*"}}ha(){return t=>ut.U(t)&&t.nodeType===this.kind&&ut.aa(t).uri===this.uri}toString(){return super.toString().replace(/\(\*?\)/,"Q{"+this.uri+"}*)")}}class Ao extends De{constructor(t){super(9),this.j=t,fe(this,"ND e["+t.ga()+"]"),this.g={p:"ND",e:t.V()}}ha(){return t=>ut.U(t)&&(t.nodeType===9||t.nodeType===11)&&this.j.ha()(t.firstChild)}toString(){return"document-node("+this.j.toString()+")"}}class Ee extends ae{constructor(t){super(),this.Oc=t,fe(this,t.code),this.g={p:t.code}}ha(){return t=>this.Oc.matches(t)}toString(){return"xs:"+this.Oc.name}}class Fo extends ae{constructor(){super(),fe(this,"A m[AO,AD,AF]"),this.g={p:"A",m:[{p:"AO"},{p:"AD"},{p:"AF"}]}}ha(){return t=>/^A[ODF]/.test(t.code)}toString(){return"xs:numeric"}}var An;class Wr extends ae{ga(){return"E"}V(){return{p:"E"}}ha(){return()=>!1}toString(){return"xs:error"}}var Yn;class Qe extends ae{constructor(){super(),this.j=[],this.resultType=null}Fb(t){if(!(t instanceof Qe))return Ot.Xb;if(t instanceof Eo||t instanceof wo)return Ot.Jb;if(!(t instanceof Ve||t instanceof Ar||t instanceof Fr))return Ot.kc;if(this.j.length!==t.j.length)return Ot.Xb;let i=function(v,a,u){return v.map((l,F)=>u(l,a[F]))}(this.j,t.j,Ot.wh),f=Ot.wh(this.resultType,t.resultType);return i.every(v=>v===Ot.sb)&&f===Ot.sb?Ot.sb:i.every(v=>[Ot.sb,Ot.kc].includes(v)&&[Ot.sb,Ot.Jb].includes(f))?Ot.Jb:i.every(v=>[Ot.sb,Ot.Jb].includes(v)&&[Ot.sb,Ot.kc].includes(f))?Ot.kc:Ot.tg}We(){return Et.ya}}class Hr extends Qe{constructor(){super(),fe(this,"F"),this.g={p:"F"}}ha(){return t=>t instanceof Ut.XdmFunction||t instanceof qt||t instanceof It||t instanceof ee}Fb(t){return t instanceof Hr?Ot.sb:/^F/.test(t.V().p)?Ot.Jb:Ot.Xb}toString(){return"function(*)"}}var Nn;function bu(e,t){let i=[];return t.forEach(f=>{i.push(e.j[f])}),new Ve(i,e.resultType)}class Ve extends Qe{constructor(t,i){super(),Z.assert(i instanceof Vt),Z.assert(t.every(f=>f instanceof Vt)),this.j=t,this.resultType=i,fe(this,"F a["+t.map(f=>f.ga()).join(",")+"] r["+i.ga()+"]"),wu(this,{p:"F",a:t.map(f=>f.V()),r:i.V()})}ha(){let t=this;return function(i){return i instanceof qt?t.j.length===1&&t.j[0].cardinality===2&&i.conforms(t.j[0].itemType.ha(),t.resultType.itemType.ha(),qi(t.resultType.cardinality)):i instanceof It?t.j.length===1&&t.j[0].cardinality===2&&t.j[0].itemType instanceof Ee&&i.conforms(()=>!0,t.resultType.itemType.ha(),qi(t.resultType.cardinality)):i instanceof Ut.XdmFunction?(i=t.Fb(i.Ve()),[Ot.sb,Ot.Jb].includes(i)):!1}}yc(){return this.j}We(){return this.resultType}toString(){return"(function("+this.j.map(t=>t.toString()).join(",")+") as "+this.resultType.toString()+")"}}class Eo extends Qe{constructor(){super(),fe(this,"FM"),this.g={p:"FM"}}yc(){return[Je(this.B())]}B(){return xr}K(){return Et.ya}ha(){return t=>t instanceof It||t instanceof ee}toString(){return"map(*)"}}var ti;class Ar extends Qe{constructor(t,i){super(),Z.assert(t instanceof ae),Z.assert(i instanceof Vt),this.R=t,this.valueType=i,fe(this,"FM k["+t.ga()+"] v["+i.ga()+"]"),this.g={p:"FM",k:t.V(),v:i.V()}}ha(){return t=>t instanceof It&&t.conforms(this.R.ha(),this.valueType.itemType.ha(),qi(this.valueType.cardinality))}toString(){return"map("+this.R.toString()+","+this.valueType.toString()+")"}yc(){return[Je(this.B())]}B(){return this.R}K(){return this.valueType}We(){return this.valueType}}class wo extends Qe{constructor(){super(),fe(this,"FA"),this.g={p:"FA"}}ha(){return t=>t instanceof qt}toString(){return"array(*)"}yc(){return[Et.tc]}J(){return Et.ya}}var ei;class Fr extends Qe{constructor(t){super(),Z.assert(t instanceof Vt),this.R=t,fe(this,"FA v["+t.ga()+"]"),this.g={p:"FA",v:t.V()}}ha(){return t=>t instanceof qt&&t.value.every(i=>this.R.matches(i))}toString(){return"array("+this.R.toString()+")"}yc(){return[Et.tc]}J(){return this.R}We(){return this.R}}class Er extends ae{constructor(t,i){super(),this.j=t,this.R=i;var f=t.V();let v=i.V();f=Gs(f.p,v.p),fe(this,f+" u["+t.ga()+","+i.ga()+"]"),this.g={p:f,u:[t.V(),i.V()]}}ha(){let t=this.j.ha(),i=this.R.ha();return f=>t(f)||i(f)}B(){let t=this.j.B(),i=this.R.B();return new Er(t,i)}J(){let t=this.j.J(),i=this.R.J(),f=t.cardinality;return f===i.cardinality?new Vt(new Er(t.itemType,i.itemType),f):Et.ya}}class yu extends ae{constructor(t,i){super(),this.j=t,this.R=i;var f=t.V();let v=i.V();f=f.p.startsWith(v.p)?f.p:v.p.startsWith(f.p)?v.p:f.p.charAt(0)===v.p.charAt(0)?f.p.charAt(0):"",fe(this,f+" i["+t.ga()+","+i.ga()+"]"),this.g={p:f,i:[t.V(),i.V()]}}ha(){let t=this.j.ha(),i=this.R.ha();return f=>t(f)&&i(f)}}class Du extends ae{constructor(t,i){super(),this.j=t,this.R=i;var f=t.V();let v=i.V();f=f.p.startsWith(v.p)?f.p:v.p.startsWith(f.p)?v.p:f.p.charAt(0)===v.p.charAt(0)?f.p.charAt(0):"",fe(this,f+" d["+t.ga()+","+i.ga()+"]"),this.g={p:f,d:[t.V(),i.V()]}}ha(){let t=this.j.ha(),i=this.R.ha();return f=>t(f)&&!i(f)}}let xo={};function Ie(e){var t=xo[e];return t||(t=Le(e),t=Pe(t),xo[e]=t)}function Pe(e){var t=e.p;if(t==="")return Bn;if(e.u)return t=Pe(e.u[0]),e.u.slice(1).reduce((i,f)=>new Er(i,Pe(f)),t);if(e.i)return t=Pe(e.i[0]),e.i.slice(1).reduce((i,f)=>new yu(i,Pe(f)),t);if(e.d)return new Du(Pe(e.d[0]),Pe(e.d[1]));switch(t.charAt(0)){case"A":if(e.n==="Q{http://www.w3.org/2001/XMLSchema}numeric")return An;if(e.m){if(e=e.m,e.length===3&&e.some(i=>i.p==="AO")&&e.some(i=>i.p==="AD")&&e.some(i=>i.p==="AF"))return An;Z.ka("Unhandled atomic union type")}else return new Ee(at.codes[t]);break;case"F":switch(t){case"FA":return e.v?new Fr(Be(e.v)):ei;case"FM":return e.k&&e.v?new Ar(Pe(e.k),Be(e.v)):ti;default:return e.a?(t=e.a.map(Be),e=e.r?Be(e.r):Et.ya,new Ve(t,e)):Nn}case"N":return t==="N"?Kn:(t={ND:9,NE:1,NA:2,NT:3,NC:8,NP:7,NN:13}[t],e.n?(e=e.n,/\}\*$/.test(e)?new Gr(t,e.substring(2,e.length-2)):/^\*:/.test(e)?new gr(t,e.substring(2)):new an(t,at.XS.QName.fromEQName(e))):e.e?(e=Pe(e.e),new Ao(e)):new De(t));case"E":return Yn}}let bo={IDREFS:"ASNTNCR",ENTITIES:"ASNTNCE",NMTOKENS:"ASNTK"},wr={};var xr,Fn,Ji,$i,br,Qi,yo;let Ot=function(){function e(l,F){Z.assert(l instanceof ae),Z.assert(F instanceof ae);let S=l.ga()+"<>"+F.ga(),O=u[S];return O||(l=v(l,F),u[S]=l)}function t(l,F){switch(Z.assert(l instanceof ae),Z.assert(F instanceof ae),e(l,F)){case 0:case 1:return l;case 2:return F;case 3:case 4:return l=l.V(),F=F.V(),Pe({p:Gs(l.p,F.p),u:[l,F]})}}function i(l,F){switch(Z.assert(l instanceof ae),Z.assert(F instanceof ae),e(l,F)){case 0:case 1:return F;case 2:return l;case 3:return l=l.V(),F=F.V(),Pe({p:l.p.startsWith(F.p)?l.p:F.p.startsWith(l.p)?F.p:l.p.charAt(0)===F.p.charAt(0)?l.p.charAt(0):"",i:[l,F]});case 4:return Yn}}function f(l,F){return l===0&&F===0?0:l!==0&&l!==1||F!==0&&F!==1?l!==0&&l!==2||F!==0&&F!==2?l===4||F===4?4:3:2:1}function v(l,F){function S(C,n){return(C||"")===(n||"")?0:C&&!n?2:n&&!C?1:4}function O(C){return C===1?2:C===2?1:C}function k(C){return C.n||C.e||C.u||C.i||C.d}var d=l.V();let o=F.V(),E=l.ga(),T=F.ga();return d.p==="F"?l instanceof Qe&&F instanceof Qe?(Z.assert(l.Fb),l.Fb(F)):3:E===T?0:l instanceof Wr?2:F instanceof Wr?1:gn(l)?gn(F)?0:/^A[ODF]/.test(o.p)?1:o.p==="A"||o.p===""?2:4:gn(F)?O(v(F,l)):d.p===o.p?qn(l)?d.u&&o.u?3:d.e&&o.e?S(d.e,o.e):d.n&&o.n?S(d.n,o.n):k(d)&&k(o)?4:k(d)&&!k(o)?2:k(o)&&!k(d)?1:0:l.la()?0:d.p==="FA"?(l=l.J?l.J():Et.ya,F=F.J?F.J():Et.ya,a(l,F)):d.p==="FM"?(d=e(l.B(),F.B()),F=a(l.K(),F.K()),f(d,F)):l instanceof Qe&&F instanceof Qe?(Z.assert(l.Fb),l.Fb(F)):3:d.p.startsWith(o.p)?d.u?3:2:o.p.startsWith(d.p)?d.u?3:1:4}function a(l,F){Z.assert(l instanceof Vt),Z.assert(F instanceof Vt);var S=l.cardinality,O=F.cardinality;return S=S===O?Ot.sb:(S|O)===S?Ot.Jb:(S|O)===O?Ot.kc:S|O?Ot.tg:Ot.Xb,l=e(l.itemType,F.itemType),f(S,l)}let u={};return{sb:0,Jb:1,kc:2,tg:3,Xb:4,Fb:e,Xi:function(l,F){return Z.assert(l instanceof ae),Z.assert(F instanceof ae),l=e(l,F),l===0||l===2},Rj:t,Gd:function(l){return Z.assert(0<l.length),l.slice(1).reduce((F,S)=>t(F,S),l[0])},Ji:function(l){return Z.assert(0<l.length),l.slice(1).reduce((F,S)=>i(F,S),l[0])},wh:a}}();function qe(e){return(e&4)!==0}function Xe(e){return(e&1)!==0}function Su(e){let t=0;return e.forEach(i=>t|=i),t===5&&(t=7),t}function Vi(e){return{0:1,1:2,"?":3,"+":6,"*":7}[e]}function Cu(e,t){return(Xe(e)&&Xe(t)?1:0)+(e!==1||t!==1?2:0)+(e===1&&!qe(t)||t===1&&!qe(e)?0:4)}function vu(e){switch(e){case"1":return t=>t===1;case"0":return t=>t===0;case"?":return t=>2>t;case"+":return t=>0<t;case"*":return()=>!0}}function qi(e){switch(e){case 1:return t=>t===0;case 2:return t=>t===1;case 4:return t=>1<t;case 3:return t=>2>t;case 6:return t=>0<t;default:return()=>!0}}function Zn(e){switch(e){case 3:return"?";case 2:return"";case 7:return"*";case 6:return"+";case 4:return"+";case 1:return"0";default:return"*"}}function In(e,t,i){e=e.expand(),t=t.expand(),e=wt(e),t=wt(t);let f,v;for(;;){if(f=e.next(),v=t.next(),f===null)return v===null;if(v===null||!Ki(f,v,i))return!1}}function Ki(e,t,i){var f=ut.Ha;if(e===t)return!0;if(ut.U(e)){if(!ut.U(t)||!ut.Wi(e.nodeType,t.nodeType))return!1;switch(e.nodeType){case 9:case 11:return In(f.Ia(e),f.Ia(t));case 1:if(!ut.aa(e).equals(ut.aa(t)))return!1;let v=f.Ga(e).expand();if(v.length!==f.Ga(t).count())return!1;for(let a=0;a<v.length;a++){let u=v[a],l=ut.aa(u),F=l.uri?l.uri:null;if(!t.hasAttributeNS(F,l.local)||t.getAttributeNS(F,l.local)!==u.value)return!1}return In(f.Ia(e),f.Ia(t),i);case 2:return ut.aa(e).equals(ut.aa(t))&&e.value===t.value;case 13:return e.prefix===t.prefix&&e.uri===t.uri;case 7:return e.target===t.target&&(i?i(e.textContent,t.textContent):e.textContent===t.textContent);case 3:case 4:case 8:return i?i(e.textContent,t.textContent):e.textContent===t.textContent;default:throw new A("Unknown node type "+e.nodeType,"SXJS0003")}}else{if(e instanceof qt){if(!(t instanceof qt&&t.value.length===e.value.length))return!1;for(f=0;f<e.value.length;f++)if(!In(wt(e.value[f]),wt(t.value[f]),i))return!1;return!0}if(e instanceof It)return t instanceof It?(i=e.keys(),f=t.keys(),i.length!==f.length?!1:wt(i).every(function(v){return t.containsKey(v)&&In(wt(e.get(v)),wt(t.get(v)))})):!1;if(e instanceof Ut.XdmFunction||t instanceof Ut.XdmFunction)throw new A("Function types, other than map(*) or array(*) cannot be tested for equality","FOTY0015");if(Bt.pc(e)&&Bt.pc(t))return!0;if(i&&e.isStringLike()&&t.isStringLike())return i(e.value,t.value);try{return e.equals(t)}catch{return!1}}}function ni(e,t,i){let f=e.next(),v=t.next();for(;;){if(f===null)return v===null?0:-1;if(v===null)return 1;if(i)if(Ki(f,v,i.equals))f=e.next(),v=t.next();else return Bt.pc(f)?-1:/^AS/.test(f.code)&&/^AS/.test(v.code)?i.compare(f.value,v.value):f.compareTo(v);else if(Ki(f,v))f=e.next(),v=t.next();else return Bt.pc(f)?-1:f.compareTo(v)}}let Bt=function(){function e(g,x){return g.equals(x)}function t(g,x){return g.compareTo(x)}function i(g){return g===null}function f(g){return(w.double.matches(g)||w.float.matches(g))&&isNaN(g.toNumber())}function v(g,x){return function(I,L){return x(I)||x(L)?x(I)?x(L):!1:g(I,L)}}function a(g,x){return function(I,L){return x(I)||x(L)?x(I)?x(L)?0:-1:1:g(I,L)}}function u(g,x){return g===null?NaN:w.numeric.matches(g)?g.toNumber():x?w.double.fromString(g.toString()).toNumber():w.double.ie(g.toString()).toNumber()}function l(g){return function(x,I){return x=u(x,g),I=u(I,g),isNaN(x)?isNaN(I)?0:-1:isNaN(I)?1:x-I}}function F(g){return function(x,I){return x=u(x,g),I=u(I,g),isNaN(x)?isNaN(I):isNaN(I)?!1:x-I===0}}function S(g,x){return function(I,L){I=I.toString(),L=L.toString();var R=g(I.toLowerCase(),L.toLowerCase());if(R===0){for(R=0;R<I.length;R++)if(I.charAt(R)!==L.charAt(R))return x===(I.charAt(R)===I.charAt(R).toLowerCase())?-1:1;return 0}return R}}function O(g){return function(x,I){return x.isStringLike()&&I.isStringLike()?g(x.value,I.value):x.equals(I)}}function k(g){return function(x,I){return x.isStringLike()&&I.isStringLike()?g(x.value,I.value):x.compareTo(I)}}function d(g,x){let I=g.split("|");if(I[0]==="DESC"){let q=d(g.slice(5),x);return{equals:q.equals,compare:function($,rt){return q.compare(rt,$)}}}let L={equals:null,compare:null},R;switch(I[0]){case"NC":return L.equals=F(!1),L.compare=l(!1),L;case"QUNC":return L.equals=F(!0),L.compare=l(!0),L;case"DblSC":return L.equals=v(e,f),L.compare=a(a(t,f),i),L;case"CCC":return L.equals=O(H().equals),L.compare=a(k(H().compare),i),L;case"TEXT":return g=I[1]||"http://www.w3.org/2005/xpath-functions/collation/codepoint",R=c(g,x),Q(R,g),L.equals=v(function(q,$){return R.equals(q.toString(),$.toString())},i),L.compare=a(function(q,$){return k(R.compare)(w.string.cast(q),w.string.cast($))},i),L;case"CAVC":case"DecSC":case"GAC":case"AtSC":case"CalVC":return{equals:v(e,i),compare:a(a(t,f),i)};case"EQC":return L.equals=v(e,i),L.compare=function(q,$){return L.equals(q,$)?0:1},L;case"CAC":return g=I[1]||"http://www.w3.org/2005/xpath-functions/collation/codepoint",R=c(g,x),Q(R,g),L.equals=function(q,$){return R.equals(q.toString(),$.toString())},L.compare=function(q,$){return R.compare(q.toString(),$.toString())},L;default:throw new A("Unknown comparer "+g,"SXJS0003")}}function o(g,x){let I=x.fixed.fa,L=null;g.comp&&(L=g.comp,L=L.replace(/^DESC\|/,""));let R=I.mc(I.ba(g,"collation"),x).next(),q=I.mc(I.ba(g,"order"),x).next(),$=I.mc(I.ba(g,"lang"),x).next(),rt=I.mc(I.ba(g,"caseOrder"),x).next();g=I.mc(I.ba(g,"dataType"),x).next(),rt=R===null&&rt!==null?rt.toString():"#default";try{$=R===null&&$!==null&&$.toString()!==""?w.language.fromString($.toString()):null}catch(st){throw new A("@lang: "+st.message,"XTDE0030")}return L==="CalVC"&&(g=null),q=q===null?"ascending":q.toString(),g=g===null?null:g.toString(),R=R===null?$===null?"http://www.w3.org/2005/xpath-functions/collation/codepoint":"http://www.w3.org/2013/collation/UCA?lang="+$.toString():R.toString(),{Ad:L,collation:R,order:q,lang:$,Ke:rt,dataType:g}}function E(g,x){return T(o(g,x),x)}function T(g,x){function I(R){return g.order==="descending"?function(q,$){return R($,q)}:R}x=c(g.collation,x),Q(x,g.collation),x=x.compare;let L=g.Ke!=="#default"?S(x,g.Ke==="lower-first"):k(x);if(g.dataType==="number")return I(l(!1));if(g.dataType==="text")return I(a(function(R,q){return L(w.string.cast(R),w.string.cast(q))},i));if(g.Ad){if(x=g.Ad,x==="DblSC")return I(a(a(t,f),i));if(x==="CalVC"||x==="DecSC")return I(a(t,i));if(x==="CCC")return I(a(L,i))}return I(L)}function C(g,x){switch(g){case"=":case"eq":return x===0;case"<":case"lt":return 0>x;case">":case"gt":return 0<x;case">=":case"ge":return 0<=x;case"<=":case"le":return 0>=x;case"!=":case"ne":return x!==0;default:throw new A("Unknown operator "+g,"SXJS0003")}}function n(g,x){return g.map(function(I){var L=x.fixed.fa;return I=L.ba(I,"dataType"),L=I===null?null:L.evaluate(I,x).next(),L==="number"?function(R){return R===null?null:w.double.ie(R.toString())}:L==="text"?function(R){return R===null?null:w.string.cast(R)}:function(R){return R}})}function r(g,x){return g.substring(0,x.length)===x}function h(g,x){return g.substring(g.length-x.length)===x}function m(g,x){return x&&(x=x.next())?x.toString():g.collation||ft.Vf(g,"defaultCollation")}function c(g,x){if(x=g?r(g,"http://www.w3.org/2013/collation/UCA")&&36<g.length?_(g,g.substring(37),x):r(g,"http://saxon.sf.net/collation")&&29<g.length?_(g,g.substring(30),x):x.fixed.options.uc[g]:H(),!x)throw new A("Unrecognized collation "+g,"FOCH0002");return x}function _(g,x){if(x==="")x=H();else if(x==="strength=secondary"||x==="strength=2")x=B();else{let I={};if(x.split(";").forEach(function(R){R=R.split("="),I[R[0]]=R[1]}),x={},I.fallback==="no")throw new A("Unsupported collation "+g,"FOCH0002");if(I.strength&&(I.strength==="primary"||I.strength==="1"?x.sensitivity="base":I.strength==="secondary"||I.strength==="2"?x.sensitivity="accent":I.strength==="tertiary"||I.strength==="3"?x.sensitivity="variant":(I.strength==="quaternary"||I.strength==="4"||I.strength==="identical"||I.strength==="5")&&(x.sensitivity="variant",x.ignorePunctuation=!1)),I.caseFirst){let R=I.caseFirst;["upper","lower","false"].includes(R)||(R="false"),x.caseFirst=R}I.numeric==="yes"&&(x.numeric=!0),I.alternate==="blanked"&&(x.ignorePunctuation=!0);let L=new Intl.Collator(I.lang,x);x={equals:function(R,q){return L.compare(R,q)===0},compare:function(R,q){return L.compare(R,q)},startsWith:function(R,q){return R.length<q.length?!1:L.compare(R.substring(0,q.length),q)===0},endsWith:function(R,q){return R.length<q.length?!1:L.compare(R.substring(R.length-q.length),q)===0},indexOf:function(R,q){if(R.length<q.length)return-1;for(let $=0;$<=R.length-q.length;$++)if(L.compare(R.substring($,$+q.length),q)===0)return $;return-1},contains:function(R,q){if(R.length<q.length)return!1;for(let $=0;$<=R.length-q.length;$++)if(L.compare(R.substring($,$+q.length),q)===0)return!0;return!1},collationKey:function(R){return R}}}if(!x)throw new A("Unrecognized collation "+g,"FOCH0002");return x}function Q(g,x){if(!g.hasOwnProperty("compare")||!g.hasOwnProperty("equals"))throw new A("Collation "+x+" cannot be used for sorting","XTDE1035")}function H(){return{equals:function(g,x){return g===x},compare:function(g,x){return Ct.ce(g,x)},contains:function(g,x){return g.indexOf(x)!==-1},startsWith:function(g,x){return r(g,x)},endsWith:function(g,x){return h(g,x)},indexOf:function(g,x){return g.indexOf(x)},collationKey:function(g){return g}}}function B(){function g(x){return x?(x+"").toUpperCase():""}return{equals:function(x,I){return g(x)===g(I)},compare:function(x,I){return Ct.ce(g(x),g(I))},contains:function(x,I){return g(x).indexOf(g(I))!==-1},startsWith:function(x,I){return r(g(x),g(I))},endsWith:function(x,I){return h(g(x),g(I))},indexOf:function(x,I){return g(x).indexOf(g(I))},collationKey:function(x){return g(x)}}}function b(g){return{equals:function(x,I){return g(x)===g(I)},compare:function(x,I){return Ct.ce(g(x),g(I))},contains:function(x,I){return g(x).indexOf(g(I))!==-1},startsWith:function(x,I){return r(g(x),g(I))},endsWith:function(x,I){return h(g(x),g(I))},indexOf:function(x,I){return g(x).indexOf(g(I))},collationKey:function(x){return g(x)}}}let w=at.XS;return{$d:d,Wh:E,Ag:function(){function g(x){return x.toUpperCase()}return b(function(x){return x?(x+"").replace(/[a-z]/g,g):""})},Le:B,bi:k,Gg:H,Vc:"http://www.w3.org/2005/xpath-functions/collation/codepoint",di:T,li:O,Wg:"http://www.w3.org/2010/09/qt-fots-catalog/collation/caseblind",gc:function(g,x,I,L,R,q=!1){Z.assert(L.equals&&L.compare);let $=w.numeric.matches,rt=w.untypedAtomic.matches,st=(P,U)=>rt(P)?q&&$(U)?w.numeric.Id(P):rt(U)?w.string.cast(P):$(U)?w.double.cast(P):U.code==="AQ"?at.XS.QName.cast(P,ft.Sd(R,!1)):at.codes[U.code].cast(P):P,pt=I==="="?L.equals:I==="!="?(P,U)=>!L.equals(P,U):(P,U)=>C(I,L.compare(P,U)),tt;for(var Y;(tt=g.next())!==null;){let P=wt(x);for(;(Y=P.next())!==null;){let U=st(tt,Y);if(Y=st(Y,tt),!($(U)&&isNaN(U.value)||$(Y)&&isNaN(Y.value))&&pt(U,Y))return _t(!0)}}return _t(!1)},Ai:function(g){return{equals:function(x,I){let L=w.numeric.matches;return L(x)||L(I)?w.numeric.Id(x).toNumber()===w.numeric.Id(I).toNumber():g.equals(x,I)},compare:g.compare}},Te:function(g,x,I){return c(m(g,x),I)},Sf:c,Ob:function(g,x,I,L){if(x=m(g,x),L=c(x,L)[I],!L)throw new A("Collation "+x+" has no "+I+" method","FOCH0002",g);return L},Ci:n,Xf:"http://www.w3.org/2005/xpath-functions/collation/html-ascii-case-insensitive",pc:f,Cj:o,Dj:function(g){let x=ft.Pa(g),I=ft.Ba(g,"sortKey");return L=>{let R=Lt(x(L)),q=[],$=I.map(Y=>E(Y,L)),rt=I.map(ft.Pa),st=n(I,L),pt=L.X(!1);pt.pa="sort key",pt.focus=R;let tt=0;return R.forEachItem(function(Y){let P=I.map(function(U,nt){return st[nt](rt[nt](pt).next())});q.push({item:Y,keys:P,Jd:tt++})}),q.sort(function(Y,P){for(let nt=0;nt<$.length;nt++){var U=Y.keys[nt];let W=P.keys[nt];if(U!==null||W!==null){if(U===null||W===null)return U===null?-1:1;if(U=$[nt](U,W),U!==0)return U}}return Y.Jd>P.Jd?1:Y.Jd===P.Jd?0:-1}),wt(q.map(Y=>Y.item))}},jf:C,Dh:function(g,x){switch(g){case"=":case"eq":return x;case"!=":case"ne":return!x;case"<":case"lt":case">":case"gt":case">=":case"ge":case"<=":case"le":throw new A("Operator "+g+" not allowed for unordered types","SXJS0003");default:throw new A("Unknown operator "+g,"SXJS0003")}},kf:function(g,x=null){function I(rt){return rt.isStringLike()?R(rt.matchKey()):rt.matchKey()}let L=new It,R=g.collationKey;if(!R)throw new A("Collation is unsuitable for keys and grouping","XTDE1110");let q={Kc:function(rt,st){return In(wt(rt),wt(st),g.equals)},hash:function(rt){return rt.map(I).join()}},$={Kc:function(rt,st){return I(rt)===I(st)},hash:function(rt){return I(rt)}};return L.options=x?q:$,L},Fj:"http://www.w3.org/2013/collation/UCA",Kh:"http://www.w3.org/xslts/collation/caseblind"}}(),Tu=function(){function e(a,u,l){function F(d,o){function E(T){return T instanceof cn?"a namespace":"an attribute"}if(o)throw new A("Cannot create "+E(d)+" node on element '"+f.aa(a)+"' after creating children","XTDE0410");if(a.nodeType===11||a.nodeType===9)throw new A("Cannot add "+E(d)+" to a document node","XTDE0420")}function S(d,o){var E=o._saxonIsLocal?o._saxonIsLocal:!1;if(o instanceof qt)o.value.forEach(function(C){C.forEach(function(n){S(d,n)})});else{if(o instanceof It)throw new A("A map can't be a child of an XML node",l.fixed.options.language==="XSLT"?"XTDE0450":"XPTY0004");if(o instanceof Ut.XdmFunction)throw new A("A function can't be a child of an XML node",l.fixed.options.language==="XSLT"?"XTDE0450":"XPTY0004");if(f.U(o)?k=!1:(o=f.Ac(l.da).createTextNode((k?" ":"")+o.toString()),k=!0),d.nodeType===1||d.nodeType===11){if(o.nodeType!==10)if(f.Ed(o))if(J.Qb(d))d.appendChild(d.ownerDocument.importNode(o,!0));else if(F(o,O),o.prefix===""){if(d.namespaceURI==="")throw new A("Cannot add a default namespace to a no-namespace element","XTDE0440");if(d.hasAttributeNS("","xmlns")){if(d.getAttributeNS("","xmlns")!==o.uri)throw new A("Cannot have two different default namespaces","XTDE0430")}else J.Qb(d)||d.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns",o.uri)}else{E="xmlns:"+o.prefix;var T=o.uri;if(o.uri==="~"&&Ft.withPrefix[o.prefix]!==null&&(T=Ft.withPrefix[o.prefix]),d.hasAttributeNS("http://www.w3.org/2000/xmlns/",o.prefix)&&d.getAttributeNS("http://www.w3.org/2000/xmlns/",o.prefix)!==T)throw new A("Cannot have two namespaces with the same prefix '"+o.prefix+"'","XTDE0430");d.setAttributeNS("http://www.w3.org/2000/xmlns/",E,T)}else if(o.nodeType===2){if(F(o,O),o.namespaceURI!==""&&(E=o.name.split(":"),E.length!==2||d.lookupNamespaceURI(E[0])!==o.namespaceURI))if(E.length===2&&d.lookupNamespaceURI(E[0])===null)d.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+E[0],o.namespaceURI);else for(T=E.length===2?E[0]:"ns";;)if(d.lookupNamespaceURI(T)===null){d.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+T,o.namespaceURI),o.name=T+":"+E[E.length-1];break}else T+="_1";d.setAttributeNS(o.namespaceURI===""?null:o.namespaceURI,o.name,o.value)}else if(o.nodeType===3||o.nodeType===4)o.nodeValue&&o.nodeValue!==""&&(E=d.lastChild,!E||E.nodeType!==3&&E.nodeType!==4?d.appendChild(i(o,l,"")):E.nodeValue+=o.nodeValue),O=!0;else if(o.nodeType===9||o.nodeType===11)v.Ia(o).forEachItem(function(C){S(d,C)});else{if(O=!0,!(J.ra()&&l.da===window.document||o.nodeType!==1||J.Qb(o))){T=o.prefix||"";let C=o.lookupNamespaceURI(T)||"",n=o.namespaceURI||"";C!==n&&f.Re(o,T,n),!o.lookupNamespaceURI(null)&&d.lookupNamespaceURI(null)&&f.Re(o,"","")}E&&J.Qb(d)===J.Qb(o)||(o=i(o,l,"c")),d.appendChild(o),o._saxonIsLocal=!1}}else if(d.nodeType===9)o!==null&&(d.documentElement=o);else throw new A("Unknown parent node type "+d.nodeType,"SXJS0003")}}l||Z.ka("No context in makeComplexContent for "+Z.showValue(a));let O=!1,k=!1;u.forEachItem(function(d){S(a,d)})}function t(a,u){return u&&0<=u.indexOf("l")&&(a._saxonIsLocal=!0),a}function i(a,u,l){var F=l&&0<=l.indexOf("c");if(f.U(a)){let S,O,k=function(d,o){l&&0<=l.indexOf("m")&&(o._saxonOriginal=d)};switch(a.nodeType){case 9:case 11:return F=f.dc(u.da.createDocumentFragment()),F._saxonBaseUri=a._saxonBaseUri,F._saxonDocUri=a._saxonDocUri,e(F,v.Ia(a).mapOneToOne(function(d){return i(d,u,l)}),u),k(a,F),t(F,l);case 13:return new cn(a.prefix,a.uri);case 1:return O=f.aa(a),S=u.createElement(O.uri,O.toString()),!F||J.ra()&&J.Qb(S)&&u.da===window.document||f.Dc(a).forEach(function(d){f.Re(S,d.prefix,d.uri)}),v.Ga(a).forEachItem(function(d){S.setAttributeNS(d.namespaceURI===""?null:d.namespaceURI,d.name,d.value)}),v.Ia(a).forEachItem(function(d){d=i(d,u,l),d.nodeType===1&&f.aa(d).uri===""&&O.uri!==""&&f.Re(d,"",""),S.appendChild(d)}),S._saxonBaseUri=f.baseURI(a),k(a,S),t(S,l);case 10:return null;case 2:return new Tn(f.aa(a),a.value,null);default:return S=J.ra()?window.document.importNode(a,!0):a.cloneNode(u.da,a,!0),k(a,S),t(S,l)}}else return a}let f=ut,v=f.Ha;return{cj:e}}(),je=function(){function e(t){let i=ut.Ha,f={"p.any":function(){return function(){return!0}},"p.never":function(){return function(){return!1}},"p.booleanExp":function(v){let a=ft.Pa(v);return function(u,l){return l=l.X(),l.focus=me(u),ft.Bd(a(l))}},"p.genNode":function(v){let a=ft.Pa(v),u;if(v.C[0].N==="slash"){v=ft.gi(v.C[0]);let l=v.C[0];for(;["filter","subscript"].includes(l.N);)l=l.C[0];l.N==="axis"&&l.name==="child"&&(l.name="self",u=ft.cb(v))}return function(l,F){if(!ut.U(l))return!1;let S=ut.Ha.Sa(l),O;for(var k;;){if(O=S.next(),O==null)return!ut.Ye(k)&&u?(F=F.X(!1),F.focus=me(k),F.Eb=[],u(F).some(d=>ut.isSameNode(d,l))):!1;if(k=F.X(!1),k.focus=me(O),k.Eb=[],a(k).some(d=>ut.isSameNode(d,l)))return!0;k=O}}},"p.genPos":function(v){let a=Ie(v.test).ha(),u=ft.Pa(v);return function(l,F){if(!a(l))return!1;let S=F.fixed.fa;F=F.X(!1);var O=i.Ia(ut.Va(l)).filter(a);for(F.focus=Lt(O),F.Eb=[];(O=F.focus.next())!=null;)if(O===l&&S.Bd(u(F)))return!0;return!1}},"p.nodeSet":function(v){let a=ft.Pa(v);return function(u,l){return a(l).some(F=>F===u)}},"p.nodeTest":function(v){return Ie(v.test).ha()},"p.simPos":function(v){let a=Ie(v.test).ha(),u=parseInt(v.pos,10);return function(l){return a(l)&&i.Ic(l).filter(a).count()===u-1}},"p.venn":function(v){let a=v.C,u=e(a[0]),l=e(a[1]);switch(v=v.op,v){case"union":return function(F,S){return u(F,S)||l(F,S)};case"intersect":return function(F,S){return u(F,S)&&l(F,S)};case"except":return function(F,S){return u(F,S)&&!l(F,S)};default:throw new A("unknown op "+v,"SXJS0003")}},"p.withCurrent":function(v){let a=e(v.C[0]);return function(u,l){return l=l.X(!0),l.ma[0]=[u],a(u,l)}},"p.withPredicate":function(v){v=v.C;let a=e(v[0]),u=ft.cb(v[1]);return function(l,F){return a(l,F)?(F=F.X(!1),F.focus=me(l),F.Eb=[],ft.Bd(u(F))):!1}},"p.withUpper":function(v){let a=v.C,u=e(a[0]),l=e(a[1]),F=v.axis;return F==="parent"?v.upFirst==="true"?function(S,O){let k=ut.Va(S);return k&&l(k,O)&&u(S,O)}:function(S,O){let k=ut.Va(S);return k&&u(S,O)&&l(k,O)}:function(S,O){if(!u(S,O))return!1;S=ut.Bg[F](S);let k;for(;(k=S.next())!==null;)if(l(k,O))return!0;return!1}}}[t.N];if(f)return f(t);throw new A("Unimplemented pattern "+t.N,"SXJS0002")}return{kd:e,matches:function(t,i,f){return f.nb.push(null),t=t(i,f),f.nb.pop(),t}}}(),Do=function(){function e(f,v,a,u){function l(h){let m=[];for(let c=h.length-1;0<=c;c--)m.push({Kd:h[c],action:h[c].C[1],pattern:je.kd(h[c].C[0])});return m}function F(h){h._saxonAccumulators||(h._saxonAccumulators={}),h._saxonAccumulators[a]={};let m=S(T,h);m&&(r=k(m,h)),h._saxonAccumulators[a].pre=r,i.Ia(h).forEachItem(F),(m=S(C,h))&&(r=k(m,h)),h._saxonAccumulators[a].post=r}function S(h,m){for(let c=0,_=h.length;c<_;c++)if(je.matches(h[c].pattern,m,n))return h[c];return null}function O(h){return{visibility:"PRIVATE",Oa:h,actor:h,Je:h.binds.split(" ").map(function(m){return parseInt(m,10)})}}function k(h,m){let c=u.X(!0);return c.focus=me(m),c.ma=[r],c.oa=O(v),c.pa="accumulator",d.evaluate(h.action,c).expand()}let d=u.fixed.fa,o=d.Ba(v,"pre")[0],E=d.Ba(v,"post")[0],T=l(d.Ba(o,"accRule")),C=l(d.Ba(E,"accRule")),n=u.X(!0);n.focus=me(f),n.ma=[],n.oa=O(v);let r=d.evaluate(d.ba(v,"init"),n).expand();F(f)}function t(f,v,a,u,l){let F=u.fixed.fa.fe(f,u).yb[v];if(!F)throw new A("Unknown accumulator "+v,"XTDE3340");if(u.ze&&!u.ze.some(function(S){return S===v}))throw new A("Inapplicable accumulator "+v,"XTDE3362");if(!ut.U(a))throw new A("Cannot evaluate accumulator: context item is not a node","XTTE3360");if(a.nodeType===2||a.nodeType===13)throw new A("Accumulators are not available on attribute or namespace nodes","XTTE3360");if(a._saxonOriginal)return t(f,v,a._saxonOriginal,u,l);if(f=F.lg,!a._saxonAccumulators||!a._saxonAccumulators.hasOwnProperty(f)){let S=ut.nc(a);if(S._saxonAccumulators||(S._saxonAccumulators={}),S._saxonAccumulators[f]||(S._saxonAccumulators[f]={}),S._saxonAccumulators[f]["under construction"])throw new A("Circular definition of accumulator "+f,"XTDE3400");S._saxonAccumulators[f]["under construction"]=1,e(S,F.Uh,f,u),delete S._saxonAccumulators[f]["under construction"]}return a._saxonAccumulators[f][l]}let i=ut.Ha;return{Th:function(f,v,a,u){return t(f,v,a,u,"pre")},Sh:function(f,v,a,u){return t(f,v,a,u,"post")}}}(),ln=function(){function e(O,k,d,o,E=null){let T=F.string.fromString(k);if(O&&O.containsKey(T)){if(O=O.get(T),d==="function"){if(k=new Ve([Et.Zb],Et.Zb),O.length===1&&k.ha()(O[0]))return O[0];throw new A("Option "+T+" must be a function(xs:string) as xs:string","XPTY0004")}if(O.length===1&&at.type[d].matches(O[0])){if(E&&0>E.indexOf(O[0].value))throw new A("Invalid value "+T+"="+O[0],"FOJS0005");return O[0].value}throw new A("Invalid option: "+k+": must be "+d,"XPTY0004")}return o}function t(O,k){function d(c){throw new A(c,"FOJS0001")}function o(){return m=E()}function E(){for(m="";;){if(h>=O.length)return["eof"];var c=O.charAt(h++);if(!/[ \n\r\t]/.test(c))break}switch(c){case"[":case"{":case"]":case"}":case":":case",":return[c];case'"':for(c=!1;;){let _=O.charAt(h++);if(_!=='"'||c)m+=_,c=_==="\\"&&!c;else return["string",m];h>=O.length&&d("Unclosed quotes in string literal")}case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(m+=c;h<O.length;)if(c=O.charAt(h++),/[0-9\-+.eE]/.test(c))m+=c;else{h--;break}return["number",/^-?(0|[1-9][0-9]*)(\.[0-9]+)?([eE][+-]?[0-9]+)?$/.test(m)?m:d("Invalid JSON number "+m)];case"t":case"f":case"n":for(m+=c;c=O.charAt(h),"a"<=c&&"z">=c;)if(m+=c,++h>=O.length)break;if(["true","false","null"].includes(m))return[m];d("Unknown constant "+m);break;default:return d("Unexpected character '"+c+"' ("+Ct.La(c)+") at position "+h),-1}}function T(c){m[0]!==c&&d("Expected "+c+", found "+m[0])}function C(c){return m[0]===c?(o(),!0):!1}function n(c){return m[0]===c?(o(),!0):m[0]===","?(o(),!1):d("Expected ',' or '"+c+"', found '"+m[0]+"'")}function r(){switch(m[0]){case"[":if(o(),k.Bh(),!C("]"))do r();while(!n("]"));k.Qg();break;case"{":if(o(),k.Ch(),!C("}"))do T("string"),k.Mg(m[1]),o(),T(":"),o(),r();while(!n("}"));k.Rg();break;case"string":k.Pg(m[1]),o();break;case"number":k.Og(m[1]),o();break;case"true":case"false":k.Lg(m[0]),o();break;case"null":k.Ng(),o();break;default:d("Unexpected token "+m[0])}}O=O.replace(/^[\uFEFF]/,"");let h=0,m=null;return m=o(),r(),T("eof"),k.result()}function i(O){try{return JSON.parse('"'+O+'"')}catch(k){throw new A(k.toString(),"FOJS0001")}}function f(O,k){let d=k.ub,o=k.yd,E;return E=o?T=>o.evaluate([[at.XS.string.fromString(v(T))]],d).next().toString():()=>"\uFFFD",O=O.replace(/[\x00-\x08\x0B\x0C\x0E-\x0F\x80-\x9F\uFFFF]/g,E),O=O.replace(/[\uD800-\uDFFF]+/g,T=>{let C="";for(let n=0;n<T.length;n++){let r=T.charAt(n);C+=n%2===1=="\uDC00">r||n===T.length-1&&"\uDC00">r?E(r):r}return C})}function v(O){for(O=O.charCodeAt(0).toString(16);4>O.length;)O="0"+O;return"\\u"+O.toUpperCase()}function a(O,k){if(this.g=[],this.J=[],this.ub=k,e(O,"liberal","boolean",!1),this.yd=e(O,"fallback","function",null),this.B=e(O,"escape","boolean",!1),this.K=e(O,"duplicates","string","use-first",["reject","use-first","use-last"]),this.B&&this.yd)throw new A("parse-json: cannot use fallback with escape:true()","FOJS0005")}function u(O,k){if(this.g=[],this.K=[],this.J=[],this.ub=k,e(O,"liberal","boolean",!1),e(O,"validate","boolean",!1))throw new A("json-to-xml: validate option not supported in a non-schema-aware processor","FOJS0004");if(this.yd=e(O,"fallback","function",null),this.B=e(O,"escape","boolean",!1),this.R=e(O,"duplicates","string","use-first",["reject","use-first","retain"]),this.B&&this.yd)throw new A("json-to-xml: cannot use fallback with escape:true()","FOJS0005")}let l=Ft.Ma,F=at.XS,S=ut.Ha;return a.prototype={g:[],J:[],ub:null,B:!1,yd:null,K:"use-first",R:function(O){return this.B?JSON.stringify(O).replace(/^"|"$/g,"").replace(/\\"/g,'"').replace(/[\uD800-\uDFFF]/g,v):f(O,this)},peek:function(){return this.g[this.g.length-1]},j:function(O){if(this.g.length===0)this.g.push(O);else if(this.peek()instanceof qt)this.peek().value.push(O);else{let k=this.peek(),d=F.string.fromString(this.J.pop());if(k.containsKey(d))switch(this.K){case"reject":throw new A("json-to-xml: duplicate key '"+d.toString()+"'","FOJS0003");case"use-first":return}k.inSituPut(d,O)}},Ng:function(){this.j([])},Lg:function(O){this.j([F.boolean.fromString(O)])},Og:function(O){this.j([F.double.fromNumber(parseFloat(O))])},Pg:function(O){this.j([F.string.fromString(this.R(i(O)))])},Mg:function(O){this.J.push(this.R(i(O)))},Bh:function(){this.g.push(new qt([]))},Qg:function(){this.j([this.g.pop()])},Ch:function(){this.g.push(new It)},Rg:function(){this.j([this.g.pop()])},result:function(){return this.peek()[0]!==void 0?this.peek()[0]:null}},u.prototype={g:[],K:[{}],J:[],ub:null,yd:null,B:!1,R:"use-first",$:function(O){return this.B?JSON.stringify(O).replace(/^"|"$/g,"").replace(/\\"/g,'"').replace(/[\uD800-\uDFFF]/g,v):f(O,this)},peek:function(){return this.g[this.g.length-1]},j:function(O){if(this.g.length===0)O.setAttribute("xmlns",l),this.g.push(O);else{let k=this.peek();if(k.tagName==="map"){let d=this.K.pop(),o=this.J[this.J.length-1];if(d in o)switch(this.R){case"reject":throw new A("parse-json: duplicate key '"+d.toString()+"'","FOJS0003");case"use-first":return}o[d]=O,O.setAttribute("key",d),this.B&&/\\/.test(d.toString())&&O.setAttribute("escaped-key","true")}k.appendChild(O)}},Ng:function(){let O=this.ub.da.createElementNS(l,"null");this.j(O)},Lg:function(O){let k=this.ub.da.createElementNS(l,"boolean");k.appendChild(this.ub.da.createTextNode(O.toString())),this.j(k)},Og:function(O){let k=this.ub.da.createElementNS(l,"number");k.appendChild(this.ub.da.createTextNode(O.toString())),this.j(k)},Pg:function(O){let k=this.ub.da.createElementNS(l,"string");if(O!==""){O=this.$(i(O));let d=this.ub.da.createTextNode(O);this.B&&/\\/.test(O)&&k.setAttribute("escaped","true"),k.appendChild(d)}this.j(k)},Mg:function(O){this.K.push(this.$(i(O)))},Bh:function(){let O=this.ub.da.createElementNS(l,"array");this.g.push(O)},Qg:function(){this.j(this.g.pop())},Ch:function(){let O=this.ub.da.createElementNS(l,"map");this.g.push(O),this.J.push({})},Rg:function(){this.J.pop(),this.j(this.g.pop())},result:function(){return this.peek()}},{od:function(O,k,d){return t(O,new a(k,d))},nj:function(O,k,d){return t(O,new u(k,d))},Jj:function(O,k){function d(c){throw new A("Invalid input to xml-to-json(): "+c,"FOJS0006")}function o(c){r.ad(c).length!==0&&d("node "+c.tagName+" must have no element children")}function E(c){S.Ia(c).filter(function(_){return(_.nodeType===3||_.nodeType===4)&&_.nodeValue&&jt.trim(_.nodeValue)!==""}).next()&&d("node "+c.tagName+" must have no text content")}function T(c){try{return F.boolean.fromString(c).toBoolean()}catch{d("invalid boolean: '"+c+"'")}}function C(c){try{JSON.parse('"'+c+'"')}catch(_){throw new A("invalid escape sequence: "+_.toString(),"FOJS0007")}}function n(c,_=0){let Q=_===0,H=h?" ".repeat(3*_):"";if(c.nodeType===9||c.nodeType===11){var B=r.ad(c);return B.length!==1&&d("document node has "+B.length+" element children"),n(B[0],_)}if(c.nodeType===1){let b=!1;if(c.namespaceURI===l){let w=r.Va(c)!==null&&r.Va(c).localName==="map";switch(S.Ga(c).forEachItem(function(g){(0>g.name.indexOf(":")||g.namespaceURI===l)&&(g.name==="key"||g.name==="escaped-key"?g.name==="escaped-key"?(w||Q||d("@escaped-key is allowed only on children of map, or on root element"),T(g.value)&&C(c.getAttribute("key"))):w||Q||d("@key is allowed only on children of map, or on root element"):g.name==="escaped"?(c.localName!=="string"&&d("@escaped is allowed only on string"),b=T(g.value)):d("invalid attribute "+g.name))}),c.localName){case"null":return S.Ia(c).filter(function(q){return q.nodeType!==8&&q.nodeType!==7}).next()&&d("null element must have no content"),"null";case"string":if(o(c),B=c.textContent,b)m&&(B=B.replace(/^\//g,"\\/")),B=B.replace(/^"/g,'\\"').replace(/^[\b]/g,"\\b").replace(/^\f/g,"\\f").replace(/^\n/g,"\\n").replace(/^\r/g,"\\r").replace(/^\t/g,"\\t").replace(/([^\\])"/g,'$1\\"').replace(/([^\\])[\b]/g,"$1\\b").replace(/([^\\])\f/g,"$1\\f").replace(/([^\\])\n/g,"$1\\n").replace(/([^\\])\r/g,"$1\\r").replace(/([^\\])\t/g,"$1\\t").replace(/([^\\])\//g,"$1\\/").replace(/[\u0001-\u001F\u007F-\u009F]/g,v),C(B);else return m?JSON.stringify(B).replace(/\//g,"\\/"):JSON.stringify(B);return'"'+B+'"';case"number":o(c);try{B=F.double.fromString(c.textContent)}catch{d("invalid number")}return isFinite(B.toNumber())||d("NaN and INF not allowed"),B.toString();case"boolean":return o(c),T(c.textContent),F.boolean.fromString(c.textContent).toString();case"array":E(c);let g=h?`[
`:"[",x=h?H:"";return r.ad(c).forEach(function(q){g+=x+n(q,_+1),x=h?`,
${H}`:","}),g+"]";case"map":E(c);let I=h?`{
`:"{",L=h?H:"",R={};return r.ad(c).forEach(function(q){q.hasAttribute("key")||d("child element of map must have a key");let $=r.getAttribute(q,"key"),rt=$,st=r.getAttribute(q,"escaped-key"),pt=!1;st&&T(st)&&(pt=!0,rt=i($)),R[rt]&&d("duplicate key '"+$+"'"),R[rt]=!0,I+=L+(pt?'"'+$+'"':JSON.stringify($).replace(/\//g,"\\/"))+":"+n(q,_+1),L=h?`,
${H}`:","}),h?(B=0<_?" ".repeat(3*(_-1)):"",I+`
${B}}`):I+"}";default:d("unknown local name "+c.localName)}}else d("wrong namespace "+c.namespaceURI)}else r.U(c)||d("not a node"),Error.g&&Error.g(),d("wrong node kind "+c.nodeType)}let r=ut,h=e(k,"indent","boolean",!1),m=e(k,"escape-solidus","boolean",!0);return n(O)}}}();function ue(e){return En(e)?null:e.focus.current}function He(e,t,i,f=null){if(En(e))throw new A("Focus for "+i+" is absent",t,f)}function zn(e){e.Wc=null,e.Xc=null,e.vb=null}function En(e){return!e.focus||!e.focus.current}class On{constructor(){this.depth=0,this.masterDocument=this.j=this.da=this.oa=this.focus=null,this.pa=!1,this.nb=[],this.fixed={Ta:{},kb:{},ud:null,hc:[],Ka:null},this.Fc=new It,this.tunnelParams=new It,this.Wa=null,this.ab={},this.vb=this.Xc=this.Wc=this.de=this.Oe=null,this.Eb=[],this.ze=null,this.ma=[],this.qc={},this.g=null}toString(){let t="{";return this.Fc.forAllPairs(i=>t+=i.k+":("+i.v+"),"),t+="}","context: "+ue(this)+" localParams: "+t}X(t){let i=new On;return i.depth=this.depth+1,i.focus=this.focus,i.oa=this.oa,i.da=this.da,i.masterDocument=this.masterDocument,i.ab=this.ab,i.Wa=this.Wa,i.Oe=this.Oe,i.Wc=this.Wc,i.Eb=this.Eb,i.Xc=this.Xc,i.fixed=this.fixed,i.pa=this.pa,i.nb=this.nb,i.de=this.de,i.ze=this.ze,i.qc=this.qc,i.g=this,t?(i.Fc=new It,i.tunnelParams=new It,i.ma=[],i.vb=null):(i.Fc=this.Fc,i.tunnelParams=this.tunnelParams,i.ma=this.ma,i.vb=this.vb),i}createElement(t,i){let f=ut.Ac(this.da),v=f.documentElement;return t===""&&v&&J.Qb(v)?i=f.createElement(i):t==="http://www.w3.org/1999/xhtml"&&v&&J.Qb(v)?(t=i.indexOf(":"),i=f.createElement(t===-1?i:i.substring(t+1))):i=f.createElementNS(t,i),i}getStackTrace(){let t="";En(this)||(t="    Processing "+Z.showValue(this.focus.current)+`
`);try{let i=this.oa.actor,f;i.N==="mode"?(f="template rule",i=this.Wa.action):f=i.N+" "+i.name,t+="    at "+f+" in "+ft.Vf(i,"module")+"#"+ft.Vf(i,"line")}catch{t=""}return this.g&&(t+=`
`+this.g.getStackTrace()),t}}let Gt=function(){function e(o){if(o){var E=o.PUSH;if(!E)if(E=d[o.N])o.PUSH=E=E(o);else{let T=ft.cb(o);o.PUSH=E=function(C,n){T(C).forEachItem(r=>n.append(r))}}return E}}function t(o){let E=o.N;return o.parentNode&&(E=t(o.parentNode)+"/"+E),E}function i(o){if(o.C){let E=o.C.map(e);return function(T,C){E.forEach(n=>n(T,C))}}return()=>{}}function f(o,E,T,C,n,r){if(ut.U(o))switch(o.nodeType){case 9:case 11:T.lb=ut.baseURI(o),a(o,T,n,r);break;case 1:if(o.hasAttribute("xml:base")){let h=o.getAttribute("xml:base");T.lb=ut.fd(h)?h:J.pb(h.toString(),ft.Ea(C,E)).toString()}else T.lb=ut.baseURI(o);a(o,T,n,r);break;case 3:case 4:T.text(o.nodeValue);break;case 7:T.sa(o.target,o.data);break;case 8:T.ta(o.textContent);break;default:T.append(o)}else T.append(o)}function v(o,E,T){switch(o.nodeType){case 9:case 11:for(E.Da(T?{BASE_URI:T}:{}),o=o.childNodes,T=0;T<o.length;++T)v(o[T],E,null);E.wa();break;case 1:let C={};ut.Ha.jb(o).forEachItem(function(r){r.prefix!=="xml"&&(C[r.prefix]=r.uri)});let n=new Xn;for(ut.Ha.Ga(o).forEachItem(function(r){n.set(r.qname,{value:r.value,fb:0})}),E.ja(ut.aa(o),n,C,{}),o=o.childNodes,T=0;T<o.length;++T)v(o[T],E,null);E.endElement();break;case 3:case 4:E.text(o.nodeValue,0);break;case 7:E.sa(o.target,o.data,0);break;case 8:E.ta(o.textContent,0)}}function a(o,E,T,C=!1){switch(o.nodeType){case 9:case 11:C&&(E.Hc=o),E.Da(),o=o.childNodes;for(var n=0;n<o.length;++n)a(o[n],E,T,C);E.wa();break;case 1:for(C&&(E.Hc=o),E.ja(ut.aa(o)),ut.Ha.Ga(o).forEachItem(function(r){let h=ut.aa(r);E.Ga(h,r.value)}),T&&ut.Ha.jb(o).forEachItem(function(r){E.jb(r.prefix,r.uri)}),o=o.childNodes,n=0;n<o.length;++n)a(o[n],E,T,C);E.endElement();break;case 3:case 4:C&&(E.Hc=o),E.text(o.nodeValue);break;case 7:C&&(E.Hc=o),E.sa(o.target,o.data);break;case 8:C&&(E.Hc=o),E.ta(o.textContent)}}function u(o){return(o=o.next())?o.toString():""}function l(o,E,T,C,n){if(E=T&&0<=T.indexOf("c"),ut.U(o))switch(o.nodeType){case 9:case 11:n.lb=ut.baseURI(o),n.Da(),C(),n.wa();break;case 1:T=ut.aa(o),n.lb=ut.baseURI(o),n.ja(T),E&&ut.Dc(o).forEach(function(r){n.jb(r.prefix,r.uri)}),C(),n.Hc=null,n.endElement();break;case 2:C=ut.aa(o),n.Ga(C,o.value);break;case 3:case 4:n.text(o.textContent);break;case 8:n.ta(o.textContent);break;case 7:n.sa(o.target,o.data);break;case 13:n.jb(o.prefix,o.uri);break;default:throw new A("Unknown node kind "+o.nodeType,"SXJS0003")}else n.append(o)}function F(o,E,T,C,n){let r=at.XS.string.fromString;if(T=jt.ng(T),E=jt.ue(E,T+"g",o),!C&&E.test(""))throw new A("Regular expression matches zero-length string","FORX0003");C=[];let h=0,m=0;for(;(T=E.exec(o))!==null;)if((T.index>h||T.index===h&&n)&&C.push({Gc:!1,string:r(o.substring(h,T.index))}),C.push({Gc:!0,groups:T,string:r(T[0])}),h=E.lastIndex,T[0].length===0&&E.lastIndex++,m++>10*o.length)throw new A("analyze-string looping???","SXJS0004");return o.length>h&&C.push({Gc:!1,string:r(o.substring(h,o.length))}),C}function S(o){let E=o.N==="compAtt",T=ft.cb(ft.ba(o,"name")),C=ft.cb(ft.ba(o,"namespace"));return n=>{function r(){throw new A((E?"Attribute":"Element")+" name '"+h+"' is not a lexical QName",E?"XTDE0850":"XTDE0820",o)}let h=jt.trim(T(n).next().toString());if(C){if(n=(n=C(n).next())?n.value:"",!ft.Hj(n))throw new A((E?"Attribute":"Element")+" namespace '"+n+"' is invalid",E?"XTDE0865":"XTDE0835",o);var m=at.XS.QName;if(n===""&&h.includes(":"))m=m.fromParts("","",h.replace(/^.*:/,""));else if(h.includes(":")){let c=h.split(":");c[0]!==""&&c[1]!==""||r(),m=m.fromParts(c[0],n,c[1])}else m=n===""?m.fromParts("","",h):m.fromParts(E?"ns0":"",n,h)}else{if(E&&h==="xmlns")throw new A("Attribute must not be named xmlns","XTDE0855",o);try{m=ft.jg(o,h,!E)}catch(c){if(c instanceof A){if(c.code==="XTDE0290")throw new A((E?"Attribute":"Element")+" name '"+h+"' has an unbound prefix",E?"XTDE0860":"XTDE0830",o);c.code==="FORG0001"&&r()}throw c}}if(m.uri==="http://www.w3.org/2000/xmlns/")throw new A("Disallowed namespace "+m.uri,E?"XTDE0865":"XTDE0835",o);return m}}class O{constructor(){}Da(){}wa(){}ja(){}Ga(){}jb(){}endElement(){}text(){}ta(){}sa(){}append(){}close(){}}class k extends O{constructor(E){super(),this.j=E,this.$=[],this.tb=[],this.lb=null,this.g=0,this.Za=this.J=null,this.K={},this.Aa=null,this.B=this.na=!1,this.ua={},this.Hc=null}qa(E,T,C){var n=this.K[E];if(n&&n!==T)if(C==="ns"){if(this.ua[E])throw new A("Two conflicting bindings for prefix '"+E+"'","XTDE0430");if(this.J.prefix===E){for(n=E+"_9";this.K[n];)n+="9";this.J=at.XS.QName.fromParts(n,this.J.uri,this.J.local),this.K[n]=this.J.uri}this.K[E]=T}else return E===""&&(E="NULL"),this.qa(E+"0",T,C);if(C==="ns"&&(this.ua[E]=T),C==="elem"&&T===""){for(n=this.$.length-1;0<=n;n--)if(this.$[n][0]===""){this.K[""]="";break}}if(E!==""||T!==""){n=!1;for(let r=this.$.length-1;0<=r;r--){let h=this.$[r];if(h[0]===E){h[1]===T&&(n=!0);break}}if(!n){if(this.ua[E]&&this.ua[E]!==T)return this.qa(E+"0",T,C);this.K[E]=T}}return E}Da(){this.g===0&&(this.j.Da({BASE_URI:this.lb,ORIGINAL_NODE:this.Hc}),this.$=[]),this.R(),this.g++,this.B=this.na=!1}wa(){this.g--,this.g===0&&this.j.wa(),this.B=!1}ja(E){this.R(),this.g++,this.na=!0,this.J=E,this.Za=new Xn,this.K={},this.ua={},this.qa(E.prefix,E.uri,"elem"),this.Aa=this.Hc,this.B=!1}Ga(E,T){if(this.g===0)this.j.append(new Tn(E,T,null));else{if(!this.na)throw this.J?new A("Cannot write attribute ("+E.toEQName()+"="+T+") after writing child nodes (level="+this.g+", start tag = "+this.J+")","XTDE0410"):new A("Cannot attach an attribute ("+E.toEQName()+"="+T+") to a document node","XTDE0420");if(E.uri!==""){["","xmlns"].includes(E.prefix)&&(E=E.withPrefix("ns_"));let C=this.qa(E.prefix,E.uri,"att");C!==E.prefix&&(E=E.withPrefix(C))}this.Za.set(E,{value:T,fb:0})}}jb(E,T){if(this.g===0)this.j.append(new cn(E,T));else{if(!this.na)throw new A("Cannot write namespace after writing child nodes","XTDE0410");if(E===""&&this.J.uri==="")throw new A("Cannot add default namespace declaration to a no-namespace element","XTDE0440");this.qa(E,T,"ns")}}endElement(){this.R(),this.j.endElement(),this.g--;let E=this.tb.pop();for(;0<E--;)this.$.pop();this.B=!1}text(E,T){(0<E.length||this.g===0)&&(this.R(),this.j.text(E,T||{})),this.B=!1}ta(E){this.R(),this.j.ta(E),this.B=!1}sa(E,T){this.R(),this.j.sa(E,T),this.B=!1}append(E){if(ut.U(E)){if(this.g===0)this.j.append(E,{});else switch(E.nodeType){case 2:this.Ga(ut.aa(E),E.value);break;case 13:this.jb(E.prefix,E.uri);break;case 9:case 11:this.g===0?v(E,this.j,this.lb):ut.Ha.Ia(E).forEachItem(T=>this.append(T));break;default:this.R(),a(E,this,!0,!1)}this.B=!1}else if(this.g===0)this.j.append(E,{}),this.B=!1;else if(at.la(E))this.R(),this.text((this.B?" ":"")+E.toString(),{}),this.B=!0;else if(ft.isArray(E)){E=E.value;for(let T=0;T<E.length;T++){let C=E[T];for(let n=0;n<C.length;n++)this.append(C[n])}}else{if(ft.gd(E))throw new A("Cannot attach a "+(ft.isMap(E)?"map":"function")+" to an XDM tree","XTDE0450");Z.ka("Cannot add item to tree "+Z.showValue(E))}}close(){this.j.close()}R(){if(this.na){var E={};this.lb&&(E.BASE_URI=this.lb),this.Aa&&(E.ORIGINAL_NODE=this.Aa,this.Aa=null),this.j.ja(this.J,this.Za,this.K,E),this.na=!1,E=0;for(let[T,C]of Object.entries(this.K))this.$.push([T,C]),E++;this.tb.push(E)}}}let d={analyzeString:function(o){let E=ft.cb(ft.ba(o,"select")),T=ft.cb(ft.ba(o,"regex")),C=ft.cb(ft.ba(o,"flags")),n=e(ft.ba(o,"matching")),r=e(ft.ba(o,"nonMatching"));return(h,m)=>{try{let c=E(h).next();if(c===null)return yt;c=c.toString();let _=T(h).next().toString(),Q=C(h).next().toString(),H=F(c,_,Q,!0,!1),B=h.X(!1),b=H.map(w=>w.string);B.focus=Lt(wt(b)),B.focus.forEachItem(()=>{let w=H[B.focus.position-1];w.Gc?n&&(B.Eb=w.groups,n(B,m)):r&&(B.Eb=[],r(B,m))})}catch(c){throw c instanceof A&&c.code==="FORX0002"?new A(c.message,"XTDE1140"):c instanceof A&&c.code==="FORX0001"?new A(c.message,"XTDE1145"):c}}},applyImports:function(o){return function(E,T){let C=E.ab.mode;if(!C)throw new A("applyImports: no current mode","XTDE0560",o);He(E,"XTDE0560","xsl:apply-imports",o);let n=E.X(!0);return n.oa=E.ab,ft.Ie(o,E,n),n.focus=E.focus,C.Xh(n,T)}},applyT:function(o){let E=ft.Pa(o),T=ft.cb(ft.ba(o,"separator"));return function(C,n){let r,h=C.X(!0);if(ft.ib(o,"c"))r=C.ab.mode,["function","globalVariable","globalParam"].includes(C.oa.actor.N)&&(r=ft.fe(o,C).Fh),h.oa=C.ab;else{var m=ft.Wf(o,C,"mode");if(r=m.mode,r.mh)throw new A("Mode "+r.Fe.name+" only handles typed nodes","XTTE3100",o);h.oa=m}ft.Ie(o,C,h),m=T?T(C).next():null,h.focus=Lt(E(C)),h.focus.Eb=C.focus?C.focus.Eb:null,r.zb(h,n,m)}},att:function(o){let E=o.name,T=E.split(":"),C;C=o.nsuri?T.length===2?at.XS.QName.fromParts(T[0],o.nsuri,T[1]):at.XS.QName.fromParts("",o.nsuri,E):at.XS.QName.fromString(E,ft.Sd(o,!1));let n=ft.Pa(o);return function(r,h){r=u(n(r)),h.Ga(C,r)}},break:function(o){let E=i(o);return function(T,C){E(T,C),T.focus.position=-999}},callT:function(o){return function(E,T){let C=ft.Wf(o,E,"template"),n=E.X(!0);n.vb=null,n.oa=C,ft.Ff(C.actor,n),ft.Ie(o,E,n),E=C.actor,E.C&&i(E)(n,T)}},choose:function(o){o=o.C;let E=[],T=[];for(let C=0;C<o.length;C+=2)E.push(ft.cb(o[C])),T.push(e(o[C+1]));return function(C,n){for(let r=0;r<E.length;r++)if(ft.Bd(E[r](C))){T[r](C,n);break}}},comment:function(o){let E=ft.Pa(o);return function(T,C){T=u(E(T)).replace(/--/g,"- -").replace(/-$/,"- "),C.ta(T)}},compAtt:function(o){let E=ft.cb(ft.ba(o,"select")),T=S(o);return function(C,n){let r=T(C);C=u(E(C)),n.Ga(r,C)}},compElem:function(o){let E=e(ft.ba(o,"content")),T=S(o);return function(C,n){o.baseUri&&(n.lb=o.baseUri);let r=T(C);n.ja(r),E(C,n),n.endElement()}},copy:function(o){let E=i(o);return function(T,C){He(T,"XTTE0945","xsl:copy",o),l(ue(T),T,o.flags,()=>E(T,C),C)}},copyOf:function(o){let E=ft.ib(o,"c"),T=ft.ib(o,"m"),C=ft.Pa(o);return i(o),function(n,r){C(n).forEachItem(h=>f(h,n,r,o,E,T))}},doc:function(o){let E=i(o);return function(T,C){C.lb=ft.Ea(o,T),C.Da(),E(T,C),C.wa()}},elem:function(o){let E=o.name,T=E.split(":"),C=i(o),n;return n=typeof o.nsuri<"u"?T.length===2?at.XS.QName.fromParts(T[0],o.nsuri,T[1]):at.XS.QName.fromParts("",o.nsuri,E):at.XS.QName.fromString(E,ft.Sd(o,!0)),function(r,h){if(o.baseUri&&(h.lb=o.baseUri),h.ja(n),o.namespaces){let c=o.namespaces.toString().split(" ");for(let _=0;_<c.length;_++){var m=c[_];let Q=m.indexOf("="),H=Q===-1?m:m.substring(0,Q);m=Q===-1?"":m.substring(Q+1),H==="#"&&(H=""),H!=="xml"&&(m=m!==""?m:ft.Sd(o,!0)(H),h.jb(H,m))}}C(r,h),h.endElement()}},empty:function(){return function(){}},forEach:function(o){let E=ft.Pa(o),T=e(o.C[1]),C=ft.cb(ft.ba(o,"separator"));return function(n,r){let h=n.X(!1);if(h.focus=Lt(E(n)),h.Wa=null,C){let m=!0,c=C(n).next();h.focus.forEachItem(()=>{m?m=!1:r.text(c.value,{}),T(h,r)})}else h.focus.forEachItem(()=>T(h,r))}},forEachGroup:function(o){let E=ft.cb(ft.ba(o,"select")),T=Gt.ji(ft.ba(o,"content"));return(C,n)=>{function r(B){let b=[];return h.forEachItem(function(w){B(b,w)}),b}let h=Lt(E(C)),m=C.X(!1);m.focus=h;var c={starting:function(){let B=je.kd(ft.ba(o,"match"));return r(function(b,w){h.position===1||je.matches(B,w,m)?b.push({group:[w]}):b[b.length-1].group.push(w)})},ending:function(){let B=je.kd(ft.ba(o,"match")),b=!1;return r(function(w,g){h.position===1||b?w.push({group:[g]}):w[w.length-1].group.push(g),b=je.matches(B,g,m)})},adjacent:function(){var B=ft.ba(o,"collation");B=B?ft.evaluate(B,C).next().toString():Bt.Vc;let b=Bt.Sf(B,C),w=ft.ba(o,"key"),g=null;return r(function(x,I){let L=ft.evaluate(w,m).expand();h.position!==1&&In(wt(L),wt(g),b.equals)?x[x.length-1].group.push(I):(x.push({group:[I],key:L}),g=L)})},by:function(){var B=ft.ba(o,"collation");B=B?ft.evaluate(B,C).next().toString():Bt.Vc,B=Bt.Sf(B,C);let b=Bt.kf(B,!1),w=ft.ba(o,"key");return r(function(g,x){let I,L=[];ft.evaluate(w,m).forEachItem(function(R){b.containsKey(R)?(I=b.get(R),0>L.findIndex(function(q){return q===I})&&(g[I].group.push(x),L.push(I))):(I=g.length,g.push({group:[x],key:[R]}),b.inSituPut(R,I),L.push(I))})})},by_c:function(){var B=ft.ba(o,"collation");B=B?ft.evaluate(B,C).next().toString():Bt.Vc,B=Bt.Sf(B,C);let b=ft.ba(o,"key"),w=Bt.kf(B,!0);return r(function(g,x){let I,L=ft.evaluate(b,m).expand();w.containsKey(L)?(I=w.get(L),g[I].group.push(x)):(I=g.length,g.push({group:[x],key:L}),w.inSituPut(L,I))})}};c.adjacent_c=c.adjacent;var _=o.algorithm+(ft.ib(o,"c")?"_c":"");let Q;try{Q=c[_]()}catch(B){throw B instanceof A&&B.code==="FOCH0002"?new A("Unknown collation:"+B.message,"XTDE1110"):B}let H=ft.Ba(o,"sortKey");if(0<H.length){c=Lt(wt(Q));let B=C.X(!1);B.focus=c;let b=H.map(function(w){return Bt.Wh(w,C)});c.forEachItem(function(w,g){w.zh=H.map(function(x){let I=B.focus;return I.current=w.group[0],I.position=g+1,B.Wc=w.group,B.Xc=w.key,ft.Pa(x)(B).next()})}),Q.sort(function(w,g){for(let x=0;x<b.length;x++){let I=b[x](w.zh[x],g.zh[x]);if(0>I)return-1;if(0<I)return 1}return 0})}for(c=C.X(!1),c.focus=Lt(wt(Q)),_=0;c.focus.next()!==null;){let B=Q[_++],b=c.focus;b.current=B.group[0],b.position=_,c.Wc=B.group,c.Xc=B.key,T(c,n)}}},iterate:function(o){let E=(o.C[1].C||[]).map(ft.cb),T=ft.Pa(o),C=e(ft.ba(o,"action")),n=e(ft.ba(o,"on-completion"));return function(r,h){E.map(_=>_(r));var m=r.X(!1);m.focus=Lt(T(r)),m.Wa=null;let c=!1;for(;m.focus.next()!==null;)if(C(m,h),m.focus.position===-999){c=!0;break}!c&&n&&(m=r.X(!1),m.focus=null,n(m,h))}},let:function(o){let E=ft.Pa(o),T=e(o.C[1]),C=parseInt(o.slot,10);return function(n,r){let h=n.pa;n.pa="variable";let m=E(n).expand();n.pa=h,n.ma[C]=m,T(n,r)}},nextIteration:function(o){let E=ft.Ba(o,"withParam").map(T=>({select:ft.Pa(T),slot:parseInt(T.slot,10)}));return function(T){E.forEach(C=>C.value=C.select(T).expand()),E.forEach(C=>T.ma[C.slot]=C.value)}},nextMatch:function(o){return function(E,T){let C=E.ab.mode;if(!C)throw new A("next-match: no current mode","XTDE0560",o);if(!E.Wa)throw new A("next-match: no current template","XTDE0560",o);if(En(E))throw new A("next-match: no context item","XTDE0560",o);let n=E.X(!0);return n.oa=E.ab,ft.Ie(o,E,n),C.ij(n,T)}},procInst:function(o){let E=ft.Pa(o),T=ft.Kg(o);return function(C,n){let r=E(C).next().toString();if(!jt.Db(r))throw new A("The name of a processing-instruction must be a valid NCName; supplied value: "+r.toString(),"XTDE0890",o);if(/^[Xx][Mm][Ll]$/.test(r))throw new A("The name of a processing-instruction must not be 'xml'","XTDE0890",o);C=T(C),C=u(C).replace(/\?>/g,"? >").replace(/^\s+/,""),n.sa(r,C)}},sequence:i,sourceDoc:function(o){let E=ft.cb(ft.ba(o,"href")),T=e(o.C[1]);return function(C,n){let r=C.X(!1);var h=E===null?"":E(C).next().toString();h=J.pb(h,ft.Ea(o,C)),h=Jt.xc(h,C),C=C.fixed.ye,C!==null&&(h=C(h)),r.focus=me(h),r.Wa=null,T(r,n)}},useAS:function(o){return function(E,T){let C=ft.Wf(o,E,"attributeSet"),n=C.actor;E=E.X(!0),E.pa="attribute set",E.oa=C,n.C&&i(n)(E,T)}},valueOf:function(o){let E=ft.Pa(o),T={};return ft.ib(o,"d")&&(T.DISABLE_ESCAPING=!0),function(C,n){C=u(E(C)),n.text(C,T)}}};return{Bf:F,ji:e,Ik:function(o){return new ii(o)},zc:function(o){return new k(o)},push:function(o,E,T){if(typeof T>"u")throw Z.xa(Error().stack,1,E.fixed.Ka),new A("No output for "+t(o));if(d[o.N]){var C=e(o);try{C(E,T)}catch(n){throw n instanceof A&&!n.xsltLineNr&&n.setExpr(o),n}}else{C=ft.cb(o);try{let n=C(E),r;for(;(r=n.next())!=null;)T.append(r)}catch(n){throw n instanceof A&&!n.xsltLineNr&&n.setExpr(o),n}}},rh:v,df:f,hg:l}}();class Yi{Da(){}wa(){}ja(){}endElement(){}text(){}ta(){}sa(){}append(){}close(){}}function _n(e,t){return e.g=t,e}class tn extends Yi{constructor(){super(),this.g=null}Da(t={}){this.g.Da(t)}wa(){this.g.wa()}ja(t,i,f,v={}){this.g.ja(t,i,f,v)}endElement(){this.g.endElement()}text(t,i={}){this.g.text(t,i)}ta(t,i={}){this.g.ta(t,i)}sa(t,i,f={}){this.g.sa(t,i,f)}append(t,i={}){this.g.append(t,i)}close(){this.g.close()}}function ri(e,t){e.j===0?e.Gb.push(t):e.lc.appendChild(t)}class ii extends Yi{constructor(t){super(),this.$c=(this.na=t)?ut.Ac(t.da):J.createDocument(),this.Gb=[],this.lc=null,this.j=0,this.J=null}Da(t={}){if(this.j++===0){let i=this.lc=this.$c.createDocumentFragment();t.BASE_URI&&(i._saxonBaseUri=t.BASE_URI),this.Gb.push(i)}else throw new A("Builder.startDoc() not at top level")}wa(){--this.j===0&&(this.lc=null)}ja(t,i,f,v={}){let a=this.$c.createElementNS(t.uri,t.toString());v.BASE_URI&&(a._saxonBaseUri=v.BASE_URI),v.ORIGINAL_NODE&&(a._saxonOriginal=v.ORIGINAL_NODE),v.CALLBACK&&v.CALLBACK(a),ri(this,a),this.lc=a,this.j++,this.J=null,i.forEach((u,l)=>{a.setAttributeNS(l.uri,l.toString(),u.value)});for(let u in f)f.hasOwnProperty(u)&&(t=f[u],u===""?a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns",t):a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+u,t))}endElement(){--this.j===0?this.lc=null:this.lc=this.lc.parentNode,this.J=null}text(t){this.J?this.J.appendData(t):(t=this.$c.createTextNode(t),ri(this,t),0<this.j&&(this.J=t))}ta(t){ri(this,this.$c.createComment(t)),this.J=null}sa(t,i){ri(this,this.$c.createProcessingInstruction(t,i)),this.J=null}append(t){if(this.j!==0)throw new A("Builder.append() not at top level");this.Gb.push(t)}result(){return this.Gb}close(){super.close()}}function yr(e){if(e.done)throw new A("Cannot write to the principal output destination as it has already been closed","XTDE1490");if(e.mg)throw new A("Cannot write to the principal output destination as it has already been used by xsl:result-document","XTDE1490");e.Hh=!0}class Bu extends tn{constructor(t){super(),this.done=this.mg=this.Hh=!1,this.g=t}Da(t={}){super.Da(t)}wa(){super.wa()}ja(t,i,f,v={}){yr(this),super.ja(t,i,f,v)}endElement(){super.endElement()}text(t,i={}){yr(this),super.text(t,i)}ta(t,i={}){yr(this),super.ta(t,i)}sa(t,i,f={}){yr(this),super.sa(t,i,f)}append(t,i={}){yr(this),super.append(t,i)}close(){this.done=!0,this.g&&super.close()}}function un(e){return new ii(e)}class Nu{constructor(t){this.gb=t}createDocumentFragment(){return this.gb.createDocumentFragment()}createElementNS(t,i){let f=this.gb.documentElement;return t===""&&f&&J.Qb(f)?i=this.gb.createElement(i):t==="http://www.w3.org/1999/xhtml"&&f&&J.Qb(f)?(t=i.indexOf(":"),i=this.gb.createElement(t===-1?i:i.substring(t+1))):i=this.gb.createElementNS(t,i),i}createTextNode(t){return this.gb.createTextNode(t)}createComment(t){return this.gb.createComment(t)}createProcessingInstruction(t,i){return this.gb.createProcessingInstruction(t,i)}}function Gn(e,t={}){e.J||(e.j=!1,e.g.Da(t),e.J=!0,e.B=!0)}function So(e,t){if(t!=null)if(at.la(t))e.j&&e.text(" ",{}),e.text(t.toString(),{}),e.j=!0;else if(t instanceof qt)t.flatten(i=>So(e,i));else{if(t instanceof Ut.XdmFunction)throw new A("Cannot add a function item to an XDM node tree","SENR0001");if(t instanceof It)throw new A("Cannot add a map to an XDM node tree","SENR0001");Gt.rh(t,e),e.j=!1}}class Dr extends tn{constructor(t){super(),this.g=t,this.j=this.J=this.B=!1}Da(t={}){Gn(this,t),this.B=!1}wa(){this.j=!1,this.g.wa()}ja(t,i,f,v={}){Gn(this,v),this.g.ja(t,i,f,v)}endElement(){this.g.endElement(),this.j=!1}text(t,i={}){Gn(this,i),super.text(t,i),this.j=!1}ta(t,i={}){Gn(this,i),super.ta(t,i),this.j=!1}sa(t,i,f={}){Gn(this,f),super.sa(t,i,f),this.j=!1}append(t,i={}){Gn(this,i),So(this,t)}close(){this.B&&this.wa(),super.close()}}function Pn(e,t={}){e.J||(e.g.Da(t),e.J=!0,e.j=!0),e.B||e.g.append(e.K,{}),e.B=!1}class Iu extends tn{constructor(t,i){super(),this.g=t,this.J=this.j=!1,this.B=!0,this.K=at.XS.string.fromString(i)}Da(t={}){Pn(this,t),this.j=!1}wa(){this.g.wa()}ja(t,i,f,v={}){Pn(this,v),this.g.ja(t,i,f,v)}endElement(){this.g.endElement()}text(t,i={}){Pn(this,i),super.text(t,i)}ta(t,i={}){Pn(this,i),super.ta(t,i)}sa(t,i,f={}){Pn(this,f),super.sa(t,i,f)}append(t,i={}){if(ft.isArray(t))t.flatten(f=>this.append(f,i));else{if(t instanceof Ut.XdmFunction)throw new A("Cannot add a function item to an XDM node tree","SENR0001");if(t instanceof It)throw new A("Cannot add a map to an XDM node tree","SENR0001");at.la(t)?(Pn(this,i),this.g.append(t,i)):(Pn(this,i),Gt.rh(t,this))}}close(){this.j&&this.wa(),super.close()}}function Co(e,t){return e.g.findIndex(i=>i.equals(t))}class Xn{constructor(){this.g=[],this.j=[]}get(t){return t=Co(this,t),0>t?void 0:this.j[t]}set(t,i){let f=Co(this,t);0<=f?this.j[f]=i:(this.g.push(t),this.j.push(i))}forEach(t){for(let i=0;i<this.g.length;i++)t(this.j[i],this.g[i])}}let Ht=function(){function e(Y,P,U){function nt(W,G){function y(N){return D=>N[D]}let s={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&#34;","\n":"&#10;","\r":"&#13;","	":"&#9;"},p={"<":"&lt;",">":"&gt;","&":"&amp;"};return G?W.replace(/&|<|>|"|\n|\r|\t/g,y(s)):W.replace(/&|<|>/g,y(p))}if(U){U="",Y=Y.split("\0");for(let W=0;W<Y.length;W++)U+=W%2===1?Y[W]:nt(Y[W],P);return U}return nt(Y,P)}function t(Y,P){return P.toUpperCase()==="ISO-8859-1"?255>=Y:P.toUpperCase()==="US-ASCII"?127>=Y:!0}function i(Y,P){return function(U){for(var nt=!0,W=0;W<U.length;W++){var G=U.charCodeAt(W);if(G>=Y.min&&G<=Y.max){nt=!1;break}}if(nt)return U;for(nt="",W=!1,G=0;G<U.length;G++){let y=U.charAt(G),s=U.charCodeAt(G),p=55296<=s&&56320>=s;p&&(s=U.codePointAt(G)),Y.va[s]?(P&&!W&&(nt+="\0",W=!0),nt+=Y.va[s],p&&G++):(P&&W&&(nt+="\0",W=!1),nt+=y)}return nt}}function f(Y){return Y.uri===""||Y.uri==="http://www.w3.org/1999/xhtml"}function v(Y){return["http://www.w3.org/1999/xhtml","http://www.w3.org/2000/svg","http://www.w3.org/1998/Math/MathML"].includes(Y)}function a(Y,P){return(P={action:["form"],archive:["object"],background:["body"],cite:["blockquote","del","ins","q"],classid:["object"],codebase:["applet","object"],data:["object"],datasrc:"button div input object select span table textarea".split(" "),for:["script"],formaction:["button","input"],href:["a","area","base","link"],icon:["command"],longdesc:["frame","iframe","img"],manifest:["html"],name:["a"],poster:["video"],profile:["head"],src:"audio embed frame iframe img input script source track video".split(" "),usemap:["img","input","object"]}[P.local])&&P.includes(Y.local)}function u(Y,P,U=null){switch(Y.method){case"xml":if(P=new _(Y,P),Y.version&&Y.version!=="1.0")throw new A("Serializer does not support the requested XML version: "+Y.version,"SESU0013");if(n(Y),Y["undeclare-prefixes"])throw new A("Cannot undeclare prefixes with XML 1.0 serializer","SEPM0010");return Y.indent&&(P=d(Y,P)),P=o(Y,P),P=E(Y,P),P=T(Y,P),k(Y,P);case"html":return r(Y,P);case"text":return n(Y),P=new pt(Y,P),P=o(Y,P),P=E(Y,P),k(Y,P);case"xhtml":return r(Y,P);case"json":return n(Y),Y.indent?new $(Y,P,U):new q(Y,P,U);case"adaptive":return new rt(Y,P,U);default:return new st(Y,P)}}function l(Y,P,U){function nt(N,D){if(D=D.trim(),["yes","true","1"].includes(D))return!0;if(["no","false","0"].includes(D))return!1;throw new A("Value of "+N+" must be yes(=true, 1) or no(=false, 0)","SEPM0016")}function W(N){return function(D,M){return M=M.trim(),M.split(/\s+/).map(function(X){return/^Q\{/.test(X)||/:/.test(X)||(X="Q{}"+X),/^Q\{/.test(X)?X:m.QName.fromString(X,N).toEQName()})}}function G(N){return function(D,M){if(M=M.trim(),N.includes(M))return M;throw new A("Value of "+D+"("+M+"): must be one of "+N.join("|"),"SEPM0016")}}function y(N){return function(D,M){if(N.test(M))return M;throw new A("Invalid value for "+D+": must match the pattern "+N,"SEPM0016")}}function s(N,D){return D}function p(N,D){if(D=D.trim(),/[0-9]+/.test(D))return 1*D;throw new A("Value of "+N+" must be an integer (Actual value is "+Z.showValue(D)+")","SEPM0016")}if(U={"allow-duplicate-names":nt,"build-tree":nt,"byte-order-mark":nt,"cdata-section-elements":W(U),"doctype-public":y(/[\sa-zA-Z0-9\-'()+,.:=?;!*#@$_%\/]*/),"doctype-system":y(/[^']*|[^"]*/),encoding:y(/[\x21-\x7e]+/),"escape-uri-attributes":nt,"html-version":function(N,D){if(/[0-9]+(\.[0-9]+)?/.test(D))return 1*D;throw new A("Value of "+N+" must be a decimal number","SEPM0016")},"include-content-type":nt,indent:nt,"item-separator":s,"json-node-output-method":G(["xml","xhtml","html","text"]),"media-type":s,method:function(N,D){return function(M,X){if(X=X.trim(),!/^Q\{/.test(X)&&/:/.test(X)&&(X=m.QName.fromString(X,D).toEQName()),N.includes(X))return X;throw new A("Value of "+M+"("+X+"): must be one of "+N.join("|"),"SEPM0016")}}("xml xhtml html text json adaptive Q{http://saxonica.com/ns/interactiveXSLT}append-content Q{http://saxonica.com/ns/interactiveXSLT}insert-before Q{http://saxonica.com/ns/interactiveXSLT}insert-after Q{http://saxonica.com/ns/interactiveXSLT}replace-content Q{http://saxonica.com/ns/interactiveXSLT}replace-element".split(" "),U),"normalization-form":G("NFC NFD NFKC NFKD fully-normalized none".split(" ")),"omit-xml-declaration":nt,standalone:function(N,D){return D.trim()==="omit"?null:nt(N,D)},"suppress-indentation":W(U),"undeclare-prefixes":nt,"use-character-maps":W(U),version:s,"Q{http://saxon.sf.net/}indent-spaces":p,"Q{http://saxon.sf.net/}line-length":p,"Q{http://saxon.sf.net/}stylesheet-version":p},/^\{/.test(Y)&&(Y="Q"+Y),typeof P!="string")throw new A("Value of "+Y+" must be supplied as a string","SEPM0016");if(U[Y])return U[Y](Y,P);if(!/^Q\{/.test(Y))throw new A("Unknown serialization parameter "+Y,"SEPM0017")}function F(Y,P,U){function nt(s,p,N){if(!Array.isArray(p))throw new A("Value of "+s+" must be an array","SEPM0016");return(N||[]).concat(p)}function W(s,p){if(typeof p!="boolean")throw new A("Value of "+s+" must be boolean","SEPM0016");return p}function G(s,p){if(typeof p!="number")throw new A("Value of "+s+" must be an integer (actual value is "+Z.showValue(p)+")","SEPM0016");return p}let y={"allow-duplicate-names":W,"build-tree":W,"byte-order-mark":W,"cdata-section-elements":nt,"escape-uri-attributes":W,"html-version":function(s,p){if(typeof p!="number")throw new A("Value of "+s+" must be a decimal number","SEPM0016");return p},"include-content-type":W,indent:W,"omit-xml-declaration":W,standalone:function(s,p){return p===null?null:W(s,p)},"suppress-indentation":nt,"undeclare-prefixes":W,"use-character-maps":function(s,p,N){if(N&&Array.isArray(N)&&Z.ka("Problem with existing character map supplied to overrideParam"),typeof p!="object")throw new A("Value of "+s+" must be an object","SEPM0016");if(p.va===void 0)throw new A("Value of "+s+" must be a character map object","SEPM0016");return(s=N)?S(s,p):s=p,s},"Q{http://saxon.sf.net/}indent-spaces":G,"Q{http://saxon.sf.net/}line-length":G,"Q{http://saxon.sf.net/}stylesheet-version":G};return/^{/.test(Y)&&(Y="Q"+Y),y[Y]?y[Y](Y,P,U):l(Y,P.toString())}function S(Y,P){P.min<Y.min&&(Y.min=P.min),P.max>Y.max&&(Y.max=P.max);for(let U in P.va)P.va.hasOwnProperty(U)&&(Y.va[U]=P.va[U])}function O(Y,P){let U={};return Y.forEach(function(nt,W){let G=P.Cg[nt];if(!G)throw new A("Unknown character map "+nt,"SEPM0016");W===0?U=G:S(U,G)}),U}function k(Y,P){return Y["item-separator"]&&Y["item-separator"]!=="#absent"?new Iu(P,Y["item-separator"]):new Dr(P)}function d(Y,P){let U=Y["Q{http://saxon.sf.net/}indent-spaces"],nt=Y["suppress-indentation"];return _n(Y.method==="xml"?new Q(U,nt):new g(U,nt),P)}function o(Y,P){return Y["normalization-form"]&&Y["normalization-form"]!=="none"&&(P=_n(new H(Y["normalization-form"]),P)),P}function E(Y,P){return Y["use-character-maps"]&&(P=_n(new B(Y["use-character-maps"]),P)),P}function T(Y,P){return Y["cdata-section-elements"]&&(P=_n(new b(Y["cdata-section-elements"],Y.encoding||"UTF-8",Y["normalization-form"]&&Y["normalization-form"]!=="none"?Y["normalization-form"]:null),P)),P}function C(Y,P){return Y[P]===void 0||Y[P]}function n(Y){if(Y.encoding&&!["UTF-8","UTF-16","ISO-646","ISO-8859-1","US-ASCII"].includes(Y.encoding.toUpperCase()))throw new A("Serializer does not support the requested encoding: "+Y.encoding,"SESU0007")}function r(Y,P){var U=Y.method==="xhtml";if(P=U?new I(Y,P):new w(Y,P),U&&Y.version&&Y.version!=="1.0")throw new A("Serializer does not support the requested XML version: "+Y.version,"SESU0013");if((U=U?Y["html-version"]:Y["html-version"]||Y.version)&&1*U!==5)throw new A("Serializer does not support the requested HTML version: "+U,"SESU0013");return n(Y),C(Y,"indent")&&(P=d(Y,P)),P=o(Y,P),P=E(Y,P),P=T(Y,P),P=_n(new x,P),C(Y,"escape-uri-attributes")&&(P=_n(new L,P)),C(Y,"include-content-type")&&(P=_n(new R(Y),P)),k(Y,P)}function h(Y,P=null,U=null,nt=null){function W(p,N){switch(p.nodeType){case 9:case 11:N.Da(s),p=p.childNodes;for(var D=0;D<p.length;++D)W(p[D],N);N.wa();break;case 1:let M={};ut.Ha.jb(p).forEachItem(function(V){M[V.prefix]=V.uri});let X=new Xn;for(ut.Ha.Ga(p).forEachItem(function(V){X.set(V.qname,{value:V.value,fb:{}})}),N.ja(ut.aa(p),X,M,s),p=p.childNodes,D=0;D<p.length;++D)W(p[D],N);N.endElement();break;case 2:if(N instanceof rt)N.text(ut.aa(p)+'="'+p.value+'"',s);else throw new A("Cannot serialize free-standing attribute node","SENR0001");break;case 13:if(N instanceof rt)D=p.prefix,N.text(D?"xmlns:"+D:'xmlns="'+p.uri+'"',s);else throw new A("Cannot serialize free-standing namespace node","SENR0001");break;case 3:case 4:N.text(p.nodeValue,s);break;case 7:N.sa(p.target,p.nodeValue,s);break;case 8:N.ta(p.nodeValue,s)}}function G(p,N){Array.isArray(p)?p.forEach(D=>{G(D,N)}):ut.U(p)?W(p,N):N.append(p,s)}let y;U||(y="",U={write:function(p){y+=p}}),U.write||Z.ka("writer supplied to Serialize.serialize() is not a writeable stream"),P||={},P=u(P,U,nt);let s={};return Y&&G(Y,P),P.close(),y}let m=at.XS;class c extends Yi{constructor(P,U){super(),this.g=U||null,this.Na=P}close(){this.g.end&&!this.g.isTTY&&this.g.end()}}class _ extends c{constructor(P,U){super(P,U),this.B=this.J=this.ua=this.na=this.tb=!1,this.Za=[],this.K=[],this.Yd=0,this.Tc=P.encoding||"UTF-8"}Da(){}wa(){}close(){this.J||this.R(),super.close()}ja(P,U,nt){function W(y){throw new A("When "+y+" is specified, there must only be one top-level element node","SEPM0004")}this.J||(this.R(),this.Aa(P),this.na&&!this.ua&&this.Na.indent===!0&&this.g.write(`
`),this.J=!0),this.K.length===0&&(0<this.Yd++&&this.Na.standalone!==void 0&&this.Na.standalone!==null&&W("standalone"),1<this.Yd&&this.Na["doctype-system"]&&W("doctype-system"));let G=this.K.length===0?{}:this.K[this.K.length-1];this.Za.push(P),this.K.push(nt),this.B&&this.$(),this.g.write("<"+this.j(P.toString(),!1)),this.yi(nt,G),this.be(P,U),this.B=!0}endElement(){let P=this.Za.pop();this.K.pop(),this.B?(this.g.write("/>"),this.B=!1):this.g.write("</"+P.toString()+">")}text(P,U={}){this.J||this.R(),this.B&&this.$(),this.g.write(U.DISABLE_ESCAPING?this.j(P,!1):this.j(e(P,!1,!1),!0))}ta(P){this.J||this.R(),this.B&&this.$(),this.g.write("<!--"+this.j(P,!1)+"-->")}sa(P,U){this.J||this.R(),this.B&&this.$(),this.g.write("<?"+this.j(P,!1)+(0<U.length?" "+this.j(U,!1):"")+"?>")}append(P,U={}){this.text(P.toString(),U)}R(){this.tb||this.ti()}$(){this.g.write(">"),this.B=!1}yi(P,U){let nt=[];for(let W in P)if(U[W]!==P[W]){let G="";W!=="xml"&&(G=W===""?' xmlns="'+e(P[W],!0,!1)+'"':" xmlns:"+W+'="'+e(P[W],!0,!1)+'"'),G!==""&&nt.push(G)}nt.sort(),nt.forEach(W=>this.g.write(W))}be(P,U){if(U){let nt=this;U.forEach((W,G)=>{nt.ae(G,W)})}}ae(P,U){let nt=U.fb.USE_NULL_MARKERS===!0;U=U.fb.DISABLE_ESCAPING?this.j(U.value,!1):this.j(e(U.value,!0,nt),!0),this.g.write(" "+this.j(P.toString(),!1)+'="'+U+'"')}ti(){var P=this.Tc.toUpperCase();this.Na["byte-order-mark"]&&P==="UTF-8"&&this.g.write("\uFEFF"),this.tb=!0,P=this.Na["omit-xml-declaration"]===!0&&P==="UTF-8",this.na=!P;let U=this.Na.standalone;if(P&&U!==void 0&&U!==null)throw new A("Serializer values of 'standalone' and 'omit-xml-declaration' conflict","SEPM0009");P||this.g.write('<?xml version="1.0" encoding="'+this.Tc+'"'+(U!=null?' standalone="'+(U?"yes":"no")+'"':"")+"?>")}Aa(P){let U=this.Na["doctype-system"]||null,nt=this.Na["doctype-public"]||null;U!==null&&(this.na&&this.g.write(`
`),this.g.write("<!DOCTYPE "+this.j(P.toString(),!1)+`
`),P=U.includes('"')?"'"+U+"'":'"'+U+'"',nt===null?this.g.write(" SYSTEM "+this.j(P,!1)+`>
`):this.g.write(' PUBLIC "'+this.j(nt,!1)+'" '+this.j(P,!1)+`>
`),this.ua=!0)}j(P,U){function nt(G){if(U)return"&#"+G+";";throw new A("Character "+String.fromCodePoint(G)+" (decimal "+G+") is not available in the chosen encoding","SERE0008")}let W=this.Tc;return function(G){let y="";var s=0;let p=G.length;if(p===0)return"";for(;s<p;){let D=s;for(;D<p;){var N=G.charCodeAt(D);if(N===9||N===10)D++;else{if(32>N)break;if(127>N)D++;else{if(160>N||N===8232||55296<=N&&56320>=N||!t(N,W))break;D++}}}if(D>=p)return s===0?G:y+G.substring(s,D);if(D>s&&(y+=G.substring(s,D)),N=G.charCodeAt(D),s=G.charAt(D),N===0)throw new A("Null marker","ZZZZ9999");if(160>N||N===8232?y+=U?nt(N):s:55296<=N&&56320>=N?(N=G.codePointAt(D++),y+=t(N,W)?s+G.charAt(D):nt(N)):t(N,W)||(y+=nt(N)),s=++D,s>=p)return y}}(P)}}class Q extends tn{constructor(P,U){super(),this.J=0,this.Yd=P||3,this.Aa=`
               `,this.B=this.K=this.$=!1,this.Za=U||null,this.j=-1,this.ua=null,this.tb={}}ja(P,U,nt,W={}){if(this.K||this.B?this.na():this.R(),0>this.j){let G=U.get(m.QName.fromParts("",Ft.xml,"space"));G&&G.value==="preserve"&&(this.j=this.J)}this.J++,this.Za&&this.j===-1&&0<=this.Za.indexOf(P.toEQName())&&(this.j=this.J),this.g.ja(P,U,nt,W),this.K=this.$=!0,this.B=!1}endElement(){this.J--,this.B&&!this.$?this.na():this.K&&!this.B?this.ua=null:this.R(),this.g.endElement(),this.$=!1,this.B=!0,this.K=!1,this.J===this.j-1&&(this.j=-1)}text(P,U={}){let nt=!this.$||0<=P.indexOf(`
`);0>this.j&&jt.trim(P)===""&&nt?(this.ua=P,this.tb=U):(this.R(),0<=P.indexOf(`
`)&&(this.$=!1),this.g.text(P,U),this.B=this.K=!1)}ta(P,U={}){this.B?this.na():this.R(),this.g.ta(P,U),this.B=this.K=!1}sa(P,U,nt={}){this.B?this.na():this.R(),this.g.sa(P,U,nt),this.B=this.K=!1}na(){0<=this.j?this.R():this.be()}be(){this.ua=null;let P=this.J*this.Yd;if(P+1>this.Aa.length){let U=5*this.Yd;P+1>this.Aa.length+U&&(U+=P+1);for(let nt=0;nt<U;nt++)this.Aa+=" "}this.g.text(this.Aa.substring(0,P+1),{DISABLE_ESCAPING:!0}),this.$=!1}R(){this.ua&&(this.g.text(this.ua,this.tb),this.ua=null,this.tb={})}}class H extends tn{constructor(P){if(super(),this.j=P,!String.prototype.normalize)throw new A("normalization-form: not supported on this JavaScript platform","SESU0011");if(P==="fully-normalized")throw new A("Serializer does not support the requested normalization-form: fully-normalized","SESU0011")}ja(P,U,nt,W={}){let G=new Xn,y=this.j;U.forEach(function(s,p){let N="";if(s.fb.USE_NULL_MARKERS){let D=s.value.split("\0");for(let M=0;M<D.length;M++)N+=M%2===1?D[M]:D[M].normalize(y),N+="\0"}else N=s.fb.NO_NORMALIZATION?s.value:s.value.normalize(y);G.set(p,{value:N,fb:s.fb})}),this.g.ja(P,G,nt,W)}text(P,U={}){this.g.text(U.NO_NORMALIZATION?P:P.normalize(this.j),U)}}class B extends tn{constructor(P){super(),this.va=P||null}ja(P,U,nt,W={}){let G=i(this.va,!0),y=new Xn;U.forEach(function(s,p){var N=y.set;{var D=s.value;let M=s.fb;M.DISABLE_ESCAPING||M.NO_CHARACTER_MAP?s={value:D,fb:M}:(s=G(D),s!==D?(D=Object.assign({},M),D.USE_NULL_MARKERS=!0,s={value:s,fb:D}):s={value:s,fb:M})}N.call(y,p,s)}),this.g.ja(P,y,nt,W)}text(P,U={}){if(U.DISABLE_ESCAPING||U.NO_CHARACTER_MAP)this.g.text(P,U);else{let s=this.va,p="";for(var nt=!1,W=!0,G=0;G<P.length;G++){var y=P.charCodeAt(G);if(y>=s.min&&y<=s.max){W=!1;break}}if(W)p=P;else for(W=0;W<P.length;W++){G=P.charAt(W),y=P.charCodeAt(W);let N=55296<=y&&56320>=y;N&&(y=P.codePointAt(W)),s.va[y]?(nt||(p!==""&&(this.g.text(p,U),p=""),nt=!0),p+=s.va[y],N&&W++):(nt&&(nt=Object.assign({},U),nt.DISABLE_ESCAPING=!0,nt.NO_NORMALIZATION=!0,this.g.text(p,nt),p="",nt=!1),p+=G)}nt?(P=Object.assign({},U),P.DISABLE_ESCAPING=!0,P.NO_NORMALIZATION=!0,this.g.text(p,P)):this.g.text(p,U)}}}class b extends tn{constructor(P,U,nt){if(super(),this.na=P||null,this.R=U,this.K=nt,this.B=[],this.j="",this.J={},nt==="fully-normalized")throw new A("Serializer does not support the requested normalization-form: fully-normalized","SESU0011")}ja(P,U,nt,W={}){this.flush(),this.B.push(P.toEQName()),this.g.ja(P,U,nt,W)}endElement(){this.flush(),this.B.pop(),this.g.endElement()}text(P,U={}){0<=this.na.indexOf(this.B.length===0?null:this.B[this.B.length-1])?U.DISABLE_ESCAPING?(this.flush(),this.g.text(P,U)):(this.j+=P,this.J=U):this.g.text(P,U)}ta(P,U={}){this.flush(),this.g.ta(P,U)}sa(P,U,nt={}){this.flush(),this.g.sa(P,U,nt)}flush(){if(this.j!==""){let U=this.K?this.j.normalize(this.K):this.j,nt=U.length;for(var P=0;P<nt;){let W=P;for(;W<nt&&t(U.charCodeAt(W),this.R);)W++;W>P&&this.$(U.substring(P,W)),W<nt&&(P=Object.assign({},this.J),P.DISABLE_ESCAPING=!1,P.NO_CHARACTER_MAP=!0,P.NO_NORMALIZATION=!0,this.g.text(U.charAt(W),P)),P=++W}this.j="",this.J={}}}$(P){let U=Object.assign({},this.J);U.DISABLE_ESCAPING=!0,U.NO_CHARACTER_MAP=!0,U.NO_NORMALIZATION=!0,this.g.text("<![CDATA[",U);let nt=0,W=P.length;for(;nt<W;){let G=P.substring(nt,W).indexOf("]]>");0<=G?(this.g.text(P.substring(nt,G+2)+"]]><![CDATA[",U),nt=G+2):(this.g.text(P.substring(nt,W)+"]]>",U),nt=W)}}}class w extends _{constructor(P,U){super(P,U),this.qa=-1e6,this.If="area base br col embed hr img input link meta param source track wbr".split(" "),this.vd={"*":["hidden","autofocus","itemscope"],audio:["autoplay","controls","loop","muted"],button:["disabled","formnovalidate"],details:["open"],dialog:["open"],fieldset:["disabled"],form:["novalidate"],img:["ismap"],input:"checked disabled multiple readonly required formnovalidate".split(" "),iframe:["allowfullscreen","allowpaymentrequest"],ol:["reversed"],optgroup:["disabled"],option:["selected","disabled"],script:["defer","async","nomodule"],select:["multiple","disabled","required"],textarea:["disabled","readonly","required"],track:["default"],video:["autoplay","controls","loop","muted","playsinline"]}}ja(P,U,nt,W={}){super.ja(P,U,nt,W),P.dd("")&&["script","style"].includes(P.local.toLowerCase())&&(this.qa=0),this.qa++}endElement(){let P=this.Za.pop();this.qa--,this.qa===0&&(this.qa=-1e6),this.K.pop(),this.B&&(this.g.write(">"),this.B=!1),this.If.includes(P.local.toLowerCase())&&f(P)||this.g.write("</"+P.toString()+">")}text(P,U={}){0<this.qa&&!U.DISABLE_ESCAPING?(U=Object.assign({},U),U.DISABLE_ESCAPING=!0,super.text(P,U)):super.text(P,U)}sa(P,U){if(this.J||this.R(),this.B&&this.$(),0<=U.indexOf(">"))throw new A("A processing instruction in HTML must not contain a > character","SERE0015");this.g.write("<?"+this.j(P,!1)+" "+this.j(U,!1)+">")}R(){this.tb||(this.Na["byte-order-mark"]&&this.Na.encoding==="UTF-8"&&this.g.write("\uFEFF"),this.tb=!0)}be(P,U){if(U){let nt=this;U.forEach((W,G)=>{P.dd("")&&this.ii(P,G,W.value)?nt.g.write(" "+G.toString()):nt.ae(G,W)})}}Aa(P){let U=this.Na["doctype-system"]||null,nt=this.Na["doctype-public"]||null;U===null&&nt===null?f(P)&&P.local.toLowerCase()==="html"&&(this.na&&this.g.write(`
`),this.g.write("<!DOCTYPE "+P.toString()+`>
`),this.ua=!0):U===null?(P=f(P)&&P.local.toLowerCase()==="html"?P.toString():"html",this.na&&this.g.write(`
`),this.g.write("<!DOCTYPE "+P+`
`),this.g.write('  PUBLIC "'+nt+`">
`),this.ua=!0):super.Aa(P.local.toLowerCase()==="html"?P:m.QName.fromParts("","","html"))}ii(P,U,nt){return U=U.local.toLowerCase(),P=P.local.toLowerCase(),U===nt.toLowerCase()&&(this.vd[P]&&this.vd[P].includes(U)||this.vd["*"].includes(U))}}class g extends Q{constructor(P,U){super(P,U),this.If="pre script style textarea title xmp".split(" "),this.ae="a abbr acronym applet area audio b basefont bdi bdo big br button canvas cite code data datalist del dfn em embed font i iframe img input ins kbd label map mark math meter noscript object output picture progress q ruby s samp script select small span strike strong sub sup svg template textarea time tt u var video wbr".split(" "),this.qa=this.Tc=!1,this.vd=[]}ja(P,U,nt,W={}){this.Tc=this.ae.includes(P.local.toLowerCase())&&f(P),this.K||this.B?this.na():this.R(),this.J++,0>this.j&&this.If.includes(P.local.toLowerCase())&&f(P)&&(this.j=this.J),this.Za&&this.j===-1&&0<=this.Za.indexOf(P.toEQName())&&(this.j=this.J),this.g.ja(P,U,nt,W),this.K=this.$=!0,this.Tc=this.qa=this.B=!1,this.vd.push(P)}endElement(){let P=this.vd.pop();this.J--,this.B&&!this.$?this.na():this.R(),this.g.endElement(),this.$=!1,this.B=!0,this.K=!1,this.qa=this.ae.includes(P.local.toLowerCase())&&f(P),this.J===this.j-1&&(this.j=-1)}text(P,U={}){super.text(P,U),0>this.j&&jt.trim(P)===""||(this.qa=!1)}ta(P,U={}){super.ta(P,U),this.qa=!1}sa(P,U,nt={}){super.sa(P,U,nt),this.qa=!1}na(){0<=this.j||this.Tc||this.qa?this.R():this.be()}}class x extends tn{ja(P,U,nt,W={}){for(let G in nt)v(nt[G])&&delete nt[G];v(P.uri)&&(P.prefix!==""&&(P=m.QName.fromParts("",P.uri,P.local)),nt[""]=P.uri),U.forEach((G,y)=>{v(y.uri)&&(nt[y.prefix]=y.uri)}),super.ja(P,U,nt,W)}}class I extends _{constructor(P,U){super(P,U),this.qa="area base br col embed hr img input link meta param source track wbr".split(" ")}endElement(){this.K.pop();let P=this.Za.pop();this.B&&this.qa.includes(P.local)&&f(P)?(this.g.write(" />"),this.B=!1):(this.B&&super.$(),this.g.write("</"+P.toString()+">"))}text(P,U={}){(this.J||jt.trim(P)!=="")&&super.text(P,U)}Aa(P){let U=this.Na["doctype-system"]||null;U===null&&f(P)&&P.local.toLowerCase()==="html"?(this.na&&this.g.write(`
`),this.g.write("<!DOCTYPE "+P.toString()+`>
`),this.ua=!0):U!==null&&super.Aa(P)}}class L extends tn{ja(P,U,nt,W){let G=!1;if(U.forEach((y,s)=>G=G||a(P,s)),G){let y=new Xn;U.forEach((s,p)=>{if(a(P,p)){let N=ft.escape(s.value.normalize("NFC"),D=>32>D||126<D);s=Object.assign({},s.fb),s.DISABLE_ESCAPING=!1,s.NO_CHARACTER_MAP=!0,s.NO_NORMALIZATION=!0,y.set(p,{value:N,fb:s})}else y.set(p,s)}),super.ja(P,y,nt,W)}else super.ja(P,U,nt,W)}}class R extends tn{constructor(P){super(),this.B=P,this.j=!1}ja(P,U,nt,W={}){if(P.local.toLowerCase()==="meta"&&f(P)){let G=this.j;U.forEach(function(y,s){s.toString().toLowerCase()==="http-equiv"&&y.value.trim().toLowerCase()==="content-type"&&(G=!0)}),this.j=G}this.j||(super.ja(P,U,nt,W),P.local.toLowerCase()==="head"&&f(P)&&(U=new Xn,U.set(m.QName.fromParts("","","http-equiv"),{value:"Content-Type",fb:{}}),U.set(m.QName.fromParts("","","content"),{value:(this.B["media-type"]||"text/html")+"; charset="+(this.B.encoding||"UTF-8"),fb:{}}),this.g.ja(m.QName.fromParts("",P.uri,"meta"),U,{},{}),this.g.endElement()))}endElement(){this.j?this.j=!1:this.g.endElement()}}class q extends ii{constructor(P,U,nt){super(nt),this.B=P,this.g=U,this.va=P["use-character-maps"]||null}close(){this.tb(this.result()),this.g.end&&this.g.end(),super.close()}Aa(P){this.B["normalization-form"]&&this.B["normalization-form"]!=="none"&&(P=P.normalize(this.B["normalization-form"]));let U=this.B.encoding||"UTF-8",nt="escape-solidus"in this.B?this.B["escape-solidus"]:!0,W="";for(let G=0;G<P.length;G++){let y=P.charCodeAt(G),s=P.charAt(G);switch(s){case'"':W+='\\"';break;case"\b":W+="\\b";break;case"\f":W+="\\f";break;case`
`:W+="\\n";break;case"\r":W+="\\r";break;case"	":W+="\\t";break;case"\\":W+="\\\\";break;case"/":W=nt?W+"\\/":W+"/";break;default:W=31>=y||127<=y&&159>=y||!t(y,U)?W+("\\u"+("0000"+y.toString(16).toUpperCase()).slice(-4)):W+s}}return W}qa(P){let U='"';if(this.va){let y=this.va,s="",p=!1;for(var nt=!0,W=0;W<P.length;W++){var G=P.charCodeAt(W);if(G>=y.min&&G<=y.max){nt=!1;break}}if(nt)s=P;else for(nt=0;nt<P.length;nt++){W=P.charAt(nt),G=P.charCodeAt(nt);let N=55296<=G&&56320>=G;N&&(G=P.codePointAt(nt)),y.va[G]?(p||(s!==""&&(U+=this.Aa(s),s=""),p=!0),s+=y.va[G],N&&nt++):(p&&(U+=s,s="",p=!1),s+=W)}U=p?U+s:U+this.Aa(s)}else U+=this.Aa(P);return U+'"'}tb(P){function U(G){switch(G.length){case 0:W.g.write("null");break;case 1:nt(G[0]);break;default:throw new A("Cannot output a sequence of length "+G.length+" as JSON","SERE0023")}}function nt(G){var y=at.XS;if(at.la(G))if(y.boolean.matches(G))W.g.write(G.toString());else if(y.numeric.matches(G)){if(G=G.toString(),["NaN","INF","-INF"].includes(G))throw new A("Cannot output INF or NaN as JSON","SERE0020");W.g.write(G)}else W.g.write(W.qa(G.toString()));else if(ut.U(G)){y=Object.assign({},W.B),y.method=y["json-node-output-method"]||"xml",y["item-separator"]=null,y["omit-xml-declaration"]=!0,y.encoding="UTF-8";let s=new tt;h(G,y,s,W.na),W.g.write(W.qa(s.toString()))}else if(ft.isArray(G))if(G=G.value,G.length===0)W.g.write("[]");else{for(W.$("["),U(G[0]),y=1;y<G.length;y++)W.R(),U(G[y]);W.K("]")}else if(G instanceof It){let s=!0;W.$("{");let p={};G.forAllPairs(N=>{s?s=!1:W.R();let D=W.qa(N.k.toString());if(!W.B["allow-duplicate-names"]){if(p[D])throw new A("Duplicate key '"+D+"' in serialized JSON map","SERE0022");p[D]=!0}W.g.write(D),W.Za(),U(N.v)}),W.K("}")}else throw new A("Cannot output as JSON: "+Z.showValue(G),"SERE0021")}let W=this;U(P)}$(P){this.g.write(P)}K(P){this.g.write(P)}R(){this.g.write(",")}Za(){this.g.write(":")}}class $ extends q{constructor(P,U,nt){super(P,U,nt),this.j=0,this.ua=P["Q{http://saxon.sf.net/}indent-spaces"]||3}$(P){super.$(P),this.j++,this.g.write(`
`.padEnd(this.j*this.ua+1," "))}K(P){this.j--,this.g.write(`
`.padEnd(this.j*this.ua+1," ")),super.K(P)}R(){super.R(),this.g.write(`
`.padEnd(this.j*this.ua+1," "))}Za(){this.g.write(": ")}}class rt extends ii{constructor(P,U,nt){super(nt),this.B=P,this.g=U,this.na=nt,this.va=P["use-character-maps"]||null}close(){function P(p,N){for(let D in["fn","math","map","array","xs"])if(Ft.withPrefix[D]===p)return D+":"+N;return"Q{"+p+"}"+N}function U(p){return G.va?i(G.va,!1)(p):p}function nt(p,N){if(p.length===1)W(p[0],N);else{N.write("(");let D=!0;for(let M=0;M<p.length;M++)D?D=!1:N.write(","),W(p[M],N);N.write(")")}}function W(p,N){if(ut.U(p))switch(p.nodeType){case 9:case 11:case 1:case 7:case 8:case 3:case 4:var D=Object.assign({},G.B);D.method="xml",D["item-separator"]=null,D.encoding="UTF-8";var M=new tt;u(D,M,G.na).append(p),N.write(M.toString());break;case 2:N.write(ut.aa(p)+'="'+p.value+'"',{});break;case 13:N.write("*** Namespace Node ****",{})}else if(at.la(p))D=p.code,D==="AB"?N.write(p.toBoolean()?"true()":"false()"):p.isStringLike()?(D=p.toString(),/"/.test(D)?N.write("'"+U(D.replace(/'/g,"''"))+"'"):N.write('"'+U(p.toString().replace(/"/g,'""'))+'"')):/^AD/.test(D)||/^A[OF]/.test(D)?N.write(p.toString()):N.write(`${at.ld(D)} ("${p.toString()}")`);else if(p instanceof qt){for(p=p.value,N.write("["),D=!0,M=0;M<p.length;M++)D?D=!1:N.write(","),nt(p[M],N);N.write("]")}else if(p instanceof It){N.write("map{");let X=!0;p.forAllPairs(V=>{X?X=!1:N.write(","),W(V.k,N),N.write(":"),nt(V.v,N)}),N.write("}")}else p instanceof Ut.XdmFunction?p.local?N.write(P(p.uri,p.local)+"#"+p.arity):N.write("(anonymous function)#"+p.arity):N.write("JS: "+Z.showValue(p))}let G=this,y=this.result(),s=!0;for(let p=0;p<y.length;p++){let N=y[p];s?s=!1:this.g.write(this.B["item-separator"]||" "),W(N,this.g)}this.g.end&&this.g.end(),super.close()}}class st extends tn{constructor(P,U){super(),this.j=P,this.J=U,this.pending=[],this.B=!1}Da(P={}){this.pending.push(function(U){U.Da(P)})}ja(P,U,nt,W={}){if(!this.B){let G=this.j["Q{http://saxon.sf.net/}stylesheet-version"],y="xml";P.local==="html"&&P.uri==="http://www.w3.org/1999/xhtml"?y=G===10?"xml":"xhtml":P.local.toLowerCase()==="html"&&P.uri===""&&(y="html"),this.j=Object.assign({},this.j),this.j.method=y,this.g=u(this.j,this.J),this.g instanceof st&&Z.ka("cannot create committed serializer: "+JSON.stringify(this.j)),this.pending.forEach(s=>s(this.g)),this.B=!0,this.pending=[]}super.ja(P,U,nt,W)}text(P,U={}){this.B?super.text(P,U):this.pending.push(function(nt){nt.text(P,U)})}ta(P,U={}){this.B?super.ta(P,U):this.pending.push(function(nt){nt.ta(P,U)})}sa(P,U,nt={}){this.B?super.sa(P,U,nt):this.pending.push(function(W){W.sa(P,U,nt)})}append(P,U={}){this.B?super.append(P,U):this.pending.push(function(nt){nt.append(P,U)})}wa(){this.B?super.wa():this.pending.push(function(P){P.wa()})}close(){this.B||(this.j.method="xml",this.g=u(this.j,this.J),this.pending.forEach(P=>P(this.g))),super.close()}}class pt extends c{constructor(P,U){super(P,U),this.j=!1}text(P){this.j||this.B(),this.g.write(P)}append(P){this.j||this.B(),this.g.write(P.toString())}B(){this.Na["byte-order-mark"]&&this.Na.encoding==="UTF-8"&&this.g.write("\uFEFF"),this.j=!0}}class tt{constructor(){this.ia=""}write(P){this.ia+=P}toString(){return this.ia}}return{serialize:h,bh:u,xf:tt,cf:function(Y,P,U=null){function nt(s,p="SEPM0017"){throw new A("Serialization params: "+s,p)}function W(s,p=[]){let N=ut.aa(s);ut.Ha.Ga(s).forEachItem(function(D){D=ut.aa(D),D.uri!==""||p.includes(D.local)||nt("attribute @"+D.local+" must not appear on element "+N.toString())})}function G(s,p){let N=ut.getAttribute(s,p,null);return N===null&&nt("attribute @"+p+" is missing on element "+ut.aa(s).toString()),N}ut.aa(Y).local!=="serialization-parameters"&&nt("root element name must be 'serialization-parameters'",U||"SEPM0017"),ut.aa(Y).uri!=="http://www.w3.org/2010/xslt-xquery-serialization"&&nt("root element namespace must be http://www.w3.org/2010/xslt-xquery-serialization",U||"SEPM0017"),W(Y);let y=[];ut.ad(Y).forEach(function(s){if(ut.dd(s,"http://www.w3.org/2010/xslt-xquery-serialization")){var p=ut.aa(s).local;let N;y.includes(p)&&nt("duplicated parameter "+p,"SEPM0019"),y.push(p),p==="use-character-maps"?(W(s),N={min:0,max:0,va:{}},ut.ad(s).forEach(function(D){if(ut.dd(D,"http://www.w3.org/2010/xslt-xquery-serialization")&&ut.aa(D).local==="character-map"){W(D,["character","map-string"]);let M=G(D,"character");1<M.length&&nt("keys in a character map must all be one-character strings. Found "+M);let X=M.codePointAt(0);D=G(D,"map-string"),N.va[X]!==void 0?nt("character map contains two entries for the character "+M,"SEPM0019"):(N.va[X]=D,(N.min===0||X<N.min)&&(N.min=X),X>N.max&&(N.max=X))}else nt("invalid child of use-character-maps: "+ut.aa(D).toString())}),55296<N.min&&(N.min=55296)):(W(s,["value"]),N=G(s,"value"),N=l(p,N,function(D){return s.lookupNamespaceURI(D)})),typeof N<"u"&&(P[p]=F(p,N,P[p]))}else ut.dd(s,"")&&nt("element in no namespace: "+ut.aa(s).local),p=ut.aa(s).toEQName(),y.includes(p)&&nt("duplicated parameter "+p,"SEPM0019"),y.push(p)})},bf:F,mf:l,lf:function(Y,P,U){return Y=l(Y,P),O(Y,U)},mj:O,bj:function(Y){function P(G,y="SEPM0017"){throw new A("Serialization params: "+G,y)}let U=0,nt=0,W={};for(let[G,y]of Object.entries(Y)){Y=G,1<Y.length&&P("keys in a character map must all be one-character strings. Found "+Y);let s=Y.codePointAt(0);W[s]!==void 0&&P("character map contains two entries for the character "+Y,"SEPM0019"),W[s]=y,(U===0||s<U)&&(U=s),s>nt&&(nt=s),55296<U&&(U=55296)}return{min:U,max:nt,va:W}}}}(),Jt=function(){function e(o,E,T,C){let n=new AbortController;if(T!==0){let r=new DOMException("Request aborted by timeout","TimeoutError");setTimeout(()=>n.abort(r),T)}if(T=J.newURL(o),T.protocol!=="file:"||J.ra()){T=new Headers,T.append("Accept","application/xml, text/xml;q=0.9, application/xhtml+xml;q=0.8, */*;q=0.7");let r;E=fetch(o,{method:"GET",headers:T,signal:n.signal}).catch(()=>{throw n.signal.aborted?n.signal.reason.name==="TimeoutError"?new A("Document fetch timeout: "+o,"SXJS0008"):new A("Document fetch aborted: "+o,"SXJS0008"):new A("Document fetch failed: "+o,"SXJS0009")}).then(h=>{let m=h.headers;return m.has("Content-Type")&&(r=m.get("Content-Type")),h.arrayBuffer()}).then(h=>({contentType:r,arrayBuffer:h})).then(E,E)}else E=J.sj(T,{signal:n.signal}).then(r=>({buffer:r})).catch(r=>{throw new A("Failed to read file "+o+" ("+r.message+")","SXJS0009")}).then(E,E);return C.fixed.hc.push(E),n}function t(o,E,T,C,n){function r(h){Z.xa("Add to response pool "+o,2,n.fixed.Ka),T[o]=h,E(T)}return!T[o]||T[o]instanceof A?e(o,r,C,n):(Z.xa("Doc already in pool "+o,2,n.fixed.Ka),E(T),null)}function i(o,E,T,C,n){T=T==="xml"?E.fixed.Ta:E.fixed.kb,E=E.fixed.Tb;var r=T[o];if(!r||r instanceof A){if(r=E[o],!r){try{r=C()}catch(h){r=h}E[o]=r}r=n(r),T[o]=r}if(r instanceof A)throw r;return r}function f(o){let E;return o[0]===255&&o[1]===254?E="utf-16le":o[0]===254&&o[1]===255?E="utf-16be":o[0]===239&&o[1]===187&&o[2]===191&&(E="utf-8"),E}function v(o){let E;return o.includes("encoding=")&&(o=o.slice(o.indexOf("encoding=")).toLowerCase(),o.includes("iso-8859-1")||o.includes("us-ascii")?E="iso-8859-1":o.includes("utf-16")?E="utf-16le":o.includes("utf-8")&&(E="utf-8")),E}function a(o,E,T,C){let n,r;try{if(C&&C.includes("charset=")){let m=C.split(/\s*(?:;|$)\s*/);for(let c of m)c.includes("charset=")&&(n=c.substring(8))}if(!n){let m=new Uint8Array(o.slice(0,4));n=f(m)}if(!n){let m=o.slice(0,80),c=new TextDecoder().decode(m);c.startsWith("<?xml ")&&c.includes("?>")&&(n=v(c.slice(0,c.indexOf("?>"))))}let h=n||O(E)||"utf-8";r=new TextDecoder(h,{fatal:!0}).decode(o||void 0)}catch(h){throw new A("Failed to decode "+T+" ("+h.message+")","FOUT1190")}return r}function u(o,E){let T;try{T=new TextDecoder("utf-8",{fatal:!0}).decode(o)}catch(C){throw new A("Failed to decode "+E+" ("+C.message+")","FOUT1190")}return T}function l(o){if(0<=o.indexOf("\0"))throw new A("External file contains non-XML characters","FOUT1190");return o}function F(o){return o.charAt(0)==="\uFEFF"&&(o=o.substring(1)),o}function S(o,E,T){if((o=o[0].next())&&ut.fd(o.toString()))return o.toString();if(E=E.fixed.fa.Ea(T,E),E===null||E==="#UNDEFINED")throw new A("No base URI for relative resolution","FODC0002",T);return o===null?null:J.pb(o.toString(),E)}function O(o){return o&&({binary:"iso-8859-1",utf16le:"utf-16le",ucs2:"utf-16le","ucs-2":"utf-16le"}[o.toLowerCase()]||o)}function k(o){function E(n){if(n.nodeType===11){let r=J.createDocument();n=r.importNode(n,!0),r.appendChild(n),n=r}return n}function T(n){throw new A(n+" in HTTP request to: "+o.href,"SXJS0006")}if(!o.href)throw new A("'href' must be specified in HTTP request","SXJS0006");o.method||T("'method' must be specified"),o.method=o.method.toUpperCase(),"status-only"in o&&typeof o["status-only"]!="boolean"&&T("'status-only' parameter must be of type xs:boolean"),"pool"in o&&o.pool!=="xml"&&o.pool!=="text"&&T("'pool' parameter must be either 'xml' or 'text'"),"timeout"in o&&(typeof o.timeout!="number"||0>o.timeout)&&T("'timeout' parameter must be a positive integer"),o.allowedBody=o.method!=="GET"&&o.method!=="HEAD",o.hasData="body"in o||"multipart-bodies"in o,("multipart-bodies"in o||"multipart-headers"in o)&&T("Multipart requests not yet implemented"),!o.allowedBody&&o.hasData&&T("Body and multipart body content must be null for "+o.method+" request"),"headers"in o||(o.headers={});let C=o["media-type"]||o.headers["content-type"]||"";return o.hasData&&C===""&&T("No content type specified"),o.hasData&&"media-type"in o&&(o.headers["content-type"]=C),"multipart-bodies"in o&&!/$multipart\//.test(C)&&T("Content type must be multipart media type for multipart request"),("username"in o&&!("password"in o)||!("username"in o)&&"password"in o)&&T("Must set both (or neither) username and password"),o.body&&o.body.nodeType===11&&(o.body=E(o.body,C)),o.hasData&&(C==="text/xml"||C==="application/xml"||C==="text/xml-external-parsed-entity"||C==="application/xml-external-parsed-entity"||/\+xml$/.test(C)||C==="text/html")&&o.body.nodeType!==9&&T("HTTP request body must be a document node, supplied item is: "+Z.showValue(o.body)),o}function d(o,E,T,C=!1){var n=new Headers;for(var r in o.headers)o.headers.hasOwnProperty(r)&&n.append(r,o.headers[r]);"username"in o&&(r=J.ki(o.username+":"+o.password),n.append("Authorization","Basic "+r)),n={method:o.method,headers:n},E&&(n.signal=E.signal),o.body!==void 0&&(n.body=o.body.nodeType===9?Ht.serialize(o.body):o.body);let h=o.href,m,c;try{m=new Request(h,n),c=fetch(m)}catch(B){c=Promise.reject(B)}let _={},Q,H;return c.then(B=>{Q=B.ok,Z.xa("SaxonJS processing httpRequest response",2,T.fixed.Ka);let b=B.headers;b.has("Content-Type")&&(H=b.get("Content-Type"));let w={};return b.forEach((g,x)=>{w[x]=g}),_.headers=w,_.status=B.status,_.message=B.statusText,B.arrayBuffer()}).then(B=>{if(!o["status-only"]&&o.method!=="HEAD"){let w=H||"";var b=w.split(/;/)[0];let g=o["override-media-type"]||b;switch(_["media-type"]=g,b=J.Sb,g){case"text/xml":case"application/xml":case"text/xml-external-parsed-entity":case"application/xml-external-parsed-entity":B=a(B,null,h,w),B=F(l(B)),_.body=b(B),_.body._saxonBaseUri=h,_.body._saxonDocUri=h;break;case"text/html":B=u(B,h),_.body=b(B,!1,g),_.body._saxonBaseUri=h,_.body._saxonDocUri=h;break;default:/\+xml$/.test(g)?(B=a(B,null,h,w),B=F(l(B)),_.body=b(B),_.body._saxonBaseUri=h,_.body._saxonDocUri=h):(/^text\//.test(g)?(b=a(B,null,h,w),B=F(l(b))):B=u(B,h),_.body=B)}if("pool"in o){if(!Q)throw new A("Cannot add to pool, unsuccessful HTTP response status: "+_.status,"SXJS0009");if(o.pool==="xml")if(_.body._saxonDocUri)T.fixed.Ta[h]=_.body;else throw new A("Only documents can be added to the documentPool, HTTP response is not a document","SXJS0009");else T.fixed.kb[h]=B}}return Ne(Yt(_))}).catch(B=>{throw E.signal&&E.signal.aborted&&E.signal.reason.name==="TimeoutError"?E.signal.reason:B}).catch(B=>{let b="HTTP request failed: "+h+" ("+B.message+")",w="SXJS0009";throw B.name==="AbortError"?(b="HTTP request aborted: "+h+" ("+B.name+": The user aborted a request)",w="SXJS0008"):B.name==="TimeoutError"&&(b="HTTP request timeout: "+h+" ("+B.name+": "+B.message+")",w="SXJS0008"),new A(b,w)}).catch(B=>{if(C)throw B;let b="error";E&&E.signal&&E.signal.aborted&&(b=E.signal.reason.name==="TimeoutError"?"timeout":"abort");var w=B.message;return B=B.code,_.status=0,_.message=w+": "+o.href,_.error=B,_.type=b,Ne(Yt(_))})}return{Zd:S,zd:function(o,E,T){try{return S(o,E,T)}catch(C){throw C instanceof A&&C.code==="XPTY0004"?C:new A(C.message,"FOUT1170",T)}},Vh:function(o,E,T,C,n){function r(c){0>=--h&&T(c)}let h=o.length,m={};for(let c=0;c<o.length;c++)o[c]?m[o[c]]=t(o[c],r,E,C,n):h--;return m},Ak:f,Bk:v,Ne:function(o){if(o==="")return null;if(!["utf-8","utf-16","utf-16be","iso-8859-1"].includes(o.toLowerCase()))throw new A("Unrecognized encoding "+o,"FOUT1190");return o},Eg:l,Fg:F,ei:function(o){let E={};return o.headers&&(E.headers=o.headers),(o=o.controller)&&(E.signal=o.signal),E},Fk:u,xc:function(o,E){if(0<=o.indexOf("#"))throw new A("Fragments not supported in external document URIs","FODC0002");return i(o,E,"xml",function(){let T;try{T=J.fg(o,!0)}catch(C){throw C instanceof A&&C.code==="FOUT1190"?new A(C.message,"FODC0002"):C}return T},function(T){if(T instanceof A)return T;let C;return T.buffer&&!J.ra()?C=J.Ig(T.buffer,null,o,null):T.arrayBuffer?C=a(T.arrayBuffer,null,o,T.contentType):T instanceof String?C=T:C=T.responseText,C=F(l(C)),T=ut.dc(J.Sb(C)),T._saxonBaseUri=o,T._saxonDocUri=o,T})},ui:function(o,E){if(0<=o.indexOf("#"))throw new A("Fragments not supported in text document URIs","FOUT1170");return i(o,E,"text",function(){let T;try{T=J.fg(o,!0)}catch(C){throw C instanceof A?new A(C.message,"FOUT1170"):C}return T},function(T){if(T instanceof A)return T;let C,n=T.buffer||T.arrayBuffer;return n?C=u(n,o):T instanceof String?C=T:C=T.responseText,F(C)})},Lf:function(o,E,T,C){if(0<=o.indexOf("#"))throw new A("Fragments not supported in text document URIs","FOUT1170");return i(o,E,"text",function(){let n;try{n=J.fg(o,!0)}catch(r){throw r instanceof A&&r.code==="FOUT1190"?r:new A("Cannot retrieve unparsed-text "+o+" "+r.toString(),"FOUT1170",T)}return n},function(n){if(n instanceof A)return n;let r;return n.buffer&&!J.ra()?r=J.Ig(n.buffer,C,o,null):n.arrayBuffer?r=a(n.arrayBuffer,C,o,n.contentType):n instanceof String?r=n:r=n.responseText,F(l(r))})},Ki:function(o,E,T,C,n){let r;return fetch(o,E).then(h=>{if(n&&!h.ok)throw new A("Request failed with status code "+h.status+": "+h.statusText);let m=h.headers;return m.has("Content-Type")&&(r=m.get("Content-Type")),h.arrayBuffer()}).then(h=>T==="text"||T==="xml"?a(h,C,o,r):u(h,o)).catch(h=>{throw E.signal&&E.signal.aborted&&E.signal.reason.name==="TimeoutError"?E.signal.reason:h})},Li:d,dj:function(o,E,T,C){o=re(o,!0),k(o),Z.xa("HTTP request prepared",2,C.fixed.Ka);let n=new AbortController;if("timeout"in o&&T===0&&(T=o.timeout),T!==0){let r=new DOMException("Request aborted by timeout","TimeoutError");setTimeout(()=>n.abort(r),T)}return T=d(o,n,C,!1).then(r=>E(r)),C.fixed.hc.push(T),n},pj:k,rj:function(o,E,T,C){let n="Failed to read "+T+" ("+(/ENOENT/.test(o.message)?"no such file":o.message)+")";return["AbortError","TimeoutError"].includes(o.name)&&(n="Failed to read "+T+" ("+o.name+": "+(o.name==="TimeoutError"?o.message:"The user aborted a request")+")",C="SXJS0008"),new A(n,C,E.expr)},renameEncoding:O,renameEncodingForBuffer:function(o){return o&&({"iso-8859-1":"latin1","iso-646":"ascii","us-ascii":"ascii","utf-16":"utf16le"}[o.toLowerCase()]||o)},th:function(o){try{return o(),_t(!0)}catch(E){if(E instanceof A&&E.code==="XPTY0004")throw E;return _t(!1)}}}}(),Oe=function(){let e={};return{register:function(t,i){e[t]=i},find:function(t){return e[t]},al:e}}(),Se=function(){function e(B,b,w,g,x){function I(pt){return h.Va(pt)===null}function L(pt){return pt.nodeType===R.nodeType&&($===null?!0:h.aa(pt).equals($))}let R,q=x.fixed.fa;if(b){if(R=q.evaluate(b,x).next(),!R||!h.U(R))throw new A("xsl:number/@select must yield a single node","XTTE1000")}else He(x,"XTTE0990","xsl:number"),R=ue(x);let $=h.aa(R),rt=L;if(w!==null){let pt=je.kd(w);rt=function(tt){return je.matches(pt,tt,x)}}if(g===null)b=I;else{let pt=je.kd(g);b=function(tt){return I(tt)||je.matches(pt,tt,x)}}let st;switch(B){case"simple":return B=m.Ic(R).filter(L),he(B.count()+1);case"single":return B=m.Sa(R).filter(rt).next(),st=m.Sa(R).filter(b).next(),B=B===null?null:m.Sa(B).filter(function(tt){return h.isSameNode(tt,st)}).next()!==null?B:null,B===null?yt:(B=m.Ic(B).filter(rt),he(B.count()+1));case"multi":B=wt(m.Sa(R).filter(rt).expand().reverse()),st=m.Sa(R).filter(b).next(),B=B.filter(function(tt){return m.Sa(tt).filter(function(Y){return h.isSameNode(Y,st)}).next()!==null});let pt=c.integer.fromNumber;return B.mapOneToOne(tt=>pt(m.Ic(tt).filter(rt).count()+1));case"any":return w=function(tt,Y){return h.mb(Y,tt)},B=new Qr(m.dg(R).filter(rt),m.Sa(R).filter(rt),w),st=new Qr(m.dg(R).filter(b),m.Sa(R).filter(b),w).next(),st===null&&Z.ka("from pattern selected empty"),B=B.filter(function(tt){return 0<=h.mb(tt,st)}),B=B.count(),B===0?yt:he(B);default:return Z.ka("unknown xsl:number/@level "+B),yt}}function t(B,b,w,g,x,I,L){function R($){let rt;if($===""&&($="1"),/^[\x01-\x7f]*$/.test($))$=$.split(/\b/),rt=function(tt){return/\w+/.test(tt)};else{if($.length!==Ct.La($).length)throw new A("Cannot handle non-BMP characters in format-number picture","SXJS0002");let tt=Gt.Bf($,"[\\p{Nd}\\p{Nl}\\p{No}\\p{Lu}\\p{Ll}\\p{Lt}\\p{Lm}\\p{Lo}]+","",!0,!1);rt=function(Y,P){return tt[P].Gc},$=tt.map(function(Y){return Y.string.toString()})}let st={prefix:"",Zc:[],Td:""},pt=".";for(let tt=0;tt<$.length;tt++){let Y=$[tt];rt(Y,tt)?(st.Zc.push({Dg:Y,vh:pt}),pt="."):(tt===0&&(st.prefix=Y),tt===$.length-1?st.Td=Y:tt!==0&&(pt=Y))}return st.Zc.length===0&&(st.Zc.push({Dg:"1",vh:"."}),st.Td=st.prefix),st}let q=L.fixed.fa;if(I!==null)try{c.language.cast(I)}catch{throw new A("@lang="+I+": invalid language code","XTDE0030")}return function($){let rt=b===null?"1":q.evaluate(b,L).next().toString(),st=R(rt),pt=st.prefix;return $.forEach(function(tt,Y){let P=Y>=st.Zc.length?st.Zc[st.Zc.length-1]:st.Zc[Y];Y!==0&&(pt+=P.vh),Y=P.Dg,x&&(Y+=";o"),tt=Se.Of(tt.toNumber(),Y),w!==null&&g!==null&&(tt=Se.Af(tt,w,g)),pt+=tt}),pt+=st.Td,Mt(pt)}(B.expand())}function i(B,b,w,g,x){let I=x.fixed.fa,L=[1];if(w!==null&&(L=I.evaluate(w,x).next().toString().split(/\s+/).map(function(R){if(!/^-?[0-9]+$/.test(R))throw new A("xsl:number/@start-at must be a sequence of integers. Offending value: "+R,"XTSE0020");return parseInt(R,10)})),b&&g){if(B=B.next(),B===null)return null;try{B=c.integer.cast(B.round(0))}catch{return null}B=wt([B])}return B.mapOneToOne(function(R,q){if(R=R.isNumeric()?R.toDouble():c.double.ie(R.toString()),0>R.toNumber())throw new A(`xsl:number/@value is less than zero (${R.toString()})`,"XTDE0980");try{R=c.integer.cast(R.round(0))}catch($){throw $.code="XTDE0980",$}return q=q>=L.length?L[L.length-1]:L[q],q!==1&&(R=c.integer.fromNumber(R.toNumber()+(q-1))),R})}function f(B){if(1>B||4999<B)return B.toString();let b="",w="m cm d cd c xc l xl x ix v iv i".split(" "),g=[1e3,900,500,400,100,90,50,40,10,9,5,4,1];for(let x=0;x<w.length;x++)for(;B>=g[x];)b+=w[x],B-=g[x];return b}function v(B,b){function w(x){return(x>g?w(Math.floor((x-1)/g)):"")+b.charAt((x-1)%g)}if(1>B)return B.toString();let g=b.length;return w(B)}function a(B,b){return B<b.length?b[B]:B.toString()}function u(B,b){var w=Math.abs(B);for(w=999999>w?w.toString():gt(w).toFixed();w.length<b;)w="0"+w;return 0>B&&(w="-"+w),w}function l(B,b="FODF1310"){let w=Ct.La(B),g={},x=!0;var I=0;let L,R=jt.ue("\\p{Nd}",null);var q=B.search(R);if(0>q)x=!1;else{I=jt.lj().Nd;for(let rt=0;rt<I.length&&(L=parseInt(I[rt][0],16),!(L<=w[q]&&w[q]<=L+10));rt++);for(q=0;q<w.length;q++)if(128<=w[q]){if(I=String.fromCharCode(w[q]),R.test(I)){if(L>w[q]||w[q]>L+10)throw new A("Picture string mixes digits from different digit families: "+B,b)}else if(jt.ue("\\p{N}\\p{L}",null).test(I))throw new A("Picture string is invalid: "+B,b)}let $=[];I=L-48,w.forEach(function(rt){L<=rt&&rt<=L+10?$.push(48):$.push(rt)}),B=Ct.ac($)}return g.isDecimalDigitPattern=x,g.format=B,g.diff=I,g.zeroDigit=L,g}function F(B,b){let w=[];return Ct.La(B).forEach(function(g){48<=g&&57>=g?w.push(g+b):w.push(g)}),Ct.ac(w)}function S(B,b,w,g="",x=!1){let I=0;for(let L=0;L<B.length;L++)if(L===b[I]){let R=x?L+1:B.length-L;0<R&&(B=B.substring(0,R)+(w?w[x?I:w.length-I-1]:g)+B.substring(R)),I++}return B}function O(B,b,w="FODF1310"){let g=!0;var x=0;if(Ct.La(b).length!==b.length)throw new A("Cannot handle non-BMP characters in format-integer picture","SXJS0002");if(/^[\x01-\x7f]*$/.test(b)||(g=!1),g)var I=/[0-9]/.test(b);else x=l(b,w),b=x.format,I=x.isDecimalDigitPattern,x=x.diff;I||(b="1");var L=b;if(!/^(([0-9]|#|[^A-Za-z0-9])+?)$/.test(L))throw new A("The decimal digit pattern in the picture string is invalid: "+L,w);if(I=L,b=!0,/[^0-9A-Za-z#]/.test(I)){var R=I.match(/[^0-9A-Za-z#]/g);if(1<R.length){for(let q=1;q<R.length;q++)if(R[0]!==R[q]){b=!1;break}}I=I.replace(/[^0-9A-Za-z#]/g,",")}if(/^,|,,|,$/.test(I))throw new A("Grouping in picture string is invalid: "+L,w);if(/[0-9].*#/.test(I))throw new A("Picture string is invalid: "+L,w);if(w=I.replace(/[#,]/g,"").length,B=u(B,w),R){for(I=Ct.La(I).reverse(),w=[],L=0;L<I.length;L++)I[L]===44&&w.push(L);if(L=!0,I.length-w[w.length-1]-1>w[0]&&(L=!1),L){for(I=1;I<w.length;I++)if((w[I]+1)%(w[0]+1)!==0){L=!1;break}}B=L&&b?Se.Af(B,R[0],w[0]):S(B,w,R)}return R=B,g||(R=F(R,x)),R}function k(B){let b="Zero One Two Three Four Five Six Seven Eight Nine Ten Eleven Twelve Thirteen Fourteen Fifteen Sixteen Seventeen Eighteen Nineteen".split(" "),w="  Twenty Thirty Forty Fifty Sixty Seventy Eighty Ninety".split(" ");return 20>B?b[B]:100>B?w[Math.floor(B/10)]+(B%10===0?"":" "+b[B%10]):1e3>B?k(Math.floor(B/100))+" Hundred"+(B%100===0?"":" and "+k(B%100)):1e6>B?k(Math.floor(B/1e3))+" Thousand"+(B%1e3===0?"":(100>B%1e3?" and ":" ")+k(B%1e3)):1e9>B?k(Math.floor(B/1e6))+" Million"+(B%1e3===0?"":(100>B%1e3?" and ":" ")+k(B%1e6)):B.toString()}function d(B){let b="Zeroth First Second Third Fourth Fifth Sixth Seventh Eighth Ninth Tenth Eleventh Twelfth Thirteenth Fourteenth Fifteenth Sixteenth Seventeenth Eighteenth Nineteenth".split(" "),w="  Twent Thirt Fort Fift Sixt Sevent Eight Ninet".split(" ");return 20>B?b[B]:100>B?w[Math.floor(B/10)]+(B%10===0?"ieth":"y "+b[B%10]):1e3>B?k(Math.floor(B/100))+" Hundred"+(B%100===0?"th":" and "+d(B%100)):1e6>B?k(Math.floor(B/1e3))+" Thousand"+(B%1e3===0?"th":(100>B%1e3?" and ":" ")+d(B%1e3)):1e9>B?k(Math.floor(B/1e6))+" Million"+(B%1e3===0?"th":(100>B%1e3?" and ":" ")+d(B%1e6)):B.toString()}function o(B){return B%10===1&&B%100!==11?"st":B%10===2&&B%100!==12?"nd":B%10===3&&B%100!==13?"rd":"th"}function E(B,b,w="FODF1310"){function g(L,R){let q="";for(let $=L.charCodeAt(0),rt=0;rt<R;$++,rt++)q+=String.fromCharCode($);return q}var x;let I=null;if((x=b.lastIndexOf(";"))!==-1){if(I=b.substring(x+1),!/^([co](\(.+\))?)?[at]?$/.test(I))throw new A("Invalid format modifier in picture string: "+I,w);I=I.charAt(0),b=b.substring(0,x)}if(b==="")throw new A("In the picture string, the picture cannot be empty",w);if(x=0>B?"-":"",I==="o")switch(b.toString()){case"a":case"A":case"i":case"I":break;case"Ww":return x+d(Math.abs(B));case"W":return x+d(Math.abs(B)).toUpperCase();case"w":return x+d(Math.abs(B)).toLowerCase();default:return O(B,b,w)+o(Math.abs(B))}switch(b.toString()){case"a":return v(B,g("a",26));case"A":return v(B,g("A",26));case"\u03B1":return v(B,g("\u03B1",25));case"\u0391":return v(B,g("\u0391",25));case"i":return f(B);case"I":return f(B).toUpperCase();case"Ww":return x+k(Math.abs(B));case"W":return x+k(Math.abs(B)).toUpperCase();case"w":return x+k(Math.abs(B)).toLowerCase();case"\u2460":return a(B,"\u24EA"+g("\u2460",20)+g("\u3251",15)+g("\u32B1",15));case"\u2474":return a(B,"0"+g("\u2474",20));case"\u2488":return B===0?"\u{1F100}":a(B,"0"+g("\u2488",20));case"\u2776":return a(B,"\u24FF"+g("\u2776",10)+g("\u24EB",10));case"\u2780":return B===0?"\u{1F10B}":a(B,"0"+g("\u2780",10));case"\u278A":return B===0?"\u{1F10C}":a(B,"0"+g("\u278A",10));case"\u24F5":return a(B,"0"+g("\u24F5",10));case"\u3220":return a(B,"0"+g("\u3220",10));case"\u3280":return a(B,"0"+g("\u3280",10));default:return O(B,b,w)}}function T(B,b){return String.fromCharCode(parseInt(B[b]?B[b]:_[b],10))}function C(B,b){function w(s){throw[["$gs","grouping separator"],["$es","exponent separator"],["$ds","decimal separator"],["$pc","non-prefix passive character"],["$pp","percent|permille"],["$od","optional digit"],["$md","mandatory digit"],["$ip","integer part"],["$fp","fractional part"]].forEach(function(p){s=s.replace(p[0],p[1])}),new A("Invalid picture: "+s,"FODF1310")}let g={};var x=B.indexOf(b.Qe),I=0<=x;let L=b.Lh.charCodeAt(0),R=0,q=0,$=[],rt=[],st=[],pt=-1,tt=-1,Y=!1,P=!1;var U=-1;let nt=0;for(var W=I?x:B.length,G=0;G<W;G++){var y=B.charCodeAt(G);y>=L&&y<L+10?(0<tt&&w("digit follows $pc"),Y?nt++:(1>R&&0>pt&&(pt=G),R++,q++)):y===b.Jg.charCodeAt(0)?(0<tt&&w("digit follows $pc"),Y&&w("$od follows $es"),0<R&&w("$od follows $md in $ip"),0>pt&&(pt=G,P=!0),q++):y===b.je.charCodeAt(0)?(0<st.length&&w("$gs follows $pc"),Y&&w("$gs follows $es"),$.push(G)):y===b.pd.charCodeAt(0)||y===b.te.charCodeAt(0)?I?w("$pp before $ds"):(0>pt&&w("$pp before any digit"),0<tt&&w("$pp follows $pc"),Y&&w("$pp follows $es"),st.push(y),0>tt&&(tt=G),y===b.pd.charCodeAt(0)?g.pd=!0:g.te=!0):!I&&0<=pt&&y===b.wc.charCodeAt(0)&&0>tt?Y?(st.push(y),0<nt?0>tt&&(tt=G):(st.push(y),Y=!1,U=-1,0>tt&&(tt=G-1))):(Y=!0,U=G):0<=pt&&I?w("$pc before $ds"):Y&&nt===0?(Y=!1,U=-1,st.push(b.wc.charCodeAt(0)),st.push(y),0>tt&&(tt=G-1)):0<=pt?(st.push(y),0>tt&&(tt=G)):rt.push(y)}if(0<$.length){let s=I?x:Y?U:0<tt?tt:B.length;$=$.map(function(p){return s-p-1}).reverse()}if($.length!==0)for($[0]===0&&w("$gs at end of $ip"),U=0;U<$.length-1;U++)$[U]+1===$[U+1]&&w("consecutive $gs in $ip");if(G=W=0,y=[],I){I=-1,B=B.substring(x+1);for(let s=0;s<B.length;s++){let p=B.charCodeAt(s);p>=L&&p<L+10?Y&&0>tt?nt++:0<=I||0<=tt?w("$md follows $od or $pc in $fp"):(W++,G++):p===b.Jg.charCodeAt(0)?((0<=tt||Y)&&w("$od follows $pc or $es"),0>I&&(I=s),G++):p===b.je.charCodeAt(0)?((0<=tt||Y)&&w("$gs follows $pc or $es"),y.push(s-x+1)):p===b.Qe.charCodeAt(0)?w("more than one $ds"):p===b.pd.charCodeAt(0)||p===b.te.charCodeAt(0)?((0<=tt||Y)&&w("$pp follows $pc or $es"),st.push(p),tt=s,p===b.pd.charCodeAt(0)?g.pd=!0:g.te=!0):p===b.wc.charCodeAt(0)&&0>tt?Y?(st.push(p),0<nt?0>tt&&(tt=s):(st.push(p),Y=!1,U=-1,0>tt&&(tt=s-1))):(Y=!0,U=s):Y&&nt===0?(Y=!1,U=-1,st.push(b.wc.charCodeAt(0)),st.push(p),0>tt&&(tt=s-1)):(st.push(p),0>tt&&(tt=s))}}if(0>pt&&G===0&&w("mantissa contains no digits"),y.length!==0)for(y[0]===0&&w("$gs at beginning of $fp"),x=0;x<y.length-1;x++)y[x]+1===y[x+1]&&w("consecutive $gs in $fp");return R===0&&G===0&&(Y?G=W=1:R=1),Y&&R===0&&P&&(R=1),R===0&&W===0&&(W=1),g.Ze=R,g.prefix=rt,g.Pb=$,g.qh=P,g.oj=q,g.re=W,g.qe=G,g.Qf=y,g.Tg=nt,g.wc=b.wc?b.wc:"e",g.Td=st,g}function n(B){return Math.floor((B.getTime()-new Date(Date.UTC(B.getUTCFullYear(),0,1)).getTime())/864e5)+1}function r(B,b){let w=b?n(B):B.getUTCDate();B=new Date(Date.UTC(B.getUTCFullYear(),b?0:B.getUTCMonth(),1));let g=B.getUTCDay();return g===0&&(g=7),4<g&&8>=g+w?r(new Date(B.getTime()-864e5),b):Math.floor((w+g-2)/7)+(5>g?1:0)}let h=ut,m=h.Ha,c=at.XS,_={"decimal-separator":"46","grouping-separator":"44",digit:"35","minus-sign":"45",percent:"37","per-mille":"8240","zero-digit":"48","exponent-separator":"101","pattern-separator":"59",infinity:"Infinity",NaN:"NaN"},Q={Y:"getUTCFullYear",M:"getUTCMonth",D:"getUTCDate",F:"getUTCDay",H:"getUTCHours",m:"getUTCMinutes",s:"getUTCSeconds",f:"getUTCMilliseconds"},H={d:n,W:function(B){return r(B,!0)},w:function(B){return r(B,!1)},h:function(B){return 13>B.getUTCHours()?B.getUTCHours()===0?12:B.getUTCHours():B.getUTCHours()-12},P:function(B){return 12>B.getUTCHours()?"Am":"Pm"},E:function(B){return 0>B.getUTCFullYear()?"BC":"AD"}};return{jj:function(B,b){let w=b.fixed.fa,g=B.level,x=w.ba(B,"select"),I=w.ba(B,"count");return B=w.ba(B,"from"),e(g,x,I,B,b)},kj:function(B,b){var w=b.fixed.fa;let g=w.ba(B,"value"),x=w.ba(B,"format"),I=w.mc(w.ba(B,"gpSep"),b).next(),L=w.mc(w.ba(B,"gpSize"),b).next();var R=w.mc(w.ba(B,"ordinal"),b).next();let q=w.mc(w.ba(B,"lang"),b).next();var $=B.flags||"";return B=w.ba(B,"startAt"),$=/1/.test($),w=w.evaluate(g,b),w=i(w,$,B,!0,b),R=R?ft.Zi(R.toString()):!1,w===null?Mt("NaN"):t(w,x,I,L,R,q,b)},Of:E,Af:function(B,b,w){let g="";for(let x=0;x<B.length;x++)g+=B.charAt(x),(w===1||(B.length-x)%w===1)&&x<B.length-1&&(g+=b);return g},wi:function(B,b,w){let g=0>B?!0:B===0?0>1/B:!1;if(w={Qe:T(w,"decimal-separator"),je:T(w,"grouping-separator"),Jg:T(w,"digit"),gj:T(w,"minus-sign"),pd:T(w,"percent"),te:T(w,"per-mille"),Lh:T(w,"zero-digit"),wc:T(w,"exponent-separator"),ph:T(w,"pattern-separator"),Mi:w.infinity||_.infinity,hj:w.NaN||_.NaN},isNaN(B))return w.hj;if(b=b.includes(w.ph)?b.split(w.ph):[b],2<b.length)throw new A("Invalid picture: multiple pattern separators","FODF1310");let x=C(1<b.length&&0>B?b[1]:b[0],w);if(isFinite(B)){if(0<x.Tg){var I=x.Ze,L=x.re,R=x.qe,q=x.wc,$=I===1&&x.qh;$&&(I=0,L===0&&(L=1,R===0&&(R=1)));var rt=x.Tg;B=gt(B);let tt=B.c;var st=I!==0?I+R:R,pt=B.e;for(tt.length>st&&(B=gt(B.toPrecision(st))),(st=pt!==B.e)&&(I+=1),1<I?B=B.Nb(gt(10).pow(I-1)):I===0&&(B=B.Vb(gt(10))),L=I!==0?I+L:L,tt=B.c;tt.length<L;)tt.push(0);if(L="",0<tt.length){if(I===0&&x.qh)L+="0";else for(pt=0;pt<I;pt++)L+=tt[pt];!(0<R&&tt.length>I)||$&&st||(L+="."+tt.join("").slice(I))}else throw new A("Empty mantissa","SXJS0004");I=L+q+u(B.e,rt)}else{if(R=Math.abs(B),x.pd&&(R=Math.abs(100*B)),x.te&&(R=Math.abs(1e3*B)),R+""=="Infinity"?I=R+"":I=999999>R?R.toString():gt(R).toFixed(),R=I.indexOf("."),0>R&&(R=I.length,0<x.re&&(I+=".")),0<=x.qe&&I.substring(R)!=="."&&R!==I.length&&(0<x.qe?(I=gt(I).round(x.qe,1).toString(),0>I.indexOf(".")&&(I+=".0")):I=gt(I).round(0,1).toString()),q=I.length-1-R,0<x.re)for(;q<x.re;)I+="0",q++;for(;R<x.Ze;)I="0"+I,R++;0<q&&x.Ze===0&&I.substring(0,R)==="0"&&(I=I.substring(R)),I==="0"&&x.Ze===0&&x.re===0&&0<x.qe&&(I=".0")}for(R="",q=0;10>q;q++)R+=String.fromCharCode(w.Lh.charCodeAt(0)+q);for(R+=w.Qe,q="",$=0;$<I.length;$++)rt=I.charAt($),B="0123456789.".indexOf(rt),0>B?q+=rt:B<R.length&&(q+=R.charAt(B));if(R=q,0<x.Pb.length||0<x.Qf.length){if(q=R.indexOf(w.Qe),0>q&&(q=R.length),I=R.substring(0,q),R=R.substring(q),0<x.Pb.length){for(q=!0,$=1;$<x.Pb.length;$++)if((x.Pb[$]+1)%(x.Pb[0]+1)!==0){q=!1;break}q&&x.oj+x.Pb.length-x.Pb[x.Pb.length-1]-1>x.Pb[0]&&(q=!1),I=q?Se.Af(I,w.je,x.Pb[0]):S(I,x.Pb,null,w.je)}0<x.Qf.length&&(R=S(R,x.Qf,null,w.je,!0)),R=I+R}}else R=w.Mi;return 0<x.prefix.length&&(R=Ct.ac(x.prefix)+R),0<x.Td.length&&(R+=Ct.ac(x.Td)),g&&b.length===1&&(R=w.gj+R),R},Dd:function(B,b,w,g,x){if(/\[/g.test(w)&&!/\[(\[|[^\]]*\])|\]\]/g.test(w))throw new A("Date format picture '"+w+"' doesn't match required syntax","FOFD1340");let I="";return typeof g<"u"&&g!==null&&g.toString()!=="en"&&(I+="[Language: en]"),typeof x>"u"||x===null||x.toString()==="AD"||/(Q\{\})?ISO/.test(x.toString())||(I+="[Calendar: AD]"),I+w.replace(/\[(\[|[^\]]*\])|\]\]/g,function(L){if(L==="[[")var R="[";else if(L==="]]")R="]";else{var q=L.substring(1,L.length-1).replace(/\s+/g,"");if(L=q.match(/^([YMDdWwFHhmsfZzPCE])(.*)$/),L===null)throw new A("Date/time component ["+q+"] not recognised","FOFD1340");var $=L[1];if(L=L[2]||"",B==="date"&&/[HhPmsf]/.test($)||B==="time"&&/[YMDdFWwCE]/.test($))throw new A("Date/time component ["+q+"] not available in "+B,"FOFD1350");if((q=L.lastIndexOf(","))!==-1){var rt=L.substring(q+1).split("-");L=L.substring(0,q);var st=rt[0];if(rt=rt[1]||"*",st!=="*"&&1>st||rt!=="*"&&1>rt||st!=="*"&&rt!=="*"&&st>rt)throw new A("Invalid width modifier in date/time formatting picture","FOFD1340")}var pt=null;if(1<L.length&&/[atco]/.test(L.charAt(L.length-1))?(q=L.substring(0,L.length-1),pt=L.charAt(L.length-1)):q=L,L=!0,!/^[\x01-\x7f]*$/.test(q)){if(q.length!==Ct.La(q).length)throw new A("Cannot handle non-BMP characters in date/time formatting picture","SXJS0002");L=!1}if(/[Zz]/.test($))if(rt=kr(b)==="Z"?"+00:00":kr(b),st=$,$=q,q=pt,rt==="")R=$==="Z"?"J":"";else if(st=st==="z"?"GMT":"",q==="t"&&rt==="+00:00"&&$!=="Z"&&$!=="N")R="Z";else if($==="")R=st+rt;else{if(q=rt.match(/^([+\-])([0-9])([0-9]):([0-9]{2})$/),$==="Z"||$==="N"){if($==="Z")R=parseInt(q[1]+q[2]+q[3],10),R=-12>R||12<R||q[4]!=="00"?rt:"YXWVUTSRQPONZABCDEFGHIKLM".charAt(R+12);else if($==="N")throw new A("Timezone names not implemented","SXJS0002")}else L&&!/[0-9]+/.test($)&&($="00:00"),rt=0,L||(R=l($,"FOFD1340"),$=R.format,rt=R.diff),/[^0-9A-Za-z]/.test($)?(R=$.match(/^([0-9]+)([^0-9A-Za-z])([0-9]+)$/),R=q[1]+(q[2]==="0"&&R[1].length===1?q[3]:q[2]+q[3])+R[2]+q[4]):(R=$.match(/^[0-9]+$/),R=R[0],R=q[1]+((q[2]!=="0"||R.length!==1&&R.length!==3?q[2]+q[3]:q[3])+(2<R.length?q[4]:q[4]!=="00"?":"+q[4]:""))),L||(R=F(R,rt));R=st+R}else{R=b.proxy();var tt=Q[$]?R[Q[$]]():H[$]?H[$](R):null;if(tt===null)throw new A("Component specifier not implemented: ["+$+"]","SXJS0002");if($==="M"?tt++:$==="F"&&tt===0&&(tt=7),q===""&&(q=/[FPCE]/.test($)?"n":/[ms]/.test($)?"01":"1"),$==="f"){for(pt=tt,$=q,R=st,st=rt,rt=L,L=0,rt||(L=l($,"FOFD1340"),$=L.format,L=L.diff),q=pt.toString();3>q.length;)q="0"+q;if(pt=Ct.La(q),q=parseInt(Ct.ac(pt.reverse()),10),!R&&!st&&/^[0-9]$/.test($))for(;pt.length>$.length;)$+="#";if(R&&R!=="*"){for(tt=/^([0-9]*)(#*)$/.exec($),$=tt[1]?tt[1]:"",tt=tt[2]?tt[2]:"";R>$.length;)$+="0",tt=tt.slice(0,-1);$+=tt}if(st)for(st==="*"&&(st=pt.length);$.length<st;)$+="#";for(st=Ct.ac(Ct.La($).reverse()),st=E(q,st,"FOFD1340"),st=Ct.ac(Ct.La(st).reverse());st.length>$.length;)st=st.slice(0,-1);R&&R!=="*"||parseInt(st,10)!==0||(st="0"),rt||(st=F(st,L)),R=st}else{if(/[nN]/.test(q))R="January February March April May June July August September October November December".split(" "),L="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),pt=$==="M"?R[tt-1]:$==="F"?L[tt-1]:tt,$==="F"&&rt&&rt!=="*"&&6>rt&&(pt=pt.replace(/(ur)?day$/,""),pt=pt.replace(/nes$/,"s")),q==="n"?pt=pt.toLowerCase():q==="N"&&(pt=pt.toUpperCase()),rt&&rt!=="*"&&(pt=pt.substring(0,rt));else{if(R=/;/.test(q)?q+";":q,pt&&(R+=(R.charAt(R.length-1)===";"?"":";")+pt),pt=E(tt,R,"FOFD1340"),$==="Y"&&pt.charAt(0)==="-"&&(pt=pt.substring(1)),$==="Y"&&/[^iIwWnN]/.test(q.charAt(q.length-1))&&(!st&&q.length===2||rt==2))for(;2<pt.length;)pt=pt.substring(1);if(st&&(rt=st==="*"?0:parseInt(st,10),0<rt&&pt.length<rt))if(/[YMDdWwHhms]/.test($)&&/[^iIwWnN]/.test(q.charAt(q.length-1)))for($="0",L||($=String.fromCharCode(l(R,"FOFD1340").zeroDigit));pt.length<rt;)pt=$+pt;else if($==="Y"&&/[iIwWnN]/.test(q.charAt(q.length-1)))for(;pt.length<rt;)pt+=" ";else throw new A("Not implemented min width modification with specifier "+$+" and format "+q,"SXJS0002")}R=pt}}}return R})}}}(),Sr="\u03A3",Cr=Sr+"2";function vo(e){function t(u,l){l<<=8;for(let F=0;F<u.length;F++)l=(l<<1)+u.charCodeAt(F);return l}function i(u,l,F){return t(u,F)^t(l,F)}function f(u){v^=i(u.N,"http://ns.saxonica.com/xslt/export",a++);for(let l in u)!u.hasOwnProperty(l)||l==="N"||l==="C"||l==="ELAB"||l==="PUSH"||l==="parentNode"||u.N==="catch"&&l==="test"||l===Sr||l===Cr||(v^=i(l,"",a),v^=t(u[l],a));u.C&&u.C.forEach(function(l){f(l)}),v^=1}let v=0,a=0;return f(e),v}function To(e){let t=e[Sr]||"unspecified";if(t==="unspecified")throw new A("No checksum found in SEF","SXJS0006");if(e=vo(e),(0>e?4294967295+e+1:e).toString(16)!==t)throw new A("Invalid checksum in SEF: "+t,"SXJS0006")}function Ou(e){function t(a,u,l){return f+=l.toString(),f+=a,f+=l.toString(),f+=u,0}function i(a){t(a.N,"http://ns.saxonica.com/xslt/export",v++);let u=[];for(let l in a)!a.hasOwnProperty(l)||l==="N"||l==="C"||l==="ELAB"||l==="PUSH"||l==="parentNode"||a.N==="catch"&&l==="test"||l===Sr||l===Cr||l==="PRIMED"||u.push(l);u.sort(),u.forEach(l=>{t(l,"",v),l=a[l],f+=v.toString(),f+=l}),a.C&&a.C.forEach(function(l){i(l)})}let f="",v=0;return i(e),f}let _u=function(){function e(l,F){return l.ob===F.ob?l.Jc===F.Jc?l.Md===F.Md?F.sh-l.sh:l.Md-F.Md:l.Jc-F.Jc:l.ob-F.ob}function t(l,F){return l.ob===F.ob?l.Jc===F.Jc?0:l.Jc-F.Jc:l.ob-F.ob}function i(l,F){function S(O){return O.n?[O.n.replace(/^(\*:|Q\{.*\})/,"")]:O.u?S(O.u[0]).concat(S(O.u[1])):[]}this.Fe=l,this.nh=l.onNo,this.mh=F.ib(l,"t"),F.ib(l,"F")&&(this.Kf=!0),this.zg=(l.C||[]).filter(O=>O.role!=="eventOptions").map(O=>({Kd:O,ob:parseInt(O.prec,10),Jc:parseFloat(O.prio),Md:parseInt(O.seq,10),fj:parseInt(O.minImp,10),sh:parseInt(O.rank,10),pattern:je.kd(F.ba(O,"match")),matches:Ie(O.matches||"1"),action:F.ba(O,"action")})).sort(e).reverse(),this.$b={},this.zg.forEach(O=>{let k=O.matches.V(),d,o=[];/^N[EAP]/.test(k.p)?(d=k.p,k.n&&!/}\*$/.test(k.n)?(d+=" "+k.n.replace(/^(\*:|Q\{.*\})/,""),o=[d]):o=k.u?[...new Set(S(k))].map(E=>d+" "+E):[d]):o=["."],o.forEach(E=>{let T=this.$b[E];T||(this.$b[E]=T=[]),T.push(O)})})}let f=at.XS,v=ut.Ha,a={TC:function(l,F,S,O){if(ut.U(l))switch(l.nodeType){case 9:case 11:case 1:S=S.X(!1),S.focus=Lt(v.Ia(l)),F.zb(S,O);break;case 3:case 4:O.append(l);break;case 2:O.text(l.value)}else if(f.anyAtomicType.matches(l))O.text(l.toString());else if(ft.isArray(l)){let k=[];l.value.forEach(d=>{k=k.concat(d)}),l=S.X(!1),l.focus=Lt(wt(k)),F.zb(l,O)}},SC:function(l,F,S,O){return Gt.hg(l,S,"c",function(){let k=S.X(!1);k.focus=Lt(v.Ga(l)),F.zb(k,O),k.focus=Lt(v.Ia(l)),F.zb(k,O)},O)},DC:function(l,F,S,O){ut.U(l)&&(O.lb=ut.baseURI(l)),O.append(l)},DS:function(l,F,S,O){if(ut.U(l))switch(l.nodeType){case 9:case 11:S=S.X(!1),S.focus=Lt(v.Ia(l)),F.zb(S,O)}},SS:function(l,F,S,O){if(ut.U(l))switch(l.nodeType){case 9:case 11:case 1:S=S.X(!1),S.focus=Lt(v.Ga(l)),F.zb(S,O),S.focus=Lt(v.Ia(l)),F.zb(S,O)}else if(ft.isArray(l)){let k=[];l.value.forEach(d=>{k=k.concat(d)}),l=S.X(!1),l.focus=Lt(wt(k)),F.zb(l,O)}},bubble:function(l,F,S,O){ut.U(l)?l.nodeType===1&&(S=S.X(!1),S.focus=Lt(v.parent(l)),F.zb(S,O)):O.append(l)}};a.TO=a.TC;let u={1:"NE",2:"NA",3:"NT",7:"NP",8:"NC",9:"ND",11:"ND",13:"NN"};return i.prototype={Fe:null,zg:null,nh:"TC",mh:!1,Kf:!1,zb:function(l,F,S){if(S){let O=!0;l.focus.forEachItem(k=>{O?O=!1:F.text(S.value,{}),this.Ge(k,l,F)})}else l.focus.forEachItem(O=>this.Ge(O,l,F))},Xh:function(l,F){let S=l.Wa;if(!S)throw new A("No current template rule","XTDE0560");return this.Ge(ue(l),l,F,function(O){return O.ob>=S.fj&&O.ob<S.ob})},ij:function(l,F){let S=l.Wa;if(!S)throw new A("No current template rule","XTDE0560");return this.Ge(ue(l),l,F,function(O){return 0>e(O,S)})},vi:function(l,F,S){let O=null,k=null,d=this.Kf;var o=[];if(ut.U(l)){let T=u[l.nodeType];var E=ut.aa(l);(E=E?E.local:null)&&(E=T+" "+E,this.$b[E]&&o.push(this.$b[E])),this.$b[T]&&o.push(this.$b[T]),this.$b.N&&o.push(this.$b.N)}if(this.$b["."]&&o.push(this.$b["."]),function(T){T.forEach(C=>{C.forEach(function(n){if((!S||S(n))&&(!O||0<e(n,O)||d&&0<=t(n,O))){let r=!1;try{r=je.matches(n.pattern,l,F)}catch{}r&&(k=O,O=n)}})})}(o),this.Kf&&O&&k&&t(O,k)===0&&O.Md!==k.Md)throw o="Multiple templates matched item ("+Z.showValue(l)+"): ",o+=O.Kd.module+"#"+O.Kd.line,o+=" and "+k.Kd.module+"#"+k.Kd.line,new A(o,"XTDE0540");return O},eh:function(){let l=this.Fe.name;return l&&l.startsWith("Q{"+Ft.jd+"}")},Ge:function(l,F,S,O){var k=F.fixed.fa;if(O=this.vi(l,F,O),O!==null)k.Ff(O.Kd,F),F.Wa=O,F.ab=F.oa,O.action||Z.ka("Template rule without action child"),Gt.push(O.action,F,S);else{var d;if(this.eh()?d="bubble":d=this.nh.split("+")[0],k=a[d])k(l,this,F,S);else throw new A("No matching template rule for "+Z.showValue(l),"XTDE0555")}}},i}();class Bo{constructor(t,i,f,v){this.principalResult=t,this.resultDocuments=i,this.stylesheetInternal=f,this.masterDocument=v}}class vr{constructor(t,i){this.destination=t,this.save=i}}class Pu extends vr{constructor(t,i){super(t,function(f,v){i[f.toString()]=v})}}let wn=function(){function e(r){function h(c){switch(c.nodeType){case 9:c.documentElement&&h(c.documentElement);break;case 11:case 1:var _=ut.aa(c),Q=ut.Ei(c,"xml:space");_=c.nodeType!==11&&m(_.uri,_.local)&&!(Q&&Q==="preserve"),Q=c.childNodes;let H=0;for(;H<Q.length;){let B=Q[H];if(B.nodeType===4){let b=ut.nc(c).createTextNode(B.nodeValue);c.replaceChild(b,B),B=b}B.nodeType===3||B.nodeType===4?_&&jt.trim(B.nodeValue)===""?c.removeChild(B):H++:(h(B),H++)}}}let m;if(r)if(r.N==="strip.all")m=()=>!0;else if(r.N==="strip.none")m=()=>!1;else{let c={},_={},Q={},H={},B={},b=function(g,x,I){g[x]?parseInt(I.ob,10)>parseInt(g[x].ob,10)&&(g[x]=I):g[x]=I};(r.C||[]).forEach(g=>{let x=Ie(g.test);x instanceof an?(g.PREC=parseInt(g.prec,10),g.PRIO=2,b(c,x.name.toEQName(),g)):x instanceof Gr?(g.PREC=parseInt(g.prec,10),g.PRIO=1,b(_,x.uri,g)):x instanceof gr?(g.PREC=parseInt(g.prec,10),g.PRIO=1,b(Q,x.localName,g)):x instanceof De?(g.PREC=parseInt(g.prec,10),g.PRIO=0,b(H,"*",g)):Z.ka("Unrecognised strip-space "+g.test)});let w=(g,x)=>{let I=[],L=c["Q{"+g+"}"+x];return L&&I.push(L),(g=_[g])&&I.push(g),(x=Q[x])&&I.push(x),H["*"]&&I.push(H["*"]),I.sort((R,q)=>{let $=R.PREC,rt=q.PREC;return $===rt?q.PRIO-R.PRIO:rt-$}),0<I.length?I[0].N==="s":!1};m=(g,x)=>{let I="Q{"+g+"}"+x,L=B[I];return L?L==="s":(g=w(g,x),B[I]=g?"s":"p",g)}}else m=()=>!1;return function(c){return h(c),c}}function t(r,h,m){function c(tt){return tt=new Bu(tt),w.fixed.zi=tt,new Gt.zc(tt)}function _(){}function Q(){J.ra()&&!m.ag&&O(w)}var H=ft.Ba(r,"strip")[0]||ft.Ba(r,"strip.all")[0];let B=null;(H||J.ra())&&(B=e(H),h&&B&&(h=B(h))),m.Eh&&m.Eh(r),m.il=n;let b=m.async,w=k(r,h,m);w.fixed.pl=w.fixed.ud.Oa.version,d(w,function(tt){return tt.N==="globalParam"&&tt.flags&&tt.flags.indexOf("r")!==-1}).map(function(tt){return tt.name}).map(function(tt){if(!w.fixed.options.stylesheetParams.containsKey(at.XS.QName.fromEQName(tt)))throw new A("No value has been provided for required stylesheet parameter '"+tt+"'","XTDE0050")}),w.fixed.ye=B,h&&(ut.dc(h),w.fixed.Ta[h._saxonBaseUri]=h);let g=m.destination||"application",x=m.resultForm||"default";if(m.deliverResultDocument){let tt=m.deliverResultDocument("testURI");["document","serialized","raw"].includes(tt.destination)&&!tt.save&&(m.deliverResultDocument=function(){return new Pu(tt.destination,m.resultDocuments)})}m.deliverResultDocument||(J.ra()?m.deliverResultDocument=function(){return new vr("html-page",function(tt,Y){m.resultDocuments[tt.toString()]=Y})}:m.deliverResultDocument=b?function(){return new vr("file",function(tt,Y,P){Y=J.Ih(tt,Y,P),Z.xa("Promising to write to "+tt,2,w.fixed.Ka),w.fixed.hc.push(Y)})}:function(){return new vr("file",function(tt,Y,P){Z.xa("Writing to "+tt,2,w.fixed.Ka),J.Jh(tt,Y,P)})});let I,L={};H=w.fixed.ud;var R=H.bg["#unnamed"];if(R){R=R.C;for(var q,$,rt=0;rt<R.length;rt++){let tt=R[rt].name;tt==="parameter-document"?q=R[rt].value:tt==="Q{http://saxon.sf.net/}parameter-document-base-uri"?$=R[rt].value:L[tt]=tt==="use-character-maps"?Ht.lf(tt,R[rt].value,H):Ht.mf(tt,R[rt].value)}q&&$&&(q=J.pb(q,$),q=Jt.xc(q,w),Ht.cf(q.documentElement,L))}if(m.Na)for(let[tt,Y]of Object.entries(m.Na))q=tt==="use-character-maps"?Array.isArray(Y)?Ht.mj(Y,H):Ht.bj(Y):Y,L[tt]=Ht.bf(tt,q,L[tt]);if(["appendToBody","prependToBody","replaceBody"].includes(g))if(J.ra()){w.da=window.document;let tt=un(w);_=function(){tt.$c=new Nu(tt.$c);let Y=c(tt);return Y.Da(),Y},Q=function(){tt.wa(),tt.close();let Y=ut.Ha.Ia(tt.result()[0]);if(Y){let P=window.document.body;if(g==="appendToBody")Y.forEachItem(function(U){P.appendChild(U)});else if(g==="prependToBody"){let U=P.firstChild;Y.forEachItem(function(nt){P.insertBefore(nt,U)})}else if(g==="replaceBody"){for(;0<P.childNodes.length;)P.removeChild(P.childNodes[0]);Y.forEachItem(function(U){P.appendChild(U)})}}else throw new A("No result from transformation","SXJS0006");J.ra()&&!m.ag&&O(w)}}else throw new A("Destination="+g+" is allowed only when running in the browser","SXJS0006");else if(["serialized","file","stdout"].includes(g)){let tt;if(g==="stdout")tt=J.Gi();else{let Y="",P=!1;tt={write:function(U){P=!0,Y+=U},end:g==="serialized"?function(){if(P){var U=Mt(Y);U=$r(U,x)}else U=null;m.principalResult=U}:function(){var U=L.encoding||"utf-8";P&&(b?(U=J.Ih(new URL(m.Ab),Y,U),w.fixed.hc.push(U)):J.Jh(new URL(m.Ab),Y,U))}}}_=function(){return I=Ht.bh(L,tt,w),c(I)}}else if(["raw","document","application"].includes(g)){let tt=g==="document";g==="application"&&(typeof L["build-tree"]<"u"?tt=L["build-tree"]:tt=!0);let Y=un(w);_=function(){return I=Y,tt&&(I=new Dr(Y)),c(I)},Q=function(){if(Y.result().length===0)var P=null;else P=wt(Y.Gb),P=$r(P,x);m.principalResult=P,J.ra()&&!m.ag&&O(w,m.Zh)}}else throw new A("Invalid SaxonJS.transform() destination: "+g+" : "+typeof g,"SXJS0006");if(q=m.Qi,($=m.Ri)&&($=$.toString(),/^Q{/.test($)||($="Q{}"+$)),R=(R=m.Oi)?R.toString():r.defaultMode||"",R==="#unnamed"&&(R=""),R==="#default"&&(R=r.defaultMode||""),R!==""&&0>R.indexOf("Q{")&&(R="Q{}"+R),H=E(w,R),!H)throw new A("Unknown initial mode "+R,"XTDE0045");rt="Q{"+Ft.Qc+"}initial-template",h||q||$||T(w,rt)&&($=rt);let st=m.Ni;if(st){if(h=m.functionParams?m.functionParams:[],q=h.length,$=C(w,st.toString(),q),!$)throw new A("Unknown initial function "+st+"#"+q,"XTDE0041");if($.Oa.vis!=="PUBLIC"&&$.Oa.vis!=="FINAL")throw new A("Uninvocable initial function "+st+"#"+q+" with visibility "+$.Oa.vis,"XTDE0041");let tt=$.Oa.C[0];w.focus={},w.oa=$,zn(w),w.pa="function",w.ab=H,w.Wa=null;let Y=0;w.ma=h.map(function(P){var U=tt.C[Y++].as;return U=on(U||"*"),ft.Gf(Yt(P),U,()=>"function parameter for "+st)}),h=_(),Gt.push(ft.ba(tt,"body"),w,h),h.close()}else if($){if(q=T(w,$),!q)throw new A("Unknown initial template "+$,"XTDE0040");$=q.actor,w.fixed.cd?w.focus=me(h):(w.focus=Lt(yt),w.focus.next()),ft.Ff($,w),w.oa=q,w.ab=H,i(m,w),h=_(),Gt.push($.C[0],w,h),h.close()}else{if(Array.isArray(q)&&B&&q.filter(ut.U).map(function(tt){return ut.Ye(tt)?tt:tt.ownerDocument}).map(function(tt){return B(tt)}),H.visibility==="PRIVATE"&&R!==r.defaultMode&&R!=="")throw new A("Uninvokable initial mode "+R+" with visibility "+H.Oa.vis,"XTDE0045");if(!h&&!q)throw new A("No source input supplied for apply-templates invocation","XTDE0044");$=H.mode,w.oa=H,w.focus=Lt(q?wt(Array.isArray(q)?q:[q]):At(h)),h=$.Fe.useAcc,h!=null&&h!=="#all"&&(w.ze=h.split(/\s+/)),i(m,w),h=_(),$.zb(w,h),h.close()}if(Q(),b){let tt=function(){let Y=w.fixed.hc;return w.fixed.hc=[],Promise.all(Y).then(()=>{if(0<w.fixed.hc.length)return tt()}).catch(P=>{throw P}).then(()=>Promise.resolve(new Bo(m.principalResult,m.resultDocuments,r,m.masterDocument)))};var pt=tt;m.resultPromise=tt()}}function i(r,h){r.templateParams&&(Z.assert(r.templateParams instanceof It,"options?templateParams must be an instance of HashTrie. Supplied:"+r.templateParams),h.Fc=r.templateParams),r.tunnelParams&&(Z.assert(r.templateParams instanceof It,"options?tunnelParams must be an instance of HashTrie. Supplied:"+r.tunnelParams),h.tunnelParams=r.tunnelParams)}function f(r){let h="";for(let m in r)r.hasOwnProperty(m)&&r[m]&&(h+=m+"="+r[m].toString().substring(0,30)+"("+typeof m+"), ");return h}function v(r){let h=r.stylesheetInternal||null;if(!h){if(r.Hb)var m=J.ve(r.Hb);else if(r.stylesheetText)m=r.stylesheetText;else if(r.fc){if(J.ra())throw new A("Cannot supply stylesheetFileName in browser","SXJS0006");m=J.ve(r.fc)}else throw new A("No stylesheet supplied","SXJS0006");try{h=JSON.parse(m)}catch{throw new A("Supplied SEF is not in JSON format","SXJS0006")}}S(h,r),h.PRIMED||(To(h),a(h),h.PRIMED=!0),h.relocatable==="true"&&(r.hd=!0),m=r.ff||null;let c;if(m&&(c=r.ff.baseURI||r.Qd)&&(m._saxonBaseUri=c),!m){let _;if(r.Nc)c=r.Nc,_=J.ve(c);else if(r.gf)c=r.Qd,_=r.gf;else if(r.Lc){if(J.ra())throw new A("Cannot supply sourceFileName in browser","SXJS0006");c=r.Lc,_=J.ve(c)}_&&(r.Ah==="json"?m=ln.od(_,null):(m=J.Sb(_),c&&(m._saxonBaseUri=m._saxonDocUri=c)))}return t(h,m,r),new Bo(r.principalResult,r.resultDocuments,h,r.masterDocument)}function a(r){r.C&&r.C.forEach(function(h){h.parentNode=r,a(h)})}function u(r){if(r instanceof It)return r;let h=new It;return r&&Object.keys(r).forEach(m=>h.inSituPut(at.XS.QName.fromEQName(m),Yt(r[m]))),h}function l(r){let h={};for(let[m,c]of Object.entries(r))h[m]=m==="use-character-maps"?c:Ht.bf(m,c,null);return h}function F(r){let h=(m,c)=>{let _=null;for(let Q of c)if(m[Q]){if(_)throw new A("The following transform options are mutually exclusive: "+c.toString(),"SXJS0006");_=Q}return _};return h(r,["stylesheetText","stylesheetInternal","stylesheetLocation","stylesheetFileName"]),h(r,["sourceNode","sourceText","sourceLocation","sourceFileName"]),{stylesheetText:r.stylesheetText,stylesheetInternal:r.stylesheetInternal,Hb:r.stylesheetLocation,fc:r.stylesheetFileName,Rd:r.stylesheetBaseURI,stylesheetParams:u(r.stylesheetParams),ff:r.sourceNode,gf:r.sourceText,Nc:r.sourceLocation,Lc:r.sourceFileName,Ah:r.sourceType||"xml",Qd:r.sourceBaseURI,masterDocument:r.masterDocument,Ri:r.initialTemplate,Ni:r.initialFunction,functionParams:r.functionParams,templateParams:u(r.templateParams),tunnelParams:u(r.tunnelParams),Oi:r.initialMode,Ta:r.documentPool,kb:r.textResourcePool,destination:r.destination,Ab:r.baseOutputURI||(r.masterDocument?r.masterDocument._saxonBaseUri:void 0),Na:r.outputProperties,principalResult:void 0,Jf:r.deliverMessage,deliverResultDocument:r.deliverResultDocument,uc:r.collations,Hg:r.collectionFinder,Ka:r.logLevel,Eh:r.traceInjector,cd:r.globalContextItem,Qi:r.initialSelection,oe:r.isDynamicStylesheet,hd:r.isRelocatableStylesheet,language:r.language,kh:r.messages,resultDocuments:{},resultForm:r.resultForm,Gk:r.extraOptions,ag:r.nonInteractive,Zh:r.attachEventsTo,async:r.async}}function S(r,h){if(r.N==="package"){let m=r.target||"not specified",c=r.targetVersion||"",_=r.saxonProduct;if(n=r.saxonVersion||"9.8.0.5",_&&!/Saxon/.test(n)&&(n=_+" "+n),Z.xa("SEF generated by "+n+" at "+(r.buildDateTime||"2000-01-01"),2,h.Ka),m!=="JS"||c!=="2"&&c!=="3")throw new A("Supplied SEF is not customized for use with SaxonJS. The option -target:JS should be set when generating the export. target is: "+m,"SXJS0006");if(n.charAt(0)==="9")throw new A("For use with SaxonJS 2+, SEF must be generated by SaxonJ-EE 10.0 or later. Supplied SEF is generated by SaxonJ-EE version "+n,"SXJS0006");if(r.expiry&&0>at.XS.date.fromString(r.expiry).compareTo(at.XS.date.fromDate(new Date,0)))throw new A("Development license for supplied stylesheet has expired","SXJS0006")}else throw new A("Supplied SEF does not have correct format","SXJS0006")}function O(r,h=null){function m(_,Q){let H={};var B=ft.ba(_.actor,"eventOptions");if(B){let w=r.X(!0);if(w.oa=_,B=ft.evaluate(B,w),B=re(B.next(),!0),B==null)throw new A("ixsl:event-options is null");if(typeof B!="object")throw new A("ixsl:event-options must be a map");for(let g in B)0<=["passive","once","signal"].indexOf(g)?H[g]=!!B[g]:g==="signal"?H[g]=B[g]:console.log("Ignoring invalid key in ixsl:event-options: "+g)}let b=_.mode;J.addEventListener(Q,function(w){let g=w.target;var x=r.X(!0);x.pa=!1,x.de=w,x.focus=Lt(At(Yt(g)[0])),x.oa=_,w=un(r),w=new Gt.zc(w),(x=b.zb(x,w))&&x.expand()},H,h)}let c=r.fixed.Ja;Object.keys(c).forEach(function(_){_=c[_],_.mode&&_.mode.eh()&&(_.name.split("}on")[1]?m(_,_.name.split("}on")[1]):console.log("Invalid event handler name:",_.name))})}function k(r,h,m){function c(w,g){_(r,w,g)}function _(w,g,x){w.N===g&&x(w),w.C&&w.C.forEach(function(I){_(I,g,x)})}function Q(w){return(w=w.name)?/^Q\{/.test(w)?w:"Q{}"+w:null}function H(w,g){function x(I){I=ft.Ba(I,"co");for(let L=0;L<I.length;L++)g(I[L])}x(w),w.C&&(w=w.C.filter(function(I){return I.N==="overridden"}),w[0]&&x(w[0]))}function B(w,g){let x=w.C?w.C[0]:null;return x===null?w.base?B(g.fixed.Ja[parseInt(w.base,10)].Oa,g):null:x}let b=new On;if(b.fixed={Ld:{},Ab:m.Ab||"",Ja:{},Bb:new Date,Ta:{},fa:ft,cd:m.cd||h,oe:m.oe,hd:m.hd,zf:0,options:m,nd:{},Tb:{},uh:{},staticBaseURI:"",kl:r,kb:{},ud:null,hc:[],gl:[],depth:0,Ka:m.Ka||Z.getLogLevel()},m.Ta){let w=m.Ta;Object.keys(w).forEach(g=>{let x=w[g];if(ut.Ye(x))b.fixed.Ta[g]=x;else throw new A("Supplied value for "+g+" is not a document node")})}if(m.kb){let w=m.kb;Object.keys(w).forEach(g=>{b.fixed.kb[g]=w[g].toString()})}if(m.uc||(m.uc={}),m.uc[Bt.Vc]=Bt.Gg(),m.uc[Bt.Wg]=Bt.Le(),m.uc[Bt.Xf]=Bt.Ag(),m.uc[Bt.Kh]=Bt.Le(),c("package",function(w){let g={name:w.name,Oa:w,yb:{},Cg:{},bb:{},bg:{},keys:{},Fh:null};b.fixed.nd[g.name]=g,b.fixed.ud||(b.fixed.ud=g),H(w,function(x){let I=parseInt(x.id,10);b.fixed.Ja[I]={id:I,visibility:x.vis,Oa:x,oh:g,actor:null,Je:x.binds.split(" ").map(function(L){return parseInt(L,10)})}})}),c("package",function(w){let g=b.fixed.nd[w.name];if(H(w,function($){let rt=b.fixed.Ja[parseInt($.id,10)];$=rt.actor=B($,b),$!==null&&(rt.name=Q($),$.N==="globalVariable"||$.N==="globalParam"?rt.value=null:$.N==="mode"&&(rt.mode=new _u($,ft),Q($)===null&&(g.Fh=rt.mode)),$.parentNode.vis==="ABSTRACT"&&(rt.visibility="ABSTRACT"))}),0<ft.Ba(w,"schema").length)throw new A("Package includes xsl:import-schema but SaxonJS is not schema-aware","XTSE1650");for(var x=ft.Ba(w,"decimalFormat"),I=0;I<x.length;I++){var L=x[I],R=Q(L);g.bb[R===null?"Q{}":R]=L}for(x=ft.Ba(w,"output"),I=0;I<x.length;I++)L=x[I],R=L.name?Q(L):"#unnamed",g.bg[R]=L;for(x=ft.Ba(w,"key"),I=Math.floor(1e8*Math.random()),L=0;L<x.length;L++){R=x[L];var q=Q(R);g.keys[q]?g.keys[q].Fd.push(R):g.keys[q]={lg:I+"k"+L,Fd:[R]}}for(x=ft.Ba(w,"accumulator"),I=Math.floor(1e8*Math.random()),L=0;L<x.length;L++)R=x[L],q=Q(R),g.yb[q]={lg:I+"a"+L,Uh:R};for(w=ft.Ba(w,"charMap"),x=0;x<w.length;x++){I=w[x],L=Q(I);let $={min:0,max:0,va:{}};I.C&&(I.C.forEach(function(rt){let st=Number(rt.c);($.min===0||st<$.min)&&($.min=st),st>$.max&&($.max=st),$.va[st]=rt.s}),55296<$.min&&($.min=55296)),g.Cg[L]=$}}),c("glob",function(w){let g=b.fixed.cd;if(w.use==="req"&&g==null)throw new A("The stylesheet requires a global context item","XTDE3086");if(w.use==="pro")b.fixed.cd=null;else{let x,I=w.cxt;if(I&&(x=Ie(I).ha()),g!==null&&x&&!x(g))throw new A("The global context item must be an instance of "+w.type,"XTTE0590")}}),b.nb=m.Ab?[m.Ab]:[],!m.oe&&m.hd&&(h="",m.Rd?h=m.Rd:m.Hb?h=m.Hb:m.fc?h=J.Mf(m.fc):J.ra()&&(h=J.Df()),b.fixed.staticBaseURI=h),m.oe&&m.hd&&m.Rd&&(b.fixed.staticBaseURI=m.Rd),J.ra()){if(b.masterDocument=m.masterDocument?m.masterDocument:window.document,m.Hb&&!ut.fd(m.Hb))throw new A("stylesheetLocation should be absolute by now","SXJS0004")}else if(m.masterDocument){if(!ut.U(m.masterDocument)||![9,11].includes(m.masterDocument.nodeType))throw new A("masterDocument must be a document node","SXJS0004");b.masterDocument=m.masterDocument}return b.masterDocument&&!b.masterDocument._saxonBaseUri&&b.masterDocument.baseURI&&(m=b.masterDocument.baseURI,h=m.indexOf("#"),b.masterDocument._saxonBaseUri=0<=h?m.substring(0,h):m),b.oa=null,b.da=J.createDocument(),b.j=b.da.createDocumentFragment(),b.ma=[],b.Fc=new It,b.tunnelParams=new It,b.qc={},b}function d(r,h){let m=[],c=ft.Ba(r.fixed.ud.Oa,"co");for(let _=0;_<c.length;_++){let Q=r.fixed.Ja[parseInt(c[_].id,10)],H=Q.actor;H&&h(H)&&m.push(Q)}return m}function o(r,h){let m=ft.Ba(r.fixed.ud.Oa,"co");for(let c=0;c<m.length;c++){let _=r.fixed.Ja[parseInt(m[c].id,10)],Q=_.actor;if(Q&&h(Q))return _}}function E(r,h){return o(r,function(m){return m.N==="mode"&&(m.name?m.name===h:h==="")})}function T(r,h){return o(r,function(m){return m.N==="template"&&m.name===h})}function C(r,h,m){return o(r,function(c){return c.N==="function"&&c.name===h&&ft.Ba(c,"arg").length===m})}let n=null;return{transform:function(r,h){function m(g){return g=J.pb(g.toString(),_),J.ra()?g:J.Mf(g)}h=!h||h==="sync",Z.xa((h?"Synchronous":"Asynchronous")+" transform with options: "+f(r),2,r.logLevel);let c;try{c=F(r),c.Na&&(c.outputProperties=l(c.Na))}catch(g){if(h)throw g;return Promise.reject(g)}let _=J.Df();if(c.Hb)var Q=c.Hb=m(c.Hb);else c.fc&&(Q=c.fc=m(c.fc));if(c.Rd=Q||c.Rd,c.Nc)var H=c.Nc=m(c.Nc);else c.Lc&&(H=c.Lc=m(c.Lc));if(c.Qd=H||c.Qd,h)return v(c);c.async=!0;let B,b,w;if(r=[],B=c.stylesheetInternal||null,!B)if(Q=c.stylesheetText)try{B=JSON.parse(Q)}catch(g){r.push(Promise.reject(new A("Error parsing supplied SEF: "+g,"SXJS0006")))}else c.fc?(Q=J.ec({file:c.fc,type:"json"}).then(g=>{B=JSON.parse(g)}).catch(g=>Promise.reject(new A("Failed to read JSON input "+c.fc+": "+g,"SXJS0006"))),r.push(Q)):c.Hb?(Q=J.ec({location:c.Hb,type:"json"}).then(g=>{B=JSON.parse(g)}).catch(g=>Promise.reject(new A("Failed to read JSON input "+c.Hb+": "+g,"SXJS0006"))),r.push(Q)):r.push(Promise.reject(new A("No stylesheet supplied","SXJS0006")));if(b=c.ff||null,w=c.Ah||"xml",b&&(Q=c.ff.baseURI||c.Qd)&&(b._saxonBaseUri=Q),!b){Q=(x,I)=>(x=J.Sb(x),I&&(x._saxonBaseUri=x._saxonDocUri=I),x),H=x=>ln.od(x,null);let g=w==="xml"?Q:H;c.gf?b=g(c.gf,c.Qd):c.Lc?(Q=J.ec({file:c.Lc,type:w}).then(x=>b=g(x,c.Lc)).catch(x=>Promise.reject(new A(`Failed to read ${w.toUpperCase()} source input (${x.message})`,"SXJS0006"))),r.push(Q)):c.Nc&&(Q=J.ec({location:c.Nc,type:w}).then(x=>{b=g(x,c.Nc)}).catch(x=>Promise.reject(new A(`Failed to read ${w.toUpperCase()} source input (${x.message})`,"SXJS0006"))),r.push(Q))}return Promise.all(r).then(()=>{let g="";return Cr in B&&(g=Ou(B)),J.crypto(g)}).then(g=>{if(Cr in B){let x=B[Cr];if(Array.from(new Uint8Array(g)).map(I=>I.toString(16).padStart(2,"0")).join("")!==x)throw new A("Invalid hash in SEF: "+x,"SXJS0006")}}).then(()=>{var g=B,x=b,I=c;if(!g)throw new A("No stylesheet supplied","SXJS0006");try{S(g,I),g.PRIMED||(To(g),a(g),g.PRIMED=!0),g.relocatable==="true"&&(I.hd=!0),t(g,x,I);var L=I.resultPromise}catch(R){throw console.log("Transformation failure: "+(R.getMessage?R.getMessage():R)),R}return L})},checkOptions:F,internalTransform:t}}();var St={},No={};St[0]="<eof>",St[1]="|",St[2]="/",St[3]="@",St[48]="~",St[4]="[",St[5]="(",St[6]="=",St[7]=",",St[8]="//",St[9]="or",St[10]="and",St[11]=">",St[12]="<",St[13]=">=",St[14]="<=",St[15]="+",St[16]="-",St[299]="-",St[17]="*",St[18]="div",St[19]="mod",St[20]="is",St[21]="$",St[22]="!=",St[40]="!",St[30]="||",St[23]="intersect",St[24]="except",St[25]="return",St[26]="then",St[27]="else",St[29]="to",St[31]="in",St[32]="some",St[33]="every",St[34]="satisfies",St[35]="<function>(",St[36]="<axis>",St[37]="if(",St[38]="<<",St[39]=">>",St[41]="::",St[42]=":*",St[44]="#",St[45]="instance of",St[46]="cast as",St[47]="treat as",St[50]="eq",St[51]="ne",St[52]="gt",St[54]="ge",St[53]="lt",St[55]="le",St[56]="idiv",St[57]="castable as",St[58]=":=",St[71]="as",St[75]=":",St[76]="=>",St[79]="otherwise",St[80]="andAlso",St[81]="orElse",St[201]="<name>",St[202]="<string-literal>",St[203]="]",St[204]=")",St[205]=".",St[206]="..",St[207]="*",St[208]="<prefix:*>",St[209]="<numeric-literal>",St[69]="<node-type>()",St[211]="for",St[70]="<*:local-name>",St[213]="?",St[59]="{",St[60]="<keyword> {",St[215]="}",St[216]="let",St[299]="-";function si(e,t){No[e]=t,St[t]=e}si("instance of",45),si("cast as",46),si("treat as",47),si("castable as",57);var oi={Hk:function(){return null}};for(let e in Ft)oi[e.toUpperCase()]=Ft[e];oi.kk=Ft.ic,oi.Ph=Ft.Qc;function ai(e){return e=e.charCodeAt(0),65<=e&&90>=e||97<=e&&122>=e}var Zi=jt.Db;function Io(e){let t=e.charCodeAt(0);return ai(e)||48<=t&&57>=t}function pe(e,t="XPST0003"){return new A(e,t)}function Oo(e="Illegal Argument"){return new A(e,"XPST0003")}function Tr(e,t){e.ua=t,t===0?(e.$=-1,e.qa="",e.I=-1):t===Ro&&(e.$=204,e.qa=")",e.I=204)}function Ce(e){for(e.$=e.j,e.qa=e.K,e.K=null,e.R=e.g;;){if(e.g>=e.J){e.j=0;break}var t=e.B.charAt(e.g++);switch(t){case"/":if(e.g<e.J&&e.B.charAt(e.g)==="/"){e.g++,e.j=8;return}e.j=2;return;case":":if(e.g<e.J){e.B.charAt(e.g)===":"?(e.g++,e.j=41):e.B.charAt(e.g)==="="?(e.j=58,e.g++):e.j=75;return}throw new pe("Unexpected colon at start of token");case"@":e.j=3;return;case"~":e.j=48;return;case"?":e.j=213;return;case"[":e.j=4;return;case"]":e.j=203;return;case"{":e.j=59;return;case"}":e.j=215;return;case"(":if(e.g<e.J&&e.B.charAt(e.g)===":"){for(e.g++,t=1;0<t&&e.g<e.J-1;)e.B.charAt(e.g)===`
`?zi(e):e.B.charAt(e.g)===":"&&e.B.charAt(e.g+1)===")"?(t--,e.g++):e.B.charAt(e.g)==="("&&e.B.charAt(e.g+1)===":"&&(t++,e.g++),e.g++;if(0<t)throw new pe("Unclosed XPath comment");Ce(e)}else e.j=5;return;case")":e.j=204;return;case"+":e.j=15;return;case"-":e.j=16;return;case"=":if(e.g<e.J&&e.B.charAt(e.g)===">"){e.g++,e.j=76;return}e.j=6;return;case"!":if(e.g<e.J&&e.B.charAt(e.g)==="="){e.g++,e.j=22;return}e.j=40;return;case"*":if((t=e.g<e.J&&e.B.charAt(e.g)===":"&&e.g+1<e.J)&&!(t=127<e.B.charAt(e.g+1))&&(t=e.B.charAt(e.g+1),t=ai(t)||t==="_"),t){e.g++,e.j=70;return}e.j=207;return;case",":e.j=7;return;case"$":e.j=21;return;case"|":if(e.g<e.J&&e.B.charAt(e.g)==="|"){e.g++,e.j=30;return}e.j=1;return;case"#":e.j=44;return;case"<":if(e.g<e.J&&e.B.charAt(e.g)==="="){e.g++,e.j=14;return}if(e.g<e.J&&e.B.charAt(e.g)==="<"){e.g++,e.j=38;return}e.j=12;return;case">":if(e.g<e.J&&e.B.charAt(e.g)==="="){e.g++,e.j=13;return}if(e.g<e.J&&e.B.charAt(e.g)===">"){e.g++,e.j=39;return}e.j=11;return;case".":if(e.g<e.J){var i=e.B.charAt(e.g);if(i==="."){e.g++,e.j=206;return}if(i==="{"){e.g++,e.K=".",e.j=60;return}}if(e.g===e.J||"0">e.B.charAt(e.g)||"9"<e.B.charAt(e.g)){e.j=205;return}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":i=!0;var f=!1,v=!0;t:for(;;){switch(t){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":f=!1;break;case".":if(v)f=v=!1;else{e.g--;break t}break;case"E":case"e":if(i)f=!0,i=!1;else{e.g--;break t}break;case"+":case"-":if(f)f=!1;else{e.g--;break t}break;default:if("a"<=t&&"z">=t||127<t)throw new pe("Separator needed after numeric literal"+Xu(e,e.g));e.g--;break t}if(e.g>=e.J)break;t=e.B.charAt(e.g++)}e.K=e.B.substring(e.R,e.g),e.j=209;return;case'"':case"'":for(e.K="";;){if(e.g=e.B.indexOf(t,e.g),0>e.g)throw e.g=e.R+1,new pe("Unmatched quote in expression");if(e.K+=e.B.substring(e.R+1,e.g++),e.g<e.J)if(e.B.charAt(e.g)===t)e.K+=t,e.R=e.g,e.g++;else break;else break}if(0<=e.K.indexOf(`
`))for(t=0;t<e.K.length;t++)e.K.charAt(t)===`
`&&zi(e,e.R+t+1);e.j=202;return;case`
`:zi(e,e.g);case" ":case"	":case"\r":e.R=e.g;break;case"\xB6":case"Q":if(e.g<e.J&&e.B.charAt(e.g)==="{"){if(i=e.B.indexOf("}",e.g++),i<e.g)throw new pe("Missing closing brace in EQName");if(t=e.B.substring(e.g,i),t=jt.collapse(t),t.includes("{"))throw new pe("EQName must not contain opening brace");for(e.g=i+1,i=e.g,f=!1;e.g<e.J;)if(v=e.B.charAt(e.g),128<v||Io(v)||v==="_"||v==="."||v==="-")e.g++;else{v==="*"&&i===e.g&&(e.g++,f=!0);break}e.K="Q{"+t+"}"+e.B.substring(i,e.g),e.j=f?208:201;return}default:if(128>t.charCodeAt(0)&&!ai(t))throw new pe("Invalid character '"+t+"' in expression");case"_":i=!1;t:for(;e.g<e.J;e.g++)switch(t=e.B.charAt(e.g),t){case":":if(i)break t;if(e.$===213||e.$===70){e.K=e.B.substring(e.R,e.g),e.j=201;return}if(e.g+1<e.J){if(t=e.B.charAt(e.g+1),t===":"){e.K=e.B.substring(e.R,e.g),e.j=36,e.g+=2;return}if(t==="*"){e.K=e.B.substring(e.R,e.g),e.j=208,e.g+=2;return}if(!(t==="_"||127<t||ai(t))){e.K=e.B.substring(e.R,e.g),e.j=201;return}}i=!0;break;case".":case"-":if(150<e.$&&e.$!==213&&e.$!==70&&Wn(e.B.substring(e.R,e.g))!==-1&&(e.$!==201||Wn(e.qa)===-1)){e.j=Wn(e.B.substring(e.R,e.g));return}case"_":break;default:if(128>t.charCodeAt(0)&&!Io(t))break t}e.K=e.B.substring(e.R,e.g),e.j=201;return}}}function _o(e,t){e.ua=0,e.j=0,e.K=null,e.R=0,e.g=0,e.B=t,e.lineNumber=0,e.Aa=0,e.J=t.length,Ce(e),e.next()}function Wn(e){return e={or:9,is:20,to:29,in:31,eq:50,ne:51,le:55,lt:53,gt:52,ge:54,as:71,and:10,div:18,mod:19,idiv:56,then:26,else:27,case:67,where:28,union:1,except:24,return:25,otherwise:79,orElse:81,default:212,andAlso:80,intersect:23,satisfies:34}[e],[81,80].includes(e)?-1:e||-1}function zi(e,t=-1){e.lineNumber++,e.Aa++,e.na===null&&(e.na=[]),e.na.push(t===-1?e.g-1:t)}function Xu(e,t=null){var i=t||e.g;return" at line:"+ju(e,t)+" col:"+Ru(e,t)+" near '"+e.B.slice(5>i?0:i-5,i+5)+"'"}function Po(e){return e.g>e.J&&(e.g=e.J),34>e.g?e.B.substring(0,e.g):jt.collapse("..."+e.B.substring(e.g-30,e.g)).toString()}function Xo(e,t){if(e.na===null)return t;for(var i=e.na.length-1;0<=i;i--){var f=e.na[i];if(t>f)return i+1<<16|t-f}return t}function ju(e,t=null){return t?Xo(e,t)>>16:e.lineNumber}function Ru(e,t=null){return Xo(e,t||e.ee)&32767}class Mu{constructor(){this.I=this.ua=0,this.T=null,this.j=this.ee=0,this.K=null,this.R=0,this.B=null,this.J=this.g=0,this.Aa=this.lineNumber=1,this.na=null,this.$=-1,this.qa=""}next(){switch(this.$=this.I,this.qa=this.T,this.I=this.j,this.T=this.K,this.T===null&&(this.T=""),this.ee=this.R,this.lineNumber=this.Aa,this.I){case 201:var t=Wn(this.T);t===-1||150>=this.$||this.$===213||(this.I=t);break;case 207:150>=this.$||this.$===213||(this.I=17)}if(this.I!==215&&(t=this.$,Ce(this),this.I===201&&this.ua!==Gi&&t!==21))switch(this.j){case 5:var i=Wn(this.T);i===-1||150>=t?(this.I=this.Ve(this.T),Ce(this)):this.I=i;break;case 59:this.ua!==jo&&(this.I=60,Ce(this));break;case 41:Ce(this),this.I=36;break;case 44:Ce(this),this.I=43;break;case 42:Ce(this),this.I=208;break;case 21:this.T==="for"?this.I=211:this.T==="some"?this.I=32:this.T==="every"?this.I=33:this.T==="let"&&(this.I=216);break;case 201:t=this.T+" "+this.K,i=No[t],i!=null&&(this.I=i,this.T=t,Ce(this))}}Ve(t){let i={if:37,array:69,attribute:69,comment:69,"document-node":69,element:69,"empty-sequence":69,function:69,map:69,item:69,"namespace-node":69,node:69,"processing-instruction":69,"schema-attribute":69,"schema-element":69,switch:69,otherwise:79,text:69,tuple:69,typeswitch:69,union:69}[t];return i?["tuple","union"].includes(t)?35:i:35}}var Gi=1,jo=2,Ro=3,ku=[!1,!1,!0,!0,!0,!0,!0,!0,!0,!0,!1,!1,!0,!1];function Wi(e){return"ancestor ancestor-or-self attribute child descendant descendant-or-self following following-sibling namespace parent preceding preceding-sibling self preceding-or-ancestor".split(" ")[e]}var Uu=[1,1,2,1,1,1,1,1,13,1,1,1,1,1],Lu=[4,5,9,9,0,1,10,11,9,3,6,7,12];function Ju(e){switch(e){case"self":return 12;case"child":return 3;case"parent":return 9;case"ancestor":return 0;case"attribute":return 2;case"following":return 6;case"namespace":return 8;case"preceding":return 10;case"descendant":return 4;case"ancestor-or-self":return 1;case"following-sibling":return 7;case"preceding-sibling":return 11;case"descendant-or-self":return 5}throw new pe("Unknown axis name: "+e)}function ui(e,t,i,f="XPTY0004"){this.kind=e,this.j=t,this.g=i,this.errorCode=f}ui.prototype={getErrorCode:function(){return this.errorCode},save:function(){let e=this.kind+"|"+this.g+"|";return e+=(this.errorCode==="XPTY0004"?"":this.errorCode)+"|",e+=this.j}};function we(e,t,i={}){e.start(t,i),t.end()}class $t{constructor(){this.l=Et.ya}start(t,i={}){t.start(this.O,i),this.role&&t.sd("role",this.role),this.Nf&&t.sd("sType",this.l.ga())}Rb(){return!qe(this.l.cardinality)}G(t){we(this,t)}}dt=$t.prototype,dt.O="Expression",dt.Rh=null,dt.kind=null,dt.role=null,dt.Nf=null,dt.Ca=function(e,t="XPTY0004"){return new ui(this.kind,this.O,e,t)},dt.Fa=function(){throw new pe(Z.Bj(this)+" is not a valid pattern","XTSE0340")},dt.Cd=function(){return this};class xn extends $t{constructor(t,i,f){super(),this.Qa=i,this.ca=t,this.ea=f,(this.ca.Ra||this.ea.Ra)&&(this.Ra=!0),this.ca.Cb&&this.ea.Cb&&(this.Cb=!0)}G(t){super.start(t,this.Qa?{op:St[this.Qa]}:{}),this.ca.G(t),this.ea.G(t),t.end()}}xn.prototype.kind=1;class Ke extends $t{constructor(t){super(),this.g=t,this.g.Ra&&(this.Ra=!0),this.g.Cb&&(this.Cb=!0)}G(t){super.start(t),this.g.G(t),t.end()}}Ke.prototype.kind=9;class Ye extends $t{constructor(){super(),this.l=Et.jc}Fa(){return this}G(t){we(this,t)}}class Mo extends Ye{}Mo.prototype.O="p.any";class Hi extends Ye{constructor(t){super(),this.message=t,this.role="match",this.l=Et.jc}G(t){we(this,t,{message:this.message})}}Hi.prototype.O="p.warning";class ts extends Ye{constructor(t){super(),this.g=t,this.l=Et.jc}G(t){super.start(t),this.g.G(t),t.end()}}ts.prototype.O="p.booleanExp";class es extends Ye{constructor(t){super(),Z.assert(t instanceof ae),this.test=t,this.l=new Vt(t,2)}G(t){we(this,t,{test:this.test.ga()})}}es.prototype.O="p.nodeTest";class ns extends Ye{constructor(t,i){super(),this.pattern=t,this.g=i,this.l=t.l,t.code&&(this.code=t.code)}G(t){super.start(t),this.code&&t.sd("code",this.code),this.pattern.G(t),this.g.G(t),t.end()}}ns.prototype.O="p.withPredicate";class rs extends Ye{constructor(t){super(),this.g=t,this.l=te(t.l,2)}G(t){super.start(t),this.g.G(t),t.end()}}rs.prototype.O="p.nodeSet";class bn extends Ye{constructor(t){super(),this.g=t,this.l=te(t.l,2)}G(t){super.start(t),this.g.G(t),t.end()}}bn.prototype.O="p.genNode";class ko extends Ye{constructor(t,i){super(),this.g=i,this.code=t.l.ga(),this.l=te(t.l,2)}G(t){super.start(t,{test:this.code}),this.g.G(t),t.end()}}ko.prototype.O="p.genPos";class is extends Ye{constructor(t,i){super(),this.code=t.ga(),this.Jd=i,this.l=te(t,2)}G(t){we(this,t,{test:this.code,pos:this.Jd})}}is.prototype.O="p.simPos";class Uo extends Ye{constructor(t,i,f){super(),this.axis=Lu[t],this.gb=i,this.g=f,this.l=i.l}G(t){super.start(t,{axis:Wi(this.axis)}),this.gb.G(t),this.g.G(t),t.end()}}Uo.prototype.O="p.withUpper";class ss extends Ye{constructor(t,i,f,v){super(),this.Qa=i,this.ca=t,this.ea=f,this.l=te(v,2)}G(t){super.start(t,{op:this.Qa===1?"union":St[this.Qa]}),this.ca.G(t),this.ea.G(t),t.end()}}ss.prototype.O="p.venn";function os(e){var t=[];return e.ca instanceof ci?t=os(e.ca):t.push(e.ca),e.ea instanceof ci?t=t.concat(os(e.ea)):t.push(e.ea),t}class ci extends ss{constructor(t,i,f){super(t,1,i,f)}}class Lo extends Ye{constructor(t){super(),this.g=t;for(var i of this.g)i.Nf=!0}G(t){super.start(t);for(var i of this.g)i.G(t);t.end()}}Lo.prototype.O="UnionExprP";function Hn(e){return e instanceof de&&e.value.length===1&&An.ha()(e.value[0])}function Ze(e,t){return new de(e,t)}function jn(){return new de([],Et.Be)}class de extends $t{constructor(t,i){super(),Array.isArray(t)||Z.ka("Literal value must be array"),i instanceof Vt&&i.itemType.ga||Z.ka("Literal type must be a SequenceType"),t&&(this.value=t,i&&(this.l=i)),this.role=null}toString(){return this.value.toString()}G(t){function i(f,v){let a=f.code,u={};switch(a){case"AB":break;case"AQ":u.pre=f.prefix,u.uri=f.uri,u.loc=f.local;break;default:u.val=f.toString()}switch(v&&(u.role=v),a){case"AS":t.start("str",u);break;case"AO":t.start("dbl",u);break;case"AB":t.start(f.value?"true":"false",u);break;case"AD":t.start("dec",u);break;case"ADI":t.start("int",u);break;case"AQ":t.start("qName",u);break;default:u.type=a,t.start("atomic",u)}t.end()}if(this.value.length===0)t.start("empty",this.role?{role:this.role}:{}),t.end();else if(this.value.length===1)i(this.value[0],this.role);else{let f={count:this.value.length};this.role&&(f.role=this.role),t.start("atomic",f);for(let v of this.value)i(v);t.end()}}}de.prototype.O="literal",de.prototype.Cb=!0;class ge extends de{constructor(t){super([at.XS.string.fromString(t)],Et.Zb),this.l=Et.Zb}}function li(e,t,i,f,v){var a=le(e,Et.Yb,e.Ca(0,"XPTY0004"));if(a=new $u(a),/[lu]/.test(t))a.rd={flags:t+(v?"e":""),as:i.toEQName()};else{Z.assert(t==="a");try{if(e instanceof de&&e.value.length===1&&at.la(e.value[0])&&f.V().p!=="AQ"){let u=f.Oc.cast(e.value[0]);return new de([u],new Vt(f,2))}}catch{}a.rd={flags:v?"ae":"a",as:f.ga()}}return a}class $u extends Ke{constructor(t){super(t),this.O="cast",this.kind=2,this.rd={}}G(t){super.start(t,this.rd),this.g.G(t),t.end()}}function Qu(e,t,i,f,v){var a=new Vu(e);if(a=le(a,Et.Yb,a.Ca(0,"XPTY0004")),/[lu]/.test(t))a.rd={flags:t+(v?"e":""),as:i.toEQName()};else{if(Z.assert(t==="a"),e instanceof de&&e.value.length===1&&at.la(e.value[0])&&f.V().p!=="AQ")try{return f.Oc.cast(e.value[0]),new de([at.XS.boolean.Rc],Et.Ya)}catch{return new de([at.XS.boolean.Ud],Et.Ya)}a.rd={flags:v?"ae":"a",as:f.ga()}}return a}class Vu extends Ke{constructor(t){super(t),this.l=Et.Ya,this.O="castable",this.kind=2,this.rd={}}G(t){super.start(t,this.rd),this.g.G(t),t.end()}}class as extends Ke{constructor(t,i){super(t),this.j=i,this.l=qn(t.l.itemType)?Et.yg:Et.wd}G(t){super.start(t,{diag:this.j}),this.g.G(t),t.end()}}as.prototype.O="data";class Jo extends as{constructor(t,i,f){super(t,i),this.B=f,qn(t.l.itemType)?this.l=f?Et.uf:Et.xg:this.l=f?Et.Yb:Et.De}G(t){super.start(t,{diag:this.j}),this.B&&t.sd("card","?"),this.g.G(t),t.end()}}Jo.prototype.O="atomSing";class us extends $t{constructor(t){super(),this.name=t.itemType.name.toEQName(),this.l=Et.uf}G(t){we(this,t,{name:this.name})}}us.prototype.O="attVal";class cs extends Ke{constructor(t,i,f){super(t),this.code=i,this.j=f,this.l=Et.wd}G(t){super.start(t,{to:this.code,diag:this.j}),this.g.G(t),t.end()}}cs.prototype.O="cvUntyped";class fi extends Ke{constructor(t,i){super(t),this.type=i,this.flags="",this.l=new Vt(i.itemType,t.l.cardinality)}G(t){super.start(t,{to:this.type.ga().replace(/^[01?*+]/,""),flags:this.flags}),this.g.G(t),t.end()}}fi.prototype.O="convert";class $o extends Ke{constructor(t,i,f){super(t),this.type=i,this.resultType=t.resultType,this.j=f,this.l=i}G(t){super.start(t,{to:this.type.ga().replace(/^[01?*+]/,""),diag:this.j}),this.g.G(t),t.end()}}$o.prototype.O="fnCoercer";let qu="array attribute comment document-node element empty-sequence function if item map namespace-node node processing-instruction schema-attribute schema-element switch text typeswitch".split(" ");class yn{constructor(t,i){if(t.prefix===""&&qu.includes(t.local))throw new pe("The unprefixed function name '"+t.local+"' is reserved","XPST0003");this.name=t,this.arity=i}toEQName(){return this.name.toEQName()}toString(){return this.name.toEQName()+"#"+this.arity}}class tr extends $t{constructor(t,i,f){super();let v=t.name.local;if(t.name.uri===Ft.ic){if(v==="NOTATION")throw new A("No constructor function exists for xs:NOTATION","XPST0017");let u=i[0].l;if(u.cardinality===2&&u.itemType.la()&&u.itemType.Oc&&v===u.itemType.Oc.name)t=i[0];else if(["NMTOKENS","ENTITIES","IDREFS"].includes(v))t=li(i[0],"l",t.name,null,!0);else{var a;v==="numeric"?a=li(i[0],"u",t.name,null,!0):a=li(i[0],"a",null,f.itemType,!0),t=a}return t}switch(this.name=t,this.g=i,this.l=f,v){case"exactly-one":this.l=te(i[0].l,2);break;case"head":this.l=te(i[0].l,Xe(i[0].l.cardinality)?3:2);break;case"tail":case"subsequence":this.l=te(i[0].l,7);break;case"ceiling":case"floor":case"reverse":case"snapshot":this.l=i[0].l;break;case"last":case"position":this.Ra=!0;break;case"string-length":case"normalize-space":i.length===0&&this.g.push(xe("string",new rn));break;case"fold-left":case"fold-right":this.l=i[2].resultType;break;case"for-each":this.l=te(i[1].l.itemType.We(),7);break;case"filter":this.l=te(i[0].l,7);break;case"current":this.Cb=!0;break;case"boolean":if(i[0].l.equals(Et.Ya))return i[0]}}Fa(){return new rs(this)}Rb(){if(this.name.uri===Ft.Ma)return"doc document element-with-id id innermost key outermost".split(" ").includes(this.name.local)?!0:"filter one-or-more subsequence remove tail trace unordered zero-or-more".split(" ").includes(this.name.local)?this.g[0].Rb():!1}G(t){super.start(t,{name:this.name.name.local});for(let i of this.g)i.G(t);t.end()}}tr.prototype.O="fn";class Qo extends $t{constructor(t,i,f){super(),this.name=t,this.g=i,this.l=f}G(t){super.start(t,{name:this.name.toEQName()});for(let i of this.g)i.G(t);t.end()}}Qo.prototype.O="ifCall";class ls extends $t{constructor(t,i,f){super(),this.name=t,this.g=i,this.l=f,(t=t.name.local==="merge")&&(t=i[0],t=!(t instanceof de&&t.value.length===0)),t&&(this.l=te(i[0].l,2))}G(t){super.start(t,{name:this.name.toEQName()});for(let i of this.g)i.G(t);t.end()}}ls.prototype.O="ifCall";class fs extends $t{constructor(t,i,f){super(),this.name=t,this.g=i,this.l=f}G(t){super.start(t,{name:this.name.toEQName()});for(let i of this.g)i.G(t);t.end()}}fs.prototype.O="ifCall";class Ku extends Qo{}class Br extends $t{constructor(t,i,f){super(),this.name=t,this.g=i,this.l=f}G(t){super.start(t,{name:this.name.toEQName()});for(let i of this.g)i.G(t);t.end()}}Br.prototype.O="ifCall";class hi extends $t{constructor(t,i,f){super(),this.name=t,this.g=i,this.l=f}G(t){super.start(t,{name:this.name.toEQName()});for(let i of this.g)i.G(t);t.end()}}hi.prototype.O="ifCall";class Yu extends hi{constructor(t,i,f){super(t,i,f);let v=new yn(at.XS.QName.fromParts("ixsl",Ft.jd,"call"),3),a=new yn(at.XS.QName.fromParts("ixsl",Ft.jd,"window"),0);this.name=v,this.g=[new hi(a,[],Et.jc),new ge(t.name.local),new ir(i)],this.l=f}}class hs extends $t{constructor(t,i,f,v,a){super(),this.name=t,this.Rh=i,this.g=f,this.l=v,this.j=a}G(t){super.start(t,{name:this.name.toEQName(),coId:this.j});for(let i of this.g)i.G(t);t.end()}}hs.prototype.O="ufCall";class mi extends $t{constructor(t){super(),this.name=t.name.name,this.rb=t.rb,this.arity=t.name.arity,this.l=t.l,this.resultType=t.resultType}G(t){we(this,t,{name:this.name.toEQName(),arity:this.arity,resultType:this.resultType.ga()})}}mi.prototype.O="fnRef";class ms extends mi{constructor(t){super(t),this.g=0}G(t){we(this,t,{name:this.name.toEQName(),arity:this.arity,resultType:this.resultType.ga(),bSlot:this.g})}}ms.prototype.O="ufRef";class Nr extends $t{constructor(){super(),this.l=Et.ya}G(t){we(this,t,{asCode:"*"})}}Nr.prototype.O="null";class Ir extends $t{}Ir.prototype.g={},Ir.prototype.B={},Ir.prototype.j={};class ps extends $t{constructor(){super(),this.l=Et.ya,this.slot=this.Ua=this.name=this.Wb=null}bd(){return this.name}toString(){return"$"+this.name+" as "+this.l.toString()}G(t){we(this,t,{name:this.name,asCode:this.l.ga(),slot:this.slot})}}ps.prototype.O="arg";class ds extends $t{constructor(t,i,f){super(),this.params=t,this.resultType=i;let v=[];t.forEach(a=>{v.push(a.l)}),f=le(f,i,this.Ca("body")),this.l=Je(new Ve(v,i)),this.arity=t.length,this.body=f,f.role="body"}G(t){super.start(t,{arity:this.arity,name:this.name,as:this.resultType.ga()});for(let i of this.params)i.G(t);this.body.G(t),t.end()}}dt=ds.prototype,dt.O="inlineFn",dt.kind=5,dt.Ca=function(e,t="XPTY0004"){return new ui(this.kind,"("+this.params.map(i=>i.toString()).join(",")+")"+(this.resultType?" as "+this.resultType.toString():""),e,t)},dt.name="inline",dt.Nf=!0;class pi extends $t{constructor(t,i,f){if(super(),t.l&&t.l.itemType instanceof Ve&&t.l.V().a.length!==i.length)throw new A("Partially-applied function requires "+t.arity+" arguments, but "+(i.length<t.arity?"only ":"")+i.length+" were supplied","XPTY0004");this.Ma=t;let v;t instanceof Os?(v=t.resultType,t.rb.hh?this.j=new ms({name:{name:t.name,arity:t.arity},rb:t.rb,l:t.l,resultType:v}):this.j=new mi({name:{name:t.name,arity:t.arity},rb:t.rb,l:t.l,resultType:v})):this.j=t,this.g=[];let a=0,u;if(t.rb){let l=t.rb.alphaTree,F=t.rb.variadic;i.forEach(S=>{var O=l.a[a];O=u||Be(O),S instanceof Nr?S.l=O:S=le(S,O,this.Ca(a)),this.g.push(S),F&&(u=O),a++})}else i.forEach(l=>{this.g.push(l)});t.l.itemType instanceof Ve&&(this.l=Je(bu(t.l.itemType,f)))}G(t){super.start(t),this.j.G(t),this.g.forEach(i=>{i.G(t)}),t.end()}}pi.prototype.O="partialApply",pi.prototype.kind=5;class Vo extends $t{constructor(t,i){super(),this.key=t,this.value=i,this.l=on("1FM")}toString(){return"map{"+this.key.toString+" : "+this.value.toString()+"}"}G(t){super.start(t),this.key.G(t),this.value.G(t),t.end()}}Vo.prototype.O="map";class gs extends $t{constructor(t){super(),this.entries=t;let i=Ot.Gd(t.map(a=>a[0].l.itemType)),f=Ot.Gd(t.map(a=>a[1].l.itemType));t=t.map(a=>a[1].l.cardinality);let v=2;t.some(a=>Xe(a))&&(v+=1),t.some(a=>qe(a))&&(v+=4),this.l=Je(new Ar(i,new Vt(f,v)))}toString(){let t="map{";return this.entries.forEach(i=>{t+=i[0].toString+" : "+i[1].toString()}),t+"}"}G(t){super.start(t),this.entries.forEach(i=>{i[0].G(t),i[1].G(t)}),t.end()}}gs.prototype.O="map";class ie extends $t{constructor(t,i){super(),Z.assert(!i||i instanceof ae),this.axis=t,this.O="axis",i=i||Kn,t===2&&i instanceof Kr?i=Ri:t===3&&i instanceof Kr&&(i=po),this.g=i,t===9&&i instanceof Kr?this.l=Et.Wd:i?this.l=new Vt(i,7):this.l=Et.Vd}wb(){return this.axis}Rb(){return[2,3,4,5,6,7,9,12].includes(this.axis)}Fa(){return new es(this.g)}G(t){we(this,t,{name:Wi(this.axis),nodeTest:this.l.ga()})}}class er extends xn{constructor(t,i){super(t,2,i),this.ca=t=le(t,Et.Vd,this.Ca(0,"XPTY0019")),this.l=Lr(i.l,t.l.cardinality)}Rb(){return!0}Fa(){if(this.ea instanceof tr||this.ea instanceof de)throw new pe("Not an axis step for a pattern","XTSE0340");return this.Ra||!this.ea.wb||this.ea instanceof la?new bn(this):new Uo(this.ea.wb(),this.ea.Fa(),this.ca.Fa())}G(t){super.start(t,this.Qa?{op:St[this.Qa]}:{}),this.ca.G(t),this.ea.G(t),t.end()}}er.prototype.O="slash";class Or extends $t{constructor(){super(),this.l=Et.Wd}Fa(){return new es(zr)}}Or.prototype.O="root";let qo={ADI:"i",ADIL:"c",ADILI:"i",ADILIS:"i",ADILISB:"i",ADIN:"c",ADINN:"c",ADIP:"c",ADIPP:"c",ADIPL:"c",ADIPLI:"i",ADIPLIS:"i",ADIPLISB:"i",AD:"c",AO:"d",AF:"f",A:"a",AZ:"a",AT:"t",AA:"t",AM:"t",AMP:"t",AH:"t",AI:"t",AJ:"t",AG:"t",AK:"t",ARD:"u",ARY:"u",E:"a"};var Zu={19:"%",18:"/",56:"~",15:"+",16:"-",299:"-",17:"*"};function Ko(e,t){return t=new cs(e,"AO",t.save()),t.l=e.l.cardinality===2?Et.Xd:Et.rg,t}class di extends xn{constructor(t,i,f,v){function a(r){return r instanceof Ee&&r.Oc.gb?new Ee(at.qj(r.Oc)):r}function u(){throw new pe("Cannot evaluate "+S.toString()+" "+St[i]+" "+O.toString(),"XPTY0004")}super(t,i,f);let l=v.pe(),F=t.Ra||f.Ra;l&&(t=Fi(t),f=Fi(f)),t=le(t,Et.Yb,this.Ca(0)),f=le(f,Et.Yb,this.Ca(1));let S=a(t.l.itemType),O=a(f.l.itemType);var k=S.V().p,d=O.V().p;l||!/^AS/.test(k)&&!/^AS/.test(d)||u(),k!=="AZ"||l||(t=Ko(t,this.Ca(0,"FORG0001")),S=Fn,k="AO"),d!=="AZ"||l||(f=Ko(f,this.Ca(1,"FORG0001")),O=Fn,d="AO");var o=qo[k];let E=qo[d],T=S.isNumeric(),C=O.isNumeric();d=xr,k=Xe(t.l.cardinality)||Xe(t.l.cardinality),o||="a",E||="a";var n;if(l?(o=E="d",d=Fn):T&&C&&(o==="d"||E==="d"?(o=E="d",d=n=Fn):o==="f"||E==="f"?(o=E="f",d=n=Ji):o==="c"||E==="c"?(o=E="c",d=n=br):o==="i"&&E==="i"&&i===18?(o=E="c",d=br):o!=="i"||E!=="i"||i!==15&&i!==16&&i!==17&&i!==19?o==="i"&&E==="i"&&i===18&&(d=br):d=Qi),i===56&&(d=Qi),d.isNumeric()&&n&&(n=new Vt(n,3),t=le(t instanceof xi?t.g:t,n,this.Ca(0)),f=le(f instanceof xi?f.g:f,n,this.Ca(1))),[o,E].includes("a")&&(o=E="a"),(S.la("ARY")&&O.la("AT")||O.la("ARY")&&S.la("AT"))&&u(),o==="t"&&E==="t"&&(i===16?d=yo:u()),o==="u"&&E==="t"&&(i===15?d=O:u()),o==="u"&&E==="u"&&(i===17&&u(),i===18?d=br:d=S),T&&E==="u"&&i===18&&u(),o!=="t"||E!=="u"||i!==16&&i!==15?o==="i"&&E==="u"&&i===17?(o="n",d=O):o!=="u"||E!=="d"&&E!=="i"&&E!=="c"?E!=="u"||o!=="d"&&o!=="i"&&o!=="c"||(o="n",d=O):(d=S,E="n"):d=S,o=o+Zu[i]+E,!v.pe()&&d.V().p!=="AF"&&!v.Ec&&(!v.$h||v.$h===0)&&Hn(t)&&Hn(f)&&(v=t.value[0],n=f.value[0],i!==18||n.toNumber()!==0))return t=sn[o](v,n),Ze([t],new Vt(new Ee(at.codes[t.code]),2));this.ca=t,this.ea=f,t.l.equals(f.l)&&(this.l=t.l),d&&(this.l=new Vt(d,k?3:2)),this.g=o,F&&(this.Ra=!0),l&&(this.O="arith10"),this.l||(this.l=Et.De)}Fa(){throw new pe("The arithmetic expression  "+St[this.Qa]+" is not a patternXTSE0340")}G(t){super.start(t,this.Qa?{op:St[this.Qa],calc:this.g}:{}),this.ca.G(t),this.ea.G(t),t.end()}}di.prototype.O="arith";let Yo={6:50,22:51,11:52,12:53,13:54,14:55};function Zo(e,t){return e=e.V().p,t.V(),e==="AZ"&&t.isNumeric()?!1:(e==="A"&&t.la()||e===""&&t.la(),!0)}function gi(e){return/^A[BAMT2XQ]/.test(e)}class As extends xn{constructor(t,i,f,v){switch(super(t,i,f),t=v.Di(),i="GAC",t){case Bt.Xf:i="CAC"}t.startsWith(Bt.Fj)&&(i="CAC"),f.l===Et.wg&&(i="EQC"),this.Ad=i+"|"+t,this.l=Et.Ya}G(t){super.start(t,{op:St[this.Qa],comp:this.Ad}),this.ca.G(t),this.ea.G(t),t.end()}}class zo extends As{G(t){super.start(t,{op:St[this.Qa],comp:this.Ad,card:"1:1"}),this.ca.G(t),this.ea.G(t),t.end()}}class Go extends zo{constructor(t,i,f,v){super(t,i,f,v),t=le(t,Et.wd,this.Ca(0)),f=le(f,Et.wd,this.Ca(1)),i=t.l.V(),v=f.l.V();var a=i.p,u=v.p;if(a===u||[a,u].includes("AZ")||[a,u].includes("A")?a=!0:(/^A[ODF]/.test(a)&&(a="AO"),/^A[ODF]/.test(u)&&(u="AO"),/^A[SU]/.test(a)&&(a="AS"),/^A[SU]/.test(u)&&(u="AS"),a=a==="E"||u==="E"?!0:a===u),!a)if(a="Cannot compare items of types "+t.l.itemType.toString()+" and "+f.l.itemType.toString(),/[*?]/.test(i.o)||/[*?]/.test(v.o))Z.xa(a+": the comparison can succeed only if one of the values is an empty sequence",1,null);else throw new pe(a,"XPTY0004");this.ca=t,this.ea=f}}Go.prototype.O="gc";class Wo extends zo{}Wo.prototype.O="gc10";class _r extends As{constructor(t,i,f,v,a=!0){super(t,i,f,v);var u=t.l.itemType,l=f.l.itemType;let F=u.V().p,S=l.V().p;if(!(F==="A"&&l.la()||S==="A"&&u.la()||F===""||S===""||u.V().p.startsWith("AM")&&l.V().p.startsWith("AM")||(gi(F)||gi(S)?F===S:Zo(u,l)||Zo(l,u))))throw new pe("Cannot compare "+t.l.toString()+" "+St[i]+" "+f.l.toString(),"XPTY0004");if(t=le(t,Et.Yb,this.Ca(0)),f=le(f,Et.Yb,this.Ca(1)),i!==51&&i!==50&&/^A[QGHIJK]/.test(t.l.itemType.V().p))throw new pe("Cannot order-compare "+t.l.toString()+" "+St[i]+" "+f.l.toString(),"XPTY0004");if(a){if(Hn(f)&&at.XS.integer.matches(f.value[0])&&t.l.V().p==="ADI")return new ta(t,i,f,v);if(f instanceof ge)return new ea(t,i,f,v)}this.ca=t,this.ea=f}}_r.prototype.O="vc";class Ho extends _r{constructor(t,i,f,v){super(t,i,f,v,!1)}G(t){super.start(t,{op:St[this.Qa],val:this.ea.value[0]}),this.ca.G(t),t.end()}}class ta extends Ho{}ta.prototype.O="compareToInt";class ea extends Ho{G(t){super.start(t,{op:St[this.Qa],val:this.ea.value[0].toString(),comp:this.Ad}),this.ca.G(t),t.end()}}ea.prototype.O="compareToString";class zu extends As{constructor(t,i,f,v){super(t,i,f,v),t=le(t,Et.Wd,this.Ca(0)),f=le(f,Et.Wd,this.Ca(0)),this.ca=t,this.ea=f,this.O=i===38?"precedes":i===39?"follows":"is"}G(t){super.start(t),this.ca.G(t),this.ea.G(t),t.end()}}function Fs(e,t){return e instanceof tr&&e.name.name.uri===Ft.Ma&&e.name.name.local===t}function na(e,t){return e instanceof _r&&e.Qa===t&&Fs(e.ca,"position")&&Fs(e.ea,"last")}class Pr extends $t{constructor(t,i){if(super(),i){let v=Fs(i,"last")||na(i,50);if(v)return new ra(t);v=v||na(i,53);var f=i.Ra||i instanceof di;let a=i.Cb;if(!f&&a&&i.l.equals(Et.tc))return new Ai(t,i);f||(f=i.l.itemType.V().p,f=f==="AB"||f.startsWith("N")?!1:f==="A"||/^A[ODF]/.test(f)),this.g=t,this.l=t.l,i instanceof ys?this.l=te(i.type,this.l.cardinality):i instanceof de&&i.value.length===1&&An.ha()(i.value[0])&&(this.l=te(this.l,3)),f&&(this.Ra=!0),a&&(this.Cb=!0),this.j=v?new Es(i.Qa===50?"1":"0"):i}}wb(){return this.g.wb()}Rb(){return super.Rb()||this.g.Rb()}Fa(){if(!qn(this.l.itemType)){let t=xe("exists",this);return new ts(t)}return this.Ra&&this.g instanceof ie&&!(this.j instanceof Es)?new ko(this.g,this.j):this.Ra?new bn(this.Cd()):new ns(this.g.Fa(),this.j)}Cd(){return this.g instanceof rn?this.j:(this.g=this.g instanceof ie?en(new rn,this.g):this.g.Cd(),this)}G(t){super.start(t);let i="";this.Cb&&(i+="i"),this.Ra&&(i+="p"),i!==""&&t.sd("flags",i),this.g.G(t),this.j.G(t),t.end()}}Pr.prototype.O="filter";class Ai extends Pr{constructor(t,i){if(super(t,null),Hn(i)&&at.XS.integer.matches(i.value[0])&&i.value[0].value===1)return new nr(t);this.g=t,this.l=te(t.l,3),this.j=i,this.Ra=!0}Fa(){return this.g instanceof rn?new Hi("Numeric predicates other than 1 in PredicatePatterns never match. Value provided:"+this.j.value.value):this.g instanceof ie?new is(this.g.l,this.j.value[0].value):new bn(this.Cd())}}Ai.prototype.O="subscript";class nr extends Ai{constructor(t){super(t,null),this.g=t,this.Ra=!0,this.l=te(t.l,3)}Fa(){return qn(this.l.itemType)?this.g instanceof ie?new bn(new nr(en(new rn,this.g))):new bn(this.Cd()):new ts(this)}G(t){super.start(t),this.g.G(t),t.end()}}nr.prototype.O="first";class ra extends Ai{constructor(t){super(t,null),this.g=t,this.Ra=!0,this.l=te(t.l,3)}Fa(){if(!(this.g instanceof ie))return new bn(this.Cd());if(this.g.axis===3){var t=new ie(7,this.g.g);return new ns(this.g.Fa(),xe("empty",[t]))}return new is(this.g.l,1)}G(t){super.start(t),this.g.G(t),t.end()}}ra.prototype.O="lastOf";class Es extends $t{constructor(t="1"){super(),this.test=t,this.l=Et.Ya}G(t){we(this,t,{test:this.test})}}Es.prototype.O="isLast";function ia(e,t){if(e instanceof Or&&t instanceof ie&&t.wb()===9)return jn();if(e instanceof er&&e.ca instanceof Or&&e.ea.axis===5&&t instanceof ie&&t.axis===3)return ia(e.ca,new ie(4,t.g));if(t instanceof er||t instanceof Rn&&t.g instanceof er){let i=oa(t);rr(i.ca)instanceof ie&&rr(i.ea)instanceof ie&&(e=en(e,i.ca),t=i.ea)}return e=new er(e,t),sa(e)?e:qn(e.ea.l.itemType)?(e.ca=ua(e.ca),e.ea=ua(e.ea),new Rn(e)):e}function sa(e){if(!qe(e.ca.l.cardinality))return e.ea.Rb();let t=rr(e.ca);return!!(t instanceof ie&&t.axis===3&&(e=rr(e.ea),e instanceof Rn&&(e=e.g),e instanceof ie&&[3,2,4,5,8].includes(e.axis)||e instanceof er&&sa(e)))}function oa(e){return e instanceof Rn?e.g:e}function rr(e){return e instanceof Pr||e instanceof Rn?rr(e.g):e}var en=ia;function aa(e){return e.Rb()?e:new Rn(e)}var ua=oa;function nn(e,t,i,f,v={}){Z.assert(t),Z.assert(t instanceof Vt),Z.assert(e.l),Z.assert(e.l instanceof Vt);var a=t.V(),u=e,l;let F=t.itemType,S=t.cardinality,O=qe(S);var k=null,d=-1;let o=S===7;if(o||(d=e.l.cardinality,o=(S|d)===S),a=a.p==="",S===1&&(a=!0),a||(k=e.l.itemType,d=e.l.cardinality,a=Ot.Fb(F,k),a===Ot.Xb&&(a=k===Bn?Ot.kc:F===Bn?Ot.Jb:a),a=a===Ot.sb||a===Ot.Jb),a&&o)return u;if(v.Lb&&!O&&(qe(d)&&(u=l=new nr(u),d=3,o=(S|d)===S),!a)){if(F.la("AS")){try{l=nn(u,Et.tf,i,f)}catch(E){throw E}u=xe("string",l),k=$i,d=2,u.l=Et.Zb,o=(S|d)===S,a=!0}if(gn(F)||F.la("AO")){try{l=nn(u,Et.tf,i,f)}catch(E){throw E}u=xe("number",l),k=Fn,d=2,u.l=Et.Xd,o=(S|d)===S,a=!0}}if(!a)if(F.la()){if(!k.la()&&d!==1){if(!k.Si)throw t=new A("An atomic value is required for the "+i.getMessage()+", but the supplied value (type "+k.toString()+") cannot be atomized",k.name==="error()"?"FOER0000":"FOTY0013",e),t;k=!qe(d),d=!qe(S),k?(l=Xe(S),u=u instanceof ie&&u.axis===2&&u.l.itemType instanceof an?new us(u.l):new Jo(u,f,l)):u=u instanceof ie&&u.axis===2&&u.l.itemType instanceof an?new us(u.l):new as(u,f),l=u,d&&!k&&(l=Ds(l,S,f)),u=l,k=u.l.itemType,d=u.l.cardinality,o=(S|d)===S}k.la("AZ")&&(gn(F)||!F.la("AZ")&&F.V().p!=="A")&&(u=l=ca(u,F,f),a=!0,k=F),k.ga()!=="A"||["A","AZ"].includes(F.ga())||(u=l=ca(u,F,f),k=u.l.itemType),F.la()&&(F.la("AO")&&Ot.Fb(k,An)!==Ot.Xb?(u=l=new fi(u,Et.Xd),k=Fn,d=-1):F.la("AF")&&Ot.Fb(k,An)!==Ot.Xb&&!Ot.Xi(k,Fn)&&(u=l=new fi(u,Et.vg),k=Ji,d=-1),F.la("AS")&&k.la("AU")&&(a=!0,u=l=new fi(u,Et.Zb),k=$i))}else F.gd()&&F.V().p==="F"&&(k.gd()||(u=new Ss(u,Nn,f),k=Nn),F instanceof Hr||(a=k.V(),(a.p==="FM"||a.p==="FA")&&F.yc().length===1)||(u=new $o(u,Je(F),f)),a=!0);if(a&&o||(d===-1&&(d=u.l.cardinality,o||=(S|d)===S),o&&d===1))return u;if(d===1&&!Xe(S))throw t=new A("An empty sequence is not allowed as the "+i.getMessage(),i.getErrorCode()),t;if(a=a?Ot.kc:Ot.Fb(k,F),a===Ot.Xb&&(a=k===Bn?Ot.Jb:F===Bn?Ot.kc:a),S===1&&(a=Ot.sb),a===Ot.Xb)if(Xe(d)&&Xe(S))d!==1&&(l=i.Hf(F,k),Z.xa(l+". The expression can succeed only if the supplied value is an empty sequence.",1,null));else throw l=i.Hf(F,k),t=new A(l,k.name==="error()"?"FOER0000":i.getErrorCode()),t;if(a!==Ot.sb&&a!==Ot.kc){if(u.Ti){if(f=at.XS.string.fromString(u.getAttribute("val")),F.la()&&t.matches(f))return u;throw l=i.Hf(F,k),t=new A(l,i.getErrorCode()),t}u=l=Aa(u,new Vt(F,S),f),o=!0}if(!o){if(u.Ti)throw t=new A("Required cardinality of "+i.getMessage()+" is "+Zn(S)+"; supplied value has cardinality "+Zn(d),i.getErrorCode()),t;u=l=Ds(u,S,f)}return u}function ca(e,t,i){return t=gn(t)?"AO":t.V().p,new cs(e,t,i)}function xe(e,t){return e=new at.XS.QName.fromParts("fn",Ft.Ma,e),t=Array.isArray(t)?t:[t],e=new yn(e,t.length),new tr(e,t,Et.ya)}function le(e,t,i){let f=Dn(i.errorCode?i.errorCode:"XPTY0004",i.save());return nn(e,t,f,i.save())}function Fi(e){return qe(e.l.cardinality)?new nr(e):e}class ws extends $t{constructor(t){super(),this.value=t,t.length===0?this.l=Et.Be:this.l=new Vt(Ot.Gd(t.map(f=>f.l.itemType)),7);let i=!0;t.forEach(f=>{i=i&&f instanceof de}),i&&(this.g=!0)}G(t){super.start(t),this.g&&t.sd("literal",!0);for(let i of this.value)i.G(t);t.end()}}ws.prototype.O="sequence";class ir extends $t{constructor(t){if(super(),this.value=t,t.length===0)this.l=Je(ei);else{let i=Ot.Gd(t.map(v=>v.l.itemType)),f=0;t.forEach(v=>f|=v.l.cardinality),this.l=Je(new Fr(new Vt(i,f)))}}G(t){super.start(t);for(let i of this.value)i.G(t);t.end()}}ir.prototype.O="arrayBlock";class Gu extends $t{constructor(t,i){super(),this.Qa=t,this.O=St[t],this.Ua=i,this.action=this.Gb=void 0,this.slot=0,this.Wb=this.value=null,this.l=Et.Ya}bd(){return this.Ua}G(t){super.start(t,{var:this.Ua.toEQName(),slot:this.slot}),this.value.G(t),this.action.G(t),t.end()}}class la extends xn{constructor(t,i,f,v=!1){switch(super(t,i,f),this.O=i===1?"union":St[i],v=v?"XTSE0340":"XPTY0004",t=le(t,Et.Vd,this.Ca(0,v)),f=le(f,Et.Vd,this.Ca(1,v)),t=aa(t),f=aa(f),this.ca=t,this.ea=f,Z.assert(t.l),Z.assert(f.l),i){case 24:this.l=t.l;break;case 23:i=t.l.cardinality&f.l.cardinality|3,this.l=new Vt(Ot.Ji([t,f].map(a=>a.l.itemType)),i);break;case 1:this.l=new Vt(Ot.Gd([t,f].map(a=>a.l.itemType)),Cu(t.l.cardinality,f.l.cardinality))}}Rb(){return!0}wb(){return this.ca.wb&&this.ea.wb&&this.ca.wb()===this.ea.wb()?this.ca.wb():-1}Fa(){if(this.Qa===1)return new ci(this.ca.Fa(),this.ea.Fa(),this.l);let t=this.wb();return t===3||t===2||this.ca.Cb||this.ea.Cb?new ss(this.ca.Fa(),this.Qa,this.ea.Fa(),this.l):new bn(this)}}class rn extends $t{constructor(t=Et.jc){super(),this.l=t}G(t){we(this,t)}Fa(){return new Mo}}rn.prototype.O="dot";function xs(e){return e.l.V().p===""?new fa(e):e}class fa extends Ke{constructor(t){super(t),this.l=t.l}}fa.prototype.O="homCheck";function Xr(e){return e.global?new ma(e):new ha(e)}class Ei extends $t{constructor(){super(),this.g=null,this.l=Et.ya}}Ei.prototype.O="varRef",Ei.prototype.Cb=!0;class ha extends Ei{constructor(t){super(),this.g=t,this.l=t.Wb||Et.ya}bd(){return this.g.Ua}G(t){we(this,t,{name:this.g.Ua.toEQName(),slot:this.g.slot})}}ha.prototype.O="varRef";class ma extends Ei{constructor(t){super(),this.g=t,this.l=t.Wb}bd(){return this.g.Ua}Fa(){return new rs(this)}G(t){we(this,t,{name:this.g.Ua.toEQName(),bSlot:"?"})}}ma.prototype.O="gVarRef";class wi extends xn{constructor(t,i){super(t,213,i),this.ca=t=le(t,Et.pf,this.Ca(0)),t.l&&t.l.itemType&&t.l.itemType.resultType&&(this.l=t.l.itemType.resultType)}}wi.prototype.O="lookup";class pa extends $t{constructor(t){super(),this.ca=t=le(t,Et.pf,this.Ca(0))}G(t){super.start(t),this.ca.G(t),t.end()}}pa.prototype.O="lookupAll";class da extends $t{constructor(){super(),this.l=Et.ya}}da.prototype.O="currentGroup";class ga extends $t{constructor(){super(),this.l=Et.wd}}ga.prototype.O="currentGroupingKey";class Rn extends Ke{constructor(t){super(t),this.l=t.l}Rb(){return!0}Fa(){return this.g.Fa()}}Rn.prototype.O="docOrder";class bs extends Ke{constructor(t){super(t),this.l=t.l}G(t){super.start(t,{flags:this.flags}),this.g.G(t),t.end()}}bs.prototype.O="copyOf",bs.prototype.flags="cm";class ys extends $t{constructor(t,i){super(),Z.assert(i instanceof Vt),this.ca=t,this.type=i,this.l=Et.Ya}G(t){super.start(t,{of:this.type.ga()}),this.ca.G(t),t.end()}}ys.prototype.O="instance";function Aa(e,t,i=null){return i||(i=new ui(2,"treat as",0),i.errorCode="XPDY0050",i=i.save()),new Ss(Ds(e,t.cardinality,i),t.itemType,i)}class xi extends Ke{constructor(t,i,f){super(t),this.l=new Vt(t.l.itemType,i),this.j=i,this.B=f}G(t){super.start(t,{card:this.j===2?"1":Zn(this.j),diag:this.B}),this.g.G(t),t.end()}}xi.prototype.O="check";function Ds(e,t,i){return t===7||e instanceof de&&(t|2)===t?e:new xi(e,t,i)}class Ss extends Ke{constructor(t,i,f){super(t),this.l=t.l,this.B=i,this.j=f}G(t){super.start(t,{as:this.B.ga(),diag:this.j}),this.g.G(t),t.end()}}Ss.prototype.O="treat";function Cs(e,t,i){return e=[e,Ze([at.XS.boolean.Rc],Et.Ya)],new vs(e,[t,i])}class vs extends $t{constructor(t,i){super(),this.g=t,this.actions=i,this.Ra=i.some(f=>f.Ra),t=Ot.Gd(i.map(f=>f.l.itemType)),i=Su(i.map(f=>f.l.cardinality)),this.l=new Vt(t,i)}G(t){super.start(t);let i=0;for(let f of this.g)f.G(t),this.actions[i++].G(t);t.end()}}vs.prototype.O="choose";class Fa extends $t{constructor(){super(),this.action=this.value=this.Wb=this.Ua=null,this.slot=0}bd(){return this.Ua}g(t){this.action=t,this.l=t.l}j(t){this.value=t,this.Wb=t.l}G(t){super.start(t,{name:this.Ua.toEQName(),slot:this.slot}),this.value.G(t),this.action.G(t),t.end()}}class Ts extends Fa{j(t){this.value=t,this.Wb=te(t.l,2),this.action&&(this.l=Lr(this.action.l,t.l.cardinality))}g(t){this.action=t,this.value&&(this.l=Lr(t.l,this.value.l.cardinality))}}Ts.prototype.O="for";class Bs extends Fa{}Bs.prototype.O="let";class Ea extends xn{constructor(t,i){super(t,null,i),this.l=Et.Ya}}class wa extends Ea{}wa.prototype.O="and";class xa extends Ea{}xa.prototype.O="or";function ba(e){return Hn(e)&&at.XS.integer.matches(e.value[0])&&1e7>e.value[0].value}class ya extends xn{constructor(t,i,f=!1){super(t,null,i),f&&(t=Fi(t),i=Fi(i)),this.ca=le(t,Et.sf,this.Ca(0)),this.ea=le(i,Et.sf,this.Ca(1)),this.l=Et.Ce}}ya.prototype.O="to";class Da extends $t{constructor(t,i){super(),this.g=t,this.j=i,this.l=Et.Ce}G(t){we(this,t,{from:this.g.value,to:this.j.value})}}Da.prototype.O="range";class bi extends $t{constructor(t,i){super(),this.g=t,this.next=i,this.l=Lr(i.l,t.l.cardinality)}G(t){super.start(t),this.g.G(t),this.next.G(t),t.end()}}bi.prototype.O="forEach";var Ns={array:"http://www.w3.org/2005/xpath-functions/array",fn:"http://www.w3.org/2005/xpath-functions",ixsl:"http://saxonica.com/ns/interactiveXSLT",map:"http://www.w3.org/2005/xpath-functions/map",math:"http://www.w3.org/2005/xpath-functions/math",saxon:"http://saxon.sf.net/",xml:"http://www.w3.org/XML/1998/namespace",xs:"http://www.w3.org/2001/XMLSchema",xsl:"http://www.w3.org/1999/XSL/Transform"},Sa={},Is;for(Is in Ns)Sa[Ns[Is]]=Is;function sr(e,t){var i=new yn(e.name,e.arity),f=Et.ya;switch(e.uri){case Ft.map:switch(f=Et.wf,e.name.local){case"get":f=t[0].l.valueType;break;case"merge":f=Et.wf;break;case"entry":f=Je(new Ar(t[0].l,t[1].l))}return new ls(i,t,f);case Ft.He:switch(e.name.local){case"_from-sequence":f=Je(new Fr(t[0].l))}return new fs(i,t,f);case Ft.qb:switch(e.name.local){case"apply":e=t[0].l,e=e.itemType?e.itemType:e,f=e.resultType?e.resultType:Et.ya}return new Br(i,t,f)}}class or extends $t{constructor(t,i,f){var v=Et.ya;super(),this.name=at.XS.QName.fromParts(Sa[f],f,t),this.arity=i,this.uri=f,this.l=Et.Ee,this.resultType=v}}or.prototype.O="function";class yi{}yi.prototype.uri=Ft.Ma;class Ca extends yi{constructor(){super()}}Ca.prototype.uri=Ft.map;var va=new Ca;class Ta extends yi{constructor(){super()}}Ta.prototype.uri=Ft.He;var Ba=new Ta;class Na extends yi{constructor(){super()}}Na.prototype.uri=Ft.qb;class Wu extends Na{}var Hu=new Wu;let tc={FUNCTION:0,Nj:1,sk:2,xk:3,Zj:4,Uj:5,gk:6,rk:7,jk:8,uk:9,vk:10,Yj:11,EVALUATE_RESULT:12,Pj:13,Lj:14,fk:15,Oj:16,Qj:17},ec=["doc","id","element-with-id","key","root"];function Mn(e,t,i,f){return tc[e]+"|"+t+"|"+i+"|"+f}function nc(e,t,i,f){return{getMessage:function(){return t},Hf:f,getErrorCode:function(){return e},save:function(){return i}}}function Dn(e,t){let i=ft.wj(t).required;return nc(e,i,t,function(f,v){return"Required type of "+i+" is "+f.toString()+": actual type is "+v.toString()})}class Os{constructor(t,i){var f=null;if(this.name=t,this.arity=t.arity,i){this.rb=i,f=i.alphaTree;let v=[],a;for(i.variadic&&(a=Be(f.a[0])),i=0;i<t.arity;i++){let u=a||Be(f.a[i]);v.push(u)}f=f.r?Be(f.r):Et.ya,this.l=Je(new Ve(v,f))}f?this.resultType=f:this.resultType=Et.ya,this.l||(this.l=Et.Ee)}}Os.prototype.resultType=Et.ya;function Ia(){function e(){z=new Mu,Nt=[],Tt=[],be=0}function t(j){let K=kt[j];return K||v("No namespace binding for prefix '"+j+"'","XPST0081"),K}function i(j,K=t,et=()=>""){return at.XS.QName.fromString(j,it=>it===""?et():K(it))}function f(){let j=St[z.I];return z.I===201?'name "'+z.T+'"':z.I===-1?"(unknown token)":z.T&&z.T!==St[z.I]?`${j} ("${z.T}")`:/^[a-z]+$/.test(j)?`"${j}"`:j}function v(j,K="XPST0003"){throw Po(z),new pe(j,K)}function a(j){let K=Po(z);console.log((j.startsWith("...")?"near":"in")+" "+K+`:
    `+j)}function u(){try{z.next()}catch(j){v(j.message)}}function l(j){z.I!==j&&v('expected "'+St[j]+'", found '+f())}function F(j=!1){j=S(j);let K=null;for(;z.I===7;){K==null&&(K=[],K.push(j)),u();let et=S();K.push(et)}return K!=null&&(j=new ws(K)),j}function S(j=!1){switch(z.I){case 0:if(j)return jn();v("Expected an expression, but reached the end of the input");break;case 211:case 216:j=0;var K=z.I,et=null,it=null;do{u(),l(21),u(),l(201);var bt=z.T,vt=void 0;K===211?vt=new Ts:vt=new Bs,j++;var Xt=vt;bt=M(bt,""),Xt.Ua=bt,u(),l(K===216?58:31),u(),Tt.push(null),vt.j(S()),Tt.pop(),p(vt),it==null?et=vt:it.g(vt),it=vt}while(z.I===7);for(l(25),u(),it.g(S()),vt=0;vt<j;vt++)Tt.pop();return et;case 32:case 33:j=0,vt=z.I,Xt=et=null;do u(),l(21),u(),l(201),K=z.T,j++,bt=new Gu(vt,M(K,"")),u(),l(31),u(),K=bt,it=S(),K.value=it,K.Wb=te(it.l,2),p(bt),Xt!=null?Xt.action=bt:et=bt,Xt=bt;while(z.I===7);for(l(34),u(),vt=Xt,Xt=S(),vt.action=Xt,vt=0;vt<j;vt++)Tt.pop();return et;case 37:return u(),vt=F(),l(204),u(),l(26),u(),j=S(),l(27),u(),et=S(),Cs(vt,j,et);default:return d(E(),4)}}function O(){return k(z.I)}function k(j){switch(j){case 9:case 81:return 4;case 10:case 80:return 5;case 50:case 51:case 55:case 53:case 54:case 52:case 6:case 22:case 14:case 12:case 13:case 11:case 20:case 38:case 39:return 6;case 30:return 7;case 29:return 8;case 15:case 16:return 9;case 17:case 18:case 56:case 19:return 10;case 79:return 11;case 1:return 12;case 23:case 24:return 13;case 45:return 14;case 47:return 15;case 57:return 16;case 46:return 17;case 76:return 18;case 40:return 20;default:return-1}}function d(j,K){for(;O()>=K;){let zt=z.I;var et=O();switch(zt){case 45:case 47:u();var it=c();t:switch(zt){case 45:j=new ys(j,it);break t;case 47:j=Aa(j,it);break t;default:throw new Oo(St[zt])}O()>=et&&v("Left operand of '"+St[z.I]+"' needs parentheses");break;case 46:case 57:u();var bt=void 0;if(z.I===69&&z.T==="union")throw new A("Saxon union types not supported");if(l(201),z.T)t:{try{var vt=i(z.T,Dt.xb,Dt.bc);break t}catch(Wt){v(Wt.message,Wt.code)}vt=void 0}else vt=v("Parser tokenization error NAME");it=vt,it.uri!==Ft.ic&&v("Unknown simple type "+z.T+" in cast (SaxonJS is not schema-aware)"),u();var Xt=z.I===213;Xt&&(z.I=204,u());let ve={numeric:"u",ENTITIES:"l",NMTOKENS:"l",IDREFS:"l"}[it.local]||"a";if(ve==="a"){if(["anyType","anyAtomicType","NOTATION"].includes(it.local)&&v("Casting to xs:"+it.local+" is not possible (it's an abstract type)","XPST0080"),bt=at.type[it.local],!bt)throw new A("Cannot find type "+it.toEQName());bt=new Ee(bt)}j=(zt===57?Qu:li)(j,ve,it,bt,Xt),O()>=et&&v("Left operand of '"+St[z.I]+"' needs parentheses");break;case 76:j=B(j);break;default:for(Xt=zt===40,u(),Xt&&Nt.push(te(j.l,2)),it=E(),Xt&&Nt.pop();O()>et;)it=d(it,O());if(!(et=O()!==et))t:switch(z.I){case 50:case 51:case 55:case 53:case 54:case 52:case 6:case 22:case 14:case 12:case 13:case 11:case 20:case 38:case 39:case 29:et=!1;break t;default:et=!0}et||v("Left operand of '"+St[z.I]+"' needs parentheses"),j=o(j,zt,it)}}return j}function o(j,K,et){switch(K){case 9:return new xa(j,et);case 10:return new wa(j,et);case 50:case 51:case 55:case 53:case 54:case 52:return new _r(j,K,et,Dt);case 6:case 22:case 14:case 12:case 13:case 11:if(Dt.pe())K=new Wo(j,K,et,Dt);else{var it=Dt;if(et=new Go(j,K,et,it),j=et.ca.l.cardinality===2&&et.ea.l.cardinality===2&&Yo[K]){j=et.ca.l.itemType;var bt=et.ea.l.itemType;let vt=j.V().p,Xt=bt.V().p;j=gi(vt)||gi(Xt)?vt===Xt:j.isNumeric()&&bt.isNumeric()?!0:/^A[SZU]/.test(vt)&&/^A[SZU]/.test(Xt)}K=j?new _r(et.ca,Yo[K],et.ea,it):et}return K;case 20:case 38:case 39:return new zu(j,K,et,Dt);case 29:return it=new ya(j,et,Dt.pe()),ba(it.ca)&&ba(it.ea)?(K=it.ca.value[0],it=it.ea.value[0],K=K.value>it.value?jn():K.value===it.value?new de([K],Et.Ce):new Da(K,it)):K=it,K;case 30:if(K=[],j instanceof tr&&j.name.name.local==="concat"&&j.name.name.uri===Ft.Ma)for(it of j.g)K.push(it);else it=Mn("BINARY_OP",0,"","concat"),bt=Dn("FOTY0013",it),j=nn(j,Et.Yb,bt,it,Dt),K.push(j);return it=Mn("BINARY_OP",1,"","concat"),bt=Dn("FOTY0013",it),et=nn(et,Et.Yb,bt,it,Dt),K.push(et),K=xe("concat",K),K.l=Et.Zb,K;case 15:case 16:case 17:case 18:case 56:case 19:return new di(j,K,et,Dt);case 79:return K=et,et=at.XS.QName.fromParts("vv",Ft.og,"otherwise"),it=new Bs,it.Ua=et,it.j(j),p(it),et=Xr(it),j=[xe("exists",[et]),Ze([at.XS.boolean.Rc],Et.Ya)],it.g(new vs(j,[et,K])),it;case 1:case 23:case 24:return new la(j,K,et,Qt===1);case 81:return et=xe("boolean",et),Cs(j,Ze([at.XS.boolean.Rc],Et.Ya),et);case 80:return et=xe("boolean",et),Cs(j,et,Ze([at.XS.boolean.Ud],Et.Ya));default:throw new Oo(St[K])}}function E(){switch(z.I){case 16:u();var j=E();j=T(299,j);break;case 15:u(),j=E(),j=T(15,j);break;default:for(j=n();z.I===40;){u(),Nt.push(te(j.l,2));let K=n();Nt.pop(),j=new bi(j,K)}}return j}function T(j,K){if(Hn(K)){let et=K.value[0];return j===299?Ze([et.af()],K.l):K}return new di(Ze([at.XS.integer.fromNumber(0)],Et.tc),j,K,Dt)}function C(){switch(z.I){case 36:case 3:case 201:case 208:case 70:case 207:case 69:case 205:case 206:case 35:case 202:case 209:case 5:case 21:case 43:case 4:return!0;case 60:return["ordered","unordered","map","array"].includes(z.T);default:return!1}}function n(){var j=z.ee;switch(z.I){case 2:return u(),j=new Or,C()?r(j):j;case 8:u(),j=new Or;var K=new ie(5,null);return j=en(j,K),r(j);default:for(z.I===201&&["true","false"].includes(z.T)&&a("The expression is looking for a child element named '"+z.T+"' - perhaps "+z.T+"() was intended? To avoid this warning, use child::"+z.T+" or ./"+z.T+"."),z.I===201&&Wn(z.T)!==-1&&Qt!==1&&(0<j||z.j!==0)&&(j=z.T,a("The keyword '"+j+"' in this context means 'child::"+j+"'. If this was intended, use 'child::"+j+"' or './"+j+"' to avoid this warning.")),j=h(Qt===1&&be===0);[2,8].includes(z.I);){Nt.push(te(j.l,2));var et=z.I;u(),K=h(!1),et===2?j=en(j,K):K instanceof ie&&K.axis===3?(K=new ie(4,K.g),j=en(j,K)):(et=new ie(5,null),j=en(j,et),j=en(j,K)),j=xs(j),Nt.pop()}return j}}function r(j){let K=j;var et=2;for(Nt.push(te(j.l,2));j=h(!1),Nt.pop(),Nt.push(te(j.l,2)),et===2?(K=en(K,j),K=xs(K)):et===8?(et=new ie(5,null),et=en(et,j),K=en(K,et),K=xs(K)):K=new bi(K,j),et=z.I,!(et!==2&&et!==8&&et!==40);)u();return Nt.pop(),K}function h(j){j=b(j);let K=j instanceof ie&&!ku[j.wb()];for(;;)if(z.I===4)Nt.push(te(j.l,2)),j=m(j),Nt.pop();else if(z.I===5)j=R(j,null);else if(z.I===213)j=q(j);else break;return K&&(j=xe("reverse",j),j.cl=!0),j}function m(j=null){if(!j)return F(null);u(),be++;let K=m();return be--,l(203),u(),j=new Pr(j,K)}function c(){var j=z.T==="empty-sequence";let K=_();if(j)return Et.Be;switch(z.I){case 207:case 17:j=7,z.I=204,u();break;case 15:j=6,z.I=204,u();break;case 213:j=3,z.I=204,u();break;default:j=2}return new Vt(K,j)}function _(){if(z.I===5){u();var j=_();l(204),u()}else if(z.I===201){j=null;try{j=i(z.T,Dt.xb,Dt.bc)}catch(et){v(et.message,et.code)}{var K=j;let et=K.uri;et===""&&(et=Dt.bc());let it=K.local;j=K.toString(),et===Ft.ic?it==="numeric"?j=An:((K=at.type[it])||v("Unknown atomic type "+j,"XPST0051"),j=new Ee(K)):(v(`Unknown atomic type ${K.toEQName()} (SaxonJS is not schema-aware)`,"XPST0051"),j=void 0)}u()}else if(z.I===69)switch(z.T){case"item":u(),l(204),u(),j=Bn;break;case"function":j=Q();break;case"map":j=H();break;case"array":j=z,u(),[207,17].includes(j.I)?(u(),l(204),u(),j=ei):(j=c(),l(204),u(),j=new Fr(j));break;case"empty-sequence":u(),l(204),u(),j=Yn;break;case"switch":case"typeswitch":v(z.T+"() is reserved in XPath; it is available only in XQuery");break;default:j=tt()}else return Qt===4&&z.I===208?(j=z.T,u(),X(1,j)):Qt===4&&z.I===70?(u(),l(201),j=z.T,u(),V(1,j)):Qt===4&&z.I===3?(u(),z.I===208?(j=z.T,u(),X(2,j)):z.I===70?(u(),l(201),j=z.T,u(),V(2,j)):(v("Expected NodeTest after '@'"),xr)):(v("Expected type name in SequenceType, found "+St[z.I]),xr);return j}function Q(){u();let j=[];if([207,17].includes(z.I))return u(),l(204),u(),Nn;for(;z.I!==204;){var K=c();if(j.push(K),z.I===204)break;z.I===7?u():v("Expected ',' or ')' after function argument type, found '"+St[z.I]+"'")}return u(),z.I===71?(u(),K=c(),new Ve(j,K)):(0<j.length?v("Result type must be given if an argument type is given: expected 'as (type)'"):v("function() is not allowed for a general function type: must be function(*)"),null)}function H(){var j=z;if(u(),[207,17].includes(j.I))return u(),l(204),u(),ti;j=_(),l(7),u();let K=c();return l(204),u(),j instanceof Ee?new Ar(j,K):(v("Key type of a map must be atomic"),null)}function B(j){u();var K=z.I;return[201,35].includes(K)?nt(j):K===21?(K=L(),l(5),R(K,j)):K===5?(K=w(),l(5),R(K,j)):(v("Unexpected "+St[K]+" after '=>'"),null)}function b(j){function K(it){return it instanceof rn||it instanceof Pr&&K(it.g)}switch(z.I){case 21:return L();case 5:var et=w();return j&&K(et)&&v("Predicate pattern cannot be parenthesized","XTSE0340"),et;case 4:return P();case 202:return I(!0);case 209:return g(!0);case 35:return et=z.T,be===0&&Qt===1&&(Dt.cg=!0,j?ec.includes(et)||et.includes(":")||v("Function "+et+"() is not permitted at first position in pattern","XTSE0340"):v("Function call not at first position in pattern","XTSE0340")),et=nt(null),Dt.cg=!1,et;case 213:return q(new rn);case 205:return u(),new rn(Nt[Nt.length-1]);case 206:return u(),new ie(9,null);case 69:if(z.T==="function")return rt();case 201:case 208:case 70:case 207:return et=3,z.I===69&&["attribute","schema-attribute"].includes(z.T)?et=2:z.I===69&&z.T==="namespace-node"?et=8:j&&z.I===69&&z.T==="document-node"&&(et=12),j=pt(1),new ie(et,j);case 3:switch(u(),z.I){case 201:case 208:case 70:case 207:case 69:return et=pt(2),new ie(2,et);default:v("@ must be followed by a NodeTest")}break;case 36:try{et=Ju(z.T)}catch(it){v(it.message),et=3}switch(j=Uu[et],u(),z.I){case 201:case 208:case 70:case 207:case 69:j=pt(j);let it=null;if(et===2){let bt=Ot.Fb(j,new De(2));bt===Ot.Xb?it="attribute axis can never yield nodes of type "+j:bt===Ot.Jb&&(j=new De(2))}return et===3&&j.kind===9&&(it=j.name+" nodes can never be children"),j.kind!==2||[2,12].includes(et)||(it="axis "+Wi(et)+" can never yield attribute nodes"),it?Qt===1?new Hi(it):(a(it),jn()):new ie(et,j);default:v("Unexpected token "+f()+" after axis name")}break;case 60:switch(z.T){case"map":return Y();case"array":return U();case".":return st();case"_":v("Underscore functions not yet implemented")}break;case 43:return s();default:v("Unexpected token "+f()+" at start of expression")}}function w(){if(u(),z.I===204)return u(),jn();let j=F();return l(204),u(),j}function g(){let j=z.T?x(z.T):v("Parser tokenization error NUMBER");return isNaN(j)&&v("Invalid numeric literal ("+z.T+")"),u(),Ze([j],j.code==="AO"?Et.Xd:j.code==="AD"?Et.ug:Et.tc)}function x(j){try{return 0<=j.indexOf("e")||0<=j.indexOf("E")?at.XS.double.fromString(j):0<=j.indexOf(".")?at.XS.decimal.fromString(j):at.XS.integer.fromString(j)}catch{return NaN}}function I(){var j=new ge(z.T);return u(),j}function L(){u(),l(201);var j=z.T;u();let K=M(j,"");if(j=N(K),j!=null)var et=Xr(j);else if(K.uri===Ft.mi&&0<Zt){if(j=K.local,"code description value module line-number column-number".split(" ").includes(j))return et=new yn(M("dynamic-error-info",Ft.qb),1),et=new Br(et,[Ze([at.XS.string.fromString(j)],Et.Zb)],Et.ya);v("Unknown error variable "+K.toEQName(),"XPST0008")}else Dt.Rf?(et={Ua:K,bd:function(){return K}},p(et),et=Xr(et)):v("No binding for variable "+K.toEQName(),"XPST0008");return et}function R(j,K){var et=[];if(K!=null&&et.push(K),K=null,u(),z.I!==204){for(;;){var it=y();if((it==null||it instanceof Nr)&&(K==null&&(K=[]),K.push(et.length)),et.push(it),z.I===7)u();else break}l(204)}if(u(),K==null){var bt=et;j instanceof ir?(K=Mn("FUNCTION",1,"XPTY0004","array:get"),it=Dn("XPTY0004",K),bt=nn(bt[0],Et.tc,it,K,Dt),et=new or("get",2,Ba.uri),j=sr(et,[j,bt])):(bt=new ir(bt),et=new or("apply",2,Hu.uri),K=Mn("FUNCTION",0,"XPTY0004","apply"),it=Dn("XPTY0004",K),j=nn(j,Et.Ee,it,K,Dt),j=sr(et,[j,bt]))}else j=new pi(j,et,K);return j}function q(j){var K=z;Tr(K,Gi),K.I=5,u();let et=K.I;if(Tr(K,Ro),et===201)K=K.T,Zi(K)||v("The name following '?' must be a valid NCName"),u(),j=new wi(j,new ge(K));else if(et===209)K=K.T?x(K.T):v("Parser tokenization error NUMBER"),(isNaN(K)||K.code!=="ADI")&&v("Number following '?' must be an integer"),u(),j=$(this,j,Ze([K],Et.tc));else if([17,207].includes(et))u(),j=new pa(j);else if(et===5)j=$(this,j,w());else return v("Unexpected "+St[et]+" after '?'"),null;return j}function $(j,K,et){if(qe(K.l.cardinality)){j=new Ts,j.Wb=te(K.l,2);let it=M("zibble",""),bt=Xr(j);return j.Ua=it,j.j(K),p(j),j.g(new wi(bt,et)),Tt.pop(),j}return new wi(K,et)}function rt(){var j=z;let K=new Ir;K.g=[];for(var et of Tt)K.g.push(et);K.B=[],K.j=[],Rt.push(K),u();var it=[];et=[];let bt=0;for(;j.I!==204;){l(21),u(),l(201);var vt=M(j.T,"");for(var Xt of it)Xt.equals(vt)&&v("Duplicate parameter name $"+vt.toString(),"XQST0039");it.push(vt);var zt=Et.ya;u(),j.I===71&&(u(),zt=c());let ce=new ps;var ve=ce;if(ve.l=zt,ve.Wb=zt,ce.name=vt,ce.Ua=vt,ve=ce,vt=bt++,ve.slot=vt,et.push(ce),p(ce),j.I===204)break;j.I===7?u():v("Expected ',' or ')' after function argument, found '"+St[j.I]+"'")}if(Tr(j,Gi),u(),j.I===71){Tr(j,jo),u();var Wt=c()}for(l(59),Tr(j,0),u(),j.I===215?(Ce(j),u(),Xt=jn()):(Xt=F(),l(215),Ce(j),u(),Wt||(Wt=Xt.l)),Wt||(Wt=Et.ya),j=it.length,it=0;it<j;it++)Tt.pop();return Wt=new ds(et,Wt,Xt),Tt=K.g,Rt.pop(),Wt}function st(){var j=z;let K=new Ir;K.g=[];for(var et of Tt)K.g.push(et);K.B=[],K.j=[],Rt.push(K),u(),et=[];var it=at.XS.QName.fromParts("saxon",Ft.qb,"dot");let bt=new ps;var vt=Et.jc;return bt.l=vt,bt.Wb=vt,bt.name=it,bt.Ua=it,bt.slot=0,et.push(bt),it=new bi(Xr(bt),F()),l(215),Ce(j),u(),j=new ds(et,it.l,it),Tt=K.g,Rt.pop(),j}function pt(j){var K=z.T;switch(z.I){case 201:u();var et=K;return K=M(et,j===1?Dt.bc():""),j===1&&K.getURI()===""&&Dt.ke?(et=M(et,"http://www.w3.org/1999/xhtml"),j=new Er(new an(j,K),new an(j,et))):j=new an(j,K),j;case 208:return u(),X(j,K);case 70:return u(),K=z.T,l(201),u(),V(j,K);case 207:return u(),Yr(j);case 69:return tt();default:throw v("Unrecognized node test"),new pe("")}}function tt(){function j(){et||v("No arguments are allowed in "+K+"()","XPST0003")}let K=z.T,et=!1;switch(u(),z.I===204&&(et=!0,u()),K){case"item":case"switch":case"typeswitch":return v(K+"() is not allowed in a path expression"),null;case"node":return j(),Kn;case"text":return j(),ki;case"comment":return j(),Mi;case"namespace-node":return et?Li:Qt===4&&z.I===201?(u(),l(204),u(),new gr(13,"")):(v("No arguments are allowed in namespace-node()"),null);case"document-node":if(et)return zr;if(z.T!=="element")return v("Argument to document-node() must be an element type"),null;var it=tt();return l(204),u(),new Ao(Je(it));case"processing-instruction":return et?Ui:(z.I===202?it=z.T?jt.trim(unescape(z.T)):v("Parser tokenization error STRING_LIITERAL"):z.I===201?it=z.T:v("Processing instruction name must be an NCName or a string literal"),Zi(it)||v("Processing instruction name must be a valid NCName: '"+it+"' is not"),/^[Xx][Mm][Ll]$/.test(it)&&v("Processing instruction name must not be 'xml'"),u(),l(204),u(),new an(7,at.XS.QName.fromParts("","",it)));case"attribute":case"element":it=K==="element"?1:2;let vt="";var bt=!1;if(et)return Yr(it);if([207,17].includes(z.I)?vt="*":z.I===201?vt=z.T:z.I===70?(u(),bt=!0,vt=z.T):(v("Unexpected "+St[z.I]+" after '(' in SequenceType"),vt="*"),u(),z.I===204)return u(),vt==="*"?Yr(it):bt?new gr(it,vt):new an(it,i(vt,Dt.xb,it===1?Dt.bc:()=>""));if(z.I===7){u(),l(201),bt=!1;let Xt=i(z.T,Dt.xb,Dt.bc);return Xt.uri===Ft.ic?it===1?["untyped","anyType"].includes(Xt.local)||(["untypedAtomic","anyAtomicType"].includes(Xt.local)?bt=!0:v("Unsupported type annotation "+z.T+" (SaxonJS is not schema-aware, so all nodes are untyped)")):["untypedAtomic","anyAtomicType"].includes(Xt.local)||v("Unsupported type annotation "+z.T+" (SaxonJS is not schema-aware, so all nodes are untyped)"):v("Unsupported type annotation "+z.T+" (SaxonJS is not schema-aware, so only built-in types are recognized)"),u(),z.I===213&&u(),l(204),u(),bt?Yn:vt==="*"?Yr(it):(vt=i(vt,Dt.xb,it===1?Dt.bc:()=>""),new an(it,vt))}return v("Expected ')' or ',' in SequenceType"),null;case"schema-attribute":case"schema-element":return v("Type "+K+"() not allowed: SaxonJS is not schema-aware"),null;default:return v("Unknown node kind "+K),null}}function Y(){var j=[];u();var K=[];let et=!0;if(z.I!==215)for(;;){var it=S();l(75),u();let bt=S(),vt=Mn("FUNCTION",0,"","map:entry"),Xt=Dn("XPTY0004",vt);if(it=nn(it,Et.De,Xt,vt,Dt),(!et||it instanceof de)&&K.indexOf(it)===-1?K.push(it):et=!1,it=new Vo(it,bt),j.push(it),z.I===215)break;l(7),u()}if(Ce(z),u(),j.length===0)return sr(new or("_new",1,va.uri),[]);if(j.length===1)return j[0];if(et){let bt=[];return j.forEach(vt=>{bt.push([vt.key,vt.value])}),new gs(bt)}return j=new ws(j),K=[],K=new gs([[new ge("duplicates"),new ge("reject")],[new ge("duplicates-error-code"),new ge("XQDY0137")]]),sr(new or("merge",2,va.uri),[j,K])}function P(){let j=[];if(u(),z.I===203)return u(),new ir(j);for(;;){let K=S();if(j.push(K),z.I===7)u();else{if(z.I===203){u();break}v("Expected ',' or ']', found "+St[z.I])}}return new ir(j)}function U(){u();let j=new or("_from-sequence",1,Ba.uri);if(z.I===215)return Ce(z),u(),sr(j,[jn()]);let K=F();return l(215),Ce(z),u(),sr(j,[K])}function nt(j){function K(){if(z.I===209)return g(!0);if(z.I===202)return I(z.T);if(z.I===21)return L();v("The arguments to a function call in a pattern must be literals or variable references","XTSE0340")}var et=z.T,it=z.ee;let bt=[];if(j!=null&&bt.push(j),j=G(et),et=null,Qt===1&&j.uri===Ft.Ma&&["current-group","current-grouping-key","current-merge-group","current-merge-key"].includes(j.local)&&v(j.local+"() is not permitted in a pattern","XTSE1060"),u(),z.I!==204){for(;;){var vt=Dt.cg?K():y();if((vt==null||vt instanceof Nr)&&(et==null&&(et=[]),et.push(bt.length)),bt.push(vt),z.I===7)u();else break}l(204)}return u(),vt=new yn(j,bt.length),et!=null?(it=Dt.Ue().Uf(vt,Dt),it==null&&v("No function "+j.toString()+"#"+bt.length+" is known for partial application","XPST0017"),new pi(it,bt,et)):(et=[],vt=Dt.Ue().bind(vt,bt,Dt,et),vt??W(Dt,it,j,bt,et))}function W(j,K,et,it,bt){let vt="Cannot find a "+it.length+"-argument function named "+et.toEQName()+"()";for(var Xt of bt)vt+=". "+Xt;for(bt=!1,Xt=0;Xt<it.length+5;Xt++)if(Xt!==it.length){let zt=new yn(et,Xt);if(j.Ue().Uf(zt,j)){bt=!0;break}}if(bt?vt+=". The namespace URI and local name are recognized, but the number of arguments is wrong":(it=et.uri,et=it===Ft.Qc?et.local==="original"?"Function name xsl:original is only available within an overriding function":"There are no functions defined in the XSLT namespace":it===Ft.qb?"Most Saxon extension functions are not available under SaxonJS":it.startsWith("java:")?"Calls to Java methods are not available under SaxonJS":it.startsWith("clitype:")?"Calls to .NET methods are not available under SaxonJS":null,et!=null&&(vt+=et)),j.pe())return xe("error",[xe("QName",[new ge(""),new ge("XTDE1425")]),new ge(vt)]);v(vt,"XPST0017",K)}function G(j){let K=null;try{K=i(j,Dt.xb,Dt.Zg)}catch(et){v(et.message,et.code)}return K}function y(){return z.I===213&&[7,204].includes(z.j)?(u(),new Nr):S()}function s(){var j=z,K=j.T;let et=j.ee;var it=Dt;u(),l(209),j=j.T?x(j.T):v("Parser tokenization error NUMBER"),isNaN(j)||j.code!=="ADI"?v("Number following '#' is invalid"):(0>j.value||j.value>Number.MAX_SAFE_INTEGER)&&v("Number following '#' is out of range","FOAR0002"),j=j.value,u();let bt=null;try{bt=i(K,it.xb,it.Zg)}catch(Xt){v(Xt.message,Xt.code)}K=it.Ue();let vt=new yn(bt,j);return it=K.Uf(vt,it),it==null&&v("Function "+bt.toEQName()+"#"+j+" not found","XPST0017",et),it.rb.hh&&!bt.dd(oi.Ph)?new ms(it):new mi(it)}function p(j){j.slot=Tt.length,Tt.push(j)}function N(j){for(let K=Tt.length-1;0<=K;K--){let et=Tt[K];if(et&&et.bd().equals(j))return et}}function D(j,K){return i(j,Dt.xb,()=>K)}function M(j,K){try{return D(j,K)}catch(et){v(et.message,et.code)}}function X(j,K){if(K.startsWith("Q{"))return new Gr(j,K.substring(2,K.length-2));try{let et=i(K+":dummy",Dt.xb,()=>"");return new Gr(j,et.getURI())}catch(et){return v(et.message,et.code),null}}function V(j,K){return Zi(K)||v("Local name ["+K+"] contains invalid characters"),new gr(j,K)}function ht(j,K,et,it=!1){this.global=it,this.Ua=this.name=j,this.Wb=K,this.slot=et}let z,xt,Dt={},Tt=[],Nt=[],Qt=0,Zt=0,be=0,Rt=[],Pt={Uf:function(j,K){return K=K.getContext(),(K=ur.getFnSignature(j.name,j.arity,K))?new Os(j,K):null},bind:function(j,K,et){var it=et.getContext(),bt=ur.getFnSignature(j.name,j.arity,it);if(bt){if(j.name.uri===Ft.Ma)switch(j.name.local){case"false":return Ze([at.XS.boolean.Ud],Et.Ya);case"true":return Ze([at.XS.boolean.Rc],Et.Ya);case"normalize-unicode":K.length===1&&K.push(new ge("NFC"));break;case"copy-of":return new bs(K[0]?K[0]:new rn(Nt[Nt.length-1]));case"current-group":return new da;case"current-grouping-key":return new ga;default:bt.defaultToDot&&j.arity===0&&bt.arity.includes(0)&&(K.push(new rn(Nt[Nt.length-1])),j.arity++)}else if(bt.isIdempotent&&K.length===1)return K[0];it=[];var vt;let zt=bt.alphaTree;zt&&zt.p==="F"&&!zt.r&&(zt.r={p:"",o:"*"}),zt&&zt.p==="F"&&zt.a&&zt.r||Z.ka("Bad function signature for "+j.name.local),bt.variadic&&(vt=zt.a[0]);let ve=bt.collation||-1;for(let Wt=0;Wt<K.length;Wt++){var Xt=vt||zt.a[Wt];let ce=Mn("FUNCTION",Wt,"",j.name.toString()),Fe=Dn("XPTY0004",ce);Wt===ve?(Xt=nn(K[Wt],Xt.o==="?"?Et.sg:Et.Zb,Fe,ce,et),Xt=xe("resolve-uri",[Xt,xe("static-base-uri",[])]),Xt.l=Et.qg,it.push(Xt)):it.push(nn(K[Wt],Be(Xt),Fe,ce,et))}if(ve>K.length-1&&it.push(new ge(et.Mb)),K=Be(zt.r),bt.isUserFunction)return new hs(j,bt.abstract,it,K,bt.componentBinding);switch(j.name.uri){case Ft.Ma:case Ft.ic:switch(j.name.local){case"current":Nt[0]&&(K=Nt[0]);break;case"accumulator-before":case"accumulator-after":if(it[0]instanceof ge){if(bt=i(it[0].value[0].value,et.xb,()=>"").toEQName(),et=et.yb[bt],!et)throw new A("Unknown accumulator "+bt,"XTDE3340");K=on(et),it[0]=new ge(bt)}}return new tr(j,it,K);case Ft.map:return new ls(j,it,K);case Ft.He:return new fs(j,it,K);case Ft.jh:return new Ku(j,it,K);case Ft.qb:return new Br(j,it,K);case Ft.jd:return new hi(j,it,K);case Ft.ih:return new Yu(j,it,K);default:return bt.hh?new hs(j,bt.abstract,it,K,bt.Dk):new Br(j,it,K)}}else{if((bt=ur.getFnSignature(j.name,null,it))&&(bt&&!bt.alphaTree&&(bt.alphaTree=Le(bt.sig)),it=K.length,vt=bt.alphaTree.a.length,it!==vt&&(bt.variadic?K.length<vt:!(bt.arity||[]).includes(it))))throw new A("Wrong argument arity "+K.length+" for function "+j.name.local+"()","XPST0017");if(et.Lb)return xe("error",[xe("QName",[new ge(""),new ge("XTDE1425")]),new ge("Unknown function "+j.toString())]);throw new A("Unknown function "+j.toEQName()+"()","XPST0017")}}};Dt={bc:()=>"",Mb:"http://www.w3.org/2005/xpath-functions/collation/codepoint",ke:!1,$a:{},yb:{},Xa:!1,Ec:!1,Rf:!1,Lb:!1,xj:function(){Dt.bc=()=>"",Dt.Mb="http://www.w3.org/2005/xpath-functions/collation/codepoint",Dt.$a={},Dt.yb={},Dt.Xa=!1,Dt.Ec=!1,Dt.Rf=!1,Dt.Lb=!1},getContext:function(){return{Xa:Dt.Xa,Tk:Qt===1,$a:Dt.$a}},Di:function(){return Dt.Mb},Zg:function(){return Ft.Ma},Ue:function(){return Pt},Kk:function(){return null},Qk:function(){return!1},pe:function(){return Dt.Lb},Zk:function(){return null}};let kt={};return ht.prototype.bd=function(){return this.name},{process:function(j,K,et,it,bt=!1,vt=!1,Xt=!1){if(e(),xt=j,Qt=K?1:0,j=[],kt={},Dt.xj(),Dt.xb=t,K&&(Dt.Xa=!0),Xt&&(Dt.Rf=!0),it){Zt=it.Xe?1:0,it.Ec&&(Dt.Ec=!0);for(var zt in it.namespaces)kt[zt]=it.namespaces[zt];for(var ve in it.Bc){zt=i(ve,Dt.xb,()=>"");let Fe=it.Bc[ve],uc=on(Fe.getAttribute("sType"));j.push(new ht(zt,uc,Fe,!0))}for(var Wt in it.Ub)ve=i(Wt,Dt.xb,()=>""),j.push(new ht(ve,it.td[Wt],it.Ub[Wt]));Tt=j,Dt.yb=it.yb,it.ke&&(Dt.ke=it.ke),it.Mb&&(Dt.Mb=it.Mb),it.$a&&(Dt.$a=it.$a),it.Xa&&(Dt.Xa=it.Xa),it.Lb&&(Dt.Lb=it.Lb),it.se&&(Nt=[te(it.se,2)]),it.xpathDefaultNamespace&&(Dt.bc=()=>it.xpathDefaultNamespace),Dt.Ea=it.Ea?it.Ea:null}Wt="";for(let Fe in kt)j=kt[Fe],j=j===Ft.withPrefix[Fe]?"~":j,Wt+=Fe+"="+j+" ";_o(z,xt);let ce;try{ce=F(vt)}catch(Fe){throw Fe instanceof A&&it&&it.Ej&&(Fe.code=it.Ej,Fe.message="Invalid XPath expression supplied to xsl:evaluate {"+xt+"}: "+Fe.message),Fe}return z.I!==0&&v("Found "+f()+" beyond end of expression"),K?(ce=ce.Fa(),ce instanceof ci&&et&&(ce=new Lo(os(ce)))):it&&it.we&&(K=Mn("EVALUATE_RESULT",0,"",null),et=Dn("XPTY0004",K),ce=nn(ce,it.we,et,K)),K=bt?new _a:new Oa,ce.G(K),K=K.current,bt?(K=K.documentElement,ce.l&&K.setAttribute("sType",ce.l.ga()),Wt!==""&&K.setAttribute("ns",Wt),it&&it.Ea&&K.setAttribute("baseUri",it.Ea)):(K=K.C[0],Wt!==""&&(K.el=Wt),it&&it.Ea&&(K.lb=it.Ea),Xt&&0<Tt.length&&(K.xi=Tt.map(Fe=>Fe.Ua.toEQName()))),K},parseSequenceType:function(j,K,et){return e(),Dt.xb=K,Dt.bc=et,Qt=0,kt={},_o(z,j),j=c(),z.I!==0&&v("Unexpected "+f()+" after SequenceType"),j},getTokenizer:function(){return z}}}let _s=Ia();function Oa(){this.g=[],this.current={C:[]}}Oa.prototype={start:function(e,t={}){e={N:e,C:[]};for(let i in t)e[i]=t[i];this.current.C.push(e),this.g.push(this.current),this.current=e},sd:function(e,t){this.current[e]=t},end:function(){this.current=this.g.pop()}};function _a(){this.j=Oe.find("SaxonJS").internals.getPlatform().createDocument(),this.g=[],this.current=this.j}_a.prototype={start:function(e,t={}){e=this.j.createElement(e);for(let i in t)e.setAttribute(i,t[i]);this.current.appendChild(e),this.g.push(this.current),this.current=e},sd:function(e,t){this.current.setAttribute(e,t)},end:function(){this.current=this.g.pop()}};let rc={ml:{QuantifiedExpr:"1AB",OrExpr:"1AB",AndExpr:"1AB",ComparisonExpr:"1AB",StringConcatExpr:"1AS",RangeExpr:"*ADI",AdditiveExpr:"?A",MultiplicativeExpr:"?A",IntersectExceptExpr:"*N",InstanceOfExpr:"1AB",CastableExpr:"1AB",UnaryExpr:"?A m[UO,UD,UF]",StringLiteral:"1AS",IntegerLiteral:"1ADI",DecimalLiteral:"1AD",DoubleLiteral:"1AO",NamedFunctionRef:"1F",InlineFunctionExpr:"1F",MapExpr:"1FM",Root:"1ND"},Kj:{"http://www.w3.org/2005/xpath-functions":{QName:{sig:"1F r[1AQ] a[?AS,1AS]"},abs:{sig:"1F r[?A m[AO,AD,AF]] a[?A m[AO,AD,AF]]"},"accumulator-after":{XSLTonly:!0,sig:"1F a[1AS] r[*]"},"accumulator-before":{XSLTonly:!0,sig:"1F a[1AS] r[*]"},"adjust-date-to-timezone":{arity:[1,2],sig:"1F r[?AA] a[?AA,?ARD]"},"adjust-dateTime-to-timezone":{arity:[1,2],sig:"1F r[?AM] a[?AM,?ARD]"},"adjust-time-to-timezone":{arity:[1,2],sig:"1F r[?AT] a[?AT,?ARD]"},"analyze-string":{arity:[2,3],sig:"1F r[1NE nQ{http://www.w3.org/2005/xpath-functions}analyze-string-result] a[?AS,1AS,1AS]"},apply:{sig:"1F a[1F,1FA] r[*]"},"available-environment-variables":{sig:"1F r[*AS] a[]"},"available-system-properties":{XSLTonly:!0,sig:"1F r[*AQ] a[]"},avg:{sig:"1F r[?A] a[*A]"},"base-uri":{defaultToDot:!0,arity:[0,1],sig:"1F r[?AU] a[?N]"},boolean:{sig:"1F r[1AB] a[*]"},ceiling:{sig:"1F r[?A m[AO,AD,AF]] a[?A m[AO,AD,AF]]"},"codepoint-equal":{sig:"1F r[?AB] a[?AS,?AS]"},"codepoints-to-string":{sig:"1F r[1AS] a[*ADI]"},"collation-key":{arity:[1,2],collation:1,sig:"1F r[1A2] a[1AS,1AS]"},collection:{arity:[0,1],sig:"1F a[?AS] r[*]"},compare:{arity:[2,3],collation:2,sig:"1F r[?ADI] a[?AS,?AS,1AS]"},concat:{arity:[2,1/0],sig:"1F r[1AS] a[?A,?A]",variadic:!0},contains:{arity:[2,3],collation:2,sig:"1F r[1AB] a[?AS,?AS,1AS]"},"contains-token":{arity:[2,3],collation:2,sig:"1F r[1AB] a[*AS,1AS,1AS]"},"copy-of":{XSLTonly:!0,defaultToDot:!0,arity:[0,1],sig:"1F a[*] r[*]"},count:{sig:"1F r[1ADI] a[*]"},current:{XSLTonly:!0,sig:"1F r[1] a[]"},"current-date":{sig:"1F r[1AA] a[]"},"current-dateTime":{sig:"1F r[1AMP] a[]"},"current-group":{XSLTonly:!0,sig:"1F a[] r[*]"},"current-grouping-key":{XSLTonly:!0,sig:"1F r[*A] a[]"},"current-merge-group":{XSLTonly:!0,arity:[0,1],sig:"1F a[1AS] r[*]"},"current-merge-key":{XSLTonly:!0,sig:"1F r[*A] a[]"},"current-output-uri":{XSLTonly:!0,sig:"1F r[?AU] a[]"},"current-time":{sig:"1F r[1AT] a[]"},data:{defaultToDot:!0,arity:[0,1],sig:"1F r[*A] a[*]"},dateTime:{sig:"1F r[?AM] a[?AA,?AT]"},"day-from-date":{sig:"1F r[?ADI] a[?AA]"},"day-from-dateTime":{sig:"1F r[?ADI] a[?AM]"},"days-from-duration":{sig:"1F r[?ADI] a[?AR]"},"deep-equal":{arity:[2,3],collation:2,sig:"1F r[1AB] a[*,*,1AS]"},"default-collation":{sig:"1F r[1AS] a[]"},"default-language":{sig:"1F r[1ASNTL] a[]"},"distinct-values":{arity:[1,2],collation:1,sig:"1F r[*A] a[*A,1AS]"},doc:{sig:"1F r[?ND] a[?AS]"},"doc-available":{sig:"1F r[1AB] a[?AS]"},document:{XSLTonly:!0,arity:[1,2],sig:"1F r[*N] a[*,1N]"},"document-uri":{defaultToDot:!0,arity:[0,1],sig:"1F r[?AU] a[?N]"},"element-available":{XSLTonly:!0,sig:"1F r[1AB] a[1AS]"},"element-with-id":{defaultToDot:!0,arity:[1,2],sig:"1F r[*NE] a[*AS,1N]"},empty:{sig:"1F r[1AB] a[*]"},"encode-for-uri":{sig:"1F r[1AS] a[?AS]"},"ends-with":{arity:[2,3],collation:2,sig:"1F r[1AB] a[?AS,?AS,1AS]"},"environment-variable":{sig:"1F r[?AS] a[1AS]"},error:{arity:[0,1,2,3],sig:"1F r[0E] a[?AQ,1AS,*]"},"escape-html-uri":{sig:"1F r[1AS] a[?AS]"},"exactly-one":{sig:"1F r[1] a[*]"},exists:{sig:"1F r[1AB] a[*]"},false:{sig:"1F r[1AB] a[]"},filter:{sig:"1F r[*] a[*,1F r[1AB] a[1]]"},floor:{sig:"1F r[?A m[AO,AD,AF]] a[?A m[AO,AD,AF]]"},"fold-left":{sig:"1F a[*,*,1F a[*,1] r[*]] r[*]"},"fold-right":{sig:"1F a[*,*,1F a[1,*] r[*]] r[*]"},"for-each":{sig:"1F a[*,1F a[1] r[*]] r[*]"},"for-each-pair":{sig:"1F a[*,*,1F a[1,1] r[*]] r[*]"},"format-date":{arity:[2,5],sig:"1F r[?AS] a[?AA,1AS,?AS,?AS,?AS]"},"format-dateTime":{arity:[2,5],sig:"1F r[?AS] a[?AM,1AS,?AS,?AS,?AS]"},"format-integer":{arity:[2,3],sig:"1F r[1AS] a[?ADI,1AS,?AS]"},"format-number":{arity:[2,3],sig:"1F r[1AS] a[?A m[AO,AD,AF],1AS,?AS]"},"format-time":{arity:[2,5],sig:"1F r[?AS] a[?AT,1AS,?AS,?AS,?AS]"},"function-arity":{sig:"1F r[1ADI] a[1F]"},"function-available":{XSLTonly:!0,arity:[1,2],sig:"1F r[1AB] a[1AS,1ADI]"},"function-lookup":{sig:"1F r[?F] a[1AQ,1ADI]"},"function-name":{sig:"1F r[?AQ] a[1F]"},"generate-id":{defaultToDot:!0,arity:[0,1],sig:"1F r[1AS] a[?N]"},"has-children":{defaultToDot:!0,arity:[0,1],sig:"1F r[1AB] a[?N]"},head:{sig:"1F r[?] a[*]"},"hours-from-dateTime":{sig:"1F r[?ADI] a[?AM]"},"hours-from-duration":{sig:"1F r[?ADI] a[?AR]"},"hours-from-time":{sig:"1F r[?ADI] a[?AT]"},id:{defaultToDot:!0,arity:[1,2],sig:"1F r[*NE] a[*AS,1N]"},idref:{defaultToDot:!0,arity:[1,2],sig:"1F r[*N] a[*AS,1N]"},"implicit-timezone":{sig:"1F r[1ARD] a[]"},"in-scope-prefixes":{sig:"1F r[*AS] a[1NE]"},"index-of":{arity:[2,3],collation:2,sig:"1F r[*ADI] a[*A,1A,1AS]"},innermost:{sig:"1F r[*N] a[*N]"},"insert-before":{sig:"1F a[*,1ADI,*] r[*]"},"iri-to-uri":{sig:"1F r[1AS] a[?AS]"},"json-doc":{arity:[1,2],sig:"1F r[?] a[?AS,1FM]"},"json-to-xml":{arity:[1,2],sig:"1F r[?ND] a[?AS,1FM]"},key:{XSLTonly:!0,arity:[2,3],sig:"1F r[*N] a[1AS,*A,1N]"},lang:{defaultToDot:!0,arity:[1,2],sig:"1F r[1AB] a[?AS,1N]"},last:{sig:"1F r[1ADI] a[]"},"load-xquery-module":{arity:[1,2],sig:"1F r[1FM] a[1AS,1FM]"},"local-name":{defaultToDot:!0,arity:[0,1],sig:"1F r[1AS] a[?N]"},"local-name-from-QName":{sig:"1F r[?ASNTNC] a[?AQ]"},"lower-case":{sig:"1F r[1AS] a[?AS]"},matches:{arity:[2,3],sig:"1F r[1AB] a[?AS,1AS,1AS]"},max:{arity:[1,2],collation:1,sig:"1F r[?A] a[*A,1AS]"},min:{arity:[1,2],collation:1,sig:"1F r[?A] a[*A,1AS]"},"minutes-from-dateTime":{sig:"1F r[?ADI] a[?AM]"},"minutes-from-duration":{sig:"1F r[?ADI] a[?AR]"},"minutes-from-time":{sig:"1F r[?ADI] a[?AT]"},"month-from-date":{sig:"1F r[?ADI] a[?AA]"},"month-from-dateTime":{sig:"1F r[?ADI] a[?AM]"},"months-from-duration":{sig:"1F r[?ADI] a[?AR]"},name:{defaultToDot:!0,arity:[0,1],sig:"1F r[1AS] a[?N]"},"namespace-uri":{defaultToDot:!0,arity:[0,1],sig:"1F r[1AU] a[?N]"},"namespace-uri-for-prefix":{sig:"1F r[?AU] a[?AS,1NE]"},"namespace-uri-from-QName":{sig:"1F r[?AU] a[?AQ]"},nilled:{defaultToDot:!0,arity:[0,1],sig:"1F r[?AB] a[?N]"},"node-name":{defaultToDot:!0,arity:[0,1],sig:"1F r[?AQ] a[?N]"},"normalize-space":{arity:[0,1],sig:"1F r[1AS] a[?AS]"},"normalize-unicode":{arity:[1,2],sig:"1F r[1AS] a[?AS,1AS]"},not:{sig:"1F r[1AB] a[*]"},number:{defaultToDot:!0,arity:[0,1],sig:"1F r[1AO] a[?A]"},"one-or-more":{sig:"1F r[+] a[*]"},outermost:{sig:"1F r[*N] a[*N]"},"parse-ietf-date":{sig:"1F r[?AM] a[?AS]"},"parse-json":{arity:[1,2],sig:"1F r[?] a[?AS,1FM]"},"parse-xml":{sig:"1F r[?ND e[NE]] a[?AS]"},"parse-xml-fragment":{sig:"1F r[?ND] a[?AS]"},path:{defaultToDot:!0,arity:[0,1],sig:"1F r[?AS] a[?N]"},position:{sig:"1F r[1ADI] a[]"},"prefix-from-QName":{sig:"1F r[?ASNTNC] a[?AQ]"},"random-number-generator":{arity:[0,1],sig:"1F r[1FM k[AS] v[1]] a[?A]"},"regex-group":{XSLTonly:!0,sig:"1F r[1AS] a[1ADI]"},remove:{sig:"1F r[*] a[*,1ADI]"},replace:{arity:[3,4],sig:"1F r[1AS] a[?AS,1AS,1AS,1AS]"},"resolve-QName":{sig:"1F r[?AQ] a[?AS,1NE]"},"resolve-uri":{arity:[1,2],sig:"1F r[?AU] a[?AS,1AS]"},reverse:{sig:"1F a[*] r[*]"},root:{defaultToDot:!0,arity:[0,1],sig:"1F r[?N] a[?N]"},round:{arity:[1,2],sig:"1F r[?A m[AO,AD,AF]] a[?A m[AO,AD,AF],1ADI]"},"round-half-to-even":{arity:[1,2],sig:"1F r[?A m[AO,AD,AF]] a[?A m[AO,AD,AF],1ADI]"},"seconds-from-dateTime":{sig:"1F r[?AD] a[?AM]"},"seconds-from-duration":{sig:"1F r[?AD] a[?AR]"},"seconds-from-time":{sig:"1F r[?AD] a[?AT]"},serialize:{arity:[1,2],sig:"1F r[1AS] a[*,?]"},snapshot:{XSLTonly:!0,defaultToDot:!0,arity:[0,1],sig:"1F a[*] r[*]"},sort:{arity:[1,2,3],collation:1,sig:"1F r[*] a[*,?AS,1F r[*A] a[1]]"},"starts-with":{arity:[2,3],collation:2,sig:"1F r[1AB] a[?AS,?AS,1AS]"},"static-base-uri":{sig:"1F r[?AU] a[]"},"stream-available":{XSLTonly:!0,sig:"1F r[1AB] a[?AS]"},string:{defaultToDot:!0,arity:[0,1],sig:"1F r[1AS] a[?]"},"string-join":{arity:[1,2],sig:"1F r[1AS] a[*A,1AS]"},"string-length":{arity:[0,1],sig:"1F r[1ADI] a[?AS]"},"string-to-codepoints":{sig:"1F r[*ADI] a[?AS]"},subsequence:{arity:[2,3],sig:"1F a[*,1AO,1AO] r[*]"},substring:{arity:[2,3],sig:"1F r[1AS] a[?AS,1AO,1AO]"},"substring-after":{arity:[2,3],collation:2,sig:"1F r[1AS] a[?AS,?AS,1AS]"},"substring-before":{arity:[2,3],collation:2,sig:"1F r[1AS] a[?AS,?AS,1AS]"},sum:{arity:[1,2],sig:"1F r[?A] a[*A,?A]"},"system-property":{XSLTonly:!0,sig:"1F r[1AS] a[1AS]"},tail:{sig:"1F a[*] r[*]"},"timezone-from-date":{sig:"1F r[?ARD] a[?AA]"},"timezone-from-dateTime":{sig:"1F r[?ARD] a[?AM]"},"timezone-from-time":{sig:"1F r[?ARD] a[?AT]"},tokenize:{arity:[1,2,3],sig:"1F r[*AS] a[?AS,1AS,1AS]"},trace:{arity:[1,2],sig:"1F a[*,1AS] r[*]"},transform:{sig:"1F r[1FM] a[1FM]"},translate:{sig:"1F r[1AS] a[?AS,1AS,1AS]"},true:{sig:"1F r[1AB] a[]"},"type-available":{XSLTonly:!0,sig:"1F r[1AB] a[1AS]"},unordered:{sig:"1F r[*] a[*]"},"unparsed-entity-public-id":{XSLTonly:!0,arity:[1,2],sig:"1F r[1AS] a[1AS,1N]"},"unparsed-entity-uri":{XSLTonly:!0,arity:[1,2],sig:"1F r[1AU] a[1AS,1N]"},"unparsed-text":{arity:[1,2],sig:"1F r[?AS] a[?AS,1AS]"},"unparsed-text-available":{arity:[1,2],sig:"1F r[1AB] a[?AS,1AS]"},"unparsed-text-lines":{arity:[1,2],sig:"1F r[*AS] a[?AS,1AS]"},"upper-case":{sig:"1F r[1AS] a[?AS]"},"uri-collection":{arity:[0,1],sig:"1F r[*AU] a[?AS]"},"xml-to-json":{arity:[1,2],sig:"1F r[?AS] a[?N,1FM]"},"year-from-date":{sig:"1F r[?ADI] a[?AA]"},"year-from-dateTime":{sig:"1F r[?ADI] a[?AM]"},"years-from-duration":{sig:"1F r[?ADI] a[?AR]"},"zero-or-one":{sig:"1F r[?] a[*]"}},"http://www.w3.org/2005/xpath-functions/array":{append:{sig:"1F r[1FA] a[1FA,*]"},filter:{sig:"1F r[1FA] a[1FA,1F r[1AB] a[*]]"},flatten:{sig:"1F a[*] r[*]"},"fold-left":{sig:"1F a[1FA,*,1F a[*,*]] r[*]"},"fold-right":{sig:"1F a[1FA,*,1F a[*,*]] r[*]"},"for-each":{sig:"1F r[1FA] a[1FA,1F a[*]]"},"for-each-pair":{sig:"1F r[1FA] a[1FA,1FA,1F a[*,*]]"},get:{sig:"1F a[1FA,1ADI] r[*]"},head:{sig:"1F a[1FA] r[*]"},"insert-before":{sig:"1F r[1FA] a[1FA,1ADI,*]"},join:{sig:"1F r[1FA] a[*FA]"},put:{sig:"1F r[1FA] a[1FA,1ADI,*]"},remove:{sig:"1F r[1FA] a[1FA,*ADI]"},reverse:{sig:"1F r[1FA] a[1FA]"},size:{sig:"1F r[1ADI] a[1FA]"},sort:{arity:[1,2,3],collation:1,sig:"1F r[1FA] a[1FA,?AS,1F r[*A] a[*]]"},subarray:{arity:[2,3],sig:"1F r[1FA] a[1FA,1ADI,1ADI]"},tail:{sig:"1F r[1FA] a[1FA]"}},"http://www.w3.org/2005/xpath-functions/map":{contains:{sig:"1F r[1AB] a[1FM,1A]"},entry:{sig:"1F r[1FM] a[1A,*]"},find:{sig:"1F r[1FA] a[*,1A]"},"for-each":{sig:"1F r[*] a[1FM,1F a[1A,*]]"},get:{sig:"1F a[1FM,1A] r[*]"},keys:{sig:"1F r[*A] a[1FM]"},merge:{arity:[1,2],sig:"1F r[1FM] a[*FM,1FM]"},put:{sig:"1F r[1FM] a[1FM,1A,*]"},remove:{sig:"1F r[1FM] a[1FM,*A]"},size:{sig:"1F r[1ADI] a[1FM]"}},"http://www.w3.org/2005/xpath-functions/math":{acos:{sig:"1F r[?AO] a[?AO]"},asin:{sig:"1F r[?AO] a[?AO]"},atan:{sig:"1F r[?AO] a[?AO]"},atan2:{sig:"1F r[1AO] a[1AO,1AO]"},cos:{sig:"1F r[?AO] a[?AO]"},exp:{sig:"1F r[?AO] a[?AO]"},exp10:{sig:"1F r[?AO] a[?AO]"},log:{sig:"1F r[?AO] a[?AO]"},log10:{sig:"1F r[?AO] a[?AO]"},pi:{sig:"1F r[1AO] a[]"},pow:{sig:"1F r[?AO] a[?AO,1A m[AO,AD,AF]]"},sin:{sig:"1F r[?AO] a[?AO]"},sqrt:{sig:"1F r[?AO] a[?AO]"},tan:{sig:"1F r[?AO] a[?AO]"}}}};class ic{constructor(){this.g=Ia()}compile(t){let i={xs:"http://www.w3.org/2001/XMLSchema",array:"http://www.w3.org/2005/xpath-functions/array",map:"http://www.w3.org/2005/xpath-functions/map",fn:""};return this.g.parseSequenceType(t,f=>i[f],f=>i[f])}}let ar={},Ps=null;function Pa(e){Ps==null&&(Ps={1:"0",2:"1",3:"?",6:"+",4:"+",7:"*"});let t=Ps[e];return t===void 0?(console.log("Unexpected cardinality:",e),"*"):t}function sc(e,t){if(!(e in ar&&t in ar[e]))return null;e=ar[e][t];let i=e.sig;if(!i&&(e.as||e.param)){let f=new ic;if(i="1F ",e.as?(t=f.compile(e.as),i+="r["+Pa(t.cardinality)+(t.itemType._alphaCode===null?"":t.itemType._alphaCode)+"] "):i+="* ",e.param){let v=0;i+="a[",e.param.forEach(a=>{0<v&&(i+=","),a=f.compile(a),i+=Pa(a.cardinality)+a.itemType._alphaCode,v++}),i+="]"}else i+="a[]";e.sig=i}return i&&!e.alphaTree&&(e.alphaTree=Le(i)),e}class Di{addLibrary(t,i){let f=ar[t];f||(f={},ar[t]=f);for(let v in i)v in f||(f[v]={}),i[v]instanceof Function?(f[v].impl=i[v],f[v].api="legacy"):Object.assign(f[v],i[v])}getLibrary(t){return ar[t]}getSignature(t,i){return sc(t,i)}}(function(){let e=new Di;return e.addLibrary(Ft.qb,{apply:{sig:"1F r[*] a[1F,1FA]",api:"legacy"},"column-number":{arity:[0,1],sig:"1F r[1ADI] a[1N]",api:"legacy"},"compile-XPath":{arity:[1,2,3],sig:"1F r[1ND] a[1AS,?,?]",api:"legacy"},"compile-GlobalContext":{sig:"1F r[1] a[1FM,1FM,1FM]",api:"legacy"},"discard-document":{sig:"1F r[1ND] a[1ND]",api:"legacy"},"has-uniform-namespaces":{sig:"1F r[1AB] a[1N]",api:"legacy"},"line-number":{arity:[0,1],sig:"1F r[1ADI] a[1N]",api:"legacy"},"marshal-type":{sig:"1F r[1FM] a[1AS]",api:"legacy"},"message-count":{sig:"1F r[1ADI] a[?AQ]",api:"legacy"},"parse-sequence-type":{arity:[2,3],sig:"1F r[1FM] a[1AS,1NE,?AS]",api:"legacy"},"parse-XPath":{arity:[1,2,3],sig:"1F r[1ND] a[1AS,?AS,?]",api:"legacy"},permute:{sig:"1F r[*] a[*]",api:"legacy"},"system-id":{sig:"1F r[*AU] a[]",api:"legacy"},timestamp:{sig:"1F r[1AMP] a[]",api:"legacy"}}),e.addLibrary(Ft.jd,{"abort-controller":{arity:[0,1],sig:"1F r[1] a[?ADI]",api:"legacy"},all:{sig:"1F r[1] a[1FA]",api:"legacy"},"all-settled":{sig:"1F r[1] a[1FA]",api:"legacy"},any:{sig:"1F r[1] a[1FA]",api:"legacy"},apply:{arity:[2,3],sig:"1F r[*] a[1F,1FA,?FM]",api:"legacy"},call:{arity:[3,4],sig:"1F r[*] a[1,1AS,1FA,?FM]",api:"legacy"},catch:{sig:"1F r[1] a[1,1F]",api:"legacy"},contains:{sig:"1F r[1AB] a[1,1AS]",api:"legacy"},doc:{arity:[1,2],sig:"1F r[1] a[?AS,?]",api:"legacy"},"doc-fetched":{sig:"1F r[1AB] a[?AS]",api:"legacy"},eval:{arity:[1,2],sig:"1F r[*] a[1AS,?FM]",api:"legacy"},event:{sig:"1F r[?] a[]",api:"legacy"},finally:{sig:"1F r[1] a[1,1F]",api:"legacy"},get:{arity:[2,3],sig:"1F r[*] a[1,1AS,?FM]",api:"legacy"},"http-request":{arity:[1,2],sig:"1F r[1] a[1FM,?]",api:"legacy"},"js-function":{sig:"1F r[*] a[1F]",api:"legacy"},"json-doc":{arity:[1,2,3],sig:"1F r[1] a[?AS,?FM,?]",api:"legacy"},"json-parse":{arity:[1,2],sig:"1F r[1] a[1AS,?FM]",api:"legacy"},location:{sig:"1F r[1AS] a[]",api:"legacy"},new:{arity:[2,3],sig:"1F r[1] a[1AS,1FA,?FM]",api:"legacy"},page:{sig:"1F r[1N] a[]",api:"legacy"},"query-params":{sig:"1F r[1FM] a[]",api:"legacy"},race:{sig:"1F r[1] a[1FA]",api:"legacy"},resolve:{sig:"1F r[1] a[*]",api:"legacy"},sleep:{sig:"1F r[1] a[1ADI]",api:"legacy"},source:{sig:"1F r[?N] a[]",api:"legacy"},style:{sig:"1F r[1FM] a[?N]",api:"legacy"},then:{sig:"1F r[1] a[1,1F]",api:"legacy"},"unparsed-text":{arity:[1,2,3],sig:"1F r[1] a[?AS,?AS,?]",api:"legacy"},"unparsed-text-fetched":{sig:"1F r[1AB] a[?AS]",api:"legacy"},window:{sig:"1F r[1] a[]",api:"legacy"}}),e.addLibrary("http://exslt.org/common",{"node-set":{sig:"1F r[?N] a[?N]",isIdempotent:!0}}),{getLibrary:function(t){return e.getLibrary(t)},addLibrary:function(t){return e.addLibrary(t.namespace,t.signatures)}}})();var Re=function(){function e(C){var n,r={};for(n in C){var h=C[n];r[n]=h}return r}function t(){}function i(C){let n={};if(C){C=C.split(" ");for(let h=0;h<C.length;h++){var r=C[h];let m=r.indexOf("="),c=m===-1?r:r.substring(0,m);r=m===-1?"":r.substring(m+1),n[c]=r==="~"?Ft.withPrefix[c]:r}}return n}function f(C){let n=[];return(C.C||[]).forEach(function(r){r.N==="arg"&&n.push(r)}),n}function v(C,n,r){let h;if(n.globalContext)h=n.globalContext.value.X();else{h=new t,h.j();var m=n.globals;m&&(h.Bc=m),(m=n.accumulators)&&(h.yb=m)}m=n.language,T&&T.language&&(m=T.language);var c=n.staticContext;c&&c.language&&(m=c.language),c=n.html5Mode,h.ke=c||!1,h.Xa=m?m==="XSLT":!1,h.Ec=n.inTry,h.Xe=n.inCatch,h.Lb=n.backwardCompatibility;let _,Q;if(m=n.slotMap){c=-1;let H;for(_ in m)H=m[_],h.Ub[_]=H,c=H>c?H:c;h.md=c+1}if(h.yj(C),C=n.slotTypes)for(_ in C)h.td[_]=Be(C[_]);for(Q in r)h.namespaces[Q]=r[Q];return h.namespaces[""]="",(r=n.staticTyping)&&(h.hf=r),(r=n.xpathDefaultNamespace)&&(h.xpathDefaultNamespace=r),(r=n.defaultCollation)&&(h.Mb=r),(r=n.staticBaseURI)&&(h.staticBaseURI=r),(r=n.contextType)?h.type=new Vt(Pe(r),2):h.type=h.Xa?null:Et.jc,h.se=h.type,(n=n.requiredType)&&(h.we=on(n)),h}function a(C){let n=new t;n.type=Et.jc,n.R(C.params,C.inputConvert),"fn xs map array math saxon ixsl".split(" ").forEach(m=>n.namespaces[m]=Ns[m]);for(var r in C.namespaceContext)n.namespaces[r]=C.namespaceContext[r];C.xpathDefaultNamespace&&(n.xpathDefaultNamespace=C.xpathDefaultNamespace);let h;if(C=C.slotMap){r=-1;let m;for(h in C)m=C[h],n.Ub[h]=m,r=m>r?m:r;n.md=r+1}return n}function u(C,n,r){return C=_s.process(C,n.type==="pattern",n.splitPattern,r,n.language==="XSLT",n.allowEmpty,n.freeVariables),At(C)}function l(C,n=!1){let r={function:{},globalVariable:{},globalParam:{}};for(let m in C){if(C[m].visibility==="PRIVATE")continue;var h=C[m].actor;let c=ut.U(h)?h.nodeName:h.N,_=ut.U(h)?h.getAttribute("name"):h.name;switch(c){case"function":if(n&&C[m].visibility!=="PUBLIC"&&C[m].visibility!=="FINAL")break;h=(ut.U(h)?ut.ad(h,"arg"):f(h)).length,r[c][_+"#"+h]=C[m];break;case"globalVariable":case"globalParam":r[c][_]=C[m]}}return r}function F(C,n=!0){let r={N:C.nodeName};var h=C.attributes,m;for(m=0;m<h.length;m++){var c=h[m].name;(c.substring(0,5)!=="xmlns"||c.length!==5&&c.charAt(5)!==":")&&(r[c]=h[m].value)}if(C=C.childNodes||[],C.length!==0){for(h=[],m=0;m<C.length;m++)c=F(C[m],n),n&&(c.parentNode=r),h.push(c);r.C=h}return r}function S(C){C.C&&C.C.forEach(function(n){n.parentNode=C,S(n)})}function O(C,n,r){return C={N:"co",id:C,binds:r,Je:r.split(/\s+/).map(h=>parseInt(h,10)),actor:n,C:[n]},n.parentNode=C}function k(C){if(!ut.U(C))return[];let n=[];return C.childNodes.forEach(r=>n=n.concat(k(r))),n}function d(C,n){C.nodeName==="ufRef"?C.setAttribute("bSlot",n[C.getAttribute("name")]):C.hasChildNodes()&&C.childNodes.forEach(r=>d(r,n))}function o(C,n,r){var h=J.ra();if(r||={},r.params||(r.params={}),C.freeV){let w=r.params,g={};C.freeV.forEach(x=>{let I=x.startsWith("Q{}")?w[x.substring(3)]:w[x];if(!I)throw new A("A value for parameter "+x+" is required","SXJS9999");g[x]=I}),r.params=g}var m=r.inputConvert||"strong";let c=a(r),_=C.C[0];_.parentNode=C;let Q={name:"evaluate",Oa:C,bb:{}};C=new On,C.da=J.createDocument(),C.fixed={Ld:{},Ta:{},kb:{},Tb:{},zf:0,Bb:new Date,bb:{"Q{}":C.da.createElement("decimal-format")},nd:{evaluate:Q},staticBaseURI:h?window.location.href:null,fa:ft},r.staticBaseURI&&(C.fixed.staticBaseURI=r.staticBaseURI);let H,B,b;if(r.namedDecimalFormats)for(let w in r.namedDecimalFormats){h=r.namedDecimalFormats[w],H=C.da.createElement("decimal-format");for(B in h)b=h[B],H.setAttribute(B,["infinity","NaN"].includes(B)?b:Ct.La(b)[0]);Q.bb[/^Q\{/.test(w)?w:"Q{}"+w]=F(H)}if(r.defaultDecimalFormat){h=r.defaultDecimalFormat,H=C.da.createElement("decimal-format");for(B in h)b=h[B],H.setAttribute(B,["infinity","NaN"].includes(B)?b:Ct.La(b)[0]);Q.bb["Q{}"]=F(H)}if(C.ma=c.rc,n)if(n instanceof mt)C.focus=n;else{if(Array.isArray(n)&&1<n.length)throw new A("Context item is a sequence of more than one item","XTTE3210");n=Yt(n),m==="strong"&&(n=Ne(n)),C.focus=n!=null?me(n[0]):Lt(yt)}else C.focus=Lt(yt);return m=ft.evaluate(_,C),$r(m,r.resultForm||"default")}let E=Bt.Vc,T=null;return t.prototype={type:void 0,we:void 0,se:void 0,J:[],K:void 0,md:0,B:1,Ub:{},td:{},g:{},rc:[],Bc:{},yb:{},hf:!1,Xa:!1,Ec:!1,Xe:!1,cg:!1,Lb:!1,namespaces:{},xpathDefaultNamespace:"",Mb:E,j:function(){this.B=this.md=0,this.rc=[],this.Ub={},this.td={},this.hf=!1,this.g={},this.Bc={},this.namespaces={"":"",xml:Ft.xml},this.Mb=E},toString:function(){var C=0,n;for(n in this.Bc)C++;return`CompileContext:
	`+(C+" global variables/params")},yj:function(C){if(C!==void 0&&(C=C.next(),C!=null))for(var n=wt(C.keys()),r;(r=n.next())!=null;){var h=at.XS.QName.matches(r)?r.toEQName():r.toString();/^Q{/.test(h)||(h="Q{}"+h);let m=this.Ub.hasOwnProperty(h)?this.Ub[h]:this.md++;this.Ub[h]=m,r=C.get(r),this.rc[m]=r,this.td[h]=Et.ya}},R:function(C,n){if(this.j(),C!==void 0)for(let h in C){let m=h.toString();/^Q{/.test(m)||(m="Q{}"+m);var r=this.md++;this.Ub[m]=r;let c=Yt(C[h]);n==="strong"&&(c=Ne(c)),(this.rc[r]=c)&&(r=c.code,this.td[m]=r?new Vt(at.codes[r],2):Et.ya)}},X:function(){let C=new t;return C.type=this.type,C.we=this.we,C.se=this.se,C.J=this.J,C.K=this.K,C.md=this.md,C.B=this.B,C.Ub=e(this.Ub),C.td=e(this.td),C.hf=this.hf,C.Xa=this.Xa,C.Ec=this.Ec,C.Xe=this.Xe,C.Lb=this.Lb,C.g=e(this.g),C.rc=e(this.rc),C.Bc=this.Bc,C.yb=this.yb,C.namespaces=e(this.namespaces),C.xpathDefaultNamespace=this.xpathDefaultNamespace,C.Mb=this.Mb,C.$a=this.$a,C}},{compile:function(C,n,r,h,m){if(h=i(n.nsAttribute),r=v(r,n,h),!n.globalContext&&(r.$a=l(m.fixed.Ja),m=n.globalFunctions)){h={};let _=0;for(let Q in m){var c=m[Q];let H=ut.U(c);c=H?c.parentNode:c.parent;let B=H?c.parentNode:c.parent;h[_++]={actor:c,Oa:B,id:parseInt(H?B.getAttribute("id"):B.id,10)}}r.$a=l(h)}return u(C,n,r)},compileOnly:function(C,n,r=!1){n||={},n.params||(n.params={}),n.freeVariables=!0;var h=a(n);let m=u(C,n,h).next();if(h=m.xi){let _=Object.assign({},n);_.freeVariables=!1,_.params={},h.forEach(Q=>{_.params[Q]="dummy"}),n=a(_),m=u(C,_,n).next()}let c={N:"package",name:"evaluate",C:[m]};return h&&(c.freeV=h),r?c:function(_,Q={}){return o(c,_,{params:Q})}},evaluateOnly:o,compileGlobalContext:function(C,n,r){var h=new t;h.j(),h.Bc=C,h.$=n,h.yb=r,C={},r=0;for(let c in n){var m=n[c];let _=ut.U(m);m=_?m.parentNode:m.parent;let Q=_?m.parentNode:m.parent;C[r++]={actor:m,Oa:Q,id:parseInt(_?Q.getAttribute("id"):Q.id,10)}}return h.$a=l(C),At(h)},evaluateXDM:function(C,n,r,h){function m(q=""){return _[q]}var c;let _,Q=v(h.params,h,h.namespaces);Q.Ja=r.fixed.Ja,Q.staticBaseURI||(Q.staticBaseURI=r.fixed.staticBaseURI);let H=r.fixed.Ja;Q.$a=l(r.fixed.Ja,h.dynamicEval),C=u(C,h,Q).next();let B={N:"package",name:"evaluate"};var b={name:"evaluate",Oa:B,bb:{}};C.parentNode=B;let w=!1;var g=k(C);if(0<g.length){w=!0;for(var x=[],I=0;I<g.length;I++)x.push(1001+I);let q=1001;var L=0;let $=[],rt={};g.forEach(st=>{let pt=O(q,F(st),"");st=st.getAttribute("name")+"#"+st.getAttribute("arity"),pt.parentNode=B,Q.$a.function[st]={actor:pt,Oa:null,id:q},rt[st]=L++,H[q]=pt,q++,$.push(pt)}),d(C,rt),C=F(C),x=O(1e3,C,x.join(" ")),x.parentNode=B,H[1e3]=x,$.unshift(x),B.C=$}else ut.U(C)?C=F(C):S(C),B.C=[O(1e3,C,"")],C.parentNode=B;I=ft.fe(r.oa.actor,r);for(c in I.bb)b.bb[c]=I.bb[c];if(g=new On,g.fixed={Ld:{},Ta:{},Tb:{},kb:{},zf:0,Bb:new Date,bb:{},Ja:r.fixed.Ja,fa:ft,options:r.fixed.options,Ab:r.fixed.Ab,staticBaseURI:r.fixed.staticBaseURI,ye:null,nd:{evaluate:b}},g.fixed.nd[I.name]=I,h.staticBaseURI&&(g.fixed.staticBaseURI=h.staticBaseURI),I=h.staticContext){var R=I.decimalFormats;if(R)for(c in R)b.bb[c]=F(R[c]);if(b=I.resources)for(c in b)if(R=b[c],R.hasOwnProperty("err")){let q=R.err;q=q.replace(/Q{http:\/\/www\.w3\.org\/2005\/xqt-errors\}/,""),g.fixed.kb[c]=g.fixed.Tb[c]=new A(q+" "+R.description,q)}else g.fixed.kb[c]=R;if(b=I.sources){for(c in b)if(c!==".")try{let q=b[c],$;if(typeof q=="string"){let rt=J.ve(q);rt=Jt.Fg(Jt.Eg(rt)),$=ut.dc(J.Sb(rt)),$._saxonBaseUri=q,$._saxonDocUri=q}else $=q;g.fixed.Ta[c]=$}catch(q){g.fixed.Ta[c]=g.fixed.Tb[c]=q}}(c=I.collectionFinder)&&(_=c,g.fixed.options.Hg=m),c=I.staticBaseURI,typeof c<"u"&&(g.fixed.staticBaseURI=c==="#UNDEFINED"?null:c)}if(h.staticBaseURI&&(g.fixed.staticBaseURI=h.staticBaseURI),g.masterDocument=r.masterDocument,g.da=J.createDocument(),n!=null){if(h=n.next(),n.next()!=null)throw new A("Context item is a sequence of more than one item","XTTE3210");for(g.ma=[],n=0;n<Q.rc.length;n++)g.ma[n]=Q.rc[n];return g.oa=w?x:r.oa,h!=null?(h=me(h),g.focus=h):g.focus=Lt(yt),ft.evaluate(C,g)}return yt},evaluate:function(C,n,r){var h=J.ra();r||={},r.params||(r.params={});var m=r.inputConvert||"strong";let c=a(r);C=u(C,r,c).next();var _={N:"package",name:"evaluate",C:[C]};C.parentNode=_;let Q={name:"evaluate",Oa:_,bb:{}};_=new On,_.da=J.createDocument();var H={};H[Bt.Vc]=Bt.Gg(),H[Bt.Wg]=Bt.Le(),H[Bt.Xf]=Bt.Ag(),H[Bt.Kh]=Bt.Le(),_.fixed={Ld:{},options:{uc:H},Ta:{},kb:{},Tb:{},zf:0,Bb:new Date,bb:{"Q{}":_.da.createElement("decimal-format")},nd:{evaluate:Q},staticBaseURI:h?window.location.href:null,fa:ft},r.staticBaseURI&&(_.fixed.staticBaseURI=r.staticBaseURI);let B,b;if(r.namedDecimalFormats)for(let w in r.namedDecimalFormats){h=r.namedDecimalFormats[w],H=_.da.createElement("decimal-format");for(B in h)b=h[B],H.setAttribute(B,["infinity","NaN"].includes(B)?b:Ct.La(b)[0]);Q.bb[/^Q\{/.test(w)?w:"Q{}"+w]=F(H)}if(r.defaultDecimalFormat){h=r.defaultDecimalFormat,H=_.da.createElement("decimal-format");for(B in h)b=h[B],H.setAttribute(B,["infinity","NaN"].includes(B)?b:Ct.La(b)[0]);Q.bb["Q{}"]=F(H)}if(_.ma=c.rc,n)if(n instanceof mt)_.focus=n;else{if(Array.isArray(n)&&1<n.length)throw new A("Context item is a sequence of more than one item","XTTE3210");n=Yt(n),m==="strong"&&(n=Ne(n)),_.focus=n!=null?me(n[0]):Lt(yt)}else _.focus=Lt(yt);return m=ft.evaluate(C,_),$r(m,r.resultForm||"default")},forceBaseURI:function(C,n){return C._saxonBaseUri=n,C._saxonDocUri=n,C},getFnSignature:function(C,n,r){function h(Q){return Q.sig||(Q.sig="F a["+ft.Ba(Q,"arg").map(H=>H.as).join(",")+"] r["+Q.as+"]"),Q.sig}var m=null,c=rc.Kj[C.uri];if(c&&(m=c[C.local]),m&&!r.Xa&&m.XSLTonly)return null;if(m||C.uri!==Ft.ic||(at.type[C.local]?m={sig:"1F a[?A] r[?"+at.type[C.local].code+"]"}:bo[C.local]&&(m={sig:"1F a[1AS] r[*"+bo[C.local]+"]"})),!m&&r.$a&&r.$a.function){var _=C.toEQName();(r=r.$a.function[_+"#"+n])&&(C=_,m=r.actor,m=ut.U(m)?{sig:m.getAttribute("sig"),abstract:r.Oa.getAttribute("vis")==="ABSTRACT"}:{sig:h(m),abstract:!1},m.isUserFunction=!0,m.componentBinding=r.id)}else if(!m&&r.fixed&&r.fixed.Ja)if(c=`{${C.uri}}${C.local}#${n}`,c in r.fixed.Ld)m=r.fixed.Ld[c];else{let Q=C.toEQName();for(_ in r.fixed.Ja){let H=r.fixed.Ja[_].actor;if(H.N==="function"&&H.name===Q&&f(H).length===n){m={sig:h(H),isUserFunction:!0,componentBinding:_},r.fixed.Ld[c]=m;break}}}if(!m)if(C.uri===Ft.ih){for(C=0<n?"*":"",m=1;m<n;m++)C+=",*";m={sig:"1F a["+C+"] r[*]",variadic:!0},m.alphaTree=Le(m.sig)}else m=Oe.find("ExternalFunctionManager").getSignature(C.uri,C.local);return m&&!m.alphaTree&&(m.alphaTree=Le(m.sig)),m&&(C=m.alphaTree.a.length,n!=null&&n!==C&&(m.variadic?n<C:!(m.arity||[]).includes(n)))?null:m},parseNsAttribute:i,sefToJSON:F,setStaticContext:function(C){T=re(C.value,!0),C={};let n=T.resources;for(let r in n){let h=n[r];if(h.hasOwnProperty("err")){let m=h.err;m=m.replace(/Q{http:\/\/www\.w3\.org\/2005\/xqt-errors\}/,""),C[r]=new A(m+" "+h.description,m)}else C[r]=h}return T.resources=C,null},resetStaticContext:function(){return T=null},resetNameBase:function(){}}}(),ur={evaluateXDM:Re.evaluateXDM,evaluate:Re.evaluate,compileToXML:Re.compile,compile:Re.compileOnly,evaluateOnly:Re.evaluateOnly,compileGlobalContext:Re.compileGlobalContext,forceBaseURI:Re.forceBaseURI,getFnSignature:Re.getFnSignature,sefToJSON:Re.sefToJSON,setStaticContext:Re.setStaticContext,resetStaticContext:Re.resetStaticContext,resetNameBase:Re.resetNameBase};let Me=function(){function e(f,v={},a=!1){var u=J.xe("compiler");return v=Object.assign({},v),v.destination="application",v.initialMode="compile-complete",v.templateParams={"Q{}options":{traceProgress:!1,justStatic:!1}},v.stylesheetInternal=u,v.sourceNode=f,f=wn.transform(v,"sync").principalResult,a||(a=f=ur.sefToJSON(f.firstChild,!1),u=vo(a),a[Sr]=(0>u?4294967295+u+1:u).toString(16)),f}function t(f,v){if(J.Ij())return f;throw new A(`The ${v} feature requires a license`,"SXJS0006")}let i={autoResetIndexes:!0};return{atom:function(f,v){if(typeof f=="boolean")f=at.XS.boolean.fromBoolean(f);else if(typeof f=="number")f=at.XS.double.fromNumber(f);else if(typeof f=="string")f=at.XS.string.fromString(f);else if(f instanceof Uint8Array)f=at.XS.base64Binary.fromUint8Array(f);else throw new A("Value must be boolean, number, string, or Uint8Array","SXJS0006");if(v){let a=at.type[v];if(a)return a.cast(f);throw new A("Unknown type "+v,"SXJS0006")}return f},Ck:t,compile:function(f,v={},a=!1){if(J.ra())throw new A("SaxonJS.compile is not available","SXJS0006");return t(e,"SaxonJS.compile")(f,v,a)},getResource:function(f){let v=f.type||"text",a;if(f.file){var u=J.ec(f);a=J.Mf(f.file)}else if(f.location)if(u=f.location,u instanceof URL||(u=J.newURL(u,J.Df()),f.location=u.toString()),a=u.href,u.protocol==="file:")u=J.ec(f);else if(["http:","https:"].includes(u.protocol))u=J.ec(f);else return Promise.reject(new A("Unsupported URL protocol "+u.protocol,"SXJS0006"));else if(f.text)u=Promise.resolve(f.text),f.baseURI&&(a=f.baseURI);else return Promise.reject(new A("No resource supplied","SXJS0006"));return v==="xml"?u=u.then(l=>{try{let F=ut.dc(J.Sb(l));return F._saxonBaseUri=F._saxonDocUri=a,Promise.resolve(F)}catch(F){return Promise.reject(new A("Failed parsing XML in "+a+": "+F.message,F.code))}}):v==="json"&&(u=u.then(l=>{try{return Promise.resolve(ln.od(l,new It,new On))}catch(F){return Promise.reject(new A("Failed parsing JSON in "+a+": "+F.message,F.code))}})),u},serialize:function(f,v){return f=Ht.serialize(f,v),v&&v.encoding?J.aj(f,v.encoding):f},getProcessorInfo:function(){return{version:3,vendor:"Saxonica",vendorURL:"https://www.saxonica.com/",productName:"SaxonJS",productVersion:"3.0.0-beta1",isSchemaAware:!1,supportsSerialization:!0,supportsBackwardsCompatibility:!0,supportsNamespaceAxis:!0,supportsStreaming:!1,supportsDynamicEvaluation:!0,supportsHigherOrderFunctions:!0,xPathVersion:3.1,xsdVersion:1.1,releaseDate:"2024-12-18",platform:J.$g(),productEdition:J.ah()}},ll:function(){return{version:"3.0",vendor:"Saxonica","vendor-url":"https://www.saxonica.com/","product-name":"SaxonJS","product-version":"3.0.0-beta1","is-schema-aware":"no","supports-serialization":"yes","supports-backwards-compatibility":"yes","supports-namespace-axis":"yes","supports-streaming":"no","supports-dynamic-evaluation":"yes","supports-higher-order-functions":"yes","xpath-version":"3.1","xsd-version":"1.1"}},si:function(){return{"release-date":"2024-12-18",platform:J.$g(),"product-edition":J.ah()}},getConfigurationProperties:function(){let f={};return Object.keys(i).forEach(v=>{f[v]=i[v]}),f},getConfigurationProperty:function(f){if(f in i)return i[f]},setConfigurationProperties:function(f){let v={};return Object.keys(i).forEach(a=>{v[a]=i[a]}),Object.keys(f).forEach(a=>{a==="autoResetIndexes"||a==="nativeGetElementById"?i[a]=!!f[a]:Z.xa("The configuration property "+a+" is unrecognized")}),v},setConfigurationProperty:function(f,v){if(f==="autoResetIndexes"||f==="nativeGetElementById"){let a=i[f];return i[f]=!!v,a}Z.xa("The configuration property "+f+" is unrecognized")},resetIndexes:function(f){return J.ra()&&!f&&(f=window.document),f&&"_saxonIndexes"in f?(delete f._saxonIndexes,delete f._saxonIndexesBC,delete f._saxonXmlIdIndex,!0):!1}}}(),cr=function(){function e(n,r,h,m,c=null){if(r=r.fixed.fa,n=n.next()){if(n=jt.trim(n.toString()),c&&jt.Db(n))return c==="##local"&&(c=r.Dc(h)[""]||""),"Q{"+c+"}"+n;try{let _=T.QName.fromString(n,r.Sd(h,!1));if(_===null)throw new A("Invalid QName "+n,m,h);return"Q{"+_.uri+"}"+_.local}catch(_){throw _ instanceof A&&["FORG0001","XTDE0290"].includes(_.code)?new A(_.message,m):_}}else return null}function t(n){return(n=n.next())?n.value:""}function i(n){function r(c){return c.replace(/[^A-Za-z]/g,_=>"0"+_.codePointAt(0))}let h=ut.Ha;n=h.Sa(n).expand().reverse();let m="";for(let c=0;c<n.length;c++)if(n[c]instanceof cn)m+="N"+r(n[c].prefix);else if(n[c].nodeType===2)m+="A"+r(ut.aa(n[c]).toEQName());else{let _=h.Ic(n[c]).count()+1;m+=Se.Of(_,c%2===0?"a":"A")}return"d"+ut.hi(n[0])+m}function f(n,r,h){let m="";n[0].forEachItem(function(_){m+=_.value.trim()+" "});var c=m.trim().split(/\s+/);if(n=n[1]?n[1].next():E.nc(ue(r)),!E.U(n))throw new A("Context item is not a node for fn:"+h+"()","XPTY0004");if(n.nodeType!==9&&(n=E.nc(n)),h=[],r=Me.getConfigurationProperty,J.ra()&&n.nodeType===9&&r("nativeGetElementById")){for(let _ of c)(c=n.getElementById(_))&&h.push(c);return E.ed(wt(h))}"_saxonXmlIdIndex"in n&&n._saxonXmlIdIndex!==null||(n._saxonXmlIdIndex={},v(n));for(let _ of c)_ in n._saxonXmlIdIndex&&h.push(...n._saxonXmlIdIndex[_]);return E.ed(wt(h))}function v(n){let r={},h=C.Se(n),m;for(;(m=h.next())!==null;)if(m.nodeType===1){var c=m.getAttributeNS(Ft.xml,"id");c&&(c=c.trim(),c in r?r[c].push(m):r[c]=[m]),(c=m.getAttribute("id"))&&(c=c.trim(),c in r?r[c].push(m):r[c]=[m])}n._saxonXmlIdIndex=r}function a(n,r,h){let m=r;return n.forEachItem(function(c){m=h(c,m)}),m}function u(n){function r(m){throw new A(m,"FORG0006")}let h=n==="max"?function(m){return 0<m}:function(m){return 0>m};return function(m,c,_){let Q=m[0];c.fixed.fa.ib(_,"i")&&(Q=Q.filter(function(st){return!Bt.pc(st)})),m=Bt.Ob(_,m[1],"compare",c);let H=Bt.bi(m),B=T.untypedAtomic.matches,b=T.numeric.matches,w=T.double.matches,g=T.float.matches,x=T.anyURI.matches,I=T.string.matches;m=T.duration.matches;let L=T.yearMonthDuration.matches,R=T.dayTimeDuration.matches;c=T.QName.matches;let q=T.double.cast,$=T.float.cast,rt=T.string.cast;return Q=Q.mapOneToOne(function(st){return B(st)?q(st):st}),_=Q.next(),_===null?yt:(c(_)&&r(n+"() not defined over QName"),!m(_)||L(_)||R(_)||r(n+"() not defined over mixed durations"),At(a(Q,_,function(st,pt){if((I(st)&&b(pt)||I(pt)&&b(st))&&r("Cannot compare string with numeric"),(L(st)&&!L(pt)||R(st)&&!R(pt))&&r("Cannot compare mixed durations"),Bt.pc(pt))return w(st)?q(pt):pt;if(Bt.pc(st))return w(pt)?q(st):st;w(pt)&&!I(st)?st=q(st):w(st)&&!I(pt)?pt=q(pt):g(pt)&&!I(st)?st=$(st):g(st)&&!I(pt)&&(pt=$(pt)),x(pt)&&I(st)?pt=rt(pt):x(st)&&I(pt)&&(st=rt(st));try{return h(H(st,pt))?st:pt}catch(tt){throw tt instanceof A&&tt.code==="XPTY0004"&&(tt.code="FORG0006"),tt}})))}}function l(n,r){if(r.length!==2&&r.length!==5)throw new A("Wrong number of arguments ("+r.length+") for  "+n,"XPST0017")}function F(n,r){return n=n[0].next(),n===null?yt:r==="timezone"?n.timezoneOffset===null?yt:At(T.dayTimeDuration.Xg(n.timezoneOffset)):r==="seconds"?(r=n.proxy(),qr(r.getUTCSeconds()+r.getUTCMilliseconds()/1e3)):(n=n.proxy()[r](),r==="getUTCMonth"&&n++,he(n))}function S(n,r){return n=n[0].next(),n===null?yt:r!==5?he(Ni(n)[r]*Ii(n)):qr(Ni(n)[r]*Ii(n))}function O(n,r,h){function m(Q,H){return At(at.codes[r].fromDate(Q,H))}let c=n[0].next();if(!c)return yt;if(h=h.fixed.Bb.getTimezoneOffset(),n[1]){var _=n[1].next();if(n=_!==null?_.milliseconds/6e4:null,n!==null&&(-840>n||840<n))throw new A("timezone out of bounds "+_,"FODT0003")}else n=-h;if(_=c.timezoneOffset,_===null&&n===null)return At(c);if(_===null&&n!==null)return m(Bi(c,-h-n).UTCdate,n);if(_!==null&&n===null)return m(Bi(c,h+_).UTCdate,null);if(_!==null&&n!==null)return m(c.UTCdate,n)}function k(n,r,h,m){let c=n[1].expand(),_=n[2].expand()[0];return _ instanceof Ut.XdmFunction||Z.ka("fold-"+(m?"left":"right")+"() function argument not instance of XdmFunction"),n=n[0].expand(),m||(n=n.reverse()),n.forEach(Q=>{c=_.evaluate(m?[c,[Q]]:[[Q],c],r,h).expand()}),wt(c)}let d=null,o=null,E=ut,T=at.XS,C=E.Ha;return{abs:function(n){return n=n[0].next(),n===null?yt:At(n.abs())},"accumulator-after":function(n,r,h){return n=e(n[0],r,h,"XTDE3340"),wt(Do.Sh(h,n,ue(r),r))},"accumulator-before":function(n,r,h){return n=e(n[0],r,h,"XTDE3340"),wt(Do.Th(h,n,ue(r),r))},"adjust-date-to-timezone":function(n,r){return O(n,"AA",r)},"adjust-dateTime-to-timezone":function(n,r){return O(n,"AM",r)},"adjust-time-to-timezone":function(n,r){return O(n,"AT",r)},"analyze-string":function(n,r){let h=t(n[0]);var m=r.da.createDocumentFragment();let c=Ft.Ma,_=r.da.createElementNS(c,"analyze-string-result");return m.appendChild(_),h===""||(m=n[1].next().toString(),n=n[2]?n[2].next().toString():"",Gt.Bf(h,m,n,!1,!1).forEach(function(Q){let H;if(Q.Gc){let b;Q=Q.groups,H=r.da.createElementNS(c,"match");var B=0;for(let w=1;w<Q.length;w++)Q[w]&&(b=Q[0].indexOf(Q[w],B),b>B&&(B=r.da.createTextNode(Q[0].substring(B,b)),H.appendChild(B)),B=r.da.createElementNS(c,"group"),B.setAttribute("nr",w),B.appendChild(r.da.createTextNode(Q[w])),H.appendChild(B),B=b+Q[w].length);B<Q[0].length&&(B=r.da.createTextNode(Q[0].substring(B,b)),H.appendChild(B))}else H=r.da.createElementNS(c,"non-match"),B=r.da.createTextNode(Q.string),H.appendChild(B);_.appendChild(H)})),At(_)},apply:function(n,r,h){let m=r.fixed.fa,c=n[0].next();if(n=n[1].next().value,c instanceof Ut.XdmFunction)return c.evaluate(n,r,h);if(c instanceof qt||c instanceof It||Z.ka("Target of apply() is neither map(*) nor array(*) nor function(*): actual value "+Z.showValue(c)),1<n.length)throw new A("Too many arguments supplied in dynamic function call to array or map","XPTY0004",h);if(n[0].length!==1)throw new A("Argument supplied in dynamic function call to array or map is not a single item: "+Z.showValue(n),"XPTY0004",h);return r=m.Kb(n[0][0]).next(),c instanceof qt&&(r=T.numeric.matches(r)?r.toNumber():T.double.cast(r).toNumber()),wt(c.get(r))},"available-environment-variables":function(){return yt},"available-system-properties":function(){let n=[],r={version:"3.0",vendor:"Saxonica","vendor-url":"https://www.saxonica.com/","product-name":"SaxonJS","product-version":"3.0.0-beta1","is-schema-aware":"no","supports-serialization":"yes","supports-backwards-compatibility":"yes","supports-namespace-axis":"yes","supports-streaming":"no","supports-dynamic-evaluation":"yes","supports-higher-order-functions":"yes","xpath-version":"3.1","xsd-version":"1.1"};for(let h in r)r.hasOwnProperty(h)&&n.push(T.QName.fromParts("xsl",Ft.Qc,h));return wt(n)},avg:function(n,r){if(n=n[0].mapOneToOne(r.fixed.fa.Gh),r=n.next(),r===null)return yt;r={kg:r,count:1};let h=sn["a+a"];try{let m=a(n,r,function(c,_){return{kg:h(_.kg,c),count:_.count+1}});return At(sn["a/a"](m.kg,T.integer.fromNumber(m.count)))}catch{throw new A("Input to avg() contains a mix of numeric and non-numeric values ","FORG0006")}},"base-uri":function(n){return n[0].mapOneToOne(function(r){if(r=E.baseURI(r)){let h=r.indexOf("#");0<=h&&(r=r.substring(0,h))}return r===null?null:T.anyURI.fromString(r)})},boolean:function(n,r){return _t(r.fixed.fa.Bd(n[0]))},ceiling:function(n){return n=n[0].next(),At(n===null?null:n.Ef())},"codepoint-equal":function(n){let r=n[0].next();return n=n[1].next(),r===null||n===null?yt:_t(r.toString()===n.toString())},"codepoints-to-string":function(n){return Mt(Ct.ac(n[0].expand().map(r=>r.toNumber())))},"collation-key":function(n,r,h){let m=n[0].next();return n=Bt.Ob(h,n[1],"collationKey",r),At(T.base64Binary.fromUtf8EncodedString(n(m.value)))},collection:function(n,r,h){var m=r.fixed.fa;let c=r.fixed.options.Hg;if(c&&typeof c=="function"){let _=null;if(n[0]&&(n=n[0].next(),n!==null&&(_=J.pb(n.toString(),m.Ea(h,r)))),m=_?c(_):c(),typeof m>"u")throw new A("No available collection for supplied URI: "+_,"FODC0002",h);if(m=Yt(m),r=r.fixed.ye,r!==null)for(h=0;h<m.length;h++)m[h]=r(m[h]);return Array.isArray(m)?wt(m):At(m)}if(n[0])throw new A("Unknown collection (no collectionFinder supplied)","FODC0002",h);return yt},compare:function(n,r,h){let m=n[0].next(),c=n[1].next();return m===null||c===null?yt:(n=Bt.Ob(h,n[2],"compare",r),he(n(m.value,c.value)))},concat:function(n){return Mt(n.map(function(r){return r=r.next(),r===null?"":T.string.cast(r)}).join(""))},contains:function(n,r,h){let m=t(n[0]),c=t(n[1]);return n=Bt.Ob(h,n[2],"contains",r),_t(n(m,c))},"contains-token":function(n,r,h){function m(Q){return _(Q,c)}let c=t(n[1]);if(c=jt.trim(c),c==="")return _t(!1);let _=Bt.Ob(h,n[2],"equals",r);for(;(r=n[0].next())!==null;)if(0<=r.toString().split(/[ \n\r\t]+/).findIndex(m))return _t(!0);return _t(!1)},"copy-of":function(n,r,h){let m=un(r),c=Gt.zc(m);return n[0].forEachItem(_=>Gt.df(_,r,c,h,!0,!0)),c.close(),wt(m.Gb)},count:function(n){return he(n[0].count())},"current-date":function(n,r){return At(T.date.fromDate(r.fixed.Bb,-r.fixed.Bb.getTimezoneOffset()))},"current-dateTime":function(n,r){return At(T.dateTimeStamp.fromDate(r.fixed.Bb,-r.fixed.Bb.getTimezoneOffset()))},"current-group":function(){throw new A("The current-group() function cannot be invoked dynamically","XTDE1061")},"current-grouping-key":function(){throw new A("The current-grouping-key() function cannot be invoked dynamically","XTDE1071")},"current-merge-group":function(n,r){if(r.vb===null)throw new A("There is no current merge group","XTDE3480");if(n[0]){if(n=n[0].next().value,r=r.vb.groups[n])return wt(r);throw new A("Unknown merge source "+n,"XTDE3490")}return wt(r.vb.items)},"current-merge-key":function(n,r){if(r.vb===null)throw new A("There is no current merge group","XTDE3510");return wt(r.vb.keys)},"current-output-uri":function(n,r){return n=r.nb.length===0?null:r.nb[r.nb.length-1],n==null||r.pa==="function"?yt:At(n)},"current-time":function(n,r){return At(T.time.fromDate(r.fixed.Bb,-r.fixed.Bb.getTimezoneOffset()))},data:function(n,r){return n[0].mapOneToMany(r.fixed.fa.Kb)},dateTime:function(n){let r=n[0].next();if(n=n[1].next(),r===null||n===null)return yt;let h="";if(r.timezoneOffset!==null){if(n.timezoneOffset===null)h=kr(r);else if(r.timezoneOffset!==n.timezoneOffset)throw new A("timezones are incompatible ","FORG0008")}return At(T.dateTime.fromString(r.toString().substring(0,10)+"T"+n.toString()+h))},"day-from-date":function(n){return F(n,"getUTCDate")},"day-from-dateTime":function(n){return F(n,"getUTCDate")},"days-from-duration":function(n){return S(n,2)},"deep-equal":function(n,r,h){return r=Bt.Ob(h,n[2],"equals",r),_t(In(n[0],n[1],r))},"default-collation":function(){return Mt(Bt.Vc)},"default-language":function(){return At(T.language.fromString("en"))},"distinct-values":function(n,r,h){r=Bt.Te(h,n[1],r);let m=Bt.kf(r);return n[0].filter(function(c){return m.containsKey(c)?!1:(m.inSituPut(c,!0),!0)})},doc:function(n,r,h){if(n=Jt.Zd(n,r,h),n===null)return yt;try{let m=Jt.xc(n,r),c=r.fixed.ye;return c&&(m=c(m)),At(m)}catch(m){throw m}},"doc-available":function(n,r,h){let m=Jt.Zd(n,r,h);return m===null?_t(!1):Jt.th(function(){Jt.xc(m,r)})},document:function(n,r,h){let m=r.fixed.fa,c,_;if(n[1]&&(c=E.baseURI(n[1].next()),!c))throw new A("No base URI available for second argument of document()","XTDE1162");c||(_=m.Ea(h,r));let Q=r.fixed.ye;return E.ed(n[0].mapOneToMany(function(H){let B=c||(E.U(H)?E.baseURI(H):_);return m.Kb(H).mapOneToOne(function(b){if(B===null)throw new A("No base URI for document('"+b+"')","XTDE1162");return b=Jt.xc(J.pb(b.toString(),B),r),Q!==null&&(b=Q(b)),b})}))},"document-uri":function(n){return n=n[0].next(),n!==null&&n.nodeType===9&&n._saxonDocUri?At(T.anyURI.fromString(n._saxonDocUri)):yt},"element-available":function(n,r,h){return n=e(n[0],r,h,"XTDE1440","##local").split("}"),(r=n[0].substring(2)==="http://www.w3.org/1999/XSL/Transform")&&(o==null&&(o=J.xe("elements")),o[n[1]]||(r=!1)),_t(r)},"element-with-id":function(n,r){return f(n,r,"element-with-id")},empty:function(n){return _t(n[0].next()===null)},"encode-for-uri":function(n){return n=encodeURIComponent(t(n[0])).replace(/[!'()*]/g,function(r){return"%"+r.charCodeAt(0).toString(16).toUpperCase()}),Mt(n)},"ends-with":function(n,r,h){let m=t(n[0]),c=t(n[1]);return n=Bt.Ob(h,n[2],"endsWith",r),_t(n(m,c))},"environment-variable":function(){return yt},error:function(n){if(n[0]===void 0)throw new A("fn:error() invoked","FOER0000");var r=n[0].next();r=r?r.toEQName():"FOER0000";let h=n[1]?t(n[1]):"";throw r=new A(h,r),n[2]&&(r.errorObject=n[2].next()),r},"escape-html-uri":function(n){return Mt(ft.escape(t(n[0]),function(r){return 32>r||126<r}))},"exactly-one":function(n){if(n=n[0].expand(),n.length!==1)throw new A("Required length 1, actual length "+n.length,"FORG0005");return At(n[0])},exists:function(n){return _t(n[0].next()!==null)},false:function(){return _t(!1)},filter:function(n,r,h){let m=n[1].expand()[0];return m.evaluate||Z.ka("filter() argument is not a function"),n[0].mapOneToOne(function(c){let _=m.evaluate([[c]],r,h).expand();if(Array.isArray(_)&&_.length!==1||!T.boolean.matches(_[0]))throw new A("Wrong type for function result in filter(). Expecting xs:boolean, supplied value is "+Z.showValue(_),"XPTY0004",h);if(_[0].toBoolean())return c})},floor:function(n){return n[0].mapOneToOne(function(r){return r.floor()})},"fold-left":function(n,r,h){return k(n,r,h,!0)},"fold-right":function(n,r,h){return k(n,r,h,!1)},"format-date":function(n){l("format-date",n);let r=n[0].next();return r===null?yt:n[2]?Mt(Se.Dd("date",r,n[1].next().toString(),n[2].next(),n[3].next(),n[4].next())):Mt(Se.Dd("date",r,n[1].next().toString()))},"format-dateTime":function(n){l("format-dateTime",n);let r=n[0].next();return r===null?yt:n[2]?Mt(Se.Dd("dateTime",r,n[1].next().toString(),n[2].next(),n[3].next(),n[4].next())):Mt(Se.Dd("dateTime",r,n[1].next().toString()))},"format-integer":function(n){let r=n[0].next();return Mt(r===null?"":Se.Of(r,n[1].next().toString()))},"format-number":function(n,r,h){let m=r.fixed.fa;var c=n[2]?e(n[2],r,h,"FODF1280"):"Q{}";if(h=m.fe(h,r).bb[c!==null?c:"Q{}"],!h)throw new A("Unknown decimal format "+c,"FODF1280");return c=n[0].next(),c===null?c=Number.NaN:c=c.toDouble().value,Mt(Se.wi(c,n[1].next().toString(),h,r))},"format-time":function(n){l("format-time",n);let r=n[0].next();return r===null?yt:n[2]?Mt(Se.Dd("time",r,n[1].next().toString(),n[2].next(),n[3].next(),n[4].next())):Mt(Se.Dd("time",r,n[1].next().toString()))},"for-each":function(n,r,h){let m=r.fixed.fa,c=n[1].expand()[0];if(c instanceof Ut.XdmFunction)return n[0].mapOneToMany(function(_){return c.evaluate([[_]],r,h)});if(c instanceof It)return n[0].mapOneToMany(_=>wt(c.get(m.Kb(_).next())));if(c instanceof qt)return n[0].mapOneToMany(function(_){return _=m.Kb(_).next(),_=T.numeric.matches(_)?_.toNumber():T.double.cast(_).toNumber(),wt(c.get(_))});Z.ka("for-each() function object not instance of XdmFunction | XdmArray | XdmMap")},"for-each-pair":function(n,r,h){let m=n[2].expand();if(m.length!==1)throw new A("for-each-pair() must have exactly one function item as the third argument. Supplied length "+m.length,"XPTY0004",h);m=m[0],m instanceof Ut.XdmFunction||Z.ka("Function object not instance of XdmFunction");let c=[],_=n[0];n=n[1];let Q=_.next(),H=n.next();for(;Q&&H;)c=c.concat(m.evaluate([[Q],[H]],r,h).expand()),Q=_.next(),H=n.next();return wt(c)},"function-arity":function(n){return n=n[0].next(),At(T.integer.fromNumber(n instanceof It||n instanceof qt?1:n.arity))},"function-available":function(n,r,h){let m=!1,c=e(n[0],r,h,"XTDE1400",Ft.Ma),_=n[1]?n[1].next().toNumber():-1,Q=r.fixed.Ja;return Object.keys(Q).forEach(function(H){H=Q[H],H.name===c&&H.actor&&H.actor.N==="function"&&(0>_?m=!0:(H=ft.Ba(H.actor,"arg").length,_===H&&(m=!0)))}),m||(n=T.QName.fromEQName(c),d==null&&(d=J.xe("functions")),m=(r=d[n.uri])&&r[n.local]?n.local==="concat"&&n.uri===Ft.Ma&&(_===-1||2<=_)?!0:0<=_?0<=r[n.local].indexOf(_):!0:!1),_t(m)},"function-lookup":function(n,r,h){let m=n[0].next();n=n[1].next().toNumber();var c=Oe.find("SaxonJS").internals.XPath;let _=r.X(!0);return _.Xa=!0,c=c.getFnSignature(m,n,_),c?(r=c.isUserFunction?new Ut.rf(c,r):m.uri===Ft.ic?new Ut.nf(c,m,h):new Ut.Ae(c,m,n,h,r),At(r)):yt},"function-name":function(n){if(n=n[0].next(),!(n instanceof Ut.XdmFunction))throw new A("Input to function-name() is not an XdmFunction ","XXXX9999");return n.cc()&&n.cc().uri!==Ft.og?At(n.cc()):yt},"generate-id":function(n){return n=n[0].next(),Mt(n?i(n):"")},"has-children":function(n){return _t(C.Ia(n[0].next()).next()!==null)},head:function(n){return At(n[0].next())},"hours-from-dateTime":function(n){return F(n,"getUTCHours")},"hours-from-duration":function(n){return S(n,3)},"hours-from-time":function(n){return F(n,"getUTCHours")},id:function(n,r){return f(n,r,"id")},idref:function(){return yt},"implicit-timezone":function(n,r){return At(T.dayTimeDuration.Xg(-r.fixed.Bb.getTimezoneOffset()))},"index-of":function(n,r,h){let m=Lt(n[0]),c=n[1].next();n=Bt.Ob(h,n[2],"equals",r);let _=Bt.li(n);return m.mapOneToOne(function(Q){try{return _(Q,c)?T.integer.fromNumber(m.position):null}catch{return null}})},innermost:function(n,r,h){let m=r.fixed.fa.ib(h,"p")?n[0]:E.ed(n[0]);return new Vr(function*(){let c=null,_;for(;(_=m.next())!=null;)if(c)if(C.Uc(_).some(Q=>Q===c))c=_;else{let Q=c;c=_,yield Q}else c=_;c&&(yield c)}())},"in-scope-prefixes":function(n){return n=n[0].next(),wt(E.Dc(n).map(function(r){return T.string.fromString(r.prefix)}))},"insert-before":function(n){let r=n[1].next().value,h=n[2],m=Lt(n[0]);return 1>r?$e([h,m]):r>m.last()?$e([m,h]):m.mapOneToMany(function(c){return m.position===r?$e([n[2],At(c)]):At(c)})},"iri-to-uri":function(n){return Mt(ft.escape(t(n[0]),function(r,h){return 32>=r||126<r||/[<>"{}|\\^`]/.test(h)}))},"json-doc":function(n,r,h){return h=Jt.zd(n,r,h),h?(h=Jt.ui(h,r),n=n[1]?n[1].next():null,At(ln.od(h,n,r))):yt},"json-to-xml":function(n,r,h){let m=r.fixed.fa;var c=n[0].next();return c===null?yt:(n=n[1]?n[1].next():null,c=ln.nj(c.toString(),n,r),n=r.da.createDocumentFragment(),n.appendChild(c),n._saxonBaseUri=m.Ea(h,r),At(n))},key:function(n,r,h){function m(pt){return pt=R?T.string.cast(pt):pt,L.containsKey(pt)?(pt=wt(L.get(pt)),x===g?pt:pt.filter(function(tt){return C.Sa(tt).filter(function(Y){return Y===g}).next()!==null})):yt}function c(pt){return{visibility:"PRIVATE",Oa:pt,oh:H,actor:pt,Je:pt.binds.split(" ").map(function(tt){return parseInt(tt,10)})}}let _=r.fixed.fa;var Q=e(n[0],r,h,"XTDE1260");let H=_.fe(h,r),B=H.keys[Q];if(!B)throw new A("Unknown key "+Q,"XTDE1260");let b=B.lg,w=_.ib(B.Fd[0],"c"),g,x;if(n[2])g=n[2].next(),E.U(g)&&(x=E.nc(g));else{var I=ue(r);E.U(I)&&(x=g=E.nc(I))}if(!x||x.nodeType!==9&&x.nodeType!==11)throw new A("No containing document for key()","XTDE1270",h);"_saxonIndexes"in x||(x._saxonIndexes={},x._saxonIndexesBC={}),h=x._saxonIndexes;let L=h[b];if(L==="under construction")throw new A("Definition of key "+Q+" is circular","XTDE0640");let R=!1;if(L)R=x._saxonIndexesBC[b];else{Q=Bt.Te(B.Fd[0],null,r),L=Bt.kf(Q,w),h[b]="under construction",Q=function(tt){return $e([C.self(tt),C.jb(tt),C.Ga(tt)])},I=function(tt){return $e([C.self(tt),C.Ga(tt)])};let pt=function(tt){return $e([C.self(tt),C.jb(tt)])};for(let tt=0;tt<B.Fd.length;tt++){var q=B.Fd[tt];let Y=/b/.test(q.flags);R=R||Y;var $=void 0;$=q.C[0];let P=r.X(!0);if(P.oa=c(q),P.focus=me(x),$.N==="p.nodeSet")$=_.evaluate($.C[0],P);else{let U=je.kd($);$=C.he(x);var rt=_.ib(q,"a"),st=_.ib(q,"n");(rt||st)&&($=$.mapOneToMany(rt&&st?Q:rt?I:pt)),$=$.filter(function(nt){return P.focus=me(x),U(nt,P)})}for(rt=q.C[1],st=r.X(!0),st.oa=c(q),st.pa="key";(q=$.next())!==null;){st.focus=me(q);let U=_.evaluate(rt,st),nt=function(W,G){L.containsKey(W)?0>L.get(W).indexOf(G)&&(L.get(W).push(G),1<B.Fd.length&&L.get(W).sort(E.mb)):L.inSituPut(W,[G])};if(w)nt(U.expand(),q);else{let W;for(;(W=U.next())!==null;)Bt.pc(W)||(Y&&(W=T.string.cast(W)),nt(W,q))}}}h[b]=L,x._saxonIndexesBC[b]=R}return n=n[1],w?m(n.expand()):n.mapOneToMany(m)},lang:function(n,r){if(r=n[1]?n[1].next():ue(r),!r)throw new A("No context item for lang()","XPDY0002");if(!E.U(r))throw new A("Context item is not a node in lang()","XPTY0004");return n=t(n[0]).toLowerCase(),r=C.Sa(r).filter(function(h){return h.nodeType===1&&h.hasAttribute("xml:lang")}).next(),r?(r=r.getAttribute("xml:lang").toLowerCase(),_t(n===r||r.length>n.length+1&&r.substring(0,n.length)===n&&r.charAt(n.length)==="-")):_t(!1)},last:function(n,r){return He(r,"XPDY0002","last()"),he(r.focus.last())},"load-xquery-module":function(){throw new A("No XQuery processor available","FOQM0006")},"local-name":function(n){return n=E.aa(n[0].next()),Mt(n?n.local:"")},"local-name-from-QName":function(n){return n=n[0].next(),n===null?yt:At(at.type.NCName.fromString(n.local))},"lower-case":function(n){return Mt(t(n[0]).toLowerCase())},matches:function(n){let r=t(n[0]);var h=n[1].next().toString();return n=jt.ng(n[2]?n[2].next().toString():""),h=jt.ue(h,n,r),_t(0<=r.search(h))},max:u("max"),min:u("min"),"minutes-from-dateTime":function(n){return F(n,"getUTCMinutes")},"minutes-from-duration":function(n){return S(n,4)},"minutes-from-time":function(n){return F(n,"getUTCMinutes")},"month-from-date":function(n){return F(n,"getUTCMonth")},"month-from-dateTime":function(n){return F(n,"getUTCMonth")},"months-from-duration":function(n){return S(n,1)},name:function(n){return n=E.aa(n[0].next()),Mt(n?n.toString():"")},"namespace-uri":function(n){return n=E.aa(n[0].next()),At(T.anyURI.fromString(n?n.uri:""))},"namespace-uri-for-prefix":function(n){var r=t(n[0]);return n=n[1].next(),r=r==="xml"?Ft.xml:n.lookupNamespaceURI(r===""?null:r),r!==null?At(T.anyURI.fromString(r)):yt},"namespace-uri-from-QName":function(n){return n=n[0].next(),n===null?yt:At(T.anyURI.fromString(n.uri))},nilled:function(n){return(n=n[0].next())&&n.nodeType===1?_t(!1):yt},"node-name":function(n){return At(E.aa(n[0].next()))},"normalize-space":function(n){return n=t(n[0]),Mt(Ct.Ib(n))},"normalize-unicode":function(n){if(String.prototype.normalize){let r=t(n[0]);if(n=n[1]?n[1].next().toString().toUpperCase().trim():"NFC",["NFC","NFD","NFKC","NFKD"].includes(n))return Mt(r.normalize(n));if(n==="")return Mt(r)}throw new A("normalize-unicode(): not supported on this Javascript platform","FOCH0003")},not:function(n,r){return _t(!r.fixed.fa.Bd(n[0]))},number:function(n){return At(at.XS.numeric.Id(n[0].next()))},"one-or-more":function(n){if(n=We(n[0]),n.peek()===null)throw new A("Required length >= 1, actual length zero","FORG0004");return n},outermost:function(n,r,h){r=r.fixed.fa.ib(h,"p"),n=n[0],r||(n=E.ed(n));let m=null;return n.filter(function(c){return m===null?(m=c,!0):C.Uc(c).some(_=>_===m)?!1:(m=c,!0)})},"parse-ietf-date":function(n){return n[0].mapOneToOne(function(r){function h(g){return g.length===1?"0"+g:g}function m(){throw new A("Invalid IETF date/time "+r.toString(),"FORG0010")}var c=r.toString().trim().toLowerCase();c=c.replace(/^(monday|tuesday|wednesday|thursday|friday|saturday|sunday|mon|tue|wed|thu|fri|sat|sun),?\s+/,"");let _,Q,H;if(/^[a-z]/.test(c))if(_=/^([a-z]{3})(?:\s*-\s*|\s+)(\d\d\d?\d?)\s+([\d:.]+)\s*([a-z]+|[+\-]\d\d?:?(?:\d\d)?(?:\s*\(\s*[a-z]+\s*\))?)?\s+(\d+)$/,c=_.exec(c),c!==null){var B=c[1],b=c[2];H=c[3];var w=c[4];Q=c[5]}else m();else _=/^(\d+)(?:\s*-\s*|\s+)([a-z]{3})(?:\s*-\s*|\s+)(\d\d\d?\d?)\s+([\d:.]+)\s*([a-z]+|[+\-]\d\d?:?(?:\d\d)?(?:\s*\(\s*[a-z]+\s*\))?)?$/,c=_.exec(c),c!==null?(b=c[1],B=c[2],Q=c[3],H=c[4],w=c[5]):m();Q.length===2&&(Q="19"+Q),B="jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec".indexOf(B||"*"),0>B&&m(),c={ut:"Z",utc:"Z",gmt:"Z",est:"-05:00",edt:"-04:00",cst:"-06:00",cdt:"-05:00",mst:"-07:00",mdt:"-06:00",pst:"-08:00",pdt:"-07:00"},/^[0-9]:/.test(H)&&(H="0"+H),H.length===5&&(H+=":00"),w&&(w=/([a-z]+)|([+\-]\d\d?:?(?:\d\d)?)(?:\s*\(\s*([a-z]+)\s*\))?$/.exec(w),(!w[3]||w[3]in c)&&(!w[1]||w[1]in c)||m(),w=w[1]?w[1]:w[2],/^[+\-][0-9]((:|$)|[0-9]{2}$)/.test(w)&&(w=w.charAt(0)+"0"+w.substring(1)),w in c?w=c[w]:w.length===3?w+=":00":w.length===4?w+="00":w.length===5&&(w=w.substring(0,3)+":"+w.substring(3))),b=Q+"-"+h((B/4+1).toString())+"-"+h(b)+"T"+H+(w||"Z");try{return T.dateTime.fromString(b)}catch{throw new A("''"+r.toString()+"'' is not a valid IETF date","FORG0010")}})},"parse-json":function(n,r){let h=n[0].next();return h===null?yt:(n=n[1]?n[1].next():null,At(ln.od(h.toString(),n,r)))},"parse-xml":function(n,r,h){if(n=n[0].next(),n===null)return yt;let m=r.fixed.fa;try{let c=J.Sb(n.toString());return c._saxonBaseUri=m.Ea(h,r),At(c)}catch(c){throw new A(c.message,"FODC0006")}},"parse-xml-fragment":function(n,r,h){let m=r.fixed.fa;return n[0].mapOneToOne(function(c){let _=/^<\?xml(?:\s+version\s*=\s*(['"])1.[0-9]+['"])?\s+encoding\s*=\s*(['"][A-Za-z](?:[A-Za-z0-9._\-])*)['"]\s*\?>/;if(c=c.toString(),/^<\?xml/.test(c)&&!_.test(c))throw new A("Invalid XML header for a text declaration","FODC0006");c=c.replace(_,"");let Q;try{Q=J.Sb("<z>"+c+"</z>")}catch(B){throw new A(B.message,"FODC0006")}let H=r.da.createDocumentFragment();return C.Ia(Q.documentElement).forEachItem(function(B){H.appendChild(B)}),H._saxonBaseUri=m.Ea(h,r),H})},path:function(n){return n[0].mapOneToOne(function(r){function h(m){return C.Ic(m).filter(function(c){return m.nodeType===c.nodeType})}return T.string.fromString(function(m){if([9,11].includes(m.nodeType))return"/";let c="",_=m;for(;_;){if(m=E.Va(_),!m)return[9,11].includes(_.nodeType)?c:"Q{http://www.w3.org/2005/xpath-functions}root()"+c;switch(_.nodeType){case 9:case 11:return c;case 1:let Q=E.aa(_);c=`/${Q.toEQName()}[${1+h(_).filter(H=>E.aa(H).equals(Q)).count()}]${c}`;break;case 3:case 4:c=`/text()[${1+h(_).count()}]`;break;case 8:c=`/comment()[${1+h(_).count()}]`;break;case 7:c=`/processing-instruction(${_.target})[${1+h(_).filter(H=>_.target===H.target).count()}]`;break;case 2:c=`/@${0>_.name.indexOf(":")?_.name:E.aa(_).toEQName()}`;break;default:c=`/namespace::${_.prefix!==""?_.prefix:"*[Q{"+Ft.Ma+'}local-name()=""]'}`}_=m}}(r))})},"prefix-from-QName":function(n){return n[0].mapOneToOne(function(r){return r.prefix===""?null:T.NCName.fromString(r.prefix)})},position:function(n,r){return He(r,"XPDY0002","position()"),he(r.focus.position)},QName:function(n){var r=n[1].next().value;let h=r.split(":"),m=h.length===2?h[0]:"";if(n=t(n[0]),m!==""&&n==="")throw new A("Prefix but no URI for QName()","FOCA0002");if(h.length===2&&m===""||m!==""&&!jt.Db(m))throw new A(r+" not valid for QName()","FOCA0002");if(r=h.length===2?h[1]:h[0],!jt.Db(r))throw new A(r+" not valid local name for QName()","FOCA0002");return At(T.QName.fromParts(m,n,r))},"random-number-generator":function(n,r){n=new It,n.inSituPut(T.string.fromString("number"),[T.double.fromNumber(Math.random())]);var h=T.QName.fromParts("fn",Ft.Ma,"random-number-generator"),m=Oe.find("SaxonJS").internals.XPath,c=m.getFnSignature(h,0,r);return h=new Ut.Ae(c,h,0,{},r),n.inSituPut(T.string.fromString("next"),[h]),h=T.QName.fromParts("saxon",Ft.qb,"permute"),c=r.X(),c.Xa=!0,m=m.getFnSignature(h,1,c),r=new Ut.Ae(m,h,1,{},r),n.inSituPut(T.string.fromString("permute"),[r]),At(n)},"regex-group":function(n,r){n=n[0].next().toNumber();try{return Mt(r.Eb[n]||"")}catch{return Mt("")}},remove:function(n){let r=n[1].next().toNumber(),h=Lt(n[0]);return h.filter(function(){return h.position!==r})},replace:function(n){let r=t(n[0]),h=jt.ng(n[3]?t(n[3]):""),m=0,c=jt.ue(n[1].next().toString(),h+"g",null,_=>{m=_});if(c.test(""))throw new A("Regular expression matches zero-length string","FORX0003");return n=jt.fi(t(n[2]),h,m),Mt(r.replace(c,n))},"resolve-QName":function(n){let r=n[1].next();return n[0].mapOneToOne(function(h){try{return E.vj(r,h.toString(),!0)}catch(m){throw m instanceof A&&m.code==="FORG0001"&&(m.code=jt.fh(h)?"FONS0004":"FOCA0002"),m}})},"resolve-uri":function(n,r,h){let m=r.fixed.fa;if(n[1]){let c=n[1].next();r=c?c.toString():m.Ea(h,r)}else r=m.Ea(h,r);if(n=n[0].next(),n===null)return yt;if(n=n.toString(),h=E.fd(n),r!==null&&(r=r.replace(/^file:\/(?!\/)/,"file:///"),/#/.test(r)))throw new A("Base URI "+r+" contains a fragment identifier","FORG0002");if(!h&&r!==null&&!E.fd(r))throw new A("resolve-uri: invalid URI (base="+r+", relative="+n+")","FORG0002");return n=h?n:J.pb(n,r).toString(),At(T.anyURI.fromString(n))},reverse:function(n){return wt(n[0].expand().slice().reverse())},root:function(n){return n[0].mapOneToMany(r=>C.Sa(r)).filter(r=>!E.Va(r))},round:function(n){return n[0].mapOneToOne(r=>r.round(n[1]?Math.min(n[1].next().value,1e4):0))},"round-half-to-even":function(n){return n[0].mapOneToOne(r=>r.ef(n[1]?Math.min(n[1].next().value,1e4):0))},"seconds-from-dateTime":function(n){return F(n,"seconds")},"seconds-from-duration":function(n){return S(n,5)},"seconds-from-time":function(n){return F(n,"seconds")},serialize:function(n,r){function h(_){_.method="xml",_.indent=!1,_["escape-solidus"]=!0,_["omit-xml-declaration"]=!0}let m=new Ht.xf,c={};if(n[1]){let _=n[1].next();if(_===null)h(c);else if(ut.U(_)){if(!ut.$f(_))throw new A("Second argument supplied to serialize() is wrong kind of node","XPTY0004");Ht.cf(_,c,"XPTY0004")}else{if(!(_ instanceof It))throw new A("Second argument supplied to serialize() does not match required type","XPTY0004");let Q=function(H,B,b,w,g=!1){let x=at.XS.string.fromString(H);if(_.containsKey(x)){let I=_.get(x);if(0<I.length&&ft.isArray(I[0]))if(b){let L=[];I[0].flatten(R=>L.push(R)),I=L}else throw new A("fn:serialize(): supplied value of "+x+" is invalid","XPTY0004");if(I.length!==1&&!b&&!g||!I.every(L=>L.code==="AZ"||B.matches(L)))throw new A("fn:serialize(): supplied value of "+x+" is invalid","XPTY0004");c[H]=g&&I.length===0?null:w(b?I:I[0].code==="AZ"?B.cast(I[0]):I[0])}};"doctype-public doctype-system encoding item-separator json-node-output-method media-type method normalization-form version".split(" ").forEach(H=>Q(H,at.XS.string,!1,B=>B.toString())),"allow-duplicate-names byte-order-mark escape-uri-attributes include-content-type indent escape-solidus omit-xml-declaration undeclare-prefixes".split(" ").forEach(H=>Q(H,at.XS.boolean,!1,B=>B.toBoolean())),Q("standalone",at.XS.boolean,!1,H=>H.toBoolean(),!0),Q("html-version",at.XS.decimal,!1,H=>H.toNumber()),["cdata-section-elements","suppress-indentation"].forEach(H=>Q(H,at.XS.QName,!0,B=>{let b="";for(let w=0;w<B.length;w++)b+=B[w].toEQName()+" ";return b})),c["omit-xml-declaration"]===void 0&&(c["omit-xml-declaration"]=!0),function(H){var B=at.XS.string.fromString(H);if(_.containsKey(B)){var b=_.get(B);if(b.length!==1||!b.every(g=>g instanceof It))throw new A("fn:serialize(): supplied value of "+B+" is invalid","XPTY0004");b=b[0];var w=function(g){return T.string.matches(g)};if(!b.conforms(w,w,function(g){return g===1}))throw new A("fn:serialize(): supplied value of "+B+" is invalid","XPTY0004");B=re(b,!0),b={min:0,max:0,va:{}};for(let g in B)if(B.hasOwnProperty(g)){if(1<g.length)throw new A("fn:serialize(): Keys in a character map must all be one-character strings. Found "+g,"SEPM0016");w=g.codePointAt(0),(b.min===0||w<b.min)&&(b.min=w),w>b.max&&(b.max=w),b.va[w]=B[g]}c[H]=b}}("use-character-maps")}}else h(c);return Ht.serialize(n[0].expand(),c,m,r),Mt(m.toString())},snapshot:function(n,r,h){return n[0].mapOneToOne(function(m){function c(I){if(0<I.length){let L=I.pop();Gt.hg(L,r,"cm",function(){C.Ga(L).forEachItem(R=>Q.append(R)),0<I.length?c(I):(w?Gt.hg(b,r,"",function(){C.Ga(b).forEachItem(R=>Q.append(R)),C.jb(b).forEachItem(R=>Q.append(R))},Q):Gt.df(m,r,Q,h,!0,!0),g=_.lc.lastChild)},Q)}}let _=un(r),Q=Gt.zc(_);if(!E.Va(m))return Gt.df(m,r,Q,h,!0,!0),Q.close(),wt(_.Gb).next();let H=m.nodeType,B=E.aa(m),b=m,w=[2,13].includes(H);w&&(b=E.Va(b)),Q.Da();let g,x=C.Uc(b).expand();switch(0<x.length?c(x):(Gt.df(m,r,Q,h,!0,!0),g=_.lc.lastChild),Q.wa(),g||Z.ka("snapshot: failed to find marked node"),H){case 2:return E.Ha.Ga(g).filter(I=>E.aa(I).equals(B)).next();case 13:return E.Ha.jb(g).filter(I=>E.aa(I).equals(B)).next();default:return g}})},sort:function(n,r,h){let m=Bt.Te(h,n[1],r),c=ft.Kb;if(n[2]){let _=n[2].next();c=function(Q){return _.evaluate([[Q]],r,h)}}return wt(n[0].expand().slice().sort(function(_,Q){return n[1]?ni(c(_),c(Q),m):ni(c(_),c(Q))}))},"starts-with":function(n,r,h){let m=t(n[0]),c=t(n[1]);return n=Bt.Ob(h,n[2],"startsWith",r),_t(n(m,c))},"static-base-uri":function(n,r,h){return(n=r.fixed.fa.Ea(h,r))?At(T.anyURI.fromString(n)):yt},"stream-available":function(){return _t(!1)},string:function(n,r){if(r=r.fixed.fa,n=n[0].next(),!n)return Mt("");if(r.isArray(n)||r.isMap(n)||r.gd(n))throw new A("Input to string() is a function item ","FOTY0014");return r.Kb(n).mapOneToOne(function(h){return T.string.cast(h)})},"string-join":function(n){let r="",h=n[1]?n[1].next().value:"",m,c=!0;for(;(m=n[0].next())!==null;)c||(r+=h),r+=m.toString(),c=!1;return Mt(r)},"string-length":function(n){return he(Ct.La(t(n[0])).length)},"string-to-codepoints":function(n){return wt(Ct.La(t(n[0])).map(T.integer.fromNumber))},subsequence:function(n){let r=Math.round(n[1].next().toNumber()),h=n[2]?r+Math.round(n[2].next().toNumber()):Number.POSITIVE_INFINITY;return new Xi(n[0],r,h)},substring:function(n){var r=Math.round(n[1].next().toNumber());let h=n[2]?r+Math.round(n[2].next().toNumber()):Number.POSITIVE_INFINITY;return n=new Vr(t(n[0])[Symbol.iterator]()),r=new Xi(n,r,h),Mt(r.expand().join(""))},"substring-after":function(n,r,h){let m="",c=t(n[0]),_=t(n[1]),Q;return(Q=Bt.Ob(h,n[2],"indexOf",r)(c,_))!==-1&&(m=c.substring(Q+_.length)),Mt(m)},"substring-before":function(n,r,h){let m="",c=t(n[0]),_=t(n[1]),Q;return(Q=Bt.Ob(h,n[2],"indexOf",r)(c,_))!==-1&&(m=c.substring(0,Q)),Mt(m)},sum:function(n,r){r=n[0].mapOneToOne(r.fixed.fa.Gh);let h=r.next();if(h===null)return n.length===1?he(0):n[1];try{return sn["a+a"](h,h),At(a(r,h,sn["a+a"]))}catch(m){throw m instanceof A&&m.code==="XPTY0004"&&(m.code="FORG0006"),m}},"system-property":function(n,r,h){return n=T.QName.fromEQName(e(n[0],r,h,"XTDE1390")),r="",n.uri===Ft.Qc&&(r={version:"3.0",vendor:"Saxonica","vendor-url":"https://www.saxonica.com/","product-name":"SaxonJS","product-version":"3.0.0-beta1","is-schema-aware":"no","supports-serialization":"yes","supports-backwards-compatibility":"yes","supports-namespace-axis":"yes","supports-streaming":"no","supports-dynamic-evaluation":"yes","supports-higher-order-functions":"yes","xpath-version":"3.1","xsd-version":"1.1"}[n.local]),n.uri===Ft.qb&&(r=Me.si()[n.local]),r||="",Mt(r)},tail:function(n){let r=Lt(n[0]);return r.filter(function(){return r.position!==1})},"timezone-from-date":function(n){return F(n,"timezone")},"timezone-from-dateTime":function(n){return F(n,"timezone")},"timezone-from-time":function(n){return F(n,"timezone")},tokenize:function(n){var r=t(n[0]);if(n[1]||(r=Ct.Ib(r)),r==="")return yt;var h=n[1]?n[1].next().toString():"[ \\n\\r\\t]+";h=Gt.Bf(r,h,n[2]?n[2].next().toString():"",!1,!0),r=n[1]&&h[0].Gc;let m=h[h.length-1];return n=n[1]&&m.Gc,h=h.filter(function(c){return!c.Gc}).map(function(c){return c.string}),r&&h.unshift(T.string.fromString("")),n&&h.push(T.string.fromString("")),wt(h)},trace:function(n,r){let h=n[0].expand();return n=n.length===2?t(n[1]):"",Z.xa("fn:trace: "+(n!==""?n+": ":"")+Z.showValue(h),1,r.fixed.Ka),wt(h)},transform:function(n,r,h){function m(X){return X=T.string.fromString(X),$.get(X)}function c(X,V="FOXT0002"){throw new A(X,V)}function _(X,V,ht=null){if("matches"in V&&"name"in V){if(V.matches(X))return X;throw new A(ht!==null?`The required item type of ${ht} is ${V.name}`:`The required item type is ${V.name}`,"XPTY0004")}return X}function Q(X,V){if(X.isStringLike())return X;throw new A(`The required item type of ${V} is string|unTypedAtomic|anyURI`,"XPTY0004")}function H(X,V,ht=z=>z){(X=m(X))&&(X=wt(X).peek())&&(rt[V]=ht(X))}function B(X){return function(V){if(V instanceof It||c("The value of the option "+X+" in fn:transform() must be of type map(xs:QName,item()*)","XPTY0004"),V.conforms(ht=>(T.QName.matches(ht)||c("The keys of the "+X+" option in fn:transform() must be of type xs:QName. Supplied value:"+ht.toString()),!0),()=>!0,()=>!0))return V}}function b(X,V){H(X,V,B(X))}function w(X){X.C&&X.C.forEach(function(V){V.parentNode=X,w(V)})}function g(X,V,ht){if(!R.N)throw new A("No XSLT processor is available to support fn:transform(). If using SaxonJS3.rt.js, it does not contain an XSLT compiler ","FOXT0001",h);let z={stylesheetParams:new It,tunnelParams:{},functionParams:{},isDynamicStylesheet:!0,destination:"application",initialMode:"compile-complete",templateParams:{"Q{}options":{noXPath:!1}}};for(let xt in V)xt==="compiler.options"?z.tunnelParams["Q{}compiler.options"]=V[xt]:z.templateParams["Q{}options"][xt]=V[xt];return z.stylesheetParams.inSituPut(at.XS.QName.fromParts("","","staticParameters"),[ht]),z.stylesheetInternal=R,z.outputProperties={},w(R),R.relocatable==="true"&&(z.isRelocatableStylesheet=!0),V=wn.checkOptions(z),wn.internalTransform(R,X,V),V.principalResult}function x(X){if(X=L.Kb(X).expand(),1<X.length)throw new A("Supplied value when atomized is not a single string","FOXT0002");return X[0]}var I=Oe.find("SaxonJS").internals.XPath;let L=r.fixed.fa,R=J.xe("compiler"),q=!1,$=n[0].next(),rt={stylesheetParams:new It,templateParams:new It,tunnelParams:new It,functionParams:{},outputProperties:{},isDynamicStylesheet:!0,language:"XSLT",messages:[],resultDocuments:{},resultForm:"xdm"};if((n=m("requested-properties"))&&n[0]){let X=function(V,ht){c("No processor with property "+V.toEQName()+"="+ht+"() available for fn:transform()","FOXT0001")};var M=X;!(1<n.length)&&n[0]instanceof It||c("The value of the 'requested-properties' option for fn:transform() must be of type map(*)"),n=n[0],n.forAllPairs(function(V){let ht=V.v[0];switch(V.k.local){case"supports-streaming":(ht=ht.toBoolean())&&X(V.k,ht);break;case"supports-namespace-axis":ht=ht.toBoolean(),X(V.k,ht);break;case"supports-backwards-compatibility":(ht=ht.toBoolean())||X(V.k,ht);break;case"product-name":ht=ht.toString(),ht!=="SaxonJS"&&X(V.k,ht);break;case"vendor":ht=ht.toString(),ht!=="Saxonica"&&X(V.k,ht)}})}let st=m("vendor-options");st&&st[0]?(!(1<st.length)&&st[0]instanceof It||c("The value of the 'vendor-options' option for fn:transform() must be of type map(*)"),st=st[0]):st=null;var pt=m("xslt-version")[0];pt&&_(pt,T.decimal,"xslt-version"),H("stylesheet-location","stylesheetLocation",X=>Q(x(X),"stylesheet-location").toString()),H("stylesheet-node","stylesheetNode"),H("stylesheet-text","stylesheetText"),H("package-location","packageLocation",X=>Q(x(X),"package-location").toString()),H("package-node","packageNode"),H("package-text","packageText");let tt=0;"stylesheetLocation stylesheetNode stylesheetText packageLocation packageNode packageText".split(" ").forEach(X=>{rt[X]&&tt++}),tt!==1&&c("A stylesheet must be supplied as an option to fn:transform(), by exactly one of 'stylesheet-location', 'stylesheet-node', 'stylesheet-text', 'package-location', 'package-node' or 'package-text'"),H("source-node","sourceNode"),H("global-context-item","globalContextItem"),(n=m("source-node")[0])&&!m("global-context-item")[0]&&E.Va(n)&&(rt.globalContextItem=n.ownerDocument),(n=m("initial-match-selection"))&&0<n.length&&(rt.initialSelection=n),H("initial-template","initialTemplate",X=>_(X,T.QName,"initial-template").toEQName()),H("initial-mode","initialMode",function(X){return["#unnamed","#default"].includes(X.toString())?X.toString():_(X,T.QName,"initial-mode").toEQName()}),H("initial-function","initialFunction",X=>_(X,T.QName,"initial-function").toEQName()),H("static-params","staticParams"),H("base-output-uri","baseOutputURI"),H("stylesheet-base-uri","stylesheetBaseURI",X=>X.toString()),H("delivery-format","destination",X=>X.toString());let Y=rt.destination;Y&&!["raw","document","serialized"].includes(Y)&&c("The value of the delivery-format option to fn:transform() must be one of 'raw', 'document' or 'serialized'. Supplied value is "+Y),Y||="document",n=(n=m("enable-messages"))&&n.length===1?n[0].toBoolean():!1;let P=m("enable-assertions");P=P&&P.length===1?P[0].toBoolean():!1;var U=null,nt=null;if(rt.stylesheetNode){var W=rt.stylesheetNode._saxonBaseUri||"NoStylesheetBaseURI";if(rt.stylesheetNode.nodeType===9)nt=rt.stylesheetNode.cloneNode(!0);else if(rt.stylesheetNode.nodeType===11){nt=J.createDocument();for(var G=rt.stylesheetNode.childNodes,y=0;y<G.length;y++)nt.appendChild(G[y].cloneNode(!0))}else nt=E.nc(rt.stylesheetNode),W==="NoStylesheetBaseURI"&&nt._saxonBaseUri&&(W=nt._saxonBaseUri),nt=J.createDocument(),nt.appendChild(rt.stylesheetNode.cloneNode(!0));nt._saxonBaseUri=W,nt._saxonDocUri=W}if(rt.stylesheetLocation){W=L.Ea(h,r),W=J.pb(rt.stylesheetLocation,W),rt.stylesheetLocation=W;try{nt=Jt.xc(W,r)}catch(X){c("Error fetching stylesheet in fn:transform():"+X.code+" "+X.message)}nt._saxonBaseUri=W,nt._saxonDocUri=W}if(rt.stylesheetText&&(nt=J.Sb(rt.stylesheetText.toString(),!0),nt._saxonBaseUri="NoStylesheetBaseURI",nt._saxonDocUri="NoStylesheetBaseURI"),nt&&rt.stylesheetBaseURI&&(W=L.Ea(h,r),W=J.pb(rt.stylesheetBaseURI,W),nt._saxonBaseUri=W,nt._saxonDocUri=W),rt.packageNode&&(W=rt.packageNode,E.Ye(W)?U=I.sefToJSON(W.firstChild):c("The value of the 'package-node' option of fn:transform() must be a single document or element node")),rt.packageText&&(U=JSON.parse(rt.packageText.toString())),nt&&(U=rt.staticParams?rt.staticParams:new It,W=new It,G=!1,y=T.QName.fromParts("saxon",Ft.qb,"compiler.options"),st&&st.containsKey(y)&&(W=st.get(y)[0]),y=T.QName.fromParts("saxon",Ft.qb,"allowSyntaxExtensions"),st&&st.containsKey(y)&&(G=st.get(y)[0]),U=g(nt,{"enable-assertions":P,"compiler.options":W,allowSyntaxExtensions:G,relocatable:!1},U),U=I.sefToJSON(U.firstChild)),U||c("Internal error in fn:transform(): no SEF","FOXT0003"),I=U.version,I=pt?10*pt.toNumber():parseFloat(I),pt=Me.getProcessorInfo().version,I>10*pt&&c("No suitable XSLT processor is available; requested XSLT version in fn:transform() is: "+(I/10).toString()),rt.sourceNode&&rt.initialSelection&&c("Only one of 'source-node' or 'initial-match-selection' must be supplied to fn:transform() for apply-templates invocation"),rt.initialTemplate&&rt.initialMode&&c("Only one of 'initial-template' or 'initial-mode' should be supplied to fn:transform()"),rt.sourceNode){I=rt.sourceNode;var s=I.cloneNode(!0);s._saxonBaseUri=I._saxonBaseUri,s._saxonDocUri=I._saxonDocUri}rt.baseOutputURI||(rt.baseOutputURI="",q=!0),b("stylesheet-params","stylesheetParams"),b("template-params","templateParams"),b("tunnel-params","tunnelParams"),H("function-params","functionParams",function(X){return Z.assert(X instanceof qt),X.value}),Y==="serialized"&&H("serialization-params","outputProperties",X=>re(X,!0)),rt.deliverResultDocument=function(){let X=this;return new vr(Y,function(V,ht){X.resultDocuments[V.toString()]=Y==="serialized"?[at.XS.string.fromString(ht)]:ut.U(ht)?[ht]:ht===null?[]:ht})},rt.deliverMessage=function(X){J.Yg()(X),this.kh.push([X])};let p={};I=wt(m("collections")).peek(),I!==null&&(p=re(I,!0)),rt.collectionFinder=function(X){return typeof X>"u"?null:p[X]},I=!["raw","serialized"].includes(Y);let N,D;try{w(U),U.relocatable==="true"&&(rt.isRelocatableStylesheet=!0),(rt.stylesheetNode||rt.packageText||rt.packageNode)&&(rt.stylesheetInternal=U),D=wn.checkOptions(rt),wn.internalTransform(U,s,D),N=D.principalResult}catch(X){throw X instanceof A&&X.g?new A(X.message,X.code.toString()):X}if(N&&I){Z.assert(Array.isArray(N)),s=un(r);let X=Gt.zc(s);X.Da(),N.forEach(V=>X.append(V)),X.wa(),X.close(),N=s.Gb}if(Array.isArray(N)&&N.length===1&&Array.isArray(N[0])&&(N=N[0]),s=D.resultDocuments[""],s!==void 0){if(Array.isArray(N)?0<N.length:N!=null)throw new A("A result document on the base output URI has already been created","XTDE1490");N=s}s=new It,N&&s.inSituPut(q?T.string.fromString("output"):D.Ab,Array.isArray(N)?N:[N]),n&&s.inSituPut(T.string.fromString("messages"),[new qt(D.kh)]);for(let X in D.resultDocuments)X!==""&&(Z.xa("xsl:result-document href="+X,2,r.fixed.Ka),s.inSituPut(T.anyURI.fromString(X),D.resultDocuments[X]));return At(s)},translate:function(n){let r=Ct.La(t(n[0])),h=Ct.La(t(n[1])),m=Ct.La(t(n[2])),c=[];return r.forEach(function(_){let Q;(Q=h.indexOf(_))!==-1?Q<m.length&&c.push(m[Q]):c.push(_)}),Mt(Ct.ac(c))},true:function(){return _t(!0)},"type-available":function(n,r,h){return n=e(n[0],r,h,"XTDE1428").split("}"),_t(n[0]==="Q{http://www.w3.org/2001/XMLSchema"&&(n[1]in at.type||["untyped","anyType","anySimpleType"].includes(n[1])))},unordered:function(n){return n[0]},"unparsed-entity-public-id":function(){return yt},"unparsed-entity-uri":function(){return yt},"unparsed-text":function(n,r,h){let m=Jt.zd(n,r,h);return m?(n=Jt.Ne(n[1]?t(n[1]):""),Mt(Jt.Lf(m,r,h,n))):yt},"unparsed-text-available":function(n,r,h){return Jt.th(function(){let m=Jt.zd(n,r,h),c=Jt.Ne(n[1]?t(n[1]):"");Jt.Lf(m,r,h,c)})},"unparsed-text-lines":function(n,r,h){let m=Jt.zd(n,r,h);return m?(n=Jt.Ne(n[1]?t(n[1]):""),r=Jt.Lf(m,r,h,n).split(/\r?\n|\r/),0<r.length&&r[r.length-1]===""&&--r.length,wt(r).mapOneToOne(T.string.fromString)):yt},"upper-case":function(n){return Mt(t(n[0]).toUpperCase())},"uri-collection":function(){return yt},"xml-to-json":function(n){let r=n[1]?n[1].next():new It;return n[0].mapOneToOne(function(h){return T.string.fromString(ln.Jj(h,r))})},"year-from-date":function(n){return F(n,"getUTCFullYear")},"year-from-dateTime":function(n){return F(n,"getUTCFullYear")},"years-from-duration":function(n){return S(n,0)},"zero-or-one":function(n){if(n=n[0].expand(),1<n.length)throw new A("Required length 0-1, actual length "+n.length,"FORG0003");return At(n[0]?n[0]:null)}}}(),oc=function(){function e(a,u,l){var F=l.fixed.fa;let S=u.name||"#unnamed";u=F.Ba(u,"sortKey"),F=u.map(F.Pa);let O=Bt.Ci(u,l);u=[];let k=l.X(!1);for(k.focus=Lt(a);(a=k.focus.next())!==null;)l=F.map(function(d,o){var E=k.X(!1);if(E.focus=me(k.focus.current),d=d(E),(E=d.next())&&d.next())throw new A("Multiple values in merge key","XTTE1020");return O[o](E)}),u.push({item:a,keys:l,lh:S});return u}function t(a,u,l){function F(d){let o=S[S.length-1];if(o&&0<l(o,d))throw new A("Input to xsl:merge is not correctly sorted","XTDE2220");S.push(d)}let S=[],O=0,k=0;for(;;)if(O>=a.length){for(;k<u.length;)F(u[k++]);break}else if(k>=u.length){for(;O<a.length;)F(a[O++]);break}else 0>=l(a[O],u[k])?F(a[O++]):F(u[k++]);return S}function i(a,u){return u.fixed.fa.Ba(a,"sortKey").map(function(l){return Bt.Cj(l,u)})}function f(a){return function(u,l){for(let F=0;F<a.length;F++){let S=a[F](u.keys[F],l.keys[F]);if(S!==0)return S}return 0}}function v(a,u,l){var F=null;let S=[],O={};for(let k=0;k<u.length;k++){let d=u[k];if(F=F===null?-1:l(F,d),0>F){for(O={items:[d.item],keys:d.keys,groups:{}},F=0;F<a.length;F++)O.groups[a[F].name||"#unnamed"]=[];O.groups[d.lh]=[d.item],S.push(O)}else if(F===0)O.items.push(d.item),O.groups[d.lh].push(d.item);else throw new A("Group Input to xsl:merge is not correctly sorted","XTDE2220");F=d}return S}return{ej:function(a,u){let l=u.fixed.fa;var F=l.Ba(a,"mergeSrc");let S=u.X();S.pa="merge-key";for(var O=F.map(function(m){return i(m,S)}),k=O[0],d=1;d<O.length;d++)for(var o=0;o<k.length;o++){var E=k[o],T=O[d][o];let m=E.lang===T.lang||E.lang!==null&&E.lang.equals(T.lang);if(E.order!==T.order||!m||E.Ke!==T.Ke||E.dataType!==T.dataType)throw new A("All merge sources must have compatible merge keys","XTDE2210",a)}for(O=k.map(function(m){return Bt.di(m,S)}),O=f(O),k=null,d=0;d<F.length;d++){o=F[d],E=l.ba(o,"forEachItem"),T=l.ba(o,"selectRows");try{if(E){var C=u.X(!1);for(C.focus=Lt(l.evaluate(E,u));C.focus.next()!==null;){var n=l.evaluate(T,C),r=e(n,o,C);k=k===null?r:t(k,r,O)}}else{var h=l.evaluate(T,u);let m=e(h,o,u);k=k===null?m:t(k,m,O)}}catch(m){throw m instanceof A&&m.code==="XPTY0004"?new A(m.message,"XTTE2230",a):m}}if(k===null)return yt;for(F=v(F,k,O),a=l.ba(a,"action"),C=F.map(function(m){return m.items[0]}),u=u.X(!1),u.focus=Lt(wt(C)),C=[],n=0;n<F.length;n++)for(u.focus.next(),u.vb=F[n],r=l.evaluate(a,u);(h=r.next())!==null;)C.push(h);return wt(C)}}}(),ac=function(){function e(i,f){for(let v in i)if(v==f)return{k:f,v:i[f]};return null}function t(){}return t.prototype={containsKey:function(i){return e(this,i)!==null},forAllPairs:function(i){for(let f in this)this.__proto__.hasOwnProperty(f)||i({k:f,v:this[f]})},get:function(i){let f=e(this,i);if(f===null)throw new A("'"+i+"' is not a permitted key for the given tuple type","XTTE9999");return f.v},keys:function(){let i=[];return this.forAllPairs(function(f){i.push(at.XS.string.fromString(f.k))}),i},put:function(i,f){let v=new t,a=!1;for(let u in this)v[u]=this[u],u==i&&(a=!0,v[i]=f);if(!a)throw new A("'"+i+"' is not a permitted key for the given tuple type","XTTE9999");return v},size:function(i){let f=0;return i[0].next().forAllPairs(function(){f++}),he(f)}},t}(),ft=function(){function e(){}function t(s){let p=(s.C||[]).map(m);return N=>new Vr(function*(){for(let D of p){let M=D(N),X;for(;(X=M.next())!==null;)yield X}}())}function i(s){function p(V){switch(V){case 1:return"first";case 2:return"second";case 3:return"third";default:return V+"th"}}s=s.split("|");let N=s[0],D=s[1],M=s[2]===""?"XPTY0004":s[2],X=s[3];return{required:function(){switch(parseInt(N,10)){case 0:return p(+D+1)+" argument of "+(X===""?"anonymous function":X+"()");case 1:return p(+D+1)+" operand of '"+X+"'";case 9:return"operand of '-'";case 2:return"value in '"+X+"' expression";case 3:return X==="saxon:context-item"?"context item":"value of variable $"+X;case 4:let V=X.split("/");return"@"+V[1]+" attribute of "+(V[0]==="LRE"?"a literal result element":V[0]);case 5:return"result of call to "+(X===""?"anonymous function":"function "+X);case 7:return"result of template "+X;case 6:return p(+D+1)+" sort key";case 8:return"value of parameter $"+X;case 11:return"value of the grouping key";case 12:return"result of xsl:evaluate";case 13:return"the context item";case 14:return"the context item for the "+"ancestor ancestor-or-self attribute child descendant descendant-or-self following following-sibling namespace parent preceding preceding-sibling self preceding-or-ancestor".split(" ")[D]+" axis";case 15:return"the value of the "+X+" option";case 17:return"document-order sorter";default:return""}}(),code:M}}function f(s){if(s=s.trim(),["true","yes","1"].includes(s))return!0;if(["false","no","0"].includes(s))return!1;throw new A("Value must be yes|true|1 or no|false|0","XTDE0030")}function v(s){if(U.U(s))return At(a(s));if(rt(s))return $e(s.value.map(p=>wt(p))).mapOneToMany(v);if(pt(s))throw new A("Cannot atomize a "+(st(s)?"map":"function"),"FOTY0013");return At(s)}function a(s){let p=W.string.fromString,N=W.untypedAtomic.fromString;switch(s.nodeType){case 9:return N(s.documentElement.textContent);case 11:case 1:case 3:case 4:return N(s.textContent||"");case 2:return N(s.value);case 8:return p(s.textContent);case 7:return p(s.textContent);case 13:return p(s.uri);default:throw new A("Unknown node type "+s.nodeType,"SXJS0003")}}function u(s){return wt(s).mapOneToMany(v).expand()}function l(s){function p(M){throw new A("Effective boolean value is not defined for "+M,"FORG0006")}function N(){if(s.next()!==null)p("an atomic sequence of length > 1");else return!0}var D=s.next();if(D===null)return!1;if(U.U(D))return!0;if(at.la(D)){if(D.code==="AB")return N()&&D.toBoolean();if(D.isNumeric())return D=D.toNumber(),N()&&!isNaN(D)&&D!==0;if(D.isStringLike())return N()&&D.toString().length!==0;p("type "+at.ld(D.code))}else st(D)?p("maps"):rt(D)?p("arrays"):pt(D)?p("functions"):p("value "+Z.showValue(D))}function F(s,p){let N=sn["i+i"],D=W.integer.fromNumber(1);return new vn(s,M=>(M=N(M,D),0<M.compareTo(p)?null:M))}function S(s,p){return s.C?s.C.filter(N=>N.N===p):[]}function O(s,p,N){s=S(s,"withParam");let D=[new It,new It];p.tunnelParams.forAllPairs(X=>D[1].inSituPut(X.k,X.v));let M=p.pa;p.pa="template parameter",s.forEach(function(X){let V=X.name,ht=_(X,"t")?1:0;D[ht].inSituPut(at.XS.QName.fromEQName(V),r(X)(p).expand())}),p.pa=M,N.Fc=D[0],N.tunnelParams=D[1]}function k(s){return!/[ \t\r\n]/.test(s)}function d(s,p,N){if(s){s=s.split(/\r?\n/);for(let M=0;M<s.length;M++)if(s[M]){var D=s[M].split("=");let X=D[0];D=D[1],X==="item-separator"&&(D=D.replace(/%n/g,`
`).replace(/%%/g,"%")),D=X==="parameter-document"?void 0:X==="use-character-maps"?Ht.lf(X,D,N):Ht.mf(X,D),typeof D<"u"&&(p[X]=Ht.bf(X,D,p[X]))}}}function o(s,p){let N=r(s),D=h(s);return M=>{try{let X=N(M).next(),V=D(M).next();return X===null||V===null?null:p(X,V)}catch(X){q(X,s)}}}function E(s,p){if(p.fixed.staticBaseURI)return p.fixed.staticBaseURI;if(p.fixed.hd)return null;for(;;){if(s.baseUri)return s.baseUri;if(s=s.parentNode,!s)return null}}function T(s,p,N=!1){var D=U.Ac(p.da).createDocumentFragment();D=U.dc(D),D._saxonBaseUri=E(s,p);let M=p.X(!1);return N&&(M.da=p.masterDocument),Tu.cj(D,m(s)(M),M),D}function C(s){let p=r(s),N=h(s),D=s.op;return M=>{let X=p(M),V=N(M).expand();return M=Bt.$d(s.comp,M),Bt.gc(X,V,D,M,s)}}function n(s,p){throw new A("The "+s+" construct is not implemented in SaxonJS","SXJS0002",p)}function r(s){return m(s.C[0])}function h(s){return m(s.C[1])}function m(s){if(s){var p=s.ELAB;return p||((p=y[s.N])||Z.ka("Unknown expr: "+s.N+" parent="+s.p),p=s.ELAB=p(s)),p}}function c(s,p){s=s.C||[];for(let N=0;N<s.length;N++){let D=s[N];if(D.role===p)return D}return null}function _(s,p){return(s=s.flags)?0<=s.indexOf(p):!1}function Q(s){let p={};if(p.xml=Ft.xml,s=H(s,"ns"),s!==null){s=s.split(" ");for(let N=0;N<s.length;N++){let D=s[N].split("=");p[D[0]]=D[1]==="~"?Ft.withPrefix[D[0]]:D[1]}}return p}function H(s,p){for(;s;){if(s[p])return s[p];s=s.parentNode}return null}function B(s,p){let N=Q(s);return function(D){if(D===""&&!p)return"";let M=N[D];if(M)return M;if(D==="")return"";throw new A("Undeclared prefix: "+D,"XTDE0290",s)}}function b(s,p,N){return W.QName.fromString(p,B(s,N))}function w(s,p,N){if(s!==null&&0<N){let D=U.getAttribute(s,p);return D!==null&&D!==""?D:w(s.parentNode,p,N-1)}}function g(s,p,N){let D,M=s.bSlot;if(M?(M=parseInt(M,10),s=p.oa.Je[M],D=p.fixed.Ja[s]):(s=s.coId)?D=p.fixed.Ja[parseInt(s,10)]:Z.ka("No binding slot or component Id for component"),D||Z.ka("Target component not found (slot="+M+" id="+s+")"),D.visibility==="ABSTRACT"&&D.actor.N!=="function")throw new A("Abstract "+D.actor.N+" "+D.actor.name+" has no implementation","XTDE3052");return N&&D.actor.N!==N&&Z.ka("Expected "+N+", found "+D.actor.N),D}function x(s,p,N,D){s=p.actor;var M=c(s,"body");return M=m(M),D=D.X(!0),D.oa=p,zn(D),ft.ib(s,"u")||(D.pa="function"),D.ab={},D.Wa=null,D.focus=null,D.Eb=[],D.ma=N,M(D)}function I(s,p){for(s=s.parentNode;s.N!=="package";)s=s.parentNode;return p.fixed.nd[s.name]}function L(s,p){return m(s)(p)}function R(s){return p=>{let N=un(p),D=Gt.zc(N);return Gt.push(s,p,D),D.close(),wt(N.Gb)}}function q(s,p){throw s instanceof A&&!s.xsltLineNr&&s.setExpr(p),s}function $(s,p){function N(M){return"Context item for template "+s.name+" must be "+M}if(En(p)&&s.flags.indexOf("o")===-1)throw new A(N("supplied"),"XTTE3090",s);En(p)||s.flags.indexOf("s")!==-1||(p.focus={});let D=s.cxt;if(D&&!En(p)&&!Ie(D).ha()(ue(p)))throw new A(N("instance of "+Ie(D).toString()),"XTTE0590",s)}function rt(s){return s instanceof qt}function st(s){return s instanceof It||s instanceof ee}function pt(s){return s instanceof Ut.XdmFunction||rt(s)||st(s)}function tt(s){let p=Object.assign(s);return p.ELAB=void 0,s.C&&(p.C=s.C.map(N=>tt(N))),p}function Y(s,p,N){Z.assert(Array.isArray(s)),Z.assert(p instanceof Vt);let D=p.V(),M=D.p;if(D.o&&!vu(D.o)(s.length))throw new A("Supplied value "+Z.showValue(s)+" does not match required cardinality "+D.o+(N?" in "+N():""),"XPTY0004");if(0<s.length){if(p.itemType.la()){s=ft.Yh(s);let X=at.XS.untypedAtomic;if(gn(p.itemType))s=s.map(V=>V.isNumeric()?V:X.matches(V)?at.XS.double.cast(V):V instanceof ee?at.XS.double.fromString(V.value.toString()):V);else{let V=at.codes[M],ht=V.cast;M!=="A"&&(s=s.map(z=>X.matches(z)?ht(z):z instanceof ee?V.fromString(z.value.toString()):z)),["AO","AF"].includes(M)&&(s=s.map(z=>z.isNumeric()?V.cast(z):z)),M==="AS"&&(s=s.map(z=>at.XS.anyURI.matches(z)?V.cast(z):z))}}else if(p.itemType.gd()){if(["FM","FA"].includes(M))s=Ne(s);else if(p.itemType instanceof Ve){let X=p.itemType.ha();s.every(V=>X(V))||(s=s.map(V=>{if(X(V))return V;if(V instanceof Ut.XdmFunction){var ht=p.itemType;let z=ht.yc().length;return ht={minArgs:z,maxArgs:z,sig:ht.ga(),alphaTree:ht.V()},new Ut.pg(ht,V)}return V}))}}if(!p.matches(s))throw new A("Supplied value "+Z.showValue(s)+" does not match required type "+p.toString()+(N?" in "+N():""),"XPTY0004")}return s}function P(s){return s.mapOneToMany(function(p){return rt(p)?$e(p.value.map(function(N){return P(wt(N))})):At(p)})}let U=ut,nt=U.Ha,W=at.XS,G,y={acFnRef:function(s){let p=W.QName.fromEQName(s.name),N=Oe.find("SaxonJS").internals.XPath;return D=>{if(D=D.X(!0),D.Xa=!0,D=N.getFnSignature(p,1,D))return D=new Ut.nf(D,p,s),At(D);throw new A("Reference to an unknown constructor function "+p+"#1","XPST0017",s)}},among:function(s){let p=r(s),N=h(s);return D=>{let M=p(D).next();return N(D).filter(X=>U.isSameNode(X,M))}},analyzeString:R,and:function(s){let p=r(s),N=h(s);return D=>_t(l(p(D))&&l(N(D)))},applyImports:R,applyT:R,arith:function(s){let p=sn[s.calc];p||n("arithmetic ("+s.calc+")",s);let N=o(s,p);return D=>At(N(D))},arith10:function(s){function p(X){return X=X.next(),X===null?W.double.fromNumber(NaN):X.isStringLike(X)?W.double.ie(X.toString()):W.double.cast(X)}let N=r(s),D=h(s),M=sn[s.calc];return X=>At(M(p(N(X)),p(D(X))))},array:function(s){let p=(s.C||[]).map(m);return N=>{let D=p.map(M=>M(N).expand());return At(new qt(D))}},arrayBlock:function(s){let p=(s.C||[]).map(m);return N=>{let D=p.map(M=>M(N).expand());return At(new qt(D))}},atomic:function(s){let p=at.codes[s.type].fromString(s.val);return()=>At(p)},atomSing:function(s){let p=r(s);return s.card?N=>p(N).mapOneToMany(v):N=>{if(N=p(N).mapOneToMany(v),N=We(N),N.peek()===null)throw N=i(s.diag),new A("The "+N.required+" is empty",N.code,s);return N}},att:R,attVal:function(s){let p=W.QName.fromEQName(s.name);return N=>{if(He(N,"XPDY0002","@"+p,s),N=ue(N),!U.U(N))throw new A("Context item for 'attVal' must be a node","XPTY0020",s);return N.nodeType!==1?yt:(N=p.uri===""?N.hasAttribute(p.local)?N.getAttribute(p.local):null:p.uri===Ft.xml?N.hasAttribute("xml:"+p.local)?N.getAttribute("xml:"+p.local):null:N.hasAttributeNS(p.uri,p.local)?N.getAttributeNS(p.uri,p.local):null,N===null?yt:At(W.untypedAtomic.fromString(N)))}},axis:function(s){let p=Ie(s.nodeTest||"").ha(),N=s.name;return D=>{if(He(D,"XPDY0002",N+" axis",s),D=ue(D),!U.U(D))throw new A("Context item for "+N+" axis is not a node - supplied:"+Z.showValue(D),"XPTY0020",s);return U.Bg[N](D).filter(p)}},break:R,callT:function(s){return p=>{let N=g(s,p,"template"),D=p.X(!0);return D.vb=null,D.oa=N,$(N.actor,D),O(s,p,D),r(N.actor)(D)}},cast:function(s){let p=r(s),N=_(s,"e"),D=M=>{if(M=p(M).next(),M===null){if(N)return null;throw new A("Empty sequence casting to "+Ie(s.as).toString(),"XPTY0004",s)}return M};if(_(s,"a")){let M=Le(s.as),X=M.p==="AQ"?B(s,!0):null,V=at.codes[M.p].cast;return ht=>{if(ht=D(ht),ht===null)return yt;try{var z=V(ht,X);return At(z)}catch(xt){throw xt.code==="FORG0001"&&s.diag?(z=i(s.diag),new A("Required item type of "+z.required+" is "+Ie(s.as).toString()+"; supplied value is "+Z.yh(ht),z.code,s)):xt.code!==null?xt:new A("Failed to cast "+Z.yh(ht)+" to type "+Ie(s.as).toString(),"XPTY0004",s)}}}if(_(s,"l")){let M=at.XS.QName.fromEQName(s.as),X=wr[M.local].fromString;return Z.assert(M.uri===Ft.ic),Z.assert(X),V=>{if(V=D(V),V===null)return yt;if(V=jt.collapse(V.toString()).split(" ").map(X),V.length===0)throw new A("xs:"+M.local+" value must contain at least one token","FORG0001");return wt(V)}}if(_(s,"u"))return M=>(M=D(M),M===null?yt:at.XS.double.matches(M)||at.XS.decimal.matches(M)||at.XS.float.matches(M)?At(M):At(at.XS.double.cast(M)));throw new A("Unknown cast variety "+s.flags)},castable:function(s){let p=r(s),N=_(s,"e"),D;if(_(s,"a")){let M=Le(s.as),X=M.p==="AQ"?B(s,!0):null,V=at.codes[M.p].cast;D=ht=>(V(ht,X),!0)}else if(_(s,"l")){s=at.XS.QName.fromEQName(s.as);let M=wr[s.local].fromString;D=X=>0<jt.collapse(X.toString()).split(" ").map(M).length}else if(_(s,"u"))D=M=>(at.XS.double.cast(M),!0);else throw new A("Unknown castable variety "+s.flags);return M=>{M=p(M);let X=M.next();if(X===null)return _t(N);if(M.next()!==null)return _t(!1);M=v(X).next();try{return _t(D(M))}catch{return _t(!1)}}},cfn:function(s){let p=s.name,N=r(s),D;if(p==="_format-number_1")return D=cr["format-number"],M=>{let X=[N(M),Mt(s.pic)];return s.hasAttribute("format")&&X.push(Mt(s.format)),D(X,M,s)};if(p==="_translate_1")return D=cr.translate,M=>{let X=[N(M),Mt(s.a1),Mt(s.a2)];return D(X,M)};Z.ka("Unimplemented: cfn "+p,s)},check:function(s){function p(X){let V=i(s.diag);throw new A("Required cardinality of "+V.required+" is "+D[N]+"; supplied value "+X,V.code,s)}let N=s.card,D={"*":"zero or more","+":"one or more","?":"zero or one",0:"zero",1:"exactly one"},M=r(s);return X=>{if(X=M(X),N==="*")return X;var V=We(X);if(X=V.peek(),X===null){if(N==="?"||N==="0")return yt;p("is empty")}else N==="0"&&p("is not empty (first item "+Z.showValue(X)+")");if(N==="+")return V;V.next();let ht=V.next();return ht!==null&&(V=V.count()+2,p("contains "+V+" items ("+Z.showValue(X)+", "+Z.showValue(ht)+(2<V?",... )":")"))),At(X)}},choose:function(s){let p=s.C.map(m);return N=>{for(let D=0;D<p.length;D+=2)if(l(p[D](N)))return p[D+1](N);return yt}},coercedFn:function(s){let p=r(s);return N=>p(N)},comment:R,compareToInt:function(s){let p=s.op,N=W.integer.fromString(s.val),D=r(s);return M=>{M=D(M);let X=M.next();if(X===null)return yt;if(Bt.pc(X))return _t(p==="ne");if(M.next()!==null)throw new A("Value comparison only applicable to single values","XPTY0004",s);return _t(Bt.jf(p,X.compareTo(N)))}},compareToString:function(s){let p=s.op,N=r(s),D=W.string.fromString(s.val);return M=>{let X=N(M),V=X.next();if(V===null)return yt;if(X.next()!==null)throw new A("Value comparison only applicable to single values","XPTY0004",s);return s.comp?(M=Bt.$d(s.comp,M),["=","eq","!=","ne"].includes(p)?_t(Bt.Dh(p,M.equals(V,D))):_t(Bt.jf(p,M.compare(V,D)))):_t(Bt.jf(p,V.compareTo(D)))}},compAtt:R,compElem:R,condCont:function(s){let p=r(s);return N=>{function D(M){if(U.U(M))switch(M.nodeType){case 9:case 11:case 1:return M.hasChildNodes();default:return a(M).toString()!==""}else return st(M)?0<M.keys().length:rt(M)?0<M.value.filter(function(X){return 0<X.filter(V=>D(V)).length}).length:W.string.cast(M).toString()!==""}return p(N).filter(D)}},condSeq:function(s){function p(D){if(U.U(D)){if([9,11].includes(D.nodeType))return!D.hasChildNodes();if(D.nodeType===3||D.nodeType===4)return D.nodeValue===""}else{if(at.la(D))return W.string.cast(D).toString()==="";if(rt(D))return!P(At(D)).some(function(M){return!p(M)})}return!1}let N=s.C.map(D=>({name:D.N,eval:m(D)}));return D=>{let M=[],X=[],V=!0;return N.map(function(ht){if(ht.name==="onEmpty")V&&(M=ht.eval(D).expand());else if(ht.name==="onNonEmpty"){let z=M.length;X.unshift(function(){M.splice.apply(M,[z,0].concat(ht.eval(D).expand()))})}else ht.eval(D).forEachItem(function(z){p(z)||(V=!1),M.push(z)})}),V||X.forEach(function(ht){ht()}),wt(M)}},conditionalSort:function(s){let p=r(s),N=h(s),D=r(s.C[1]);return M=>l(p(M))?N(M):D(M)},consume:function(s){throw new A("Stylesheet uses 'consume' which requires streaming","SXJS0002",s)},convert:function(s){let p=s.to,N=at.codes[p];N||Z.ka("Unknown to-type "+s.to);let D=r(s);return _(s,"p")?M=>D(M).mapOneToOne(X=>at.eg(X,p)):M=>D(M).mapOneToOne(N.cast)},copy:R,copyOf:R,currentGroup:function(s){return p=>{if(p&&p.Wc)return wt(p.Wc);throw new A("There is no current group","XTDE1061",s)}},currentGroupingKey:function(s){return p=>{if(p&&p.Xc)return wt(p.Xc);throw new A("There is no current grouping key","XTDE1071",s)}},cvUntyped:function(s){let p=r(s),N=at.codes[s.to],D=N.cast,M=N.name==="string";return X=>p(X).mapOneToOne(function(V){if(W.double.matches(V)&&N.name==="float")throw new A("xs:double may not be promoted to xs:float","XTTE0570",s);if(W.untypedAtomic.matches(V)||M&&W.anyURI.matches(V))try{return D(V)}catch(ht){throw ht.code==="FODT0001"||!s.diag?ht:(V=i(s.diag),new A(ht.message,V.code,s))}else return V})},data:function(s){let p=r(s);return N=>p(N).mapOneToMany(v)},dbl:function(s){let p=W.double.fromString(s.val);return()=>At(p)},dec:function(s){let p=gt(s.val);return()=>qr(p)},doc:R,docOrder:function(s){let p=r(s);return N=>U.ed(p(N))},dot:function(s){return p=>(He(p,"XPDY0002",". (dot)",s),At(ue(p)))},dynCall:function(s){let p=r(s),N;return 1<s.C.length&&(N=(s.C.slice(1)||[]).map(m)),D=>{let M=p(D).next();var X=N?N.map(V=>V(D).expand()):[];if(M instanceof Ut.XdmFunction)return M.evaluate(X,D,s);if(1<X.length)throw new A("Too many arguments supplied in dynamic function call to array or map","XPTY0004",s);if(X[0].length!==1)throw new A("Argument supplied in dynamic function call to array or map is not a single item: "+Z.showValue(X),"XPTY0004",s);return X=v(X[0][0]).next(),M instanceof qt&&(X=W.numeric.matches(X)?X.toNumber():W.double.cast(X).toNumber()),M.evaluate([[X]],D,s)}},elem:R,empty:function(){return()=>yt},emptyTextNodeRemover:function(s){let p=r(s);return N=>p(N).filter(D=>!(U.U(D)&&(D.nodeType===3||D.nodeType===4)&&D.textContent===""))},error:function(s){return()=>{throw new A(s.message,s.code,s)}},evaluate:function(s){let p={language:"XSLT",contextType:{o:"1",p:"",code:"1"}},N=m(c(s,"xpath")),D=m(c(s,"cxt")),M=m(c(s,"sa")),X=m(c(s,"nsCxt")),V=S(s,"withParam").map(z=>({name:W.string.fromString(z.name),eval:r(z)})),ht=m(c(s,"wp"));return z=>{let xt=N(z).next().toString(),Dt=D?D(z):yt,Tt=new It;if(V.forEach(function(kt){Tt.inSituPut(kt.name,kt.eval(z).expand())}),ht&&ht(z).next().forAllPairs(function(kt){if(!W.QName.matches(kt.k))throw new A("Parameter names in xsl:evaluate/@with-params map must be QNames:"+kt.k.toString(),"XTTE3165",s);Tt.inSituPut(kt.k,kt.v)}),Tt=At(Tt),M){var Nt=M(z).next().toString();if(f(Nt))throw new A("SaxonJS does not support schema-aware evaluation","XTDE1665",s)}(Nt=s.as)&&(p.requiredType=Nt.toString()),(Nt=s.dxns)&&Nt.toString()!=="http://www.w3.org/1999/xhtml"&&(p.xpathDefaultNamespace=Nt.toString());let Qt={};if(X){Nt=X(z);var Zt=Nt.next();if(Zt===null||Nt.next()!==null||!U.U(Zt))throw new A("xsl:evaluate/@namespace-context must evaluate to a single node","XTTE3170",s);Qt[""]="",ut.Dc(Zt).forEach(kt=>Qt[kt.prefix]=kt.uri),p.xpathDefaultNamespace=Qt[""]}else Qt=Q(s);let be={};Zt=Nt=!1;let Rt={};var Pt=c(s,"options");if(Pt){Pt=L(Pt,z).next();let kt=W.string.fromString("var-slots");Pt.containsKey(kt)&&Pt.get(kt)[0].forAllPairs(function(j){be[j.k.toEQName()]=re(j.v)}),kt=W.string.fromString("allow-empty"),Pt.containsKey(kt)&&(Nt=Pt.get(kt)[0].toBoolean()),kt=W.string.fromString("isStatic"),Pt.containsKey(kt)&&(Zt=Pt.get(kt)[0].toBoolean()),kt=W.string.fromString("staticContext"),Pt.containsKey(kt)&&Pt.get(kt)[0].forAllPairs(function(j){Rt[j.k.toString()]=re(j.v,!0)})}return p.params=Tt,p.namespaces=Qt,p.slotMap=be,p.allowEmpty=Nt,p.staticTyping=!0,p.isStatic=Zt,p.staticContext=Rt,p.dynamicEval=!0,(Nt=c(s,"baseUri"))&&(p.staticBaseURI=L(Nt,z).next().toString()),(Nt=H(s,"defaultCollation"))&&(p.defaultCollation=Nt),Oe.find("SaxonJS").internals.XPath.evaluateXDM(xt,Dt,z,p)}},every:function(s){let p=parseInt(s.slot,10),N=r(s),D=h(s);return M=>{let X=N(M);return _t(!X.some(function(V){return M.ma[p]=[V],!l(D(M))}))}},except:function(s){let p=r(s),N=h(s);return D=>new uo(p(D),N(D),U.mb)},false:function(){return()=>_t(!1)},filter:function(s){let p=r(s),N=h(s);return _(s,"i")?D=>{let M=p(D);if(D=N(D).expand(),D.length===1&&W.numeric.matches(D[0])){let X=D[0].toNumber();if(M instanceof wt)return At(M.expand()[X-1]||null);let V=Lt(M);return V.filter(function(){return V.position===X})}return l(wt(D))?M:yt}:D=>{let M=p(D),X=D.X(!1);return X.focus=Lt(M),D=_(s,"p")?function(){let V=N(X).expand();return V.length===1&&W.numeric.matches(V[0])?X.focus.position===V[0].toNumber():l(wt(V))}:function(){return l(N(X))},X.focus.filter(D)}},first:function(s){let p=r(s);return N=>At(p(N).next())},flt:function(s){let p=W.float.fromString(s.val);return()=>At(p)},fn:function(s){let p=cr[s.name];p||n(s.name+"()",s);let N=(s.C||[]).map(m);return D=>{let M=N.map(X=>X(D));return p(M,D,s)}},fnCoercer:function(s){let p=r(s),N=on(s.to),D=N.itemType,M={alphaTree:N.V()};return X=>p(X).mapOneToOne(function(V){if(!(V instanceof Ut.XdmFunction||V instanceof qt||V instanceof It)){var ht=i(s.diag);throw new A("Required item type of "+ht.required+" is "+N.toString()+"; supplied value is "+Z.showValue(V),ht.code,s)}if(ht=V instanceof Ut.XdmFunction?V.arity:1,(D instanceof Ve?D.yc():[]).length!==ht)throw ht=i(s.diag),new A("Required item type of "+ht.required+" is "+N.toString()+"; supplied value is "+Z.showValue(V),ht.code,s);return new Ut.pg(M,V)})},fnRef:function(s){let p=s.name;p=/^Q{/.test(p)?W.QName.fromEQName(p):W.QName.fromParts("",Ft.Ma,p);let N=parseInt(s.arity,10),D=Oe.find("SaxonJS").internals.XPath;return M=>{var X=M.X(!0);if(X.Xa=!0,X=D.getFnSignature(p,N,X))return M=X.isUserFunction?new Ut.rf(X,M):p.uri===Ft.ic?new Ut.nf(X,p,s):new Ut.Ae(X,p,N,s,M),At(M);throw new A("Reference to an unknown function and/or arity "+p.toEQName()+"#"+N,"XPST0017",s)}},follows:function(s){let p=o(s,function(N,D){return W.boolean.fromBoolean(0<U.mb(N,D))});return N=>At(p(N))},for:function(s){let p=parseInt(s.slot,10),N=r(s),D=h(s);return M=>N(M).mapOneToMany(function(X){return M.ma[p]=[X],D(M)})},forEach:function(s){let p=r(s),N=h(s);return c(s,"separator")?R(s):D=>{let M=D.X(!1);return M.focus=Lt(p(D)),M.Wa=null,M.focus.mapOneToMany(function(){return N(M)})}},forEachGroup:R,fork:t,functionCall:function(s){n(s.name+"()",s)},gc:C,gc10:function(s){let p=r(s),N=h(s);return D=>{let M=p(D).expand(),X=N(D).expand();M.length===1&&W.boolean.matches(M[0])?X=[W.boolean.fromBoolean(l(wt(X)))]:X.length===1&&W.boolean.matches(X[0])?M=[W.boolean.fromBoolean(l(wt(M)))]:(M=u(M),X=u(X)),D=Bt.$d(s.comp,D);let V=s.op;return V!=="="&&V!=="!="?(M=wt(M).mapOneToOne(at.XS.numeric.Id).expand(),X=wt(X).mapOneToOne(at.XS.numeric.Id).expand()):D=Bt.Ai(D),Bt.gc(wt(M),X,V,D,s,!0)}},gcEE:C,gVarRef:function(s){return p=>{let N=g(s,p),D=N.actor,M=D.name;if(N.value===e)throw p=new A("Circularity in global variable "+M,"XTDE0640"),p.g=!0,p;if(N.value===null||typeof N.value>"u"){if(D.N==="globalParam"){var X=p.fixed.options.stylesheetParams,V=at.XS.QName.fromEQName(M);if(X.containsKey(V))X=X.get(V),Z.assert(Array.isArray(X)),V=on(D.as||"*"),X=Y(X,V,()=>"stylesheet parameter "+M),Z.assert(Array.isArray(X)),N.value=X;else{if(_(D,"r"))throw new A("Parameter "+M+" is required","XTDE0050",D);if(_(D,"i"))throw new A("Parameter "+M+" cannot be empty","XTDE0700",D);D.C||(N.value=[])}}if(N.value===null||typeof N.value>"u"){X=!D.parentNode.parentNode.parentNode,V=p.X(!0),V.pa="variable",V.nb.push(null),V.ab={},V.Wa=null,V.oa=N,V.focus=X?me(p.fixed.cd):null;try{let ht=r(D);N.value=e,N.value=ht(V).expand()}catch(ht){throw ht instanceof A&&(N.value=[],W.QName.fromEQName(M).uri!==Ft.qb+"generated-variable"&&(ht.g=!0)),ht}V.nb.pop()}}return wt(N.value)}},homCheck:function(s){let p=r(s);return N=>{N=We(p(N));let D=N.peek();if(D===null)return yt;let M=U.U(D);return N=N.filter(function(X){if(U.U(X)!==M)throw new A("Cannot mix nodes and atomic values in the result of a path expression","XPTY0018",s);return!0}),M?U.ed(N):N}},ifCall:function(s){let p=W.QName.fromEQName(s.name);if(p.uri==="http://saxonica.com/ns/interactiveXSLT"&&p.local==="schedule-action"){let D=r(s),M=h(s),X=m(s.C[3]);return V=>{var ht=s.C.length===4;if(4<s.C.length)throw new A("Only attributes @wait, @document and @http-request are available on ixsl:schedule-action in this version of SaxonJS","SXJS0002",s);var z=D(V).next().toNumber(),xt=M(V).next();let Dt=ht?X(V).next():null;ht=null;let Tt=V.X(!0);zn(Tt);let Nt,Qt,Zt;3>s.C.length||s.C[2].N==="empty"?Nt=Qt=Zt=null:(Nt=s.C[2],"bSlot"in Nt?(Qt=g(Nt,V,"template"),Zt=Qt.actor):Qt=Zt=null),En(V)||(Tt.focus=Lt(At(ue(V))),Tt.focus.next()),Tt.vb=null,Tt.oa=Qt,Tt.pa=!1,Dt===null&&Zt!==null&&$(Zt,Tt),Nt!=null&&O(Nt,V,Tt);let be,Rt;return Zt===null?(be=null,Rt=function(){}):(be=r(Zt),Rt=function(){be(Tt).expand()}),Dt!==null?ht=Jt.dj(Dt,function(Pt){Tt.focus=Lt(At(Pt[0])),Tt.focus.next(),Zt!==null&&($(Zt,Tt),Rt())},z,V):xt!==null?(xt=xt.toString().split(" "),ht=xt.map(function(Pt){return J.pb(Pt,ft.Ea(s,V))}),z=Jt.Vh(ht,V.fixed.Tb,Rt,z,V),ht=xt.length===1?z[ht[0]]:z):z!==0&&(z=(Pt=>new Promise(kt=>setTimeout(kt,Pt)))(z).then(()=>Rt()),V.fixed.hc.push(z)),ht?At(ht):yt}}let N=(s.C||[]).map(m);return D=>{let M=N.map(X=>X(D));return G(p.uri,p.local,M,D,s)}},indexedFilter2:function(s){let p=m(c(s,"base")),N=m(c(s,"use")),D=m(c(s,"search"));return M=>{let X=Bt.$d(s.comp,M),V=M.X(!1);V.focus=Lt(p(M));let ht=D(M).expand();return V.focus.filter(function(){let z=N(V);return Bt.gc(z,ht,"=",X,s).next().toBoolean()})}},inlineFn:function(s){let p={sig:s.sType,alphaTree:Le(s.sType)};return N=>At(new Ut.Nh(p,s,N))},instance:function(s){let p=r(s),N=on(s.of);return D=>(D=p(D).expand(),_t(N.matches(D)))},int:function(s){let p=W.integer.fromString(s.val);return()=>At(p)},intersect:function(s){let p=r(s),N=h(s);return D=>new ao(p(D),N(D),U.mb)},intRangeTest:function(s){let p=r(s);s=s.C;let N=m(s[1]),D=m(s[2]);return M=>{let X=N(M).next(),V=D(M).next();if(!X||!V)return _t(!1);let ht=X.toNumber(),z=V.toNumber();return M=p(M).some(function(xt){return xt=xt.value,xt>=ht&&xt<=z}),_t(M)}},is:function(s){let p=o(s,function(N,D){return W.boolean.fromBoolean(U.isSameNode(N,D))});return N=>At(p(N))},isLast:function(s){let p=s.test==="1";return N=>_t(N.focus.position===N.focus.last()===p)},iterate:R,javaCall:function(s){let p=W.QName.fromEQName(s.name),N=(s.C||[]).map(m);return D=>{let M=N.map(X=>X(D));return G(p.uri,p.local,M,D,s)}},lastOf:function(s){let p=r(s);return N=>{let D=We(p(N));return D.filter(function(){return D.peek()===null})}},let:function(s){let p=r(s),N=h(s),D=parseInt(s.slot,10);return M=>{let X=M.pa;M.pa="variable";let V=p(M).expand();return M.pa=X,M.ma[D]=V,N(M)}},literal:t,lookup:function(s){let p=r(s),N=h(s);return D=>{function M(Nt){z=z.concat(xt[Nt.toString()])}function X(Nt){z=z.concat(xt.get(Nt))}function V(Nt){return function(Qt){if(!W.integer.matches(Qt))throw new A("Array lookup key must be of type xs:integer; supplied value is "+Z.showValue(Qt),"XPTY0004",s);if(Qt=Qt.toNumber(),1>Qt||Qt>Nt.length)throw new A("Array index ("+Qt+") out of bounds (1 to "+Nt.length+")","FOAY0001",s);z=z.concat(Nt[Qt-1])}}let ht=p(D),z=[],xt;D=N(D).expand();let Dt=s.tuple;if(Dt!=null){let Nt=Dt.split(/\s+/);for(var Tt of D)if(Nt.indexOf(Tt.toString())===-1)throw new A("Tuple lookup key must be one of  "+Dt+". Supplied key is "+Tt.toString(),"XPTY0004",s)}for(;(xt=ht.next())!==null;)if(ft.isArray(xt))Tt=V(xt.value),D.forEach(Tt);else if(ft.isMap(xt))D.forEach(X);else if(Dt!=null&&ft.gh(xt))D.forEach(M);else throw new A("The source for a lookup operator (?) must be of type array() or map(); supplied value is "+Z.showValue(xt),"XPTY0004",s);return wt(z)}},lookupAll:function(s){let p=r(s);return N=>{function D(ht){X=X.concat(ht)}function M(ht){X=X.concat(V.get(ht))}N=p(N);let X=[],V;for(;(V=N.next())!==null;)if(ft.isArray(V))V.value.forEach(D);else if(ft.isMap(V))V.keys().forEach(M);else throw new A("The source for a lookup operator ('?') must be of type array() or map(); supplied value is "+Z.showValue(V),"XPTY0004",s);return wt(X)}},lookupTuple:function(s){let p=r(s),N=s.key;return D=>{D=p(D);let M=[],X;for(;(X=D.next())!==null;)if(N!=null&&ft.gh(X))M=M.concat(X[N]);else throw new A("The source for a lookupTuple operator (?) must be of type tuple(); supplied value is "+Z.showValue(X),"XPTY0004",s);return wt(M)}},map:function(s){let p=(s.C||[]).map(m);return N=>{let D=new It,M=null;return p.forEach(function(X){if(M===null)M=X(N).next();else{if(D.containsKey(M))throw new A("Duplicate map constructor entries for key:"+Z.showValue(M),"XQDY0137",s);X=X(N).expand(),D.inSituPut(M,X),M=null}}),At(D)}},merge:function(s){return p=>oc.ej(s,p)},mergeAdj:function(s){let p=r(s);return N=>{let D=[],M=p(N),X=!1,V;for(;(V=M.next())!==null;){var ht=U.U(V)&&(V.nodeType===3||V.nodeType===4);ht&&V.nodeValue===""||(X&&ht?(ht=U.Ac(N.da),D.push(ht.createTextNode(D.pop().nodeValue+V.nodeValue))):(X=ht,D.push(V)))}return wt(D)}},message:function(s){let p=m(c(s,"terminate")),N=m(c(s,"error"));return D=>{let M=D.pa;D.pa="variable";var X=p(D).next();let V=N(D).next().toString();try{V=b(s,V,!0).toEQName()}catch{V="Q{http://www.w3.org/2005/xqt-errors}XTMM9000"}let ht;try{ht=f(X.toString())}catch{throw new A("The terminate attribute of xsl:message must be yes|no|true|false|1|0","XTDE0030",s)}X=un(D);let z=new Dr(X);try{var xt=Gt.zc(z);xt.Da(),Gt.push(s.C[0],D,xt),xt.wa()}catch(Dt){z.append(at.XS.string.fromString("xsl:message evaluation at "+Z.location(s)+" failed: "+Dt))}xt=wt(X.Gb).next(),D.fixed.options.Jf||(D.fixed.options.Jf=J.Yg());try{X=V,D.qc[X]||(D.qc[X]=0),D.qc[X]++,D.fixed.options.Jf(xt,V)}catch{}if(ht)throw Z.xa(D.getStackTrace(),1,D.fixed.Ka),D=new A("Terminated with "+xt,V,s),D.errorObject=xt,D;return D.pa=M,yt}},minus:function(s){let p=r(s);return N=>p(N).mapOneToOne(D=>D.af())},namespace:function(s){let p=r(s),N=h(s);return D=>{let M=p(D).next().toString();if(D=N(D).next().toString(),M!==""&&!jt.Db(M))throw new A("Prefix "+M+" is not an NCName","XTDE0920",s);if(D==="")throw new A("Namespace is zero-length","XTDE0930",s);if(M==="xmlns")throw new A("Disallowed prefix xmlns","XTDE0920",s);if(D==="http://www.w3.org/2000/xmlns/")throw new A("Disallowed namespace "+D,"XTDE0905",s);if(!k(D))throw new A("Invalid namespace "+D,"XTDE0905",s);if(M==="xml"!=(D===Ft.xml))throw new A("The xml namespace prefix and uri can only be used together","XTDE0925",s);return At(new cn(M,D))}},nextIteration:R,nextMatch:R,node:function(s){return p=>{let N=parseInt(s.kind,10);var D=s.content.toString();switch(N){case 9:case 1:var M=p.fixed.fa;let X;try{X=J.Sb(D)}catch(V){throw new A(V.message,"FODC0006")}return N===1&&(X=X.documentElement),(D=s.baseUri)||(D=M.Ea(s,p)),X._saxonBaseUri=D,At(X);case 3:case 4:return At(p.da.createTextNode(D));case 8:return At(p.da.createComment(D));case 2:return M=s.localName,p=s.prefix,At(new Tn(W.QName.fromParts(p,s.ns,M),D,null));case 13:return p=s.localName?s.localName.toString():"",At(new cn(p,D));case 7:return M=s.localName?s.localName.toString():"",At(p.da.createProcessingInstruction(M,D));default:throw new A("Unknown node type "+N,"SXJS0003")}}},nodeNum:function(s){return p=>Se.jj(s,p)},null:function(s){return()=>At(s)},numSeqFmt:function(s){return p=>Se.kj(s,p)},onEmpty:t,onNonEmpty:t,or:function(s){let p=r(s),N=h(s);return D=>_t(l(p(D))||l(N(D)))},origFC:function(s){s.C||(s.C=[]);let p=s.C.map(m);return N=>{if(!s._target){let X=s.pack,V=b(s,s.name,!1).toEQName(),ht=s.C.length,z=N.fixed.Ja;Object.keys(z).forEach(function(xt){xt=z[xt],xt.oh.name===X&&xt.name===V&&xt.actor&&xt.actor.N==="function"&&S(xt.actor,"arg").length===ht&&(s._target=xt.id)})}let D=N.fixed.Ja[s._target],M=p.map(X=>X(N).expand());return x(s,D,M,N)}},param:function(s){let p=s.name,N=parseInt(s.slot,10),D=_(s,"t"),M=m(c(s,"select")),X=m(c(s,"conversion"));return V=>{var ht=D?V.tunnelParams:V.Fc,z=at.XS.QName.fromEQName(p);if(ht.containsKey(z))ht=ht.get(z),on(s.as||"*").V().p!==""&&(ht=Ne(ht));else if(M&&!_(s,"r"))z=V.pa,V.pa="xsl:param",ht=M(V).expand(),V.pa=z;else throw new A("Required parameter $"+p+" not supplied","XTDE0700",s);if(Z.assert(Array.isArray(ht)),V.ma[N]=ht,X)try{V.ma[N]=X(V).expand()}catch{throw new A("Supplied value for parameter $"+p+" could not be converted to required type","XTTE0590",s)}return yt}},partialApply:function(s){let p=r(s),N=[],D=[],M=0,X=s.C.length-1;for(let V=1;V<s.C.length;V++){let ht=s.C[V];ht.N==="null"?(M++,N.push(Le(ht.sT||"*"))):D[V-1]=m(ht)}return V=>{let ht=p(V).next(),z=[];for(let xt=0;xt<X;xt++)D[xt]&&(z[xt]=D[xt](V).expand());return V={o:"1",p:"F",r:ht.rb.alphaTree.r,a:N},At(new Ut.Mh({minArgs:M,maxArgs:M,sig:pn(V),alphaTree:V},ht,z))}},precedes:function(s){let p=o(s,function(N,D){return W.boolean.fromBoolean(0>U.mb(N,D))});return N=>At(p(N))},procInst:R,qName:function(s){let p=W.QName.fromParts(s.pre,s.uri,s.loc);return()=>At(p)},range:function(s){let p=W.integer.fromString(s.from),N=W.integer.fromString(s.to);return()=>F(p,N)},resultDoc:function(s){return p=>{try{if(p.pa)throw new A("Cannot call xsl:result-document while evaluating "+p.pa,"XTDE1480",s);var N=I(s,p);let D={},M=function(){},X=c(s,"format");if(X){let Rt=L(X,p).next().toString();Rt=b(s,Rt,!0).toEQName();let Pt=N.bg[Rt];if(!Pt)throw new A("Unknown xsl:output format "+Rt,"XTDE1460");let kt,j;for(let K of Pt.C){let et=K.name;et==="parameter-document"?kt=K.value:et==="Q{http://saxon.sf.net/}parameter-document-base-uri"?j=K.value:D[et]=et==="use-character-maps"?Ht.lf(et,K.value,N):Ht.mf(et,K.value)}if(kt){let K=J.pb(kt,j),et=Jt.xc(K,p);Ht.cf(et.documentElement,D)}}d(s.global,D,N),d(s.local,D,N);for(let Rt of s.C){let Pt=Rt.role.replace(/^Q{\}/,"");if(!["href","format","content","parameter-document"].includes(Pt)){Pt==="output-version"&&(Pt="version");let kt=L(Rt,p).next().toString();kt=Pt==="use-character-maps"?Ht.lf(Pt,kt,N):Ht.mf(Pt,kt,B(s,!0)),typeof kt<"u"&&(D[Pt]=Ht.bf(Pt,kt,D[Pt]))}}let V=c(s,"Q{}parameter-document");if(V!==null){let Rt=L(V,p).next().toString(),Pt=J.pb(Rt,ft.Ea(s,p)),kt=Jt.xc(Pt,p);Ht.cf(kt.documentElement,D)}let ht=p.fixed.Ab,z=c(s,"href"),xt=z===null?"":L(z,p).next().toString(),Dt;Dt=ht?J.newURL(xt,ht):U.fd(xt)?J.newURL(xt):xt;let Tt=Dt.toString();if(p.fixed.Ab&&Tt===p.fixed.Ab.toString()&&1<p.nb.length)throw new A("Cannot revert to the original output destination while writing a secondary result","XTDE1490");let Nt,Qt,Zt,be;if(Zt=!J.ra()&&!p.masterDocument||p.fixed.oe?"file":"html-page",Zt!=="html-page"){if(p.fixed.options.deliverResultDocument){if(Nt=p.fixed.options.deliverResultDocument(Dt),!Nt)throw new A("deliverResultDocument() result has no destination");Zt=Nt.destination}else throw new A("No deliverResultDocument function supplied");if(typeof p.fixed.Ta[Tt]<"u")throw new A("A result document with URI "+Tt+" is attempting to write to a document already read","XTDE1500",s);if(p.fixed.uh[Tt])throw new A("A result document with URI "+Tt+" has already been created","XTDE1490",s);p.fixed.uh[Tt]=!0}if(["file","serialized"].includes(Zt))be=new Ht.xf,Qt=Ht.bh(D,be,p),M=function(){let Rt=be.toString(),Pt=D.encoding||"utf-8";if(!Nt.save)throw new A("deliverResultDocument() result has no save method","SXJS0004",s);Nt.save(Dt,Rt,Pt)};else if(["document","raw"].includes(Zt)){let Rt=un(p);Qt=Zt==="document"?new Dr(Rt):Rt,M=function(){let Pt=wt(Rt.Gb).next();if(Pt&&(Pt._saxonBaseUri=Dt.toString()),!Nt.save)throw new A("deliverResultDocument() result has no save method","SXJS0004",s);Nt.save(Dt,Pt)}}else if(Zt==="html-page"){let Rt=D.method||"appendContent";Rt==="Q{http://saxonica.com/ns/interactiveXSLT}replace-content"?Rt="replaceContent":Rt==="Q{http://saxonica.com/ns/interactiveXSLT}replace-element"?Rt="replaceElement":Rt==="Q{http://saxonica.com/ns/interactiveXSLT}insert-before"?Rt="insertBefore":Rt==="Q{http://saxonica.com/ns/interactiveXSLT}insert-after"&&(Rt="insertAfter");let Pt,kt=xt.charAt(0)==="#"||xt.charAt(0)==="?",j=un(p);Qt=new Dr(j),p.nb.push(xt);let K=T(c(s,"content"),p,kt),et=function(it,bt){let vt=bt.parentNode;if(Rt==="replaceElement"){let Xt=bt.nextSibling;vt.removeChild(bt),bt=Xt}Rt==="insertAfter"&&(bt=bt.nextSibling),nt.Ia(it).forEachItem(function(Xt){Rt==="insertBefore"||Rt==="insertAfter"||Rt==="replaceElement"?vt.insertBefore(Xt,bt):bt.appendChild(Xt)})};if(kt){if(!p.masterDocument)return Z.xa("Result document href="+xt+": no master document available",1,p.fixed.Ka),yt;if(xt==="?.")Pt=ue(p);else if(xt.charAt(0)==="?"){let it=ue(p),bt=xt.substring(1);N="",J.ra()&&(N="http://www.w3.org/1999/xhtml");let vt={language:"XSLT",contextType:{o:"1",p:"",code:"1"},xpathDefaultNamespace:N,namespaces:Q(s),dynamicEval:!0};try{Pt=Oe.find("SaxonJS").internals.XPath.evaluateXDM(bt,At(it),p,vt)}catch(Xt){throw new A("Error in xsl:result-document/@href ?xpath:"+Xt.message,"SXJS0020",s)}if(Pt=Pt.expand(),1<Pt.length)throw new A("xsl:result-document/@href ?xpath yields more than one node","SXJS0020",s);Pt=Pt[0]}else Pt=p.masterDocument.getElementById(xt.substring(1));if(!Pt)return Z.xa("Result document href="+xt+": no such node",1,p.fixed.Ka),yt;if(xt==="?."&&Pt!==p.masterDocument&&Pt.ownerDocument!==U.Ac(p.masterDocument))return Z.xa("Result document href="+xt+": current node is not in master document",1,p.fixed.Ka),yt;if(Rt==="replaceContent")for(;Pt.firstChild;)Pt.removeChild(Pt.firstChild);M=function(){et(K,Pt),!Me.getConfigurationProperty("autoResetIndexes")&&"_saxonIndexes"in p.masterDocument||(p.masterDocument._saxonIndexes={},p.masterDocument._saxonIndexesBC={},p.masterDocument._saxonXmlIdIndex=null)}}else throw new A("xsl:result-document/@href value in browser must be '?.' or '#frag'")}else throw new A("Unsupported result-document destination "+Zt,"SXJS0002");if(Zt!=="html-page"&&(xt===""||Dt.toString()===ht)){let Rt=p.fixed.zi;if(Rt){if(Rt.Hh)throw new A("Cannot use xsl:result-document to write to a destination already used for the principal output","XTDE1490");if(Rt.mg)throw new A("Cannot write more than one xsl:result-document to the principal output destination","XTDE1490");Rt.mg=!0}}if(Zt!=="html-page"){p.nb.push(Dt.toString());let Rt=c(s,"content"),Pt=Gt.zc(Qt);Gt.push(Rt,p,Pt),Pt.close()}return M(),p.nb.pop(),yt}catch(D){q(D,s)}}},root:function(s){return p=>{if(He(p,"XPDY0002","/",s),p=ue(p),!U.U(p))throw new A("Context item for '/' must be a node","XPTY0020",s);let N=U.nc(p);if(N.nodeType!==9&&N.nodeType!==11)throw new A("Root node for '/' must be a document node","XPDY0050",s);return At(U.nc(p))}},schedule:function(s){let p=m(c(s,"select")),N=m(c(s,"on-completion")),D=m(c(s,"on-failure"));if(typeof ScheduleImpl>"u")throw new A("Promises are an EE feature on Node.js");return ScheduleImpl(s,p,N,D)},sequence:t,slash:function(s){let p=r(s),N=h(s);return D=>{let M=D.X(!1);return M.focus=Lt(p(D)),M.focus.mapOneToMany(()=>N(M))}},some:function(s){let p=parseInt(s.slot,10),N=r(s),D=h(s);return M=>{let X=N(M);return _t(X.some(function(V){return M.ma[p]=[V],l(D(M))}))}},sort:function(s){let p=Bt.Dj(s);return N=>{try{return p(N)}catch(D){throw D instanceof A&&D.code==="FOCH0002"?new A(D.message,"XTDE1035",s):D instanceof A&&D.code==="XPTY0004"?new A(D.message,"XTDE1030",s):D}}},sourceDoc:R,str:function(s){let p=s.val;return()=>Mt(p)},subscript:function(s){let p=r(s),N=h(s);return D=>{var M=p(D);if(D=N(D).next(),D.code==="ADI")D=D.value;else if(D.equals(D.round(0)))D=at.XS.integer.cast(D).value;else return yt;return(M=M.itemAt(D))?At(M):yt}},supplied:function(s){let p=parseInt(s.slot,10);return N=>wt(N.ma[p])},tail:function(s){let p=parseInt(s.start,10)-1,N=r(s);return D=>{let M=p;return N(D).filter(function(){return 0>=M--})}},tailCallLoop:t,to:function(s){let p=r(s),N=h(s);return D=>{let M=p(D).next();return D=N(D).next(),M===null||D===null||0<M.compareTo(D)?yt:F(M,D)}},treat:function(s){let p=Ie(s.as),N=p.ha(),D=r(s);return M=>D(M).mapOneToOne(function(X){if(N(X))return X;let V=i(s.diag);throw new A("Required item type of "+V.required+" is "+p.toString()+"; supplied value is "+Z.showValue(X),V.code,s)})},true:function(){return()=>_t(!0)},try:function(s){let p=r(s),N=S(s,"catch");return N.forEach(D=>{let M=D.errors.split(" ").map(X=>{if(X==="*")return()=>!0;if(/^\*:/.test(X)){let ht=X.substring(2);return z=>z.local===ht}if(/}\*$/.test(X)){let ht=X.substring(2,X.length-2);return z=>z.uri===ht}let V=W.QName.fromEQName(X);return ht=>ht.equals(V)});D.test=M.length===1?M[0]:X=>M.some(V=>V(X))}),D=>{try{return wt(p(D).expand())}catch(M){let X;if(M instanceof A){if(M.g)throw M;X=M}else X=M instanceof Error?new A(M.message,"SXJS0021"):new A(M.toString(),"SXJS0021");D.Oe=X,X.xsltLineNr||(X.setExpr(s.C[0]),M instanceof Error&&M.fileName&&(X.xsltModule=M.fileName));let V;V=X.code.match("^Q{")?W.QName.fromEQName(X.code):W.QName.fromParts("","http://www.w3.org/2005/xqt-errors",X.code);for(let ht=0;ht<N.length;ht++){let z=N[ht];if(z.test(V))return r(z)(D)}throw X}}},ufCall:function(s){let p=(s.C||[]).map(m);return N=>{let D=g(s,N,"function"),M=p.map(X=>X(N).expand());return x(s,D,M,N)}},ufRef:function(s){let p=s.name;p=/^[a-z]+:/.test(p)?b(s,p,!0):/^Q\{/.test(p)?W.QName.fromEQName(p):W.QName.fromParts("",Ft.Ma,p);let N=parseInt(s.arity,10),D=Oe.find("SaxonJS").internals.XPath;return M=>{let X=D.getFnSignature(p,N,M);if(X&&X.isUserFunction)return M=new Ut.rf(X,M),At(M);Z.ka("Named user function "+p+"#"+N+" not found")}},union:function(s){let p=r(s),N=h(s);return D=>new Qr(p(D),N(D),U.mb)},useAS:R,valueOf:R,varRef:function(s){let p=parseInt(s.slot,10);return N=>wt(N.ma[p])},vc:function(s){function p(V){return V===null?null:W.untypedAtomic.matches(V)?W.string.cast(V):V}let N=s.op,D=s.onEmpty,M=r(s),X=h(s);return V=>{let ht=M(V),z=X(V),xt=p(ht.next()),Dt=p(z.next());if(xt===null||Dt===null)return D?_t(D==="1"):yt;if(ht.next()!==null||z.next()!==null)throw new A("Value comparison only applicable to single values","XPTY0004",s);return xt.isNumeric()&&isNaN(xt.value)||Dt.isNumeric()&&isNaN(Dt.value)?_t(N==="ne"):(V=Bt.$d(s.comp,V),["=","eq","!=","ne"].includes(N)?_t(Bt.Dh(N,V.equals(xt,Dt))):_t(Bt.jf(N,V.compare(xt,Dt))))}}};return{ba:c,Ie:O,Kb:v,Yh:u,zk:function(){return"ancestor ancestor-or-self attribute child descendant descendant-or-self following following-sibling namespace parent preceding preceding-sibling self preceding-or-ancestor".split(" ")},Ff:$,Ba:S,gi:tt,Gf:Y,fe:I,Wf:g,Bd:l,Pa:r,Kg:h,cb:m,escape:function(s,p){let N="";return Ct.La(s).forEach(function(D){let M=Ct.ac([D]);N+=p(D,M)?encodeURIComponent(M):M}),N},evaluate:L,mc:function(s,p){return s===null?yt:L(s,p)},ni:function(s,p,N,D){let M=cr[s.local];return M||n(s.toString()+"()",D),M(p.map(X=>wt(X)),N,D)},oi:function(s,p,N,D){return G(s.uri,s.local,p.map(M=>wt(M)),N,D)},flatten:P,Tf:function(s){let p=new It;return p.inSituPut(at.XS.string.fromString("code"),[at.XS.string.fromString(s.code)]),p.inSituPut(at.XS.string.fromString("message"),[at.XS.string.fromString(s.message)]),p.inSituPut(at.XS.string.fromString("name"),[at.XS.string.fromString(s.name)]),p.inSituPut(at.XS.string.fromString("error"),[new ee(s)]),p},Vf:H,Lk:function(s){if(typeof s<"u")return w(s,"module",20)+"#"+w(s,"line",10)},ib:_,Dc:Q,isArray:rt,isMap:st,gd:pt,gh:function(s){return s instanceof ac},Zi:f,dl:n,wj:i,uj:function(s){G=s},hl:q,Ea:E,jg:b,Sd:B,Gh:function(s){return s.code==="AZ"?W.double.cast(s):s},Hj:k}}();window.abstractNode=Node,window.HostPlatform=function(){function e(v,a=!1){let u=new XMLHttpRequest,l;try{u.open("GET",v,!1),u.setRequestHeader("Accept","application/xml, text/xml;q=0.9, application/xhtml+xml;q=0.8, */*;q=0.7"),u.send(null)}catch{throw new A("Get failure "+v,"FODC0002")}if(u.status===200)a?l={responseText:u.responseText,contentType:u.getResponseHeader("Content-Type")}:l=u.responseText;else throw new A("Failed to read file at "+v,"FODC0002");return l}function t(){Math.trunc=Math.trunc||function(v){return 0>v?Math.ceil(v):Math.floor(v)},Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(v,a){if(this===null||typeof this>"u")throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof v!="function")throw new TypeError("predicate must be a function");let u=Object(this),l=u.length>>>0,F;for(let S=0;S<l;S++)if(F=u[S],v.call(a,F,S,u))return S;return-1},enumerable:!1,configurable:!1,writable:!1}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(v){if(this===null||typeof this>"u")throw new TypeError("Array.prototype.includes called on null or undefined");return this.findIndex(a=>a===v)}}),String.prototype.includes||(String.prototype.includes=function(v,a){return typeof a!="number"&&(a=0),a+v.length>this.length?!1:this.indexOf(v,a)!==-1})}let i=Resources,f;return{name:"Browser",edition:"EE",xdmDTlocale:function(){return!0},init:function(){t()},crypto:function(v){return v=new TextEncoder().encode(v),window.crypto.subtle.digest("SHA-256",v)},inBrowser:function(){return!0},expose:function(v,a){window[a]=v;try{La.exports=v}catch{}},encodeToBase64:function(v){return btoa(v)},parseXmlFromString:function(v,a,u=null){v=v.replace(/\r\n|\r(?!\n)/g,`
`),u||="application/xml";try{let F=new DOMParser().parseFromString(v,u);if(F.getElementsByTagName("parsererror").length===0)var l=!1;else{if(!f)try{f=new DOMParser().parseFromString("<","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch{}l=0<F.getElementsByTagNameNS(f,"parsererror").length}if(l)throw Error(F.getElementsByTagNameNS(f,"parsererror")[0].textContent);return F}catch(F){throw new A("Misplaced or malformed markup"+(F.message?": "+F.message:""),"FODC0002")}},resource:function(v){return i[v]},readFile:function(v){return e(v,!1)},readFileSync:e,resourcePromise:function(v){let a,u=v.type||"text",l=v.encoding,F="file";if(v.file)a=Promise.reject(new A("File access not supported in browser ("+v.file+")","SXJS0009"));else if(v.location){let S=v.location,O=S;S instanceof URL?S=S.toString():O=new URL(S),F=S,O.protocol==="file:"?a=Promise.reject(new A("File access not supported in browser ("+O+")","SXJS0009")):a=Jt.Ki(S,Jt.ei(v),u,l,!0)}return a.then(S=>((u==="text"||u==="xml")&&(S=Jt.Eg(S)),Promise.resolve(Jt.Fg(S)))).catch(S=>(S=Jt.rj(S,v,F,"SXJS0009"),Promise.reject(S)))},resolveUri:function(v,a){try{return(a&&a!==null&&a!==""?v&&v!==""?new URL(v,a):new URL(a):new URL(v)).toString()}catch(u){throw new A("Failed URI resolution: href="+v+" base="+a+" -- "+u,"FODC0005")}},baseURL:function(){return window.document.baseURI},getDefaultDeliverMessage:function(){return function(v){let a="";ft.Kb(v).expand().forEach(function(u){a+=(a===""?"":" ")+u.toString()}),console.log("xsl:message: "+a)}},isHTMLElement:function(v){return v.namespaceURI==="http://www.w3.org/1999/xhtml"},saxonPrint:function(v){console.log(v)},createDocument:function(){return document.implementation.createDocument("","",null)},setDocURI:function(v,a){return v._saxonBaseUri=a,v},newURL:function(v,a=null){return a!==null?new URL(v,a):new URL(v)},globalObject:window,addEventListener:function(v,a,u,l){let F="httpabort afterprint beforeprint beforeunload hashchange languagechange message offline online pagehide pageshow popstate storage unhandledrejection unload resize".split(" ");l?l.addEventListener(v,a,u):F.indexOf(v)===-1?window.document.addEventListener(v,a,u):window.addEventListener(v,a,u)}}}(),function(){function e(d,o,E,T,C){switch(d){case Ft.Ma+"/math":return a(o,E,T,C);case Ft.Ma+"/map":return v(o,E,T,C);case Ft.Ma+"/array":return f(o,E,T,C);case Ft.jd:return i(o,E,T,C);default:let n=k.getSignature(d,o);if(!n)throw new A("Unknown function Q{"+d+"}"+o,"SXJS0003",C);if(!n.impl)throw new A("No implementation provided for Q{"+d+"}"+o,"SXJS0003",C);if(n.api==="legacy")return n.impl(E,T,C);let r=n.alphaTree;for(d=[],o=0;o<E.length;o++)T=E[o],C=r.a[o],C.o==="1"||C.o==="?"?d.push(re(T.next(),!0)):d.push(new Pi(T)[Symbol.iterator]());return E=n.impl.call(null,...d),E instanceof Promise?At(new ee(E.then(h=>t(h,r)))):t(E,r)}}function t(d,o){if(d instanceof mt)return d;if(o=o.r,O.isPrototypeOf(d))return d instanceof Pi?d.saxonIterator():new no(new _i(d));if(d===null||typeof d>"u")return yt;if(d=Qn(d),d.length===1)return d=d[0],o=o.p,o=at.la(d)&&o!=="A"?at.codes[o].cast(d):d,wt([o]);throw new A("Internal error: not handling expanded.length !== 1","SXJS0003")}function i(d,o,E,T){function C(b,w){for(let g=0;g<w.length;g++){if(b===null)return;try{b=b[w[g]]}catch(x){throw x.code!==null&&typeof x.code<"u"?x:new A("Failed to get property "+w[g],"SXJS0007",T)}if(typeof b>"u")return}return b}function n(b){if(typeof b!="string")throw new A(`Cannot interpolate a ${typeof b}`,"SXJS0017");if(0>b.indexOf("`"))return b.split(".");let w=[""],g=0,x=0,I=!0;for(;x<b.length;){let L=b.substring(x,x+1);switch(L){case"`":I?I=!1:x+1<b.length&&b.substring(x+1,x+2)==="`"?(w[g]+="`",x++):I=!0;break;case".":I?(g++,w[g]=""):w[g]+=L;break;default:w[g]+=L}x++}if(!I)throw new A(`Mismatched quotes in ${b}`,"SXJS0018");return w}function r(b,w,g,x){let I;try{I=b.apply(g,w)}catch(L){throw L.code!==null&&typeof L.code<"u"?L:new A("Failed to call method "+b,"SXJS0007",T)}return x?I===null||typeof I>"u"?yt:wt(Yt(I)):h(I)}function h(b){var w;return b instanceof mt?w=b:w=b instanceof mt||at.la(b)||ft.gd(b)||ut.U(b)?At(b):At(new ee(b)),w}function m(b){return b instanceof ee&&b.value instanceof Promise}function c(b){return b instanceof ee?b.value:b}function _(b){if(!(b instanceof qt))throw new A("Failed processing arguments for IXSL function call","SXJS0007",T);let w=[];return b.value.length!==0&&b.value.forEach(function(g){if(g.length!==1)throw new A("Failed processing arguments for IXSL function call. With convert-args=false, all members of the XDM array $arguments must be single items","SXJS0007",T);w.push(c(g[0]))}),w}function Q(b,w,g){return w=l.string.fromString(w),b&&b.containsKey(w)?b.get(w)[0].toBoolean():g}function H(b,w,g){Z.xa("Warning "+b+": "+w,1,g)}let B={"abort-controller":function(b,w,g){w=null,b[0]&&(w=b[0].next(),w!==null&&(w=w.toNumber()));let x=new AbortController;if(w!==null){if(0>w)throw new A("ixsl:abort-controller: supplied timeout is negative: "+w,"SXJS0007",g);let I=new DOMException("Request aborted by timeout","TimeoutError");setTimeout(()=>x.abort(I),w)}return h(x)},all:function(b){let w=[];return b[0].next().value.forEach(function(g){w.push(c(g[0]))}),b=Promise.all(w).then(g=>{let x=[];return g.forEach(function(I){x.push(I.expand())}),At(new qt(x))}),h(b)},"all-settled":function(b){let w=[];return b[0].next().value.forEach(function(g){w.push(c(g[0]))}),b=Promise.allSettled(w).then(g=>{let x=[];return g.forEach(function(I){let L=new It;L.inSituPut(at.XS.string.fromString("status"),[at.XS.string.fromString(I.status)]),I.status==="fulfilled"?L.inSituPut(at.XS.string.fromString("value"),I.value.expand()):L.inSituPut(at.XS.string.fromString("reason"),[ft.Tf(I.reason)]),x.push([L])}),At(new qt(x))}),h(b)},any:function(b){let w=[];return b[0].next().value.forEach(function(g){w.push(c(g[0]))}),b=Promise.any(w).then(g=>g),h(b)},apply:function(b,w,g){var x=b[2]?b[2].next():null;w=Q(x,"convert-result",!0);let I=Q(x,"convert-args",!0);if(x=c(b[0].next()),typeof x!="function")throw new A("ixsl:apply: first argument is not a function","SXJS0007",g);return b=b[1].next(),b=I?re(b):_(b),r(x,b,null,w)},call:function(b,w,g){var x=b[3]?b[3].next():null;w=Q(x,"convert-result",!0),x=Q(x,"convert-args",!0);var I=c(b[0].next());if(I===null||typeof I>"u")throw new A("ixsl:call: specified object is "+I,"SXJS0007",g);let L=b[1].next().toString();var R=n(L);let q=R.pop();if(I=C(I,R),typeof I>"u"||I===null)throw new A("Encountered null or undefined in path to nested object for ixsl:call: '"+R.join(".")+"'","SXJS0007",g);if(R=I[q],typeof R>"u")throw new A("ixsl:call: object method '"+L+"' not found","SXJS0007",g);if(typeof R!="function")throw new A("ixsl:call: property '"+L+"' is not a function","SXJS0007",g);return b=b[2].next(),b=x?re(b):_(b),r(R,b,I,w)},catch:function(b,w,g){try{let x=c(b[0].next());if(!(x instanceof Promise))throw new A("ixsl:catch first argument is not a promise: "+Z.showValue(x),"SXJS0007",g);let I=b[1].expand();if(I.length!==1)throw new A("ixsl:catch must have exactly one function item as the second argument. Supplied length "+I.length,"SXJS0007",g);let L=I[0];if(!(L instanceof Ut.XdmFunction&&L.arity===1))throw new A("ixsl:catch function must return an arity-1 function","SXJS0007",g);let R=x.catch(q=>{if(q=L.evaluate([[ft.Tf(q)]],w,g).expand(),q.length===1){let $=q[0];if(m($))return $.value}return wt(q)});return h(R)}catch(x){return h(Promise.reject(x))}},contains:function(b,w,g){var x=c(b[0].next());if(w=!0,x===null||typeof x>"u")throw new A("ixsl:contains: specified object is "+x,"SXJS0007",g);b=b[1].next().toString(),b=n(b);let I=b.pop();if(x=C(x,b),typeof x>"u"||x===null)throw new A("Encountered null or undefined in path to nested object for ixsl:contains: '"+b.join(".")+"'","SXJS0007",g);return typeof x[I]>"u"&&(w=!1),wt(Yt(w))},doc:function(b,w,g){try{let x=Jt.Zd(b,w,g);if(!x)return h(Promise.resolve(yt));let I=w.fixed.Ta,L=w.fixed.Tb;if(I[x]&&!(I[x]instanceof A))return h(Promise.resolve(At(I[x])));let R=new Headers;if(R.append("Accept","application/xml, text/xml;q=0.9, application/xhtml+xml;q=0.8, */*;q=0.7"),w={location:x,headers:R,expr:g,type:"xml"},b[1]){let $=c(b[1].next());if($!==null){if(!($ instanceof AbortController))throw new A("Object supplied in second argument of ixsl:doc is not an AbortController: "+Z.showValue($),"SXJS0007",g);w.controller=$}}let q=J.ec(w).then($=>($=ut.dc(J.Sb($)),$._saxonBaseUri=$._saxonDocUri=x,I[x]=$,At($))).catch($=>{throw L[x]=I[x]=$,$});return h(q)}catch(x){return h(Promise.reject(x))}},"doc-fetched":function(b,w,g){return b=Jt.Zd(b,w,g),b?(w=w.fixed.Ta[b],_t(w&&!(w instanceof A))):_t(!1)},eval:function(b,w,g){w=b[1]?b[1].next():null,w=Q(w,"convert-result",!0),b=b[0].next().toString();let x;try{x=new Function("return ("+b+")")()}catch(I){throw new A("Failed to process ixsl:eval: "+I.toString(),"SXJS0007",g)}return w?wt(Yt(x)):h(x)},event:function(b,w,g){if(!J.ra())throw new A("ixsl:event is only available in the browser","SXJS0007",g);return w.de===null?yt:At(Yt(w.de)[0])},finally:function(b,w,g){try{let x=c(b[0].next());if(!(x instanceof Promise))throw new A("ixsl:finally first argument is not a promise: "+Z.showValue(x),"SXJS0007",g);let I=b[1].expand();if(I.length!==1)throw new A("ixsl:finally must have exactly one function item as the second argument. Supplied length "+I.length,"SXJS0007",g);let L=I[0];if(!(L instanceof Ut.XdmFunction&&L.arity===0))throw new A("ixsl:finally function must return an arity-0 function","SXJS0007",g);let R=x.finally(()=>{let q=L.evaluate([],w,g).expand();if(q.length===1){let $=q[0];if(m($))return $.value}return wt(q)});return h(R)}catch(x){return h(Promise.reject(x))}},get:function(b,w,g){var x=b[2]?b[2].next():null;x=Q(x,"convert-result",!0);var I=b[0].next(),L=c(I);if(L===null||typeof L>"u")throw I instanceof ee?new A("ixsl:get: specified object is "+L,"SXJS0007",g):new A("ixsl:get: specified object not found","SXJS0007",g);b=b[1].next().toString(),I=n(b);let R=I.pop();if(L=C(L,I),typeof L>"u"||L===null)throw new A("Encountered null or undefined in path to nested object for ixsl:get: '"+I.join(".")+"'","SXJS0007",g);return g=L[R],x?typeof g>"u"?(H("ixsl:get","object property '"+b+"' not found",w.fixed.Ka),yt):g===null?yt:wt(Yt(g)):h(g)},"http-request":function(b,w){var g=b[0].next();g=re(g,!0),Jt.pj(g),Z.xa("HTTP request prepared",2,w.fixed.Ka);let x=null;if(b[1]&&(x=c(b[1].next()),x!==null&&!(x instanceof AbortController)))throw new A("Object supplied in second argument of ixsl:http-request is not an AbortController: "+Z.showValue(x),"SXJS0007",T);if(x===null&&(x=new AbortController,b=0,"timeout"in g&&(b=g.timeout),b!==0)){let I=new DOMException("Request aborted by timeout","TimeoutError");setTimeout(()=>x.abort(I),b)}return w=Jt.Li(g,x,w,!0).then(I=>At(I[0])),h(w)},"json-parse":function(b,w,g){w=b[1]?b[1].next():null,w=Q(w,"convert-result",!1),b=b[0].next().toString();let x;try{x=JSON.parse(b)}catch(I){throw new A("Failed to parse JSON in ixsl:json-parse: "+I.toString(),"SXJS0007",g)}return w?wt(Yt(x)):At(new ee(x))},"json-doc":function(b,w,g){try{let I=Jt.zd(b,w,g);if(!I)return h(Promise.resolve(yt));let L=b[1]?b[1].next():null,R=w.fixed.kb,q=w.fixed.Tb;if(R[I]&&!(R[I]instanceof A)){var x=ln.od(R[I],L,w);return h(Promise.resolve(At(x)))}if(x={location:I,expr:g,type:"json"},b[2]){let rt=c(b[2].next());if(rt!==null){if(!(rt instanceof AbortController))throw new A("Object supplied in third argument of ixsl:json-doc is not an AbortController: "+Z.showValue(rt),"SXJS0007",g);x.controller=rt}}let $=J.ec(x).then(rt=>(R[I]=rt,rt=ln.od(rt,L,w),At(rt))).catch(rt=>{throw q[I]=R[I]=rt,rt});return h($)}catch(I){return h(Promise.reject(I))}},location:function(b,w,g){if(!J.ra())throw new A("ixsl:location is only available in the browser","SXJS0007",g);return At(Yt(window.location.toString())[0])},new:function(b,w,g){var x=b[2]?b[2].next():null;w=Q(x,"convert-result",!1),x=Q(x,"convert-args",!0);let I=b[0].next().toString();if(!I.match(F))throw new A("Name is not a valid class name:"+I,"SXJS0010");b=b[1].next(),evalArgName=x?re(b):_(b);let L;try{L=new Function(`return (new ${I}(...evalArgName))`)()}catch(R){throw new A("Failed to process ixsl:new: "+R.toString(),"SXJS0007",g)}return w?wt(Yt(L)):h(L)},page:function(b,w){return At(Yt(w.masterDocument)[0])},"query-params":function(b,w,g){function x(R){return l.string.fromString(decodeURIComponent(R.replace(I," ")))}if(!J.ra())throw new A("ixsl:query-params is only available in the browser","SXJS0007",g);let I=/\+/g;w=/([^&=]+)=?([^&]*)/g,g=window.location.search.substring(1);let L=new It;for(;(b=w.exec(g))!==null;){let R=L.get(x(b[1]));R.push(x(b[2])),L.inSituPut(x(b[1]),R)}return At(L)},race:function(b){let w=[];return b[0].next().value.forEach(function(g){w.push(c(g[0]))}),b=Promise.race(w).then(g=>g),h(b)},resolve:function(b){return b=b[0].expand(),b.length===1?(b=b[0],b=m(b)?Promise.resolve(b.value):Promise.resolve(At(b))):b=Promise.resolve(wt(b)),h(b)},sleep:function(b,w,g){try{let x=b[0].next().value;if(0>x)throw new A("ixsl:sleep supplied arg is negative: "+x,"SXJS0007",g);let I=new Promise(L=>setTimeout(L,x)).then(()=>yt);return h(I)}catch(x){return h(Promise.reject(x))}},source:function(b,w){return b=w.fixed.cd,typeof b>"u"||b===null?yt:At(Yt(b)[0])},style:function(b,w,g){if(!J.ra())throw new A("ixsl:style is only available in the browser","SXJS0007",g);for(b=b[0].next(),b=ut.$f(b)?window.getComputedStyle(b):{},w=new It,g=0;g<b.length;g++){let x=b.item(g),I=b.getPropertyValue(x);typeof I>"u"||I===null?w.inSituPut(l.string.fromString(x),[]):w.inSituPut(l.string.fromString(x),[l.string.fromString(I.toString())])}return At(w)},then:function(b,w,g){try{let x=c(b[0].next());if(!(x instanceof Promise))throw new A("ixsl:then first argument is not a promise: "+Z.showValue(x),"SXJS0007",g);let I=b[1].expand();if(I.length!==1)throw new A("ixsl:then must have exactly one function item as the second argument. Supplied length "+I.length,"SXJS0007",g);let L=I[0];if(!(L instanceof Ut.XdmFunction&&L.arity===1))throw new A("ixsl:then function must return an arity-1 function","SXJS0007",g);let R=x.then(q=>{if(q=L.evaluate([q.expand()],w,g).expand(),q.length===1){let $=q[0];if(m($))return $.value}return wt(q)});return h(R)}catch(x){return h(Promise.reject(x))}},"unparsed-text":function(b,w,g){try{let x=Jt.zd(b,w,g);if(!x)return h(Promise.resolve(yt));let I=w.fixed.kb,L=w.fixed.Tb;if(I[x]&&!(I[x]instanceof A))return h(Promise.resolve(Mt(I[x])));if(w={location:x,expr:g,type:"text"},b[2]){let $=c(b[2].next());if($!==null){if(!($ instanceof AbortController))throw new A("Object supplied in third argument of ixsl:unparsed-text is not an AbortController: "+Z.showValue($),"SXJS0007",g);w.controller=$}}let R=Jt.Ne(b[1]?u(b[1]):"");R&&(w.encoding=R);let q=J.ec(w).then($=>(I[x]=$,Mt($))).catch($=>{throw L[x]=I[x]=$,$});return h(q)}catch(x){return h(Promise.reject(x))}},"unparsed-text-fetched":function(b,w,g){return b=Jt.Zd(b,w,g),b?(w=w.fixed.kb[b],_t(w&&!(w instanceof A))):_t(!1)},window:function(){return At(Yt(J.Hi())[0])},"remove-attribute":function(b,w,g){let x=b[0].next().toString();if(b=b[1].next(),b.nodeType!==1||b.ownerDocument!==w.masterDocument)throw new A("Context item for ixsl:remove-attribute must be an element in the master document","SXJS0007",g);return w=ft.jg(g,x,!1),w.uri!==""?b.removeAttributeNS(w.uri,w.local):b.removeAttribute(w.local),yt},"remove-property":function(b,w,g){let x=b[0].next().toString();var I=c(b[1].next());let L=n(x);if(b=L.pop(),I=C(I,L),typeof I>"u"||I===null)throw new A("Encountered null or undefined in path to nested object for ixsl:remove-property: '"+L.join(".")+"'","SXJS0007",g);return typeof I[b]>"u"?(H("ixsl:remove-property","'"+x+"' not found for supplied object",w.fixed.Ka),yt):(g=I.hasOwnProperty(b),delete I[b]&&g||H("ixsl:remove-property","'"+x+"' could not be removed for supplied object",w.fixed.Ka),yt)},"schedule-action":function(b,w,g){throw new A("ixsl:schedule-action - shouldn't be here","SXJS0007",g)},"set-attribute":function(b,w,g){let x=b[0].next().toString(),I=b[1].next().toString();if(b[2]||He(w,"SXJS0007","ixsl:set-attribute",g),b=b[2]?b[2].next():ue(w),w=ut.Ac(w.masterDocument),b.nodeType!==1||ut.Ac(b)!==w)throw new A("Context item for ixsl:set-attribute must be an element in the master document","SXJS0007",g);let L=ft.jg(g,x,!1);return L.uri!==""?(L.prefix===""&&ut.Dc(b).forEach(function(R){R.uri===L.uri&&(L.prefix=R.prefix)}),b.setAttributeNS(L.uri,L.toString(),I)):b.setAttribute(L.local,I),yt},"set-property":function(b,w,g){var x=b[0].next().toString();w=!0,b[3]&&(w=re(b[3].next()));var I=b[1].next();if(w=w?re(I):c(I),b=c(b[2].next()),x=n(x),I=x.pop(),b=C(b,x),typeof b>"u"||b===null)throw new A("Encountered null or undefined in path to nested object for ixsl:set-property: '"+x.join(".")+"'","SXJS0007",g);return typeof b!="object"||(b[I]=w),yt},"set-style":function(b,w,g){if(!J.ra())throw new A("ixsl:set-style is only available in the browser","SXJS0007",g);g=b[0].next().toString();let x=re(b[1].next());return b=b[2].next(),ut.$f(b)&&"style"in b?(b.style[g]=x,yt):(H("ixsl:set-style","style '"+g+"' cannot be set for supplied object",w.fixed.Ka),yt)}};if(!B[d])throw new A("Unknown ixsl function: "+d,"SXJS0003",T);return B[d](o,E,T)}function f(d,o,E,T){function C(c,_){if(1>c||c>_)throw new A("Array index ("+c+") out of bounds (1 to "+_+")","FOAY0001",T)}function n(c){return c[0].next().value}function r(c){return At(new qt(c))}function h(c,_,Q,H){let B=_.fixed.fa,b=c[1].expand(),w=c[2].expand()[0],g=Object.keys(_.ma).length;if(w instanceof Ut.XdmFunction)c=n(c),H||(c=c.reverse()),c.forEach(x=>{b=w.evaluate(H?[b,x]:[x,b],_,Q).expand()});else{let x;w.N!=="function"&&(x=w),c[0].forEachItem(function(I){let L=_.X(!0);x&&(L.oa=x),zn(L),L.pa="function",L.ab={},L.Wa=null,L.focus=null,H?(L.ma[g]=b,L.ma[g+1]=[I]):(L.ma[g]=[I],L.ma[g+1]=b),b=B.evaluate(void 0,L).expand()})}return wt(b)}let m={append:function(c){return r(n(c).concat([c[1].expand()]))},filter:function(c,_,Q){let H=c[1].expand()[0];if(Object.keys(_.ma),c=n(c),H.evaluate){let B=[];return c.forEach(function(b){let w=H.evaluate([b],_,Q).expand();if(Array.isArray(w)&&w.length!==1||!l.boolean.matches(w[0]))throw new A("Wrong type for function result in filter(). Expecting xs:boolean, supplied value is "+Z.showValue(w),"XPTY0004",Q);w[0].toBoolean()&&B.push(b)}),r(B)}throw new A("Argument supplied to array:filter is not a function","XPTY0004",Q)},flatten:function(c){return ft.flatten(c[0])},"fold-left":function(c,_,Q){return h(c,_,Q,!0)},"fold-right":function(c,_,Q){return h(c,_,Q,!1)},"for-each":function(c,_,Q){let H=c[1].expand()[0];if(c=n(c),Object.keys(_.ma),H.evaluate){let B=[];return c.forEach(function(b){B.push(H.evaluate([b],_,Q).expand())}),r(B)}},"for-each-pair":function(c,_,Q){let H=c[2].expand();if(H.length!==1)throw new A("for-each-pair() must have exactly one function item as the third argument. Supplied length "+H.length,"XPTY0004",Q);H=H[0],Object.keys(_.ma);let B=[],b=c[0].next().value[Symbol.iterator]();c=c[1].next().value[Symbol.iterator]();let w=b.next().value,g=c.next().value;if(H instanceof Ut.XdmFunction)for(;w&&g;)B.push(H.evaluate([w,g],_,Q).expand()),w=b.next().value,g=c.next().value;return r(B)},"_from-sequence":function(c){let _=[];return c[0].forEachItem(function(Q){_.push([Q])}),r(_)},get:function(c){let _=n(c);return c=c[1].next().toNumber(),C(c,_.length),wt(_[c-1])},head:function(c){return c=n(c),C(1,c.length),wt(c[0])},"insert-before":function(c){let _=n(c),Q=c[1].next().toNumber();return C(Q,_.length+1),c=c[2].expand(),r(_.slice(0,Q-1).concat([c]).concat(_.slice(Q-1)))},join:function(c){let _=[];return c[0].forEachItem(function(Q){Q.value.forEach(function(H){_.push(H)})}),r(_)},put:function(c){let _=n(c),Q=c[1].next().toNumber();return C(Q,_.length),c=c[2].expand(),r(_.slice(0,Q-1).concat([c]).concat(_.slice(Q)))},remove:function(c){let _=n(c),Q=[];return c[1].forEachItem(function(H){H=H.toNumber(),C(H,_.length),Q.push(H-1)}),r(_.filter(function(H,B){return 0>Q.indexOf(B)}))},reverse:function(c){return r(n(c).slice().reverse())},size:function(c){return he(c[0].next().size())},sort:function(c,_,Q){let H=Bt.Te(Q,c[1],_),B=ft.Kb;if(c[2]){let b=c[2].next();B=function(w){return b.evaluate([[w]],_,Q)}}return r(n(c).slice().sort(function(b,w){return c[1]?ni(wt(b).mapOneToMany(B),wt(w).mapOneToMany(B),H):ni(wt(b).mapOneToMany(B),wt(w).mapOneToMany(B))}))},subarray:function(c){let _=n(c),Q=c[1].next().toNumber();if(C(Q,_.length+1),c=c[2]?c[2].next().toNumber():_.length-Q+1,0>c)throw new A("Length is negative","FOAY0002");return C(Q+c,_.length+1),r(_.slice(Q-1,Q+c-1))},tail:function(c){return c=n(c),C(1,c.length),r(c.slice(1))},"_to-sequence":function(c){let _=[];return n(c).forEach(function(Q){Q.forEach(function(H){_.push(H)})}),wt(_)}};if(!m[d])throw new A("Unknown array function: "+d,"SXJS0003",T);return m[d](o,E,T)}function v(d,o,E,T){let C={contains:function(n){let r=n[0].next();return n=n[1].next(),_t(r.containsKey(n))},create:function(n){let r=new It;return n[0].forEachItem(function(h){h.forAllPairs(function(m){r.inSituPut(m.k,m.v)})}),At(r)},entry:function(n){let r=new It;return r.inSituPut(n[0].next(),n[1].expand()),At(r)},find:function(n){function r(_){ft.isArray(_)?_.value.forEach(h):ft.isMap(_)&&(_.containsKey(c)&&m.push(_.get(c)),_.keys().forEach(function(Q){h(_.get(Q))}))}function h(_){_.forEach(r)}let m=[],c=n[1].next();return h(n[0].expand()),At(new qt(m))},"for-each":function(n,r,h){let m=n[0].next();if(m instanceof ee)throw new A("Argument to map:for-each is a JSValue","XPTY0004",h);let c=m.keys(),_=n[1].expand()[0];if(_.evaluate){let Q=[];return c.forEach(function(H){Q=Q.concat(_.evaluate([[H],m.get(H)],r,h).expand())}),wt(Q)}throw new A("Argument to map:for-each is not a function","XPTY0004",h)},get:function(n){let r=n[0].next();return n=n[1].next(),wt(r.get(n))},keys:function(n){if(n=n[0].next(),n instanceof ee)throw new A("Argument to map:keys is a JSValue","XPTY0004",T);return wt(n.keys())},merge:function(n){let r=new It,h=n[1]?n[1].next():null,m=l.string.fromString("duplicates"),c=h&&h.containsKey(m)?h.get(m).toString():"use-first";return n[0].forEachItem(function(_){if(_ instanceof ee)throw new A("JSValue supplied to map:merge","XPTY0004",T);_.forAllPairs(function(Q){if(!r.containsKey(Q.k)||["use-last","unspecified","use-any"].includes(c))r.inSituPut(Q.k,Q.v);else{if(c==="reject"){var H=l.string.fromString("duplicates-error-code");throw H=h.containsKey(H)?h.get(H).toString():"FOJS0003",new A("Duplicate key value '"+Q.k.toString()+"'",H,T)}if(c==="combine"){let B=[];r.get(Q.k).forEach(function(b){B.push(b)}),Q.v.forEach(function(b){B.push(b)}),r.inSituPut(Q.k,B)}}})}),At(r)},_new:function(n){let r=new It;return n[0]&&n[0].forEachItem(function(h){h.forAllPairs(function(m){if(r.containsKey(m.k))throw new A("Duplicate key value '"+m.k.toString()+"'",E.fixed.options.language==="XSLT"?"XTDE3365":"XQDY0137",T);r.inSituPut(m.k,m.v)})}),At(r)},put:function(n){let r=n[0].next(),h=n[1].next();if(n=n[2].expand(),r instanceof ee)throw new A("Argument to map:put is a JSValue","XPTY0004",T);return At(r.put(h,n))},remove:function(n){let r=n[0].next();if(r instanceof ee)throw new A("Argument to map:remove is a JSValue","XPTY0004",T);return n[1].forEachItem(function(h){r=r.remove(h)}),At(r)},size:function(n){if(n=n[0].next(),n instanceof ee)throw new A("Argument to map:size is a JSValue","XPTY0004",T);let r=0;return n.forAllPairs(function(){r++}),he(r)},"untyped-contains":function(n){let r=n[0].next();return n=n[1].next(),_t(r.containsKey(n))}};if(!C[d])throw new A("Unknown map function: "+d,"SXJS0003",T);return C[d](o,E,T)}function a(d,o,E,T){function C(c){return c===null?(h=!0,Number.NaN):c.toNumber()}function n(){let c=o[0].next();return C(c||ft.Pa(T)(E).next())}function r(){let c=o[1].next();return C(c||ft.Kg(T)(E).next())}let h=!1,m=function(){switch(d){case"pi":return Math.PI;case"exp":return Math.exp(n());case"exp10":return Math.pow(10,n());case"log":return Math.log(n());case"log10":return Math.log(n())/Math.LN10;case"pow":let c=n(),_=r();return c===-1&&(_===1/0||_===-1/0)||c===1?1:Math.pow(c,_);case"sqrt":return Math.sqrt(n());case"sin":return Math.sin(n());case"cos":return Math.cos(n());case"tan":return Math.tan(n());case"asin":return Math.asin(n());case"acos":return Math.acos(n());case"atan":return Math.atan(n());case"atan2":return Math.atan2(n(),r());default:throw new A("Unknown math function "+T.name,"XPST0017",T)}}();return h?yt:ho(m)}function u(d){return(d=d.next())?d.value:""}let l=at.XS,F=RegExp("^[A-Za-z_][A-Za-z_0-9.]*$"),S=Object.getPrototypeOf(function*(){}).prototype,O=Object.getPrototypeOf(S),k=new Di;return k.addLibrary(Ft.qb,{apply:cr.apply,"compile-XPath":function(d,o,E){let T=d[0].next().toString(),C,n;return 1<d.length&&(C=d[1].next(),C=C!==null?re(C,!0):{}),2<d.length&&(n=d[2]),Oe.find("SaxonJS").internals.XPath.compileToXML(T,C,n,E,o)},"compile-GlobalContext":function(d,o,E){let T,C;return T=d[0].next(),T=T!==null?re(T,!0):{},C=d[1].next(),C=C!==null?re(C,!0):{},d=d[2].next(),d=d!==null?re(d,!0):{},Oe.find("SaxonJS").internals.XPath.compileGlobalContext(T,C,d,E,o)},"discard-document":function(d,o,E){if(d=d[0].next(),d===null||d.nodeType!==9||!d._saxonBaseUri)throw new A("Node supplied to saxon:discard-document() is not a document node","XPTY0004",E);return E=d._saxonBaseUri,d=o.fixed.Ta[E],delete o.fixed.Ta[E],delete o.fixed.Tb[E],At(d)},doc:cr.doc,"dynamic-error-info":function(d,o){if(o=o.Oe,o===null)return yt;switch(d=d[0].next().toString(),d){case"description":return Mt(o.message);case"code":return At(/^Q\{/.test(o.code)?l.QName.fromString(o.code):l.QName.fromParts("err","http://www.w3.org/2005/xqt-errors",o.code));case"value":return o.errorObject?At(o.errorObject):yt;case"module":return Mt(o.xsltModule||"");case"line-number":return he(o.xsltLineNr);case"column-number":return he(-1);default:throw new A("unknown error info field "+d,"SXJS0003")}},"has-uniform-namespaces":function(d){return _t(ut.dh(d[0].next()))},"line-number":function(d){return d=d[0].next().Wk,he(d||-1)},"marshal-type":function(d){return d=d[0].next().toString(),d=Le(d),At(Ne(Yt(d))[0])},"message-count":function(d,o){d=d[0].next();let E=0;if(d)d=d.toEQName(),(E=o.qc[d])||(E=0);else for(let T in o.qc)E+=o.qc[T];return he(E)},"parse-sequence-type":function(d){var o=d[0].next().toString();let E=d[1].next();if(d=ut.Fi(E,Ft.ri,"ns"),d!=null){let T=Re.parseNsAttribute(d);d=C=>T[C]}else d=T=>E.lookupNamespaceURI(T);return o=_s.parseSequenceType(o,d,()=>{let T=E;for(;T&&T.nodeType===1;){if(ut.aa(T).uri===Ft.Qc&&T.hasAttributeNS("","xpath-default-namespace"))return T.getAttributeNS("","xpath-default-namespace");if(T.hasAttributeNS(Ft.Qc,"xpath-default-namespace"))return T.getAttributeNS(Ft.Qc,"xpath-default-namespace");T=ut.Va(T)}}),At(Ne(Yt(o.V()))[0])},"parse-XPath":function(d){let o=d[0].next().toString(),E="parse";return 1<d.length&&(E=d[1].next().toString()),d=_s.process(o,E==="pattern.parseFast",null,!0),At(d)},permute:function(d){let o=[];return d[0].expand().forEach(E=>o.push({key:Math.random(),Gj:E})),o=o.sort(function(E,T){return E.key-T.key}),d=o.map(E=>E.Gj),wt(d)},"system-id":function(d,o){return d=ue(o),d=ut.U(d)?ut.baseURI(d):null,At(d===null?null:l.anyURI.fromString(d))},timestamp:function(d,o){return At(l.dateTimeStamp.fromDate(new Date,-o.fixed.Bb.getTimezoneOffset()))}}),k.addLibrary("http://exslt.org/common",{"node-set":function(d){return d[0]}}),ft.uj(e),{evaluate:e,addLibrary:function(d){k.addLibrary(d.namespace,d.signatures)}}}(),window.ScheduleImpl=function(e,t,i,f){return v=>{let a;if(i&&(a=i(v).next(),!(a instanceof Ut.XdmFunction)||a.arity!==1&&a.arity!==0))throw new A("ixsl:promise/@on-completion must return an arity-0 or arity-1 function","XPTY0004",e);let u;if(f){if(u=f(v).next(),!(u instanceof Ut.XdmFunction&&u.arity===1))throw new A("ixsl:promise/@on-failure must return an arity-1 function","XPTY0004",e);let S=new It;if(!u.Ve().yc()[0].matches([S]))throw new A("ixsl:promise/@on-failure function argument type must include map","XPTY0004",e)}let l;try{l=t(v).next()}catch(S){var F=Promise.reject(S)}return typeof F>"u"&&(F=l instanceof ee&&l.value instanceof Promise?l.value:Promise.reject(new A("ixsl:promise/@select must return a Promise","XPTY0004",e))),F=F.then(S=>{a&&(S=a.arity===0?[]:[S.expand()],a.evaluate(S,v,e).expand())}).catch(S=>{if(u)u.evaluate([[ft.Tf(S)]],v,e).expand();else throw S}),v.fixed.hc.push(F),yt}},function(){function e(f){t=f,t.init(),J.zj(f)}let t={},i={atom:Me.atom,getLogLevel:Z.getLogLevel,getProcessorInfo:Me.getProcessorInfo,getResource:Me.getResource,setLogLevel:Z.setLogLevel,serialize:Me.serialize,transform:wn.transform,XPath:{evaluate:ur.evaluate},XError:A,getConfigurationProperties:Me.getConfigurationProperties,getConfigurationProperty:Me.getConfigurationProperty,setConfigurationProperties:Me.setConfigurationProperties,setConfigurationProperty:Me.setConfigurationProperty,resetIndexes:Me.resetIndexes,registerExtensionFunctions:function(f){new Di().addLibrary(f.namespace,f.signatures)},Iter:Kt,JSValue:ee,XdmArray:qt,XdmFunction:Ut,XdmMap:It,XS:at.XS,XdmAttributeNode:Tn,XdmNamespaceNode:cn,internals:{Atomic:at,Big:gt,Codepoint:Ct,Compare:Bt,Diag:Z,DomUtils:ut,Expr:ft,Fetch:Jt,NsConst:Ft,Push:Gt,Regex:jt,Serializer:Ht,StringWriter:Ht.xf,XPath:ur,checkOptions:wn.checkOptions,internalTransform:wn.internalTransform,getPlatform:function(){return t},getErrorCount:ot,resetErrorCount:ct}};return typeof window<"u"||typeof HostPlatform<"u"?(HostPlatform.entryPoint=i,e(HostPlatform),t.expose(i,"SaxonJS")):console.log("Platform binding delayed"),at.yf(),jt.yf(),hu(),Oe.register("SaxonJS",i),Oe.register("ExternalFunctionManager",new Di),i}()}).call(Ua)});var Nc={};dc(Nc,{FetchConverter:()=>Vs,MidiControllerMessage:()=>$a,MidiRegisteredParameterNumber:()=>Qa,MmaConverter:()=>qs,MuseScoreConverter:()=>$s,MuseScoreRenderer:()=>Js,OpenSheetMusicDisplayRenderer:()=>Us,Player:()=>ks,SoundFontOutput:()=>Ln,VerovioConverter:()=>Ks,VerovioRenderer:()=>Qs,WebAudioFontOutput:()=>Ys,assertIsDefined:()=>ne,atoab:()=>jr,binarySearch:()=>lr,fetish:()=>fn,parseMidiEvent:()=>kn,parseMidiFile:()=>Ac,parseMusicXml:()=>Rs});module.exports=gc(Nc);var hn=require("midi-player"),Ya=require("json-midi-encoder");async function fn(dt,J){let lt=await fetch(dt,J);if(!lt.ok)throw new Error(lt.statusText);return lt}function lr(dt,J,lt){let ot=0,ct=dt.length-1;for(;ot<=ct;){let A=ct+ot>>1,Z=lt(J,dt[A]);if(Z>0)ot=A+1;else if(Z<0)ct=A-1;else return A}return~ot}function kn(dt){let J=new Uint8Array(dt),lt=new DataView(J.buffer),ot,ct=0,A=lt.getUint8(ct);return A===240?ot=Ma(lt,ct+1):A===255?ot=ja(lt,ct+1):ot=Ra(A,lt,ct+1,null),{...ot.event,delta:0}}var Ac=(dt,J)=>{let lt=new DataView(dt),ot=Fc(lt),ct=14,A=[];for(let Z=0,gt=ot.numberOfTracks;Z<gt;Z+=1){let Ct;({offset:ct,track:Ct}=Ec(lt,ct)),J&&J(Z,Ct),A.push(Ct)}return{division:ot.division,format:ot.format,tracks:A}},Fc=dt=>{if(dt.byteLength<14)throw new Error(`Expected at least 14 bytes instead of ${dt.byteLength}`);if(_e(dt,0,4)!=="MThd")throw new Error(`Unexpected characters "${_e(dt,0,4)}" found instead of "MThd"`);if(dt.getUint32(4)!==6)throw new Error(`The header has an unexpected length of ${dt.getUint32(4)} instead of 6`);let J=dt.getUint16(8),lt=dt.getUint16(10);return{division:dt.getUint16(12),format:J,numberOfTracks:lt}},Ec=(dt,J)=>{if(_e(dt,J,4)!=="MTrk")throw new Error(`Unexpected characters "${_e(dt,J,4)}" found instead of "MTrk"`);let lt=[],ot=dt.getUint32(J+4)+J+8,ct=null,A=J+8;for(;A<ot;){let Z=wc(dt,A,ct),{event:gt,eventTypeByte:Ct}=Z;lt.push(gt),A=Z.offset,xc(gt)&&(Ct&128)>0&&(ct=Ct)}return{offset:A,track:lt}},wc=(dt,J,lt)=>{let ot,{offset:ct,value:A}=Xs(dt,J),Z=dt.getUint8(ct);return Z===240?ot=Ma(dt,ct+1):Z===255?ot=ja(dt,ct+1):ot=Ra(Z,dt,ct+1,lt),{...ot,event:{...ot.event,delta:A},eventTypeByte:Z}},ja=(dt,J)=>{let lt,ot=dt.getUint8(J),{offset:ct,value:A}=Xs(dt,J+1);if(ot===1)lt={text:_e(dt,ct,A)};else if(ot===2)lt={copyrightNotice:_e(dt,ct,A)};else if(ot===3)lt={trackName:_e(dt,ct,A)};else if(ot===4)lt={instrumentName:_e(dt,ct,A)};else if(ot===5)lt={lyric:_e(dt,ct,A)};else if(ot===6)lt={marker:_e(dt,ct,A)};else if(ot===7)lt={cuePoint:_e(dt,ct,A)};else if(ot===8)lt={programName:_e(dt,ct,A)};else if(ot===9)lt={deviceName:_e(dt,ct,A)};else if(ot===10||ot===11||ot===12||ot===13||ot===14||ot===15)lt={metaTypeByte:Ci(ot),text:_e(dt,ct,A)};else if(ot===32)lt={channelPrefix:dt.getUint8(ct)};else if(ot===33)lt={midiPort:dt.getUint8(ct)};else if(ot===47)lt={endOfTrack:!0};else if(ot===81)lt={setTempo:{microsecondsPerQuarter:(dt.getUint8(ct)<<16)+(dt.getUint8(ct+1)<<8)+dt.getUint8(ct+2)}};else if(ot===84){let Z,gt=dt.getUint8(ct);gt&96?(gt&96)===32?Z=25:(gt&96)===64?Z=29:(gt&96)===96&&(Z=30):Z=24,lt={smpteOffset:{frame:dt.getUint8(ct+3),frameRate:Z,hour:gt&31,minutes:dt.getUint8(ct+1),seconds:dt.getUint8(ct+2),subFrame:dt.getUint8(ct+4)}}}else if(ot===88)lt={timeSignature:{denominator:Math.pow(2,dt.getUint8(ct+1)),metronome:dt.getUint8(ct+2),numerator:dt.getUint8(ct),thirtyseconds:dt.getUint8(ct+3)}};else if(ot===89)lt={keySignature:{key:dt.getInt8(ct),scale:dt.getInt8(ct+1)}};else if(ot===127)lt={sequencerSpecificData:ka(dt,ct,A)};else throw new Error(`Cannot parse a meta event with a type of "${Ci(ot)}"`);return{event:lt,offset:ct+A}},Ra=(dt,J,lt,ot)=>{let ct=dt&128?null:ot,A=(ct===null?dt:ct)>>4,Z,gt=ct===null?lt:lt-1;if(A===8)Z={noteOff:{noteNumber:J.getUint8(gt),velocity:J.getUint8(gt+1)}},gt+=2;else if(A===9){let Ct=J.getUint8(gt),Ft=J.getUint8(gt+1);Ft===0?Z={noteOff:{noteNumber:Ct,velocity:Ft}}:Z={noteOn:{noteNumber:Ct,velocity:Ft}},gt+=2}else if(A===10)Z={keyPressure:{noteNumber:J.getUint8(gt),pressure:J.getUint8(gt+1)}},gt+=2;else if(A===11)Z={controlChange:{type:J.getUint8(gt),value:J.getUint8(gt+1)}},gt+=2;else if(A===12)Z={programChange:{programNumber:J.getUint8(gt)}},gt+=1;else if(A===13)Z={channelPressure:{pressure:J.getUint8(gt)}},gt+=1;else if(A===14)Z={pitchBend:J.getUint8(gt)|J.getUint8(gt+1)<<7},gt+=2;else throw new Error(`Cannot parse a midi event with a type of "${Ci(A)}"`);return Z.channel=(ct===null?dt:ct)&15,{event:Z,offset:gt}},Ma=(dt,J)=>{let{offset:lt,value:ot}=Xs(dt,J);return{event:{sysex:ka(dt,lt,ot)},offset:lt+ot}},Xs=(dt,J)=>{let lt=J,ot=0;for(;;){let ct=dt.getUint8(lt);if(lt+=1,ct>127)ot+=ct&127,ot<<=7;else return ot+=ct,{offset:lt,value:ot}}},Ci=dt=>dt.toString(16).toUpperCase().padStart(2,"0"),ka=(dt,J=0,lt=dt.byteLength-(J-dt.byteOffset))=>{let ot=J+dt.byteOffset,ct=[],A=new Uint8Array(dt.buffer,ot,lt);for(let Z=0;Z<lt;Z+=1)ct[Z]=Ci(A[Z]);return ct.join("")},_e=(dt,J=0,lt=dt.byteLength-(J-dt.byteOffset))=>{let ot=J+dt.byteOffset,ct=new Uint8Array(dt.buffer,ot,lt);return String.fromCharCode.apply(null,ct)},xc=dt=>dt.channel!==void 0;var Ja=require("unzipit"),Un=Sn(fr());async function Rs(dt,J){if(dt instanceof ArrayBuffer){let lt=new TextDecoder().decode(dt);try{return await js(lt,J)}catch{}return await bc(dt,J)}else return await js(dt,J)}async function bc(dt,J){let{entries:lt}=await(0,Ja.unzip)(dt),ot=new TextDecoder,ct=await lt["META-INF/container.xml"].arrayBuffer(),A=await Un.default.getResource({type:"xml",encoding:"utf8",text:ot.decode(ct)}),Z=Un.default.XPath.evaluate("//rootfile[1]/@full-path",A);if(!Z)throw new Error("[parseMusicXml] Invalid compressed MusicXML file does not contain rootfile/@full-path.");let gt=await lt[Z.value].arrayBuffer();return js(ot.decode(gt),J)}async function js(dt,J){let lt=await Un.default.getResource({type:"xml",encoding:"utf8",text:dt});if(!Un.default.XPath.evaluate("boolean(//score-partwise | //score-timewise)",lt))throw new Error("[parseMusicXml] Invalid MusicXML file contains neither score-partwise nor score-timewise.");let ct=Un.default.XPath.evaluate("//score-partwise/@version | //score-timewise/@version",lt)??{value:"(unknown)"};console.debug(`[parseMusicXml] MusicXML version ${ct.value}`);let A={musicXml:dt,queries:{}};if(J)for(let Z in J)try{let gt=Un.default.XPath.evaluate(J[Z],lt);if(gt)A.queries[Z]={query:J[Z],result:gt.nodeValue??gt.value??null};else throw"not found"}catch{A.queries[Z]={query:J[Z],result:null}}return A}var $a=(mt=>(mt[mt.BankSelect_Coarse=0]="BankSelect_Coarse",mt[mt.ModulationWheel_Coarse=1]="ModulationWheel_Coarse",mt[mt.BreathController_Coarse=2]="BreathController_Coarse",mt[mt.FootController_Coarse=3]="FootController_Coarse",mt[mt.PortamentoTime_Coarse=4]="PortamentoTime_Coarse",mt[mt.DataEntry_Coarse=5]="DataEntry_Coarse",mt[mt.ChannelVolume_Coarse=6]="ChannelVolume_Coarse",mt[mt.Balance_Coarse=7]="Balance_Coarse",mt[mt.Pan_Coarse=10]="Pan_Coarse",mt[mt.Expression_Coarse=11]="Expression_Coarse",mt[mt.EffectControl1_Coarse=12]="EffectControl1_Coarse",mt[mt.EffectControl2_Coarse=13]="EffectControl2_Coarse",mt[mt.GeneralPurposeController1=16]="GeneralPurposeController1",mt[mt.GeneralPurposeController2=17]="GeneralPurposeController2",mt[mt.GeneralPurposeController3=18]="GeneralPurposeController3",mt[mt.GeneralPurposeController4=19]="GeneralPurposeController4",mt[mt.BankSelect_Fine=32]="BankSelect_Fine",mt[mt.ModulationWheel_Fine=33]="ModulationWheel_Fine",mt[mt.BreathController_Fine=34]="BreathController_Fine",mt[mt.FootController_Fine=36]="FootController_Fine",mt[mt.PortamentoTime_Fine=37]="PortamentoTime_Fine",mt[mt.DataEntry_Fine=38]="DataEntry_Fine",mt[mt.ChannelVolume_Fine=39]="ChannelVolume_Fine",mt[mt.Balance_Fine=40]="Balance_Fine",mt[mt.Pan_Fine=42]="Pan_Fine",mt[mt.Expression_Fine=43]="Expression_Fine",mt[mt.EffectControl1_Fine=44]="EffectControl1_Fine",mt[mt.EffectControl2_Fine=45]="EffectControl2_Fine",mt[mt.HoldPedal1_OnOff=64]="HoldPedal1_OnOff",mt[mt.PortamentoPedal_OnOff=65]="PortamentoPedal_OnOff",mt[mt.SostenutoPedal_OnOff=66]="SostenutoPedal_OnOff",mt[mt.SoftPedal_OnOff=67]="SoftPedal_OnOff",mt[mt.LegatoPedal_OnOff=68]="LegatoPedal_OnOff",mt[mt.HoldPedal2_OnOff=69]="HoldPedal2_OnOff",mt[mt.SoundController1=70]="SoundController1",mt[mt.SoundController2=71]="SoundController2",mt[mt.SoundController3=72]="SoundController3",mt[mt.SoundController4=73]="SoundController4",mt[mt.SoundController5=74]="SoundController5",mt[mt.SoundController6=75]="SoundController6",mt[mt.SoundController7=76]="SoundController7",mt[mt.SoundController8=77]="SoundController8",mt[mt.SoundController9=78]="SoundController9",mt[mt.SoundController10=79]="SoundController10",mt[mt.GeneralPurposeController5=80]="GeneralPurposeController5",mt[mt.GeneralPurposeController6=81]="GeneralPurposeController6",mt[mt.GeneralPurposeController7=82]="GeneralPurposeController7",mt[mt.GeneralPurposeController8=83]="GeneralPurposeController8",mt[mt.PortamentoControl=84]="PortamentoControl",mt[mt.HighResolutionVelocityPrefix=88]="HighResolutionVelocityPrefix",mt[mt.Effect1Depth=91]="Effect1Depth",mt[mt.Effect2Depth=92]="Effect2Depth",mt[mt.Effect3Depth=93]="Effect3Depth",mt[mt.Effect4Depth=94]="Effect4Depth",mt[mt.Effect5Depth=95]="Effect5Depth",mt[mt.DataButtonIncrement=96]="DataButtonIncrement",mt[mt.DataButtonDecrement=97]="DataButtonDecrement",mt[mt.NonRegisteredParameter_Coarse=98]="NonRegisteredParameter_Coarse",mt[mt.NonRegisteredParameter_Fine=99]="NonRegisteredParameter_Fine",mt[mt.RegisteredParameter_Coarse=100]="RegisteredParameter_Coarse",mt[mt.RegisteredParameter_Fine=101]="RegisteredParameter_Fine",mt[mt.AllSoundOff=120]="AllSoundOff",mt[mt.AllControllersOff=121]="AllControllersOff",mt[mt.LocalControl_OnOff=122]="LocalControl_OnOff",mt[mt.AllNotesOff=123]="AllNotesOff",mt[mt.OmniModeOff=124]="OmniModeOff",mt[mt.OmniModeOn=125]="OmniModeOn",mt[mt.PolyModeOff=126]="PolyModeOff",mt[mt.PolyModeOn=127]="PolyModeOn",mt))($a||{});var Qa=(gt=>(gt[gt.PitchBendRange=0]="PitchBendRange",gt[gt.FineTuning=1]="FineTuning",gt[gt.CoarseTuning=2]="CoarseTuning",gt[gt.TuningProgramChange=3]="TuningProgramChange",gt[gt.TuningBankSelect=4]="TuningBankSelect",gt[gt.ModulationDepthRange=5]="ModulationDepthRange",gt[gt.MidiPolyphonicExpressionConfiguration=6]="MidiPolyphonicExpressionConfiguration",gt))(Qa||{});function jr(dt){return Uint8Array.from(atob(dt),J=>J.charCodeAt(0)).buffer}function ne(dt){if(dt==null)throw new Error(`Unexpected ${dt} value found.`)}var Za=require("timing-object"),za=Sn(fr());var hr={name:"musicxml-player",version:"0.20.0",description:"A simple JavaScript component that loads and plays MusicXML files in the browser using Web Audio and Web MIDI.",types:"./build/types/index.d.ts",exports:{import:"./build/musicxml-player.js",require:"./build/musicxml-player.cjs"},devDependencies:{"@esm-bundle/chai":"^4.3.4-fix.0","@esm-bundle/chai-as-promised":"^7.1.1","@web/test-runner":"^0.18.2","@web/test-runner-puppeteer":"^0.16.0",concurrently:"^8.0.1",esbuild:"0.24.0","esbuild-plugins-node-modules-polyfill":"^1.6.8",eslint:"^9.13.0","json-midi-message-encoder":"^4.1.18","local-web-server":"^5.3.0",sinon:"^19.0.2",typescript:"^4.9.5","typescript-eslint":"^8.23.0"},scripts:{test:"web-test-runner src/**/*.spec.js --node-resolve","test:lint":"eslint src/**/*.ts",build:"npm run build:esm && npm run build:cjs && npm run build:d.ts","build:esm":"node esbuild.mjs --format=esm","build:cjs":"node esbuild.mjs --format=cjs","build:d.ts":"tsc --emitDeclarationOnly --outDir build/types",demo:"npm run demo:develop","demo:develop":"ws -d demo --rewrite '/mma/(.*) -> http://localhost:3000/$1' -p ${PORT:-8080}","demo:server":"ws -d demo -p ${PORT:-8082} -z --log.format combined",prepublishOnly:"npm run build:lint && npm run test && npm run build",postinstall:"./apply-patches.sh"},repository:{type:"git",url:"git+https://github.com/infojunkie/musicxml-player.git"},author:"Karim Ratib <karim.ratib@gmail.com> (https://github.com/infojunkie)",license:"GPL-3.0-only",bugs:{url:"https://github.com/infojunkie/musicxml-player/issues"},homepage:"https://github.com/infojunkie/musicxml-player#readme",dependencies:{"@types/verovio":"^3.13.4","json-midi-encoder":"^5.1.32","midi-json-parser":"^8.1.14","midi-player":"github:infojunkie/midi-player",opensheetmusicdisplay:"^1.7.1","soundfont-player":"^0.12.0","standardized-audio-context":"^25.3.35","timing-object":"^3.1.61",timingsrc:"^1.4.5",unzipit:"^1.4.3",verovio:"^5.0.0",webaudiofont:"^3.0.4","worker-timers":"^8.0.0"}};var qa=require("standardized-audio-context"),Ms=Sn(require("soundfont-player")),Ka=require("worker-timers");var Va="https://gleitz.github.io/midi-js-soundfonts",Dc=["acoustic_grand_piano","bright_acoustic_piano","electric_grand_piano","honkytonk_piano","electric_piano_1","electric_piano_2","harpsichord","clavinet","celesta","glockenspiel","music_box","vibraphone","marimba","xylophone","tubular_bells","dulcimer","drawbar_organ","percussive_organ","rock_organ","church_organ","reed_organ","accordion","harmonica","tango_accordion","acoustic_guitar_nylon","acoustic_guitar_steel","electric_guitar_jazz","electric_guitar_clean","electric_guitar_muted","overdriven_guitar","distortion_guitar","guitar_harmonics","acoustic_bass","electric_bass_finger","electric_bass_pick","fretless_bass","slap_bass_1","slap_bass_2","synth_bass_1","synth_bass_2","violin","viola","cello","contrabass","tremolo_strings","pizzicato_strings","orchestral_harp","timpani","string_ensemble_1","string_ensemble_2","synth_strings_1","synth_strings_2","choir_aahs","voice_oohs","synth_choir","orchestra_hit","trumpet","trombone","tuba","muted_trumpet","french_horn","brass_section","synth_brass_1","synth_brass_2","soprano_sax","alto_sax","tenor_sax","baritone_sax","oboe","english_horn","bassoon","clarinet","piccolo","flute","recorder","pan_flute","blown_bottle","shakuhachi","whistle","ocarina","lead_1_square","lead_2_sawtooth","lead_3_calliope","lead_4_chiff","lead_5_charang","lead_6_voice","lead_7_fifths","lead_8_bass_lead","pad_1_new_age","pad_2_warm","pad_3_polysynth","pad_4_choir","pad_5_bowed","pad_6_metallic","pad_7_halo","pad_8_sweep","fx_1_rain","fx_2_soundtrack","fx_3_crystal","fx_4_atmosphere","fx_5_brightness","fx_6_goblins","fx_7_echoes","fx_8_sci_fi","sitar","banjo","shamisen","koto","kalimba","bagpipe","fiddle","shanai","tinkle_bell","agogo","steel_drums","woodblock","taiko_drum","melodic_tom","synth_drum","reverse_cymbal","guitar_fret_noise","breath_noise","seashore","bird_tweet","telephone_ring","helicopter","applause","gunshot"],Ln=class{constructor(J){this._audioContext=new qa.AudioContext,this._instruments={},this._activeNotes=[],J.tracks.forEach(lt=>{let ot=lt.find(ct=>"programChange"in ct);ot&&(this._instruments[ot.channel]={programNumber:ot.programChange.programNumber,name:Dc[ot.programChange.programNumber]})})}async initialize(){this._audioContext.state!=="running"&&await this._audioContext.resume(),console.log("Initializing SoundFontOutput with audio context:",this._audioContext.state),console.log("Loading instruments:",Object.entries(this._instruments).map(([,J])=>`${J.name} (${J.programNumber})`)),await Promise.all(Object.entries(this._instruments).map(async([J,lt])=>{try{console.log(`Starting to load instrument: ${lt.name} (program ${lt.programNumber})`);let ot=lt.name.toLowerCase(),ct=`${Va}/FluidR3_GM/${ot}-mp3/instrument.js`;console.log(`Attempting to load FluidR3_GM soundfont from: ${ct}`);let A=await Ms.default.instrument(this._audioContext,ot,{soundfont:"FluidR3_GM",format:"mp3",gain:5,attack:.001,decay:.8,sustain:.2,release:.4,destination:this._audioContext.destination,hostname:Va+"/FluidR3_GM"});this._instruments[Number(J)].instrument=A,console.log(`Successfully loaded instrument: ${lt.name} with FluidR3_GM`)}catch(ot){console.error(`Failed to load FluidR3_GM instrument: ${lt.name}`,ot);try{console.log(`Attempting to load from MusyngKite for ${lt.name}`);let ct=await Ms.default.instrument(this._audioContext,instrumentName,{soundfont:"MusyngKite",gain:5,attack:.001,decay:.8,sustain:.2,release:.4,destination:this._audioContext.destination,hostname:"https://gleitz.github.io/midi-js-soundfonts/MusyngKite"});this._instruments[Number(J)].instrument=ct,console.log(`Successfully loaded fallback instrument: ${lt.name} with MusyngKite`)}catch(ct){console.error(`Failed to load fallback instrument: ${lt.name}`,ct)}}}))}clear(){for(let J of this._activeNotes)try{typeof J.stop=="function"&&J.stop()}catch(lt){console.warn("Failed to stop note:",lt)}this._activeNotes=[],this._audioContext.state==="running"&&this._audioContext.suspend().catch(J=>{console.warn("Failed to suspend audio context:",J)})}send(J,lt){let ot=kn(J);"noteOn"in ot?this._noteOn(ot,lt):"noteOff"in ot&&this._noteOff(ot,lt)}_noteOn(J,lt){let ot=this._instruments[J.channel]?.instrument;if(!ot)return;let ct=(lt-performance.now())/1e3,A=J.noteOn.noteNumber.toString(),Z=ot.play(A,this._audioContext.currentTime+ct,{gain:J.noteOn.velocity/127});this._activeNotes.push({channel:J.channel,pitch:J.noteOn.noteNumber,velocity:J.noteOn.velocity,timestamp:lt,stop:Z})}_noteOff(J,lt){let ot=this._activeNotes.findIndex(ct=>ct.pitch===J.noteOff.noteNumber&&ct.channel===J.channel);if(ot>=0){let ct=this._activeNotes[ot],A=(lt-performance.now())/1e3;(0,Ka.setTimeout)(()=>{try{typeof ct.stop=="function"&&ct.stop()}catch(Z){console.warn("Failed to stop note:",Z)}this._activeNotes.splice(ot,1)},A*1e3)}}};var Sc="https://raw.githubusercontent.com/infojunkie/musicxml-midi/main/build/unroll.sef.json",Cc=100,ks=class dt{constructor(J,lt,ot,ct){this._options=J;this._sheet=lt;this._parseResult=ot;this._musicXml=ct;this._options.renderer.player=this,this._midiFile=this._options.converter.midi;try{let Z=this._midiFile.tracks[0],gt=Z.last();if("endOfTrack"in gt){let Ct=this._options.converter.timemap.last(),Ft=Z.filter(jt=>"setTempo"in jt).last()?.setTempo.microsecondsPerQuarter??5e5;gt.delta+=Ct.duration*this._midiFile.division*1e3/Ft}else console.warn("[Player.constructor] Error fixing MIDI End Of Track event: Last event is not End Of Track.")}catch(Z){console.error(`[Player.constructor] Error fixing MIDI End Of Track event: ${Z}`)}this._output=this._options.output??new Ln(this._midiFile),this._midiPlayer=new Proxy((0,hn.create)({json:this._midiFile,midiOutput:this,filterMidiMessage:()=>!0}),{get(Z,gt){return gt==="stop"?()=>{try{Z.stop()}catch{}}:Reflect.get(Z,gt)}}),this._repeat=this._options.repeat??1,this._mute=this._options.mute??!1,this._velocity=this._options.velocity??1,this._duration=this._options.converter.timemap.last().timestamp+this._options.converter.timemap.last().duration;let A;this._observer=new ResizeObserver(()=>{clearTimeout(A),A=setTimeout(()=>{this._options.renderer.resize()},Cc)}),this._observer.observe(this._sheet),this._timingObject=new Za.TimingObject({velocity:this._velocity,position:0},0,this.duration),this._timingObjectListener=Z=>this._handleTimingObjectChange(Z),this._timingObject.addEventListener("change",this._timingObjectListener)}static async create(J){let lt=typeof J.container=="string"?document.getElementById(J.container):J.container;if(!lt)throw new Error("[Player.load] Failed to find container element.");let ot=document.createElement("div");ot.className="player-sheet",lt.appendChild(ot);try{let ct=await Rs(J.musicXml,{title:"//work/work-title/text()",version:"//score-partwise/@version"}),A=ct.musicXml;return J.unroll&&(A=await dt._unroll(A)),await J.converter.initialize(A),await J.renderer.initialize(ot,A),new dt(J,ot,ct,A)}catch(ct){throw console.error(`[Player.load] ${ct}`),ct}}destroy(){try{this._timingObject.removeEventListener("change",this._timingObjectListener),this._sheet.remove(),this._observer.disconnect(),this._midiPlayer.stop(),this._options.renderer.destroy()}catch(J){console.error(`[Player.destroy] ${J}`)}}moveTo(J,lt,ot){this._midiPlayer.state===hn.PlayerState.Stopped&&(this._midiPlayer.play(),this._midiPlayer.pause());let ct=this.position-ot,A=this._options.converter.timemap.filter(Z=>Z.measure==J).sort((Z,gt)=>{let Ct=Math.abs(Z.timestamp-ct);return Math.abs(gt.timestamp-ct)-Ct}).last();A&&(this._midiPlayer.position=A.timestamp+ot),this._options.renderer.moveTo(J,lt,ot)}async play(){this._midiPlayer.state!==hn.PlayerState.Playing&&(this._output instanceof Ln&&await this._output.initialize(),await this._play())}pause(){this._midiPlayer.state===hn.PlayerState.Playing&&(this._midiPlayer.pause(),this._timingObject.update({velocity:0}))}rewind(){this._midiPlayer.stop(),this._options.renderer.moveTo(0,0,0),this._timingObject.update({velocity:0,position:0})}get version(){return{player:`${hr.name} v${hr.version}`,renderer:this._options.renderer.version,converter:this._options.converter.version}}get musicXml(){return this._musicXml}async midi(){return await(0,Ya.encode)(this._midiFile)}get state(){return this._midiPlayer.state}get title(){return this._parseResult.queries.title.result??""}get duration(){return this._duration}get position(){return Math.max(0,Math.min(this._midiPlayer.position??0,this._duration-1))}get timingObject(){return this._timingObject}set repeat(J){this._repeat=J}set mute(J){this._mute=J,this._mute&&this.clear()}set velocity(J){this._velocity=J,this._midiPlayer.state===hn.PlayerState.Playing&&(this._midiPlayer.pause(),this._timingObject.update({velocity:this._velocity}),this._play())}send(J,lt){if(this._mute)return;"channel"in kn(J)&&this._output.send(J,lt)}clear(){this._output.clear?.()}async _play(){let J=()=>{if(this._midiPlayer.state!==hn.PlayerState.Playing)return;let lt=this.position,ot=lr(this._options.converter.timemap,{measure:0,timestamp:lt,duration:0},(A,Z)=>{let gt=A.timestamp-Z.timestamp;return Math.abs(gt)<Number.EPSILON?0:gt}),ct=this._options.converter.timemap[ot>=0?ot:Math.max(0,-ot-2)];this._options.renderer.moveTo(ct.measure,ct.timestamp,Math.max(0,lt-ct.timestamp),ct.duration),this._timingObject.update({position:lt}),requestAnimationFrame(J)};requestAnimationFrame(J),this._midiPlayer.state===hn.PlayerState.Paused?await this._midiPlayer.resume(this._velocity,this._repeat):await this._midiPlayer.play(this._velocity,this._repeat)}_handleTimingObjectChange(J){}static async _unroll(J){try{return(await za.default.transform({stylesheetLocation:Sc,sourceText:J,destination:"serialized",stylesheetParams:{renumberMeasures:!0}},"async")).principalResult}catch(lt){console.error(`[Player._unroll] ${lt}`)}return J}async _createOutput(){return await this._options.converter.initialize(this._musicXml),new Ln(this._options.converter.midi)}};var mr=require("opensheetmusicdisplay"),Us=class{constructor(J,lt){this._rules=lt;this._currentMeasureIndex=0;this._currentVoiceEntryIndex=0;this._options={backend:"svg",drawFromMeasureNumber:1,drawUpToMeasureNumber:Number.MAX_SAFE_INTEGER,drawMeasureNumbers:!1,newSystemFromXML:!1,newPageFromXML:!1,followCursor:!0,disableCursor:!1,autoResize:!1,...J}}destroy(){this._osmd&&(this._osmd.clear(),this._osmd=void 0)}async initialize(J,lt){if(this._osmd=new mr.OpenSheetMusicDisplay(J,this._options),this._rules){let ot;for(ot in this._rules)this._osmd.EngravingRules[ot]=this._rules[ot]}this._osmd.EngravingRules.resetChordAccidentalTexts(this._osmd.EngravingRules.ChordAccidentalTexts,!0),this._osmd.EngravingRules.resetChordSymbolLabelTexts(this._osmd.EngravingRules.ChordSymbolLabelTexts),await this._osmd.load(lt),this._redraw()}moveTo(J,lt,ot,ct){ne(this._osmd);let A=this._osmd.Sheet.SourceMeasures[J];for(let Z=A.VerticalSourceStaffEntryContainers.length-1;Z>=0;Z--){let gt=A.VerticalSourceStaffEntryContainers[Z];if(this._timestampToMillisecs(A,gt.Timestamp)<=ot+Number.EPSILON){(this._currentMeasureIndex!==J||this._currentVoiceEntryIndex!==Z)&&this._updateCursor(J,Z);return}}console.error(`[OpenSheetMusicDisplayRenderer.moveTo] Could not find suitable staff entry at time ${ot} for measure ${J}`)}resize(){this._osmd&&this._redraw()}get version(){return ne(this._osmd),`opensheetmusicdisplay v${this._osmd.Version}`}_redraw(){ne(this._osmd),this._osmd.GraphicSheet?.GetCalculator instanceof mr.VexFlowMusicSheetCalculator&&(this._osmd.GraphicSheet.GetCalculator.beamsNeedUpdate=!0),this._osmd.IsReadyToRender()&&(this._osmd.render(),this._osmd.cursor.show()),this._osmd.GraphicSheet.MeasureList?.forEach((J,lt)=>{J?.forEach(ot=>{ot?.staffEntries?.forEach((ct,A)=>{ct.graphicalVoiceEntries?.forEach(Z=>{Z.vfStaveNote?.getAttribute("el")?.addEventListener("click",()=>{this.player?.moveTo(lt,this._timestampToMillisecs(ot.parentSourceMeasure,ot.parentSourceMeasure.AbsoluteTimestamp),this._timestampToMillisecs(ot.parentSourceMeasure,ct.relInMeasureTimestamp))})})})})})}_timestampToMillisecs(J,lt){return lt.RealValue*4*60*1e3/J.TempoInBPM}_updateCursor(J,lt){ne(this._osmd);let ot=this._osmd.Sheet.SourceMeasures[J],ct=ot.VerticalSourceStaffEntryContainers[lt];if(this._currentMeasureIndex=J,this._currentVoiceEntryIndex=lt,J===0&&lt===0)this._osmd.cursor.reset();else{let A=ot.AbsoluteTimestamp.clone();A.Add(ct.Timestamp),this._osmd.cursor.iterator=new mr.MusicPartManagerIterator(this._osmd.Sheet,A,void 0),this._osmd.cursor.update()}}};var Ga=require("midi-json-parser");var Ls=Sn(fr()),pr=class{constructor(J){this._downloader=J}async extract(J){if(typeof this._downloader=="string"?this._mscore=await(await fn(this._downloader)).json():typeof this._downloader=="function"?this._mscore=this._downloader(J):this._mscore=this._downloader,!this._mscore)throw new Error("[MuseScoreBase.initialize] Failed to retrieve MuseScore metadata.");this._midi=await(0,Ga.parseArrayBuffer)(jr(this._mscore.midi)),this._timemap=[],this._mpos=await Ls.default.getResource({type:"xml",encoding:"utf8",text:window.atob(this._mscore.mposXML)}),Ls.default.XPath.evaluate("//events/event",this._mpos).forEach((lt,ot)=>{let ct=parseInt(lt.getAttribute("position"));ot>0&&(this._timemap[ot-1].duration=ct-this._timemap[ot-1].timestamp),this._timemap.push({measure:ot,timestamp:ct,duration:0})}),this._timemap.last().duration=this._mscore.metadata.duration*1e3-this._timemap.last().timestamp}};var Rr=Sn(fr()),Cn=72*5*12/96,Js=class extends pr{constructor(J){super(J),this._cursor=document.createElement("div"),this._cursor.className="player-cursor"}destroy(){this._cursor.remove()}async initialize(J,lt){await this.extract(lt),ne(this._mscore),this._measures=Rr.default.XPath.evaluate("//elements/element",this._mpos).map(ct=>({x:parseInt(ct.getAttribute("x"))/Cn,y:parseInt(ct.getAttribute("y"))/Cn,sx:parseInt(ct.getAttribute("sx"))/Cn,sy:parseInt(ct.getAttribute("sy"))/Cn,page:parseInt(ct.getAttribute("page"))}));let ot=await Rr.default.getResource({type:"xml",encoding:"utf8",text:window.atob(this._mscore.sposXML)});this._segments=Rr.default.XPath.evaluate("//elements/element",ot).map(ct=>({x:parseInt(ct.getAttribute("x"))/Cn,y:parseInt(ct.getAttribute("y"))/Cn,sx:parseInt(ct.getAttribute("sx"))/Cn,sy:parseInt(ct.getAttribute("sy"))/Cn,page:parseInt(ct.getAttribute("page")),timestamp:0,duration:0,measure:0})),Rr.default.XPath.evaluate("//events/event",ot).forEach((ct,A)=>{let Z=parseInt(ct.getAttribute("position"));A>0&&(this._segments[A-1].duration=Z-this._segments[A-1].timestamp),this._segments[A].timestamp=Z;let gt=lr(this._timemap,{measure:0,timestamp:Z,duration:0},(Ft,jt)=>{let Te=Ft.timestamp-jt.timestamp;return Math.abs(Te)<Number.EPSILON?0:Te}),Ct=gt>=0?gt:Math.max(0,-gt-2);this._segments[A].measure=Ct}),this._segments.last().duration=this._mscore.metadata.duration*1e3-this._segments.last().timestamp,this._mscore.svgs.forEach((ct,A)=>{let Z=document.createElement("div");Z.setAttribute("id",`page-${A}`),Z.innerHTML=window.atob(ct),Z.getElementsByTagName("path")[0]?.setAttribute("fill","transparent"),Z.addEventListener("click",gt=>{let Ct=this._segments?.find(Ft=>Ft.x<=gt.offsetX&&Ft.y<=gt.offsetY&&Ft.x+Ft.sx>gt.offsetX&&Ft.y+Ft.sy>gt.offsetY);Ct&&this.player&&this.player.moveTo(Ct.measure,this._timemap[Ct.measure].timestamp,Ct.timestamp-this._timemap[Ct.measure].timestamp)}),J.appendChild(Z)}),J.appendChild(this._cursor),this.moveTo(0,0,0)}moveTo(J,lt,ot,ct){ne(this._measures),ne(this._segments);let A=lr(this._segments,{x:0,y:0,sx:0,sy:0,page:0,timestamp:lt+ot,duration:0,measure:0},(jt,Te)=>{let Jn=jt.timestamp-Te.timestamp;return Math.abs(Jn)<Number.EPSILON?0:Jn}),Z=A>=0?A:Math.max(0,-A-2),gt=this._segments[Z].x,Ct=this._segments[Z].y,Ft=this._measures[J].sy;this._cursor.style.transform=`translate(${gt}px,${Ct}px)`,this._cursor.style.height=`${Ft}px`}resize(){}get version(){return`MuseScore v${this._mscore?.devinfo.version??"Unknown"}`}};var $s=class extends pr{constructor(J){super(J)}async initialize(J){return this.extract(J)}get midi(){return ne(this._midi),this._midi}get timemap(){return ne(this._timemap),this._timemap}get version(){return`MuseScore v${this._mscore?.devinfo.version??"Unknown"}`}};var Wa=Sn(require("verovio/wasm")),Ha=require("verovio/esm");var Qs=class{constructor(J,lt){this._notes=[];this._timemap=[];this._vrvOptions={breaks:"encoded",adjustPageHeight:!0,scale:50,footer:"none",...J},this._cursorOptions={scrollOffset:50,...lt},this._measures={rects:[],elements:[]},this._scroll={offset:0,left:0,top:0},this._position={x:0,y:0,height:0},this._measure={index:0,start:0,offset:0,duration:0},this._cursor=document.createElement("div"),this._cursor.className="player-cursor"}destroy(){this._cursor.remove(),this._vrv?.destroy()}async initialize(J,lt){this._container=J;let ot=await(0,Wa.default)();if(this._vrv=new Ha.VerovioToolkit(ot),!this._vrv.loadData(lt))throw new Error("[VerovioRenderer.initialize] Failed to load MusicXML.");this._container.addEventListener("scroll",()=>{this._move()}),this._redraw(),this.moveTo(0,0,0)}moveTo(J,lt,ot,ct){ne(this._vrv),this._measure={index:J,start:lt,offset:ot,duration:ct};let A=this._timemap[J].timestamp+ot,Z=this._vrv.getElementsAtTime(A),gt=[...Z.notes||[],...Z.rests||[]];if(!gt.length){let Ct=this._measures.elements[J].querySelector("g.mRest");Ct&&gt.push(Ct.id)}if((gt.length!==this._notes.length||!this._notes.every((Ct,Ft)=>gt[Ft]===Ct))&&(this._notes.forEach(Ct=>{if(!gt.includes(Ct)){let Ft=document.getElementById(Ct);Ft?.setAttribute("fill","#000"),Ft?.setAttribute("stroke","#000")}}),this._notes=gt,this._notes.forEach(Ct=>{let Ft=document.getElementById(Ct);Ft&&(Ft.setAttribute("fill","rgb(234, 107, 36)"),Ft.setAttribute("stroke","rgb(234, 107, 36)"),this._isHorizontalLayout()?ct||Ft.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}):Ft.closest("g.system")?.scrollIntoView({behavior:"smooth",block:"center"}))})),this._isHorizontalLayout()&&ct){let Ct=Math.round(this._measures.rects[J].left-this._cursorOptions.scrollOffset+Math.min(1,ot/ct)*this._measures.rects[J].width);Ct!==this._scroll.offset&&(this._container?.scrollTo({behavior:"auto",left:Ct}),this._scroll.offset=Ct)}this._move()}resize(){this._redraw(),this._notes=[],this.moveTo(this._measure.index,this._measure.start,this._measure.offset,this._measure.duration)}get version(){return`verovio v${this._vrv?.getVersion()??"Unknown"}`}_isHorizontalLayout(){return this._vrvOptions.breaks==="none"}_move(){if(!this._notes.length)return;ne(this._container);let lt=this._measures.elements[this._measure.index].closest("g.system").getBoundingClientRect(),ot=this._container?.getBoundingClientRect();this._position={x:-ot.left+(this._measure.duration?Math.round(this._measures.rects[this._measure.index].left-this._container.scrollLeft+Math.min(1,this._measure.offset/this._measure.duration)*this._measures.rects[this._measure.index].width):document.getElementById(this._notes[0]).getBoundingClientRect().left),y:lt.top-ot.top,height:lt.height},this._cursor.style.transform=`translate(${this._position.x}px,${this._position.y}px)`,this._cursor.style.height=`${this._position.height}px`}_redraw(){ne(this._container),ne(this._vrv),this._vrv.setOptions({...this._vrvOptions,pageHeight:this._container.parentElement.clientHeight*100/(this._vrvOptions.scale??100),pageWidth:this._container.parentElement.clientWidth*100/(this._vrvOptions.scale??100)}),this._vrv.redoLayout({resetCache:!1}),this._container.textContent="",this._container.appendChild(this._cursor);for(let ot=0;ot<this._vrv.getPageCount();ot++){let ct=document.createElement("div");ct.setAttribute("id",`page-${ot}`),ct.innerHTML=this._vrv.renderToSVG(ot+1),this._container.appendChild(ct)}let J;this._timemap=[],this._vrv.renderToTimemap({includeMeasures:!0,includeRests:!0}).forEach(ot=>{let ct=ot;"measureOn"in ct&&this._timemap.push({measure:this._timemap.length,timestamp:ct.tstamp,duration:0});let A=this._timemap.length-1,Z=this._timemap[A].timestamp,gt=ct.tstamp-Z+1;[...ct.on||[],...ct.restsOn||[]].forEach(Ct=>{J||(J=Ct),document.getElementById(Ct)?.addEventListener("click",()=>{this.player?.moveTo(A,Z,gt)})})}),this._measures.elements=[],this._measures.rects=[],this._container.querySelectorAll("svg g.measure").forEach((ot,ct)=>{this._measures.elements.push(ot);let Z=ot.querySelector("g.staff").getBoundingClientRect(),gt=ot.querySelector(`#${J}`)??ot.querySelector("g.mRest");if(ct>0||!gt)this._measures.rects.push(DOMRect.fromRect({x:Z.x+this._container.scrollLeft,y:Z.y+this._container.scrollTop,height:Z.height,width:Z.width}));else{let Ct=gt.getBoundingClientRect();this._measures.rects.push(DOMRect.fromRect({x:Ct.x+this._container.scrollLeft,y:Z.y+this._container.scrollTop,height:Z.height,width:Z.width-(Ct.x-Z.x)}))}})}};var tu=require("midi-json-parser");var eu=Sn(fr()),vc="https://raw.githubusercontent.com/infojunkie/musicxml-midi/main/build/timemap.sef.json",Vs=class dt{constructor(J,lt){this._midiOrUri=J;this._timemapOrUri=lt}async initialize(J){this._midi=typeof this._midiOrUri=="string"?await(0,tu.parseArrayBuffer)(await(await fn(this._midiOrUri)).arrayBuffer()):this._midiOrUri,this._timemap=typeof this._timemapOrUri>"u"?await dt._parseTimemap(J):typeof this._timemapOrUri=="string"?await(await fn(this._timemapOrUri)).json():this._timemapOrUri}get midi(){return ne(this._midi),this._midi}get timemap(){return ne(this._timemap),this._timemap}get version(){return`${hr.name} v${hr.version}`}static async _parseTimemap(J){try{let lt=await eu.default.transform({stylesheetLocation:vc,sourceText:J,destination:"serialized",stylesheetParams:{useSef:!0}},"async");return JSON.parse(lt.principalResult)}catch(lt){console.warn(`[FetchConverter._parseTimemap] ${lt}`)}return[]}};var nu=require("midi-json-parser");var qs=class dt{constructor(J,lt){this._parameters=lt;this._uri=J.endsWith("/")?J.slice(0,-1):J}async initialize(J){this._version=await(await fn(`${this._uri}/`)).json();let lt=new FormData;if(lt.append("musicXml",new Blob([J],{type:"text/xml"})),this._parameters)for(let ct in this._parameters)lt.append(ct,this._parameters[ct]);let ot=await fn(`${this._uri}/convert`,{method:"POST",body:lt});this._midi=await(0,nu.parseArrayBuffer)(await ot.arrayBuffer()),this._timemap=await dt._parseTimemap(this._midi)}get midi(){return ne(this._midi),this._midi}get timemap(){return ne(this._timemap),this._timemap}get version(){return`MmaConverter v${this._version?.version??"Unknown"}`}static _parseTimemap(J){let lt=[],ot=5e5,ct=0;return J.tracks[0].forEach(A=>{if("setTempo"in A&&(ot=A.setTempo.microsecondsPerQuarter),ct+=A.delta,"marker"in A){let Z=A.marker.split(":");Z[0].localeCompare("Measure",void 0,{sensitivity:"base"})===0&&lt.push({measure:Number(Z[1]),timestamp:Math.round(ct*(ot/J.division))/1e3,duration:Number(Z[2])})}}),lt.length||console.warn("[MmaConverter._parseTimemap] Could not find any Measure:N marker message in the MIDI file."),lt}};var ru=require("midi-json-parser"),iu=Sn(require("verovio/wasm")),su=require("verovio/esm");var Ks=class{constructor(J){this._timemap=[];this._options={expand:"expansion-repeat",midiNoCue:!0,...J}}async initialize(J){let lt=await(0,iu.default)();if(this._vrv=new su.VerovioToolkit(lt),this._vrv.setOptions(this._options),!this._vrv.loadData(J))throw new Error("[VerovioConverter.initialize] Failed to load MusicXML.");if(!this._timemap.length){let ot=0;this._vrv.renderToTimemap({includeMeasures:!0,includeRests:!0}).forEach(ct=>{let A=ct;if("measureOn"in A){let Z=this._timemap.length;Z>0&&(this._timemap[Z-1].duration=A.tstamp-this._timemap[Z-1].timestamp),this._timemap.push({measure:Z,timestamp:A.tstamp,duration:0})}ot=Math.max(ot,A.tstamp)}),this._timemap.last().duration=ot-this._timemap.last().timestamp}this._midi=await(0,ru.parseArrayBuffer)(jr(this._vrv.renderToMIDI()))}get midi(){return ne(this._midi),this._midi}get timemap(){return this._timemap}get version(){return`verovio v${this._vrv?.getVersion()??"Unknown"}`}};var au=require("standardized-audio-context"),uu=require("webaudiofont"),Ti=require("worker-timers");var vi=9,ou=25,Tc=1,Bc=10,Ys=class{constructor(J){this._audioContext=new au.AudioContext,this._player=new uu.WebAudioFontPlayer,this._notes=[],this._pitchBends=[],this._instruments=J.tracks.reduce((ot,ct)=>{let A=ct.find(Z=>"programChange"in Z)||ct.reduce((Z,gt)=>"noteOn"in gt?{channel:gt.channel,programChange:{programNumber:Tc}}:Z,null);if(A)if(A.channel!==vi){let Z=this._player.loader.findInstrument(A.programChange.programNumber),gt=this._player.loader.instrumentInfo(Z);ot[A.channel]={instrumentInfo:gt},this._player.loader.startLoad(this._audioContext,gt.url,gt.variable)}else ot[vi]={beats:[]},[...new Set(ct.filter(Z=>"noteOn"in Z).map(Z=>Z.noteOn.noteNumber))].forEach(Z=>{let gt=this._player.loader.findDrum(Z),Ct=this._player.loader.drumInfo(gt);ot[vi].beats[Z]={drumInfo:Ct},this._player.loader.startLoad(this._audioContext,Ct.url,Ct.variable)});return ot},{});let lt=()=>{let ot=performance.now();this._notes.filter(ct=>ct.off!==null&&ct.off<=ot).forEach(ct=>{ct.when===ct.envelope.when&&ct.envelope.cancel(),ct.envelope=null}),this._notes=this._notes.filter(ct=>!!ct.envelope),(0,Ti.setTimeout)(lt,ou)};(0,Ti.setTimeout)(lt,ou)}clear(){this._player.cancelQueue(this._audioContext),this._notes=[],this._pitchBends=[]}async initialize(){this._audioContext.state!=="running"&&(await this._audioContext.resume(),await new Promise(J=>(0,Ti.setTimeout)(J,1)))}send(J,lt){let ot=kn(J);"noteOn"in ot?this._noteOn(ot,lt):"noteOff"in ot?this._noteOff(ot,lt):"pitchBend"in ot&&this._pitchBend(ot,lt)}_noteOn(J,lt){let ot=J.channel===vi?this._instruments[J.channel].beats[J.noteOn.noteNumber].drumInfo.variable:this._instruments[J.channel].instrumentInfo.variable,ct=this._timestampToAudioContext(lt),A=this._pitchBends.find(gt=>J.channel===gt.channel&&Math.abs(lt-gt.timestamp)<Number.EPSILON),Z=this._player.queueWaveTable(this._audioContext,this._audioContext.destination,window[ot],ct,J.noteOn.noteNumber,Bc,J.noteOn.velocity/127,A?[{delta:(A.pitchBend-8192)/4096,when:0}]:[]);this._notes.push({channel:J.channel,pitch:J.noteOn.noteNumber,velocity:J.noteOn.velocity,timestamp:lt,when:Z.when,off:null,envelope:Z})}_noteOff(J,lt){let ot=this._notes.find(ct=>ct.pitch===J.noteOff.noteNumber&&ct.channel===J.channel&&ct.off===null);ot&&(ot.off=lt)}_pitchBend(J,lt){this._pitchBends=this._pitchBends.filter(ot=>ot.timestamp!==lt),this._notes.find(ot=>Math.abs(ot.timestamp-lt)<Number.EPSILON)&&console.warn("[WebAudioFontOutput] Received a pitch bend for an already scheduled note."),J.pitchBend-8192!==0&&this._pitchBends.push({channel:J.channel,pitchBend:J.pitchBend,timestamp:lt,when:this._timestampToAudioContext(lt)})}_timestampToAudioContext(J){return this._audioContext.currentTime+(J-performance.now())/1e3}};0&&(module.exports={FetchConverter,MidiControllerMessage,MidiRegisteredParameterNumber,MmaConverter,MuseScoreConverter,MuseScoreRenderer,OpenSheetMusicDisplayRenderer,Player,SoundFontOutput,VerovioConverter,VerovioRenderer,WebAudioFontOutput,assertIsDefined,atoab,binarySearch,fetish,parseMidiEvent,parseMidiFile,parseMusicXml});
//# sourceMappingURL=musicxml-player.cjs.map
